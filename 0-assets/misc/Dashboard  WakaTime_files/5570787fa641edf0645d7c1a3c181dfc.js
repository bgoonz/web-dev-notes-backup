
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f();}else if(typeof define==="function"&&define.amd){define([],f);}else{var g;if(typeof window!=="undefined"){g=window;}else if(typeof global!=="undefined"){g=global;}else if(typeof self!=="undefined"){g=self;}else{g=this;}
g.Clipboard=f();}})(function(){var define,module,exports;return(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw((f.code="MODULE_NOT_FOUND"),f);}
var l=(n[o]={exports:{}});t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e);},l,l.exports,e,t,n,r);}
return n[o].exports;}
var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s;})({1:[function(require,module,exports){var DOCUMENT_NODE_TYPE=9;if(Element&&!Element.prototype.matches){var proto=Element.prototype;proto.matches=proto.matchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector||proto.webkitMatchesSelector;}
function closest(element,selector){while(element&&element.nodeType!==DOCUMENT_NODE_TYPE){if(element.matches(selector))return element;element=element.parentNode;}}
module.exports=closest;},{}],2:[function(require,module,exports){var closest=require("./closest");function delegate(element,selector,type,callback,useCapture){var listenerFn=listener.apply(this,arguments);element.addEventListener(type,listenerFn,useCapture);return{destroy:function(){element.removeEventListener(type,listenerFn,useCapture);}};}
function listener(element,selector,type,callback){return function(e){e.delegateTarget=closest(e.target,selector);if(e.delegateTarget){callback.call(element,e);}};}
module.exports=delegate;},{"./closest":1}],3:[function(require,module,exports){exports.node=function(value){return(value!==undefined&&value instanceof HTMLElement&&value.nodeType===1);};exports.nodeList=function(value){var type=Object.prototype.toString.call(value);return(value!==undefined&&(type==="[object NodeList]"||type==="[object HTMLCollection]")&&"length"in value&&(value.length===0||exports.node(value[0])));};exports.string=function(value){return typeof value==="string"||value instanceof String;};exports.fn=function(value){var type=Object.prototype.toString.call(value);return type==="[object Function]";};},{}],4:[function(require,module,exports){var is=require("./is");var delegate=require("delegate");function listen(target,type,callback){if(!target&&!type&&!callback){throw new Error("Missing required arguments");}
if(!is.string(type)){throw new TypeError("Second argument must be a String");}
if(!is.fn(callback)){throw new TypeError("Third argument must be a Function");}
if(is.node(target)){return listenNode(target,type,callback);}else if(is.nodeList(target)){return listenNodeList(target,type,callback);}else if(is.string(target)){return listenSelector(target,type,callback);}else{throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");}}
function listenNode(node,type,callback){node.addEventListener(type,callback);return{destroy:function(){node.removeEventListener(type,callback);}};}
function listenNodeList(nodeList,type,callback){Array.prototype.forEach.call(nodeList,function(node){node.addEventListener(type,callback);});return{destroy:function(){Array.prototype.forEach.call(nodeList,function(node){node.removeEventListener(type,callback);});}};}
function listenSelector(selector,type,callback){return delegate(document.body,selector,type,callback);}
module.exports=listen;},{"./is":3,delegate:2}],5:[function(require,module,exports){function select(element){var selectedText;if(element.nodeName==="SELECT"){element.focus();selectedText=element.value;}else if(element.nodeName==="INPUT"||element.nodeName==="TEXTAREA"){var isReadOnly=element.hasAttribute("readonly");if(!isReadOnly){element.setAttribute("readonly","");}
element.select();element.setSelectionRange(0,element.value.length);if(!isReadOnly){element.removeAttribute("readonly");}
selectedText=element.value;}else{if(element.hasAttribute("contenteditable")){element.focus();}
var selection=window.getSelection();var range=document.createRange();range.selectNodeContents(element);selection.removeAllRanges();selection.addRange(range);selectedText=selection.toString();}
return selectedText;}
module.exports=select;},{}],6:[function(require,module,exports){function E(){}
E.prototype={on:function(name,callback,ctx){var e=this.e||(this.e={});(e[name]||(e[name]=[])).push({fn:callback,ctx:ctx});return this;},once:function(name,callback,ctx){var self=this;function listener(){self.off(name,listener);callback.apply(ctx,arguments);}
listener._=callback;return this.on(name,listener,ctx);},emit:function(name){var data=[].slice.call(arguments,1);var evtArr=((this.e||(this.e={}))[name]||[]).slice();var i=0;var len=evtArr.length;for(i;i<len;i++){evtArr[i].fn.apply(evtArr[i].ctx,data);}
return this;},off:function(name,callback){var e=this.e||(this.e={});var evts=e[name];var liveEvents=[];if(evts&&callback){for(var i=0,len=evts.length;i<len;i++){if(evts[i].fn!==callback&&evts[i].fn._!==callback)
liveEvents.push(evts[i]);}}
liveEvents.length?(e[name]=liveEvents):delete e[name];return this;}};module.exports=E;},{}],7:[function(require,module,exports){(function(global,factory){if(typeof define==="function"&&define.amd){define(["module","select"],factory);}else if(typeof exports!=="undefined"){factory(module,require("select"));}else{var mod={exports:{}};factory(mod,global.select);global.clipboardAction=mod.exports;}})(this,function(module,_select){"use strict";var _select2=_interopRequireDefault(_select);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}
var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
return function(Constructor,protoProps,staticProps){if(protoProps)
defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var ClipboardAction=(function(){function ClipboardAction(options){_classCallCheck(this,ClipboardAction);this.resolveOptions(options);this.initSelection();}
_createClass(ClipboardAction,[{key:"resolveOptions",value:function resolveOptions(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.action=options.action;this.emitter=options.emitter;this.target=options.target;this.text=options.text;this.trigger=options.trigger;this.selectedText="";}},{key:"initSelection",value:function initSelection(){if(this.text){this.selectFake();}else if(this.target){this.selectTarget();}}},{key:"selectFake",value:function selectFake(){var _this=this;var isRTL=document.documentElement.getAttribute("dir")=="rtl";this.removeFake();this.fakeHandlerCallback=function(){return _this.removeFake();};this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||true;this.fakeElem=document.createElement("textarea");this.fakeElem.style.fontSize="12pt";this.fakeElem.style.border="0";this.fakeElem.style.padding="0";this.fakeElem.style.margin="0";this.fakeElem.style.position="absolute";this.fakeElem.style[isRTL?"right":"left"]="-9999px";var yPosition=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=yPosition+"px";this.fakeElem.setAttribute("readonly","");this.fakeElem.value=this.text;document.body.appendChild(this.fakeElem);this.selectedText=(0,_select2.default)(this.fakeElem);this.copyText();}},{key:"removeFake",value:function removeFake(){if(this.fakeHandler){document.body.removeEventListener("click",this.fakeHandlerCallback);this.fakeHandler=null;this.fakeHandlerCallback=null;}
if(this.fakeElem){document.body.removeChild(this.fakeElem);this.fakeElem=null;}}},{key:"selectTarget",value:function selectTarget(){this.selectedText=(0,_select2.default)(this.target);this.copyText();}},{key:"copyText",value:function copyText(){var succeeded=void 0;try{succeeded=document.execCommand(this.action);}catch(err){succeeded=false;}
this.handleResult(succeeded);}},{key:"handleResult",value:function handleResult(succeeded){this.emitter.emit(succeeded?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)});}},{key:"clearSelection",value:function clearSelection(){if(this.target){this.target.blur();}
window.getSelection().removeAllRanges();}},{key:"destroy",value:function destroy(){this.removeFake();}},{key:"action",set:function set(){var action=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"copy";this._action=action;if(this._action!=="copy"&&this._action!=="cut"){throw new Error('Invalid "action" value, use either "copy" or "cut"');}},get:function get(){return this._action;}},{key:"target",set:function set(target){if(target!==undefined){if(target&&(typeof target==="undefined"?"undefined":_typeof(target))==="object"&&target.nodeType===1){if(this.action==="copy"&&target.hasAttribute("disabled")){throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');}
if(this.action==="cut"&&(target.hasAttribute("readonly")||target.hasAttribute("disabled"))){throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');}
this._target=target;}else{throw new Error('Invalid "target" value, use a valid Element');}}},get:function get(){return this._target;}}]);return ClipboardAction;})();module.exports=ClipboardAction;});},{select:5}],8:[function(require,module,exports){(function(global,factory){if(typeof define==="function"&&define.amd){define(["module","./clipboard-action","tiny-emitter","good-listener"],factory);}else if(typeof exports!=="undefined"){factory(module,require("./clipboard-action"),require("tiny-emitter"),require("good-listener"));}else{var mod={exports:{}};factory(mod,global.clipboardAction,global.tinyEmitter,global.goodListener);global.clipboard=mod.exports;}})(this,function(module,_clipboardAction,_tinyEmitter,_goodListener){"use strict";var _clipboardAction2=_interopRequireDefault(_clipboardAction);var _tinyEmitter2=_interopRequireDefault(_tinyEmitter);var _goodListener2=_interopRequireDefault(_goodListener);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
return function(Constructor,protoProps,staticProps){if(protoProps)
defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}
return call&&(typeof call==="object"||typeof call==="function")?call:self;}
function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+
typeof superClass);}
subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)
Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):(subClass.__proto__=superClass);}
var Clipboard=(function(_Emitter){_inherits(Clipboard,_Emitter);function Clipboard(trigger,options){_classCallCheck(this,Clipboard);var _this=_possibleConstructorReturn(this,(Clipboard.__proto__||Object.getPrototypeOf(Clipboard)).call(this));_this.resolveOptions(options);_this.listenClick(trigger);return _this;}
_createClass(Clipboard,[{key:"resolveOptions",value:function resolveOptions(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.action=typeof options.action==="function"?options.action:this.defaultAction;this.target=typeof options.target==="function"?options.target:this.defaultTarget;this.text=typeof options.text==="function"?options.text:this.defaultText;}},{key:"listenClick",value:function listenClick(trigger){var _this2=this;this.listener=(0,_goodListener2.default)(trigger,"click",function(e){return _this2.onClick(e);});}},{key:"onClick",value:function onClick(e){var trigger=e.delegateTarget||e.currentTarget;if(this.clipboardAction){this.clipboardAction=null;}
this.clipboardAction=new _clipboardAction2.default({action:this.action(trigger),target:this.target(trigger),text:this.text(trigger),trigger:trigger,emitter:this});}},{key:"defaultAction",value:function defaultAction(trigger){return getAttributeValue("action",trigger);}},{key:"defaultTarget",value:function defaultTarget(trigger){var selector=getAttributeValue("target",trigger);if(selector){return document.querySelector(selector);}}},{key:"defaultText",value:function defaultText(trigger){return getAttributeValue("text",trigger);}},{key:"destroy",value:function destroy(){this.listener.destroy();if(this.clipboardAction){this.clipboardAction.destroy();this.clipboardAction=null;}}}],[{key:"isSupported",value:function isSupported(){var action=arguments.length>0&&arguments[0]!==undefined?arguments[0]:["copy","cut"];var actions=typeof action==="string"?[action]:action;var support=!!document.queryCommandSupported;actions.forEach(function(action){support=support&&!!document.queryCommandSupported(action);});return support;}}]);return Clipboard;})(_tinyEmitter2.default);function getAttributeValue(suffix,element){var attribute="data-clipboard-"+suffix;if(!element.hasAttribute(attribute)){return;}
return element.getAttribute(attribute);}
module.exports=Clipboard;});},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8);});
(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?(module.exports=factory()):typeof define==="function"&&define.amd?define(factory):(global.moment=factory());})(this,function(){"use strict";var hookCallback;function hooks(){return hookCallback.apply(null,arguments);}
function setHookCallback(callback){hookCallback=callback;}
function isArray(input){return(input instanceof Array||Object.prototype.toString.call(input)==="[object Array]");}
function isObject(input){return(input!=null&&Object.prototype.toString.call(input)==="[object Object]");}
function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b);}
function isObjectEmpty(obj){if(Object.getOwnPropertyNames){return Object.getOwnPropertyNames(obj).length===0;}else{var k;for(k in obj){if(hasOwnProp(obj,k)){return false;}}
return true;}}
function isUndefined(input){return input===void 0;}
function isNumber(input){return(typeof input==="number"||Object.prototype.toString.call(input)==="[object Number]");}
function isDate(input){return(input instanceof Date||Object.prototype.toString.call(input)==="[object Date]");}
function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i));}
return res;}
function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i];}}
if(hasOwnProp(b,"toString")){a.toString=b.toString;}
if(hasOwnProp(b,"valueOf")){a.valueOf=b.valueOf;}
return a;}
function createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,true).utc();}
function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidEra:null,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],era:null,meridiem:null,rfc2822:false,weekdayMismatch:false};}
function getParsingFlags(m){if(m._pf==null){m._pf=defaultParsingFlags();}
return m._pf;}
var some;if(Array.prototype.some){some=Array.prototype.some;}else{some=function(fun){var t=Object(this),len=t.length>>>0,i;for(i=0;i<len;i++){if(i in t&&fun.call(this,t[i],i,t)){return true;}}
return false;};}
function isValid(m){if(m._isValid==null){var flags=getParsingFlags(m),parsedParts=some.call(flags.parsedDateParts,function(i){return i!=null;}),isNowValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidEra&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.weekdayMismatch&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated&&(!flags.meridiem||(flags.meridiem&&parsedParts));if(m._strict){isNowValid=isNowValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===undefined;}
if(Object.isFrozen==null||!Object.isFrozen(m)){m._isValid=isNowValid;}else{return isNowValid;}}
return m._isValid;}
function createInvalid(flags){var m=createUTC(NaN);if(flags!=null){extend(getParsingFlags(m),flags);}else{getParsingFlags(m).userInvalidated=true;}
return m;}
var momentProperties=(hooks.momentProperties=[]),updateInProgress=false;function copyConfig(to,from){var i,prop,val;if(!isUndefined(from._isAMomentObject)){to._isAMomentObject=from._isAMomentObject;}
if(!isUndefined(from._i)){to._i=from._i;}
if(!isUndefined(from._f)){to._f=from._f;}
if(!isUndefined(from._l)){to._l=from._l;}
if(!isUndefined(from._strict)){to._strict=from._strict;}
if(!isUndefined(from._tzm)){to._tzm=from._tzm;}
if(!isUndefined(from._isUTC)){to._isUTC=from._isUTC;}
if(!isUndefined(from._offset)){to._offset=from._offset;}
if(!isUndefined(from._pf)){to._pf=getParsingFlags(from);}
if(!isUndefined(from._locale)){to._locale=from._locale;}
if(momentProperties.length>0){for(i=0;i<momentProperties.length;i++){prop=momentProperties[i];val=from[prop];if(!isUndefined(val)){to[prop]=val;}}}
return to;}
function Moment(config){copyConfig(this,config);this._d=new Date(config._d!=null?config._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN);}
if(updateInProgress===false){updateInProgress=true;hooks.updateOffset(this);updateInProgress=false;}}
function isMoment(obj){return(obj instanceof Moment||(obj!=null&&obj._isAMomentObject!=null));}
function warn(msg){if(hooks.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+msg);}}
function deprecate(msg,fn){var firstTime=true;return extend(function(){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(null,msg);}
if(firstTime){var args=[],arg,i,key;for(i=0;i<arguments.length;i++){arg="";if(typeof arguments[i]==="object"){arg+="\n["+i+"] ";for(key in arguments[0]){if(hasOwnProp(arguments[0],key)){arg+=key+": "+arguments[0][key]+", ";}}
arg=arg.slice(0,-2);}else{arg=arguments[i];}
args.push(arg);}
warn(msg+"\nArguments: "+
Array.prototype.slice.call(args).join("")+"\n"+
new Error().stack);firstTime=false;}
return fn.apply(this,arguments);},fn);}
var deprecations={};function deprecateSimple(name,msg){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(name,msg);}
if(!deprecations[name]){warn(msg);deprecations[name]=true;}}
hooks.suppressDeprecationWarnings=false;hooks.deprecationHandler=null;function isFunction(input){return((typeof Function!=="undefined"&&input instanceof Function)||Object.prototype.toString.call(input)==="[object Function]");}
function set(config){var prop,i;for(i in config){if(hasOwnProp(config,i)){prop=config[i];if(isFunction(prop)){this[i]=prop;}else{this["_"+i]=prop;}}}
this._config=config;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source);}
function mergeConfigs(parentConfig,childConfig){var res=extend({},parentConfig),prop;for(prop in childConfig){if(hasOwnProp(childConfig,prop)){if(isObject(parentConfig[prop])&&isObject(childConfig[prop])){res[prop]={};extend(res[prop],parentConfig[prop]);extend(res[prop],childConfig[prop]);}else if(childConfig[prop]!=null){res[prop]=childConfig[prop];}else{delete res[prop];}}}
for(prop in parentConfig){if(hasOwnProp(parentConfig,prop)&&!hasOwnProp(childConfig,prop)&&isObject(parentConfig[prop])){res[prop]=extend({},res[prop]);}}
return res;}
function Locale(config){if(config!=null){this.set(config);}}
var keys;if(Object.keys){keys=Object.keys;}else{keys=function(obj){var i,res=[];for(i in obj){if(hasOwnProp(obj,i)){res.push(i);}}
return res;};}
var defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function calendar(key,mom,now){var output=this._calendar[key]||this._calendar["sameElse"];return isFunction(output)?output.call(mom,now):output;}
function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return((sign?(forceSign?"+":""):"-")+
Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+
absNumber);}
var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;if(typeof callback==="string"){func=function(){return this[callback]();};}
if(token){formatTokenFunctions[token]=func;}
if(padded){formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2]);};}
if(ordinal){formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token);};}}
function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,"");}
return input.replace(/\\/g,"");}
function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]];}else{array[i]=removeFormattingTokens(array[i]);}}
return function(mom){var output="",i;for(i=0;i<length;i++){output+=isFunction(array[i])?array[i].call(mom,format):array[i];}
return output;};}
function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate();}
format=expandFormat(format,m.localeData());formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format);return formatFunctions[format](m);}
function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input;}
localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1;}
return format;}
var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];if(format||!formatUpper){return format;}
this._longDateFormat[key]=formatUpper.match(formattingTokens).map(function(tok){if(tok==="MMMM"||tok==="MM"||tok==="DD"||tok==="dddd"){return tok.slice(1);}
return tok;}).join("");return this._longDateFormat[key];}
var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate;}
var defaultOrdinal="%d",defaultDayOfMonthOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace("%d",number);}
var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return isFunction(output)?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number);}
function pastFuture(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return isFunction(format)?format(output):format.replace(/%s/i,output);}
var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit;}
function normalizeUnits(units){return typeof units==="string"?aliases[units]||aliases[units.toLowerCase()]:undefined;}
function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop];}}}
return normalizedInput;}
var priorities={};function addUnitPriority(unit,priority){priorities[unit]=priority;}
function getPrioritizedUnits(unitsObj){var units=[],u;for(u in unitsObj){if(hasOwnProp(unitsObj,u)){units.push({unit:u,priority:priorities[u]});}}
units.sort(function(a,b){return a.priority-b.priority;});return units;}
function isLeapYear(year){return(year%4===0&&year%100!==0)||year%400===0;}
function absFloor(number){if(number<0){return Math.ceil(number)||0;}else{return Math.floor(number);}}
function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){value=absFloor(coercedNumber);}
return value;}
function makeGetSet(unit,keepTime){return function(value){if(value!=null){set$1(this,unit,value);hooks.updateOffset(this,keepTime);return this;}else{return get(this,unit);}};}
function get(mom,unit){return mom.isValid()?mom._d["get"+(mom._isUTC?"UTC":"")+unit]():NaN;}
function set$1(mom,unit,value){if(mom.isValid()&&!isNaN(value)){if(unit==="FullYear"&&isLeapYear(mom.year())&&mom.month()===1&&mom.date()===29){value=toInt(value);mom._d["set"+(mom._isUTC?"UTC":"")+unit](value,mom.month(),daysInMonth(value,mom.month()));}else{mom._d["set"+(mom._isUTC?"UTC":"")+unit](value);}}}
function stringGet(units){units=normalizeUnits(units);if(isFunction(this[units])){return this[units]();}
return this;}
function stringSet(units,value){if(typeof units==="object"){units=normalizeObjectUnits(units);var prioritized=getPrioritizedUnits(units),i;for(i=0;i<prioritized.length;i++){this[prioritized[i].unit](units[prioritized[i].unit]);}}else{units=normalizeUnits(units);if(isFunction(this[units])){return this[units](value);}}
return this;}
var match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match3to4=/\d\d\d\d?/,match5to6=/\d\d\d\d\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,matchWord=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,regexes;regexes={};function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict,localeData){return isStrict&&strictRegex?strictRegex:regex;};}
function getParseRegexForToken(token,config){if(!hasOwnProp(regexes,token)){return new RegExp(unescapeFormat(token));}
return regexes[token](config._strict,config._locale);}
function unescapeFormat(s){return regexEscape(s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4;}));}
function regexEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");}
var tokens={};function addParseToken(token,callback){var i,func=callback;if(typeof token==="string"){token=[token];}
if(isNumber(callback)){func=function(input,array){array[callback]=toInt(input);};}
for(i=0;i<token.length;i++){tokens[token[i]]=func;}}
function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{};callback(input,config._w,config,token);});}
function addTimeToArrayFromToken(token,input,config){if(input!=null&&hasOwnProp(tokens,token)){tokens[token](input,config._a,config,token);}}
var YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,WEEK=7,WEEKDAY=8;function mod(n,x){return(n%x+x)%x;}
var indexOf;if(Array.prototype.indexOf){indexOf=Array.prototype.indexOf;}else{indexOf=function(o){var i;for(i=0;i<this.length;++i){if(this[i]===o){return i;}}
return-1;};}
function daysInMonth(year,month){if(isNaN(year)||isNaN(month)){return NaN;}
var modMonth=mod(month,12);year+=(month-modMonth)/12;return modMonth===1?isLeapYear(year)?29:28:31-(modMonth%7)%2;}
addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1;});addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format);});addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format);});addUnitAlias("month","M");addUnitPriority("month",8);addRegexToken("M",match1to2);addRegexToken("MM",match1to2,match2);addRegexToken("MMM",function(isStrict,locale){return locale.monthsShortRegex(isStrict);});addRegexToken("MMMM",function(isStrict,locale){return locale.monthsRegex(isStrict);});addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1;});addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);if(month!=null){array[MONTH]=month;}else{getParsingFlags(config).invalidMonth=input;}});var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,defaultMonthsShortRegex=matchWord,defaultMonthsRegex=matchWord;function localeMonths(m,format){if(!m){return isArray(this._months)?this._months:this._months["standalone"];}
return isArray(this._months)?this._months[m.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(format)?"format":"standalone"][m.month()];}
function localeMonthsShort(m,format){if(!m){return isArray(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"];}
return isArray(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(format)?"format":"standalone"][m.month()];}
function handleStrictParse(monthName,format,strict){var i,ii,mom,llc=monthName.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(i=0;i<12;++i){mom=createUTC([2000,i]);this._shortMonthsParse[i]=this.monthsShort(mom,"").toLocaleLowerCase();this._longMonthsParse[i]=this.months(mom,"").toLocaleLowerCase();}}
if(strict){if(format==="MMM"){ii=indexOf.call(this._shortMonthsParse,llc);return ii!==-1?ii:null;}else{ii=indexOf.call(this._longMonthsParse,llc);return ii!==-1?ii:null;}}else{if(format==="MMM"){ii=indexOf.call(this._shortMonthsParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._longMonthsParse,llc);return ii!==-1?ii:null;}else{ii=indexOf.call(this._longMonthsParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._shortMonthsParse,llc);return ii!==-1?ii:null;}}}
function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(this._monthsParseExact){return handleStrictParse.call(this,monthName,format,strict);}
if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];}
for(i=0;i<12;i++){mom=createUTC([2000,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i");this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i");}
if(!strict&&!this._monthsParse[i]){regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,"");this._monthsParse[i]=new RegExp(regex.replace(".",""),"i");}
if(strict&&format==="MMMM"&&this._longMonthsParse[i].test(monthName)){return i;}else if(strict&&format==="MMM"&&this._shortMonthsParse[i].test(monthName)){return i;}else if(!strict&&this._monthsParse[i].test(monthName)){return i;}}}
function setMonth(mom,value){var dayOfMonth;if(!mom.isValid()){return mom;}
if(typeof value==="string"){if(/^\d+$/.test(value)){value=toInt(value);}else{value=mom.localeData().monthsParse(value);if(!isNumber(value)){return mom;}}}
dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth);return mom;}
function getSetMonth(value){if(value!=null){setMonth(this,value);hooks.updateOffset(this,true);return this;}else{return get(this,"Month");}}
function getDaysInMonth(){return daysInMonth(this.year(),this.month());}
function monthsShortRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,"_monthsRegex")){computeMonthsParse.call(this);}
if(isStrict){return this._monthsShortStrictRegex;}else{return this._monthsShortRegex;}}else{if(!hasOwnProp(this,"_monthsShortRegex")){this._monthsShortRegex=defaultMonthsShortRegex;}
return this._monthsShortStrictRegex&&isStrict?this._monthsShortStrictRegex:this._monthsShortRegex;}}
function monthsRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,"_monthsRegex")){computeMonthsParse.call(this);}
if(isStrict){return this._monthsStrictRegex;}else{return this._monthsRegex;}}else{if(!hasOwnProp(this,"_monthsRegex")){this._monthsRegex=defaultMonthsRegex;}
return this._monthsStrictRegex&&isStrict?this._monthsStrictRegex:this._monthsRegex;}}
function computeMonthsParse(){function cmpLenRev(a,b){return b.length-a.length;}
var shortPieces=[],longPieces=[],mixedPieces=[],i,mom;for(i=0;i<12;i++){mom=createUTC([2000,i]);shortPieces.push(this.monthsShort(mom,""));longPieces.push(this.months(mom,""));mixedPieces.push(this.months(mom,""));mixedPieces.push(this.monthsShort(mom,""));}
shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<12;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i]);}
for(i=0;i<24;i++){mixedPieces[i]=regexEscape(mixedPieces[i]);}
this._monthsRegex=new RegExp("^("+mixedPieces.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+longPieces.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i");}
addFormatToken("Y",0,0,function(){var y=this.year();return y<=9999?zeroFill(y,4):"+"+y;});addFormatToken(0,["YY",2],0,function(){return this.year()%100;});addFormatToken(0,["YYYY",4],0,"year");addFormatToken(0,["YYYYY",5],0,"year");addFormatToken(0,["YYYYYY",6,true],0,"year");addUnitAlias("year","y");addUnitPriority("year",1);addRegexToken("Y",matchSigned);addRegexToken("YY",match1to2,match2);addRegexToken("YYYY",match1to4,match4);addRegexToken("YYYYY",match1to6,match6);addRegexToken("YYYYYY",match1to6,match6);addParseToken(["YYYYY","YYYYYY"],YEAR);addParseToken("YYYY",function(input,array){array[YEAR]=input.length===2?hooks.parseTwoDigitYear(input):toInt(input);});addParseToken("YY",function(input,array){array[YEAR]=hooks.parseTwoDigitYear(input);});addParseToken("Y",function(input,array){array[YEAR]=parseInt(input,10);});function daysInYear(year){return isLeapYear(year)?366:365;}
hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2000);};var getSetYear=makeGetSet("FullYear",true);function getIsLeapYear(){return isLeapYear(this.year());}
function createDate(y,m,d,h,M,s,ms){var date;if(y<100&&y>=0){date=new Date(y+400,m,d,h,M,s,ms);if(isFinite(date.getFullYear())){date.setFullYear(y);}}else{date=new Date(y,m,d,h,M,s,ms);}
return date;}
function createUTCDate(y){var date,args;if(y<100&&y>=0){args=Array.prototype.slice.call(arguments);args[0]=y+400;date=new Date(Date.UTC.apply(null,args));if(isFinite(date.getUTCFullYear())){date.setUTCFullYear(y);}}else{date=new Date(Date.UTC.apply(null,arguments));}
return date;}
function firstWeekOffset(year,dow,doy){var
fwd=7+dow-doy,fwdlw=(7+createUTCDate(year,0,fwd).getUTCDay()-dow)%7;return-fwdlw+fwd-1;}
function dayOfYearFromWeeks(year,week,weekday,dow,doy){var localWeekday=(7+weekday-dow)%7,weekOffset=firstWeekOffset(year,dow,doy),dayOfYear=1+7*(week-1)+localWeekday+weekOffset,resYear,resDayOfYear;if(dayOfYear<=0){resYear=year-1;resDayOfYear=daysInYear(resYear)+dayOfYear;}else if(dayOfYear>daysInYear(year)){resYear=year+1;resDayOfYear=dayOfYear-daysInYear(year);}else{resYear=year;resDayOfYear=dayOfYear;}
return{year:resYear,dayOfYear:resDayOfYear};}
function weekOfYear(mom,dow,doy){var weekOffset=firstWeekOffset(mom.year(),dow,doy),week=Math.floor((mom.dayOfYear()-weekOffset-1)/7)+1,resWeek,resYear;if(week<1){resYear=mom.year()-1;resWeek=week+weeksInYear(resYear,dow,doy);}else if(week>weeksInYear(mom.year(),dow,doy)){resWeek=week-weeksInYear(mom.year(),dow,doy);resYear=mom.year()+1;}else{resYear=mom.year();resWeek=week;}
return{week:resWeek,year:resYear};}
function weeksInYear(year,dow,doy){var weekOffset=firstWeekOffset(year,dow,doy),weekOffsetNext=firstWeekOffset(year+1,dow,doy);return(daysInYear(year)-weekOffset+weekOffsetNext)/7;}
addFormatToken("w",["ww",2],"wo","week");addFormatToken("W",["WW",2],"Wo","isoWeek");addUnitAlias("week","w");addUnitAlias("isoWeek","W");addUnitPriority("week",5);addUnitPriority("isoWeek",5);addRegexToken("w",match1to2);addRegexToken("ww",match1to2,match2);addRegexToken("W",match1to2);addRegexToken("WW",match1to2,match2);addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input);});function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week;}
var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow;}
function localeFirstDayOfYear(){return this._week.doy;}
function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,"d");}
function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,"d");}
addFormatToken("d",0,"do","day");addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format);});addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format);});addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format);});addFormatToken("e",0,0,"weekday");addFormatToken("E",0,0,"isoWeekday");addUnitAlias("day","d");addUnitAlias("weekday","e");addUnitAlias("isoWeekday","E");addUnitPriority("day",11);addUnitPriority("weekday",11);addUnitPriority("isoWeekday",11);addRegexToken("d",match1to2);addRegexToken("e",match1to2);addRegexToken("E",match1to2);addRegexToken("dd",function(isStrict,locale){return locale.weekdaysMinRegex(isStrict);});addRegexToken("ddd",function(isStrict,locale){return locale.weekdaysShortRegex(isStrict);});addRegexToken("dddd",function(isStrict,locale){return locale.weekdaysRegex(isStrict);});addWeekParseToken(["dd","ddd","dddd"],function(input,week,config,token){var weekday=config._locale.weekdaysParse(input,token,config._strict);if(weekday!=null){week.d=weekday;}else{getParsingFlags(config).invalidWeekday=input;}});addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input);});function parseWeekday(input,locale){if(typeof input!=="string"){return input;}
if(!isNaN(input)){return parseInt(input,10);}
input=locale.weekdaysParse(input);if(typeof input==="number"){return input;}
return null;}
function parseIsoWeekday(input,locale){if(typeof input==="string"){return locale.weekdaysParse(input)%7||7;}
return isNaN(input)?null:input;}
function shiftWeekdays(ws,n){return ws.slice(n,7).concat(ws.slice(0,n));}
var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),defaultWeekdaysRegex=matchWord,defaultWeekdaysShortRegex=matchWord,defaultWeekdaysMinRegex=matchWord;function localeWeekdays(m,format){var weekdays=isArray(this._weekdays)?this._weekdays:this._weekdays[m&&m!==true&&this._weekdays.isFormat.test(format)?"format":"standalone"];return m===true?shiftWeekdays(weekdays,this._week.dow):m?weekdays[m.day()]:weekdays;}
function localeWeekdaysShort(m){return m===true?shiftWeekdays(this._weekdaysShort,this._week.dow):m?this._weekdaysShort[m.day()]:this._weekdaysShort;}
function localeWeekdaysMin(m){return m===true?shiftWeekdays(this._weekdaysMin,this._week.dow):m?this._weekdaysMin[m.day()]:this._weekdaysMin;}
function handleStrictParse$1(weekdayName,format,strict){var i,ii,mom,llc=weekdayName.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(i=0;i<7;++i){mom=createUTC([2000,1]).day(i);this._minWeekdaysParse[i]=this.weekdaysMin(mom,"").toLocaleLowerCase();this._shortWeekdaysParse[i]=this.weekdaysShort(mom,"").toLocaleLowerCase();this._weekdaysParse[i]=this.weekdays(mom,"").toLocaleLowerCase();}}
if(strict){if(format==="dddd"){ii=indexOf.call(this._weekdaysParse,llc);return ii!==-1?ii:null;}else if(format==="ddd"){ii=indexOf.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null;}else{ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null;}}else{if(format==="dddd"){ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null;}else if(format==="ddd"){ii=indexOf.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null;}else{ii=indexOf.call(this._minWeekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null;}}}
function localeWeekdaysParse(weekdayName,format,strict){var i,mom,regex;if(this._weekdaysParseExact){return handleStrictParse$1.call(this,weekdayName,format,strict);}
if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[];}
for(i=0;i<7;i++){mom=createUTC([2000,1]).day(i);if(strict&&!this._fullWeekdaysParse[i]){this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(mom,"").replace(".","\\.?")+"$","i");this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(mom,"").replace(".","\\.?")+"$","i");this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(mom,"").replace(".","\\.?")+"$","i");}
if(!this._weekdaysParse[i]){regex="^"+
this.weekdays(mom,"")+"|^"+
this.weekdaysShort(mom,"")+"|^"+
this.weekdaysMin(mom,"");this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i");}
if(strict&&format==="dddd"&&this._fullWeekdaysParse[i].test(weekdayName)){return i;}else if(strict&&format==="ddd"&&this._shortWeekdaysParse[i].test(weekdayName)){return i;}else if(strict&&format==="dd"&&this._minWeekdaysParse[i].test(weekdayName)){return i;}else if(!strict&&this._weekdaysParse[i].test(weekdayName)){return i;}}}
function getSetDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}
var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,"d");}else{return day;}}
function getSetLocaleDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}
var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,"d");}
function getSetISODayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}
if(input!=null){var weekday=parseIsoWeekday(input,this.localeData());return this.day(this.day()%7?weekday:weekday-7);}else{return this.day()||7;}}
function weekdaysRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this);}
if(isStrict){return this._weekdaysStrictRegex;}else{return this._weekdaysRegex;}}else{if(!hasOwnProp(this,"_weekdaysRegex")){this._weekdaysRegex=defaultWeekdaysRegex;}
return this._weekdaysStrictRegex&&isStrict?this._weekdaysStrictRegex:this._weekdaysRegex;}}
function weekdaysShortRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this);}
if(isStrict){return this._weekdaysShortStrictRegex;}else{return this._weekdaysShortRegex;}}else{if(!hasOwnProp(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=defaultWeekdaysShortRegex;}
return this._weekdaysShortStrictRegex&&isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;}}
function weekdaysMinRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this);}
if(isStrict){return this._weekdaysMinStrictRegex;}else{return this._weekdaysMinRegex;}}else{if(!hasOwnProp(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=defaultWeekdaysMinRegex;}
return this._weekdaysMinStrictRegex&&isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;}}
function computeWeekdaysParse(){function cmpLenRev(a,b){return b.length-a.length;}
var minPieces=[],shortPieces=[],longPieces=[],mixedPieces=[],i,mom,minp,shortp,longp;for(i=0;i<7;i++){mom=createUTC([2000,1]).day(i);minp=regexEscape(this.weekdaysMin(mom,""));shortp=regexEscape(this.weekdaysShort(mom,""));longp=regexEscape(this.weekdays(mom,""));minPieces.push(minp);shortPieces.push(shortp);longPieces.push(longp);mixedPieces.push(minp);mixedPieces.push(shortp);mixedPieces.push(longp);}
minPieces.sort(cmpLenRev);shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);this._weekdaysRegex=new RegExp("^("+mixedPieces.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+longPieces.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+minPieces.join("|")+")","i");}
function hFormat(){return this.hours()%12||12;}
function kFormat(){return this.hours()||24;}
addFormatToken("H",["HH",2],0,"hour");addFormatToken("h",["hh",2],0,hFormat);addFormatToken("k",["kk",2],0,kFormat);addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2);});addFormatToken("hmmss",0,0,function(){return(""+
hFormat.apply(this)+
zeroFill(this.minutes(),2)+
zeroFill(this.seconds(),2));});addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2);});addFormatToken("Hmmss",0,0,function(){return(""+
this.hours()+
zeroFill(this.minutes(),2)+
zeroFill(this.seconds(),2));});function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase);});}
meridiem("a",true);meridiem("A",false);addUnitAlias("hour","h");addUnitPriority("hour",13);function matchMeridiem(isStrict,locale){return locale._meridiemParse;}
addRegexToken("a",matchMeridiem);addRegexToken("A",matchMeridiem);addRegexToken("H",match1to2);addRegexToken("h",match1to2);addRegexToken("k",match1to2);addRegexToken("HH",match1to2,match2);addRegexToken("hh",match1to2,match2);addRegexToken("kk",match1to2,match2);addRegexToken("hmm",match3to4);addRegexToken("hmmss",match5to6);addRegexToken("Hmm",match3to4);addRegexToken("Hmmss",match5to6);addParseToken(["H","HH"],HOUR);addParseToken(["k","kk"],function(input,array,config){var kInput=toInt(input);array[HOUR]=kInput===24?0:kInput;});addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input);config._meridiem=input;});addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input);getParsingFlags(config).bigHour=true;});addParseToken("hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos));getParsingFlags(config).bigHour=true;});addParseToken("hmmss",function(input,array,config){var pos1=input.length-4,pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2));getParsingFlags(config).bigHour=true;});addParseToken("Hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos));});addParseToken("Hmmss",function(input,array,config){var pos1=input.length-4,pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2));});function localeIsPM(input){return(input+"").toLowerCase().charAt(0)==="p";}
var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i,getSetHour=makeGetSet("Hours",true);function localeMeridiem(hours,minutes,isLower){if(hours>11){return isLower?"pm":"PM";}else{return isLower?"am":"AM";}}
var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,dayOfMonthOrdinalParse:defaultDayOfMonthOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse};var locales={},localeFamilies={},globalLocale;function commonPrefix(arr1,arr2){var i,minl=Math.min(arr1.length,arr2.length);for(i=0;i<minl;i+=1){if(arr1[i]!==arr2[i]){return i;}}
return minl;}
function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key;}
function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split("-");j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split("-"):null;while(j>0){locale=loadLocale(split.slice(0,j).join("-"));if(locale){return locale;}
if(next&&next.length>=j&&commonPrefix(split,next)>=j-1){break;}
j--;}
i++;}
return globalLocale;}
function loadLocale(name){var oldLocale=null,aliasedRequire;if(locales[name]===undefined&&typeof module!=="undefined"&&module&&module.exports){try{oldLocale=globalLocale._abbr;aliasedRequire=require;aliasedRequire("./locale/"+name);getSetGlobalLocale(oldLocale);}catch(e){locales[name]=null;}}
return locales[name];}
function getSetGlobalLocale(key,values){var data;if(key){if(isUndefined(values)){data=getLocale(key);}else{data=defineLocale(key,values);}
if(data){globalLocale=data;}else{if(typeof console!=="undefined"&&console.warn){console.warn("Locale "+key+" not found. Did you forget to load it?");}}}
return globalLocale._abbr;}
function defineLocale(name,config){if(config!==null){var locale,parentConfig=baseConfig;config.abbr=name;if(locales[name]!=null){deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");parentConfig=locales[name]._config;}else if(config.parentLocale!=null){if(locales[config.parentLocale]!=null){parentConfig=locales[config.parentLocale]._config;}else{locale=loadLocale(config.parentLocale);if(locale!=null){parentConfig=locale._config;}else{if(!localeFamilies[config.parentLocale]){localeFamilies[config.parentLocale]=[];}
localeFamilies[config.parentLocale].push({name:name,config:config});return null;}}}
locales[name]=new Locale(mergeConfigs(parentConfig,config));if(localeFamilies[name]){localeFamilies[name].forEach(function(x){defineLocale(x.name,x.config);});}
getSetGlobalLocale(name);return locales[name];}else{delete locales[name];return null;}}
function updateLocale(name,config){if(config!=null){var locale,tmpLocale,parentConfig=baseConfig;if(locales[name]!=null&&locales[name].parentLocale!=null){locales[name].set(mergeConfigs(locales[name]._config,config));}else{tmpLocale=loadLocale(name);if(tmpLocale!=null){parentConfig=tmpLocale._config;}
config=mergeConfigs(parentConfig,config);if(tmpLocale==null){config.abbr=name;}
locale=new Locale(config);locale.parentLocale=locales[name];locales[name]=locale;}
getSetGlobalLocale(name);}else{if(locales[name]!=null){if(locales[name].parentLocale!=null){locales[name]=locales[name].parentLocale;if(name===getSetGlobalLocale()){getSetGlobalLocale(name);}}else if(locales[name]!=null){delete locales[name];}}}
return locales[name];}
function getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr;}
if(!key){return globalLocale;}
if(!isArray(key)){locale=loadLocale(key);if(locale){return locale;}
key=[key];}
return chooseLocale(key);}
function listLocales(){return keys(locales);}
function checkOverflow(m){var overflow,a=m._a;if(a&&getParsingFlags(m).overflow===-2){overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||(a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0))?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1;if(getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE;}
if(getParsingFlags(m)._overflowWeeks&&overflow===-1){overflow=WEEK;}
if(getParsingFlags(m)._overflowWeekday&&overflow===-1){overflow=WEEKDAY;}
getParsingFlags(m).overflow=overflow;}
return m;}
var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tzRegex=/Z|[+-]\d\d(?::?\d\d)?/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,false],["YYYY",/\d{4}/,false]],isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aspNetJsonRegex=/^\/?Date\((-?\d+)/i,rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,obsOffsets={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function configFromISO(config){var i,l,string=config._i,match=extendedIsoRegex.exec(string)||basicIsoRegex.exec(string),allowTime,dateFormat,timeFormat,tzFormat;if(match){getParsingFlags(config).iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(match[1])){dateFormat=isoDates[i][0];allowTime=isoDates[i][2]!==false;break;}}
if(dateFormat==null){config._isValid=false;return;}
if(match[3]){for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(match[3])){timeFormat=(match[2]||" ")+isoTimes[i][0];break;}}
if(timeFormat==null){config._isValid=false;return;}}
if(!allowTime&&timeFormat!=null){config._isValid=false;return;}
if(match[4]){if(tzRegex.exec(match[4])){tzFormat="Z";}else{config._isValid=false;return;}}
config._f=dateFormat+(timeFormat||"")+(tzFormat||"");configFromStringAndFormat(config);}else{config._isValid=false;}}
function extractFromRFC2822Strings(yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr){var result=[untruncateYear(yearStr),defaultLocaleMonthsShort.indexOf(monthStr),parseInt(dayStr,10),parseInt(hourStr,10),parseInt(minuteStr,10)];if(secondStr){result.push(parseInt(secondStr,10));}
return result;}
function untruncateYear(yearStr){var year=parseInt(yearStr,10);if(year<=49){return 2000+year;}else if(year<=999){return 1900+year;}
return year;}
function preprocessRFC2822(s){return s.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"");}
function checkWeekday(weekdayStr,parsedInput,config){if(weekdayStr){var weekdayProvided=defaultLocaleWeekdaysShort.indexOf(weekdayStr),weekdayActual=new Date(parsedInput[0],parsedInput[1],parsedInput[2]).getDay();if(weekdayProvided!==weekdayActual){getParsingFlags(config).weekdayMismatch=true;config._isValid=false;return false;}}
return true;}
function calculateOffset(obsOffset,militaryOffset,numOffset){if(obsOffset){return obsOffsets[obsOffset];}else if(militaryOffset){return 0;}else{var hm=parseInt(numOffset,10),m=hm%100,h=(hm-m)/100;return h*60+m;}}
function configFromRFC2822(config){var match=rfc2822.exec(preprocessRFC2822(config._i)),parsedArray;if(match){parsedArray=extractFromRFC2822Strings(match[4],match[3],match[2],match[5],match[6],match[7]);if(!checkWeekday(match[1],parsedArray,config)){return;}
config._a=parsedArray;config._tzm=calculateOffset(match[8],match[9],match[10]);config._d=createUTCDate.apply(null,config._a);config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm);getParsingFlags(config).rfc2822=true;}else{config._isValid=false;}}
function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return;}
configFromISO(config);if(config._isValid===false){delete config._isValid;}else{return;}
configFromRFC2822(config);if(config._isValid===false){delete config._isValid;}else{return;}
if(config._strict){config._isValid=false;}else{hooks.createFromInputFallback(config);}}
hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""));});function defaults(a,b,c){if(a!=null){return a;}
if(b!=null){return b;}
return c;}
function currentDateArray(config){var nowValue=new Date(hooks.now());if(config._useUTC){return[nowValue.getUTCFullYear(),nowValue.getUTCMonth(),nowValue.getUTCDate()];}
return[nowValue.getFullYear(),nowValue.getMonth(),nowValue.getDate()];}
function configFromArray(config){var i,date,input=[],currentDate,expectedWeekday,yearToUse;if(config._d){return;}
currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config);}
if(config._dayOfYear!=null){yearToUse=defaults(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)||config._dayOfYear===0){getParsingFlags(config)._overflowDayOfYear=true;}
date=createUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate();}
for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i];}
for(;i<7;i++){config._a[i]=input[i]=config._a[i]==null?(i===2?1:0):config._a[i];}
if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0;}
config._d=(config._useUTC?createUTCDate:createDate).apply(null,input);expectedWeekday=config._useUTC?config._d.getUTCDay():config._d.getDay();if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm);}
if(config._nextDay){config._a[HOUR]=24;}
if(config._w&&typeof config._w.d!=="undefined"&&config._w.d!==expectedWeekday){getParsingFlags(config).weekdayMismatch=true;}}
function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,weekdayOverflow,curWeek;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(createLocal(),1,4).year);week=defaults(w.W,1);weekday=defaults(w.E,1);if(weekday<1||weekday>7){weekdayOverflow=true;}}else{dow=config._locale._week.dow;doy=config._locale._week.doy;curWeek=weekOfYear(createLocal(),dow,doy);weekYear=defaults(w.gg,config._a[YEAR],curWeek.year);week=defaults(w.w,curWeek.week);if(w.d!=null){weekday=w.d;if(weekday<0||weekday>6){weekdayOverflow=true;}}else if(w.e!=null){weekday=w.e+dow;if(w.e<0||w.e>6){weekdayOverflow=true;}}else{weekday=dow;}}
if(week<1||week>weeksInYear(weekYear,dow,doy)){getParsingFlags(config)._overflowWeeks=true;}else if(weekdayOverflow!=null){getParsingFlags(config)._overflowWeekday=true;}else{temp=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear;}}
hooks.ISO_8601=function(){};hooks.RFC_2822=function(){};function configFromStringAndFormat(config){if(config._f===hooks.ISO_8601){configFromISO(config);return;}
if(config._f===hooks.RFC_2822){configFromRFC2822(config);return;}
config._a=[];getParsingFlags(config).empty=true;var string=""+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0,era;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){getParsingFlags(config).unusedInput.push(skipped);}
string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length;}
if(formatTokenFunctions[token]){if(parsedInput){getParsingFlags(config).empty=false;}else{getParsingFlags(config).unusedTokens.push(token);}
addTimeToArrayFromToken(token,parsedInput,config);}else if(config._strict&&!parsedInput){getParsingFlags(config).unusedTokens.push(token);}}
getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){getParsingFlags(config).unusedInput.push(string);}
if(config._a[HOUR]<=12&&getParsingFlags(config).bigHour===true&&config._a[HOUR]>0){getParsingFlags(config).bigHour=undefined;}
getParsingFlags(config).parsedDateParts=config._a.slice(0);getParsingFlags(config).meridiem=config._meridiem;config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);era=getParsingFlags(config).era;if(era!==null){config._a[YEAR]=config._locale.erasConvertYear(era,config._a[YEAR]);}
configFromArray(config);checkOverflow(config);}
function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null){return hour;}
if(locale.meridiemHour!=null){return locale.meridiemHour(hour,meridiem);}else if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12){hour+=12;}
if(!isPm&&hour===12){hour=0;}
return hour;}else{return hour;}}
function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore,validFormatFound,bestFormatIsValid=false;if(config._f.length===0){getParsingFlags(config).invalidFormat=true;config._d=new Date(NaN);return;}
for(i=0;i<config._f.length;i++){currentScore=0;validFormatFound=false;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC;}
tempConfig._f=config._f[i];configFromStringAndFormat(tempConfig);if(isValid(tempConfig)){validFormatFound=true;}
currentScore+=getParsingFlags(tempConfig).charsLeftOver;currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10;getParsingFlags(tempConfig).score=currentScore;if(!bestFormatIsValid){if(scoreToBeat==null||currentScore<scoreToBeat||validFormatFound){scoreToBeat=currentScore;bestMoment=tempConfig;if(validFormatFound){bestFormatIsValid=true;}}}else{if(currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig;}}}
extend(config,bestMoment||tempConfig);}
function configFromObject(config){if(config._d){return;}
var i=normalizeObjectUnits(config._i),dayOrDate=i.day===undefined?i.date:i.day;config._a=map([i.year,i.month,dayOrDate,i.hour,i.minute,i.second,i.millisecond],function(obj){return obj&&parseInt(obj,10);});configFromArray(config);}
function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));if(res._nextDay){res.add(1,"d");res._nextDay=undefined;}
return res;}
function prepareConfig(config){var input=config._i,format=config._f;config._locale=config._locale||getLocale(config._l);if(input===null||(format===undefined&&input==="")){return createInvalid({nullInput:true});}
if(typeof input==="string"){config._i=input=config._locale.preparse(input);}
if(isMoment(input)){return new Moment(checkOverflow(input));}else if(isDate(input)){config._d=input;}else if(isArray(format)){configFromStringAndArray(config);}else if(format){configFromStringAndFormat(config);}else{configFromInput(config);}
if(!isValid(config)){config._d=null;}
return config;}
function configFromInput(config){var input=config._i;if(isUndefined(input)){config._d=new Date(hooks.now());}else if(isDate(input)){config._d=new Date(input.valueOf());}else if(typeof input==="string"){configFromString(config);}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10);});configFromArray(config);}else if(isObject(input)){configFromObject(config);}else if(isNumber(input)){config._d=new Date(input);}else{hooks.createFromInputFallback(config);}}
function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};if(format===true||format===false){strict=format;format=undefined;}
if(locale===true||locale===false){strict=locale;locale=undefined;}
if((isObject(input)&&isObjectEmpty(input))||(isArray(input)&&input.length===0)){input=undefined;}
c._isAMomentObject=true;c._useUTC=c._isUTC=isUTC;c._l=locale;c._i=input;c._f=format;c._strict=strict;return createFromConfig(c);}
function createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,false);}
var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other<this?this:other;}else{return createInvalid();}}),prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other>this?this:other;}else{return createInvalid();}});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0];}
if(!moments.length){return createLocal();}
res=moments[0];for(i=1;i<moments.length;++i){if(!moments[i].isValid()||moments[i][fn](res)){res=moments[i];}}
return res;}
function min(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args);}
function max(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args);}
var now=function(){return Date.now?Date.now():+new Date();};var ordering=["year","quarter","month","week","day","hour","minute","second","millisecond"];function isDurationValid(m){var key,unitHasDecimal=false,i;for(key in m){if(hasOwnProp(m,key)&&!(indexOf.call(ordering,key)!==-1&&(m[key]==null||!isNaN(m[key])))){return false;}}
for(i=0;i<ordering.length;++i){if(m[ordering[i]]){if(unitHasDecimal){return false;}
if(parseFloat(m[ordering[i]])!==toInt(m[ordering[i]])){unitHasDecimal=true;}}}
return true;}
function isValid$1(){return this._isValid;}
function createInvalid$1(){return createDuration(NaN);}
function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||normalizedInput.isoWeek||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._isValid=isDurationValid(normalizedInput);this._milliseconds=+milliseconds+
seconds*1e3+
minutes*6e4+
hours*1000*60*60;this._days=+days+weeks*7;this._months=+months+quarters*3+years*12;this._data={};this._locale=getLocale();this._bubble();}
function isDuration(obj){return obj instanceof Duration;}
function absRound(number){if(number<0){return Math.round(-1*number)*-1;}else{return Math.round(number);}}
function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if((dontConvert&&array1[i]!==array2[i])||(!dontConvert&&toInt(array1[i])!==toInt(array2[i]))){diffs++;}}
return diffs+lengthDiff;}
function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset(),sign="+";if(offset<0){offset=-offset;sign="-";}
return(sign+
zeroFill(~~(offset/60),2)+
separator+
zeroFill(~~offset%60,2));});}
offset("Z",":");offset("ZZ","");addRegexToken("Z",matchShortOffset);addRegexToken("ZZ",matchShortOffset);addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=true;config._tzm=offsetFromString(matchShortOffset,input);});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(matcher,string){var matches=(string||"").match(matcher),chunk,parts,minutes;if(matches===null){return null;}
chunk=matches[matches.length-1]||[];parts=(chunk+"").match(chunkOffset)||["-",0,0];minutes=+(parts[1]*60)+toInt(parts[2]);return minutes===0?0:parts[0]==="+"?minutes:-minutes;}
function cloneWithOffset(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(isMoment(input)||isDate(input)?input.valueOf():createLocal(input).valueOf())-res.valueOf();res._d.setTime(res._d.valueOf()+diff);hooks.updateOffset(res,false);return res;}else{return createLocal(input).local();}}
function getDateOffset(m){return-Math.round(m._d.getTimezoneOffset());}
hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime,keepMinutes){var offset=this._offset||0,localAdjust;if(!this.isValid()){return input!=null?this:NaN;}
if(input!=null){if(typeof input==="string"){input=offsetFromString(matchShortOffset,input);if(input===null){return this;}}else if(Math.abs(input)<16&&!keepMinutes){input=input*60;}
if(!this._isUTC&&keepLocalTime){localAdjust=getDateOffset(this);}
this._offset=input;this._isUTC=true;if(localAdjust!=null){this.add(localAdjust,"m");}
if(offset!==input){if(!keepLocalTime||this._changeInProgress){addSubtract(this,createDuration(input-offset,"m"),1,false);}else if(!this._changeInProgress){this._changeInProgress=true;hooks.updateOffset(this,true);this._changeInProgress=null;}}
return this;}else{return this._isUTC?offset:getDateOffset(this);}}
function getSetZone(input,keepLocalTime){if(input!=null){if(typeof input!=="string"){input=-input;}
this.utcOffset(input,keepLocalTime);return this;}else{return-this.utcOffset();}}
function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime);}
function setOffsetToLocal(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.subtract(getDateOffset(this),"m");}}
return this;}
function setOffsetToParsedOffset(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true);}else if(typeof this._i==="string"){var tZone=offsetFromString(matchOffset,this._i);if(tZone!=null){this.utcOffset(tZone);}else{this.utcOffset(0,true);}}
return this;}
function hasAlignedHourOffset(input){if(!this.isValid()){return false;}
input=input?createLocal(input).utcOffset():0;return(this.utcOffset()-input)%60===0;}
function isDaylightSavingTime(){return(this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset());}
function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted)){return this._isDSTShifted;}
var c={},other;copyConfig(c,this);c=prepareConfig(c);if(c._a){other=c._isUTC?createUTC(c._a):createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0;}else{this._isDSTShifted=false;}
return this._isDSTShifted;}
function isLocal(){return this.isValid()?!this._isUTC:false;}
function isUtcOffset(){return this.isValid()?this._isUTC:false;}
function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:false;}
var aspNetRegex=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,isoRegex=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;if(isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months};}else if(isNumber(input)||!isNaN(+input)){duration={};if(key){duration[key]=+input;}else{duration.milliseconds=+input;}}else if((match=aspNetRegex.exec(input))){sign=match[1]==="-"?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(absRound(match[MILLISECOND]*1000))*sign};}else if((match=isoRegex.exec(input))){sign=match[1]==="-"?-1:1;duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),w:parseIso(match[4],sign),d:parseIso(match[5],sign),h:parseIso(match[6],sign),m:parseIso(match[7],sign),s:parseIso(match[8],sign)};}else if(duration==null){duration={};}else if(typeof duration==="object"&&("from"in duration||"to"in duration)){diffRes=momentsDifference(createLocal(duration.from),createLocal(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months;}
ret=new Duration(duration);if(isDuration(input)&&hasOwnProp(input,"_locale")){ret._locale=input._locale;}
if(isDuration(input)&&hasOwnProp(input,"_isValid")){ret._isValid=input._isValid;}
return ret;}
createDuration.fn=Duration.prototype;createDuration.invalid=createInvalid$1;function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign;}
function positiveMomentsDifference(base,other){var res={};res.months=other.month()-base.month()+(other.year()-base.year())*12;if(base.clone().add(res.months,"M").isAfter(other)){--res.months;}
res.milliseconds=+other-+base.clone().add(res.months,"M");return res;}
function momentsDifference(base,other){var res;if(!(base.isValid()&&other.isValid())){return{milliseconds:0,months:0};}
other=cloneWithOffset(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other);}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months;}
return res;}
function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,"moment()."+
name+"(period, number) is deprecated. Please use moment()."+
name+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");tmp=val;val=period;period=tmp;}
dur=createDuration(val,period);addSubtract(this,dur,direction);return this;};}
function addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=absRound(duration._days),months=absRound(duration._months);if(!mom.isValid()){return;}
updateOffset=updateOffset==null?true:updateOffset;if(months){setMonth(mom,get(mom,"Month")+months*isAdding);}
if(days){set$1(mom,"Date",get(mom,"Date")+days*isAdding);}
if(milliseconds){mom._d.setTime(mom._d.valueOf()+milliseconds*isAdding);}
if(updateOffset){hooks.updateOffset(mom,days||months);}}
var add=createAdder(1,"add"),subtract=createAdder(-1,"subtract");function isString(input){return typeof input==="string"||input instanceof String;}
function isMomentInput(input){return(isMoment(input)||isDate(input)||isString(input)||isNumber(input)||isNumberOrStringArray(input)||isMomentInputObject(input)||input===null||input===undefined);}
function isMomentInputObject(input){var objectTest=isObject(input)&&!isObjectEmpty(input),propertyTest=false,properties=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,property;for(i=0;i<properties.length;i+=1){property=properties[i];propertyTest=propertyTest||hasOwnProp(input,property);}
return objectTest&&propertyTest;}
function isNumberOrStringArray(input){var arrayTest=isArray(input),dataTypeTest=false;if(arrayTest){dataTypeTest=input.filter(function(item){return!isNumber(item)&&isString(input);}).length===0;}
return arrayTest&&dataTypeTest;}
function isCalendarSpec(input){var objectTest=isObject(input)&&!isObjectEmpty(input),propertyTest=false,properties=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,property;for(i=0;i<properties.length;i+=1){property=properties[i];propertyTest=propertyTest||hasOwnProp(input,property);}
return objectTest&&propertyTest;}
function getCalendarFormat(myMoment,now){var diff=myMoment.diff(now,"days",true);return diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse";}
function calendar$1(time,formats){if(arguments.length===1){if(!arguments[0]){time=undefined;formats=undefined;}else if(isMomentInput(arguments[0])){time=arguments[0];formats=undefined;}else if(isCalendarSpec(arguments[0])){formats=arguments[0];time=undefined;}}
var now=time||createLocal(),sod=cloneWithOffset(now,this).startOf("day"),format=hooks.calendarFormat(this,sod)||"sameElse",output=formats&&(isFunction(formats[format])?formats[format].call(this,now):formats[format]);return this.format(output||this.localeData().calendar(format,this,createLocal(now)));}
function clone(){return new Moment(this);}
function isAfter(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false;}
units=normalizeUnits(units)||"millisecond";if(units==="millisecond"){return this.valueOf()>localInput.valueOf();}else{return(localInput.valueOf()<this.clone().startOf(units).valueOf());}}
function isBefore(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false;}
units=normalizeUnits(units)||"millisecond";if(units==="millisecond"){return this.valueOf()<localInput.valueOf();}else{return(this.clone().endOf(units).valueOf()<localInput.valueOf());}}
function isBetween(from,to,units,inclusivity){var localFrom=isMoment(from)?from:createLocal(from),localTo=isMoment(to)?to:createLocal(to);if(!(this.isValid()&&localFrom.isValid()&&localTo.isValid())){return false;}
inclusivity=inclusivity||"()";return((inclusivity[0]==="("?this.isAfter(localFrom,units):!this.isBefore(localFrom,units))&&(inclusivity[1]===")"?this.isBefore(localTo,units):!this.isAfter(localTo,units)));}
function isSame(input,units){var localInput=isMoment(input)?input:createLocal(input),inputMs;if(!(this.isValid()&&localInput.isValid())){return false;}
units=normalizeUnits(units)||"millisecond";if(units==="millisecond"){return this.valueOf()===localInput.valueOf();}else{inputMs=localInput.valueOf();return(this.clone().startOf(units).valueOf()<=inputMs&&inputMs<=this.clone().endOf(units).valueOf());}}
function isSameOrAfter(input,units){return this.isSame(input,units)||this.isAfter(input,units);}
function isSameOrBefore(input,units){return this.isSame(input,units)||this.isBefore(input,units);}
function diff(input,units,asFloat){var that,zoneDelta,output;if(!this.isValid()){return NaN;}
that=cloneWithOffset(input,this);if(!that.isValid()){return NaN;}
zoneDelta=(that.utcOffset()-this.utcOffset())*6e4;units=normalizeUnits(units);switch(units){case"year":output=monthDiff(this,that)/12;break;case"month":output=monthDiff(this,that);break;case"quarter":output=monthDiff(this,that)/3;break;case"second":output=(this-that)/1e3;break;case"minute":output=(this-that)/6e4;break;case"hour":output=(this-that)/36e5;break;case"day":output=(this-that-zoneDelta)/864e5;break;case"week":output=(this-that-zoneDelta)/6048e5;break;default:output=this-that;}
return asFloat?output:absFloor(output);}
function monthDiff(a,b){if(a.date()<b.date()){return-monthDiff(b,a);}
var wholeMonthDiff=(b.year()-a.year())*12+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months"),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,"months");adjust=(b-anchor)/(anchor-anchor2);}else{anchor2=a.clone().add(wholeMonthDiff+1,"months");adjust=(b-anchor)/(anchor2-anchor);}
return-(wholeMonthDiff+adjust)||0;}
hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ");}
function toISOString(keepOffset){if(!this.isValid()){return null;}
var utc=keepOffset!==true,m=utc?this.clone().utc():this;if(m.year()<0||m.year()>9999){return formatMoment(m,utc?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ");}
if(isFunction(Date.prototype.toISOString)){if(utc){return this.toDate().toISOString();}else{return new Date(this.valueOf()+this.utcOffset()*60*1000).toISOString().replace("Z",formatMoment(m,"Z"));}}
return formatMoment(m,utc?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ");}
function inspect(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)";}
var func="moment",zone="",prefix,year,datetime,suffix;if(!this.isLocal()){func=this.utcOffset()===0?"moment.utc":"moment.parseZone";zone="Z";}
prefix="["+func+'("]';year=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";datetime="-MM-DD[T]HH:mm:ss.SSS";suffix=zone+'[")]';return this.format(prefix+year+datetime+suffix);}
function format(inputString){if(!inputString){inputString=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat;}
var output=formatMoment(this,inputString);return this.localeData().postformat(output);}
function from(time,withoutSuffix){if(this.isValid()&&((isMoment(time)&&time.isValid())||createLocal(time).isValid())){return createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix);}else{return this.localeData().invalidDate();}}
function fromNow(withoutSuffix){return this.from(createLocal(),withoutSuffix);}
function to(time,withoutSuffix){if(this.isValid()&&((isMoment(time)&&time.isValid())||createLocal(time).isValid())){return createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix);}else{return this.localeData().invalidDate();}}
function toNow(withoutSuffix){return this.to(createLocal(),withoutSuffix);}
function locale(key){var newLocaleData;if(key===undefined){return this._locale._abbr;}else{newLocaleData=getLocale(key);if(newLocaleData!=null){this._locale=newLocaleData;}
return this;}}
var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){if(key===undefined){return this.localeData();}else{return this.locale(key);}});function localeData(){return this._locale;}
var MS_PER_SECOND=1000,MS_PER_MINUTE=60*MS_PER_SECOND,MS_PER_HOUR=60*MS_PER_MINUTE,MS_PER_400_YEARS=(365*400+97)*24*MS_PER_HOUR;function mod$1(dividend,divisor){return(dividend%divisor+divisor)%divisor;}
function localStartOfDate(y,m,d){if(y<100&&y>=0){return new Date(y+400,m,d)-MS_PER_400_YEARS;}else{return new Date(y,m,d).valueOf();}}
function utcStartOfDate(y,m,d){if(y<100&&y>=0){return Date.UTC(y+400,m,d)-MS_PER_400_YEARS;}else{return Date.UTC(y,m,d);}}
function startOf(units){var time,startOfDate;units=normalizeUnits(units);if(units===undefined||units==="millisecond"||!this.isValid()){return this;}
startOfDate=this._isUTC?utcStartOfDate:localStartOfDate;switch(units){case"year":time=startOfDate(this.year(),0,1);break;case"quarter":time=startOfDate(this.year(),this.month()-this.month()%3,1);break;case"month":time=startOfDate(this.year(),this.month(),1);break;case"week":time=startOfDate(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":time=startOfDate(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":time=startOfDate(this.year(),this.month(),this.date());break;case"hour":time=this._d.valueOf();time-=mod$1(time+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR);break;case"minute":time=this._d.valueOf();time-=mod$1(time,MS_PER_MINUTE);break;case"second":time=this._d.valueOf();time-=mod$1(time,MS_PER_SECOND);break;}
this._d.setTime(time);hooks.updateOffset(this,true);return this;}
function endOf(units){var time,startOfDate;units=normalizeUnits(units);if(units===undefined||units==="millisecond"||!this.isValid()){return this;}
startOfDate=this._isUTC?utcStartOfDate:localStartOfDate;switch(units){case"year":time=startOfDate(this.year()+1,0,1)-1;break;case"quarter":time=startOfDate(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":time=startOfDate(this.year(),this.month()+1,1)-1;break;case"week":time=startOfDate(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":time=startOfDate(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":time=startOfDate(this.year(),this.month(),this.date()+1)-1;break;case"hour":time=this._d.valueOf();time+=MS_PER_HOUR-
mod$1(time+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR)-
1;break;case"minute":time=this._d.valueOf();time+=MS_PER_MINUTE-mod$1(time,MS_PER_MINUTE)-1;break;case"second":time=this._d.valueOf();time+=MS_PER_SECOND-mod$1(time,MS_PER_SECOND)-1;break;}
this._d.setTime(time);hooks.updateOffset(this,true);return this;}
function valueOf(){return this._d.valueOf()-(this._offset||0)*60000;}
function unix(){return Math.floor(this.valueOf()/1000);}
function toDate(){return new Date(this.valueOf());}
function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()];}
function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()};}
function toJSON(){return this.isValid()?this.toISOString():null;}
function isValid$2(){return isValid(this);}
function parsingFlags(){return extend({},getParsingFlags(this));}
function invalidAt(){return getParsingFlags(this).overflow;}
function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict};}
addFormatToken("N",0,0,"eraAbbr");addFormatToken("NN",0,0,"eraAbbr");addFormatToken("NNN",0,0,"eraAbbr");addFormatToken("NNNN",0,0,"eraName");addFormatToken("NNNNN",0,0,"eraNarrow");addFormatToken("y",["y",1],"yo","eraYear");addFormatToken("y",["yy",2],0,"eraYear");addFormatToken("y",["yyy",3],0,"eraYear");addFormatToken("y",["yyyy",4],0,"eraYear");addRegexToken("N",matchEraAbbr);addRegexToken("NN",matchEraAbbr);addRegexToken("NNN",matchEraAbbr);addRegexToken("NNNN",matchEraName);addRegexToken("NNNNN",matchEraNarrow);addParseToken(["N","NN","NNN","NNNN","NNNNN"],function(input,array,config,token){var era=config._locale.erasParse(input,token,config._strict);if(era){getParsingFlags(config).era=era;}else{getParsingFlags(config).invalidEra=input;}});addRegexToken("y",matchUnsigned);addRegexToken("yy",matchUnsigned);addRegexToken("yyy",matchUnsigned);addRegexToken("yyyy",matchUnsigned);addRegexToken("yo",matchEraYearOrdinal);addParseToken(["y","yy","yyy","yyyy"],YEAR);addParseToken(["yo"],function(input,array,config,token){var match;if(config._locale._eraYearOrdinalRegex){match=input.match(config._locale._eraYearOrdinalRegex);}
if(config._locale.eraYearOrdinalParse){array[YEAR]=config._locale.eraYearOrdinalParse(input,match);}else{array[YEAR]=parseInt(input,10);}});function localeEras(m,format){var i,l,date,eras=this._eras||getLocale("en")._eras;for(i=0,l=eras.length;i<l;++i){switch(typeof eras[i].since){case"string":date=hooks(eras[i].since).startOf("day");eras[i].since=date.valueOf();break;}
switch(typeof eras[i].until){case"undefined":eras[i].until=+Infinity;break;case"string":date=hooks(eras[i].until).startOf("day").valueOf();eras[i].until=date.valueOf();break;}}
return eras;}
function localeErasParse(eraName,format,strict){var i,l,eras=this.eras(),name,abbr,narrow;eraName=eraName.toUpperCase();for(i=0,l=eras.length;i<l;++i){name=eras[i].name.toUpperCase();abbr=eras[i].abbr.toUpperCase();narrow=eras[i].narrow.toUpperCase();if(strict){switch(format){case"N":case"NN":case"NNN":if(abbr===eraName){return eras[i];}
break;case"NNNN":if(name===eraName){return eras[i];}
break;case"NNNNN":if(narrow===eraName){return eras[i];}
break;}}else if([name,abbr,narrow].indexOf(eraName)>=0){return eras[i];}}}
function localeErasConvertYear(era,year){var dir=era.since<=era.until?+1:-1;if(year===undefined){return hooks(era.since).year();}else{return hooks(era.since).year()+(year-era.offset)*dir;}}
function getEraName(){var i,l,val,eras=this.localeData().eras();for(i=0,l=eras.length;i<l;++i){val=this.clone().startOf("day").valueOf();if(eras[i].since<=val&&val<=eras[i].until){return eras[i].name;}
if(eras[i].until<=val&&val<=eras[i].since){return eras[i].name;}}
return"";}
function getEraNarrow(){var i,l,val,eras=this.localeData().eras();for(i=0,l=eras.length;i<l;++i){val=this.clone().startOf("day").valueOf();if(eras[i].since<=val&&val<=eras[i].until){return eras[i].narrow;}
if(eras[i].until<=val&&val<=eras[i].since){return eras[i].narrow;}}
return"";}
function getEraAbbr(){var i,l,val,eras=this.localeData().eras();for(i=0,l=eras.length;i<l;++i){val=this.clone().startOf("day").valueOf();if(eras[i].since<=val&&val<=eras[i].until){return eras[i].abbr;}
if(eras[i].until<=val&&val<=eras[i].since){return eras[i].abbr;}}
return"";}
function getEraYear(){var i,l,dir,val,eras=this.localeData().eras();for(i=0,l=eras.length;i<l;++i){dir=eras[i].since<=eras[i].until?+1:-1;val=this.clone().startOf("day").valueOf();if((eras[i].since<=val&&val<=eras[i].until)||(eras[i].until<=val&&val<=eras[i].since)){return((this.year()-hooks(eras[i].since).year())*dir+eras[i].offset);}}
return this.year();}
function erasNameRegex(isStrict){if(!hasOwnProp(this,"_erasNameRegex")){computeErasParse.call(this);}
return isStrict?this._erasNameRegex:this._erasRegex;}
function erasAbbrRegex(isStrict){if(!hasOwnProp(this,"_erasAbbrRegex")){computeErasParse.call(this);}
return isStrict?this._erasAbbrRegex:this._erasRegex;}
function erasNarrowRegex(isStrict){if(!hasOwnProp(this,"_erasNarrowRegex")){computeErasParse.call(this);}
return isStrict?this._erasNarrowRegex:this._erasRegex;}
function matchEraAbbr(isStrict,locale){return locale.erasAbbrRegex(isStrict);}
function matchEraName(isStrict,locale){return locale.erasNameRegex(isStrict);}
function matchEraNarrow(isStrict,locale){return locale.erasNarrowRegex(isStrict);}
function matchEraYearOrdinal(isStrict,locale){return locale._eraYearOrdinalRegex||matchUnsigned;}
function computeErasParse(){var abbrPieces=[],namePieces=[],narrowPieces=[],mixedPieces=[],i,l,eras=this.eras();for(i=0,l=eras.length;i<l;++i){namePieces.push(regexEscape(eras[i].name));abbrPieces.push(regexEscape(eras[i].abbr));narrowPieces.push(regexEscape(eras[i].narrow));mixedPieces.push(regexEscape(eras[i].name));mixedPieces.push(regexEscape(eras[i].abbr));mixedPieces.push(regexEscape(eras[i].narrow));}
this._erasRegex=new RegExp("^("+mixedPieces.join("|")+")","i");this._erasNameRegex=new RegExp("^("+namePieces.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+abbrPieces.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+narrowPieces.join("|")+")","i");}
addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100;});addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100;});function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter);}
addWeekYearFormatToken("gggg","weekYear");addWeekYearFormatToken("ggggg","weekYear");addWeekYearFormatToken("GGGG","isoWeekYear");addWeekYearFormatToken("GGGGG","isoWeekYear");addUnitAlias("weekYear","gg");addUnitAlias("isoWeekYear","GG");addUnitPriority("weekYear",1);addUnitPriority("isoWeekYear",1);addRegexToken("G",matchSigned);addRegexToken("g",matchSigned);addRegexToken("GG",match1to2,match2);addRegexToken("gg",match1to2,match2);addRegexToken("GGGG",match1to4,match4);addRegexToken("gggg",match1to4,match4);addRegexToken("GGGGG",match1to6,match6);addRegexToken("ggggg",match1to6,match6);addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input);});addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=hooks.parseTwoDigitYear(input);});function getSetWeekYear(input){return getSetWeekYearHelper.call(this,input,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy);}
function getSetISOWeekYear(input){return getSetWeekYearHelper.call(this,input,this.isoWeek(),this.isoWeekday(),1,4);}
function getISOWeeksInYear(){return weeksInYear(this.year(),1,4);}
function getISOWeeksInISOWeekYear(){return weeksInYear(this.isoWeekYear(),1,4);}
function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy);}
function getWeeksInWeekYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.weekYear(),weekInfo.dow,weekInfo.doy);}
function getSetWeekYearHelper(input,week,weekday,dow,doy){var weeksTarget;if(input==null){return weekOfYear(this,dow,doy).year;}else{weeksTarget=weeksInYear(input,dow,doy);if(week>weeksTarget){week=weeksTarget;}
return setWeekAll.call(this,input,week,weekday,dow,doy);}}
function setWeekAll(weekYear,week,weekday,dow,doy){var dayOfYearData=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),date=createUTCDate(dayOfYearData.year,0,dayOfYearData.dayOfYear);this.year(date.getUTCFullYear());this.month(date.getUTCMonth());this.date(date.getUTCDate());return this;}
addFormatToken("Q",0,"Qo","quarter");addUnitAlias("quarter","Q");addUnitPriority("quarter",7);addRegexToken("Q",match1);addParseToken("Q",function(input,array){array[MONTH]=(toInt(input)-1)*3;});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3);}
addFormatToken("D",["DD",2],"Do","date");addUnitAlias("date","D");addUnitPriority("date",9);addRegexToken("D",match1to2);addRegexToken("DD",match1to2,match2);addRegexToken("Do",function(isStrict,locale){return isStrict?locale._dayOfMonthOrdinalParse||locale._ordinalParse:locale._dayOfMonthOrdinalParseLenient;});addParseToken(["D","DD"],DATE);addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0]);});var getSetDayOfMonth=makeGetSet("Date",true);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear");addUnitAlias("dayOfYear","DDD");addUnitPriority("dayOfYear",4);addRegexToken("DDD",match1to3);addRegexToken("DDDD",match3);addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input);});function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return input==null?dayOfYear:this.add(input-dayOfYear,"d");}
addFormatToken("m",["mm",2],0,"minute");addUnitAlias("minute","m");addUnitPriority("minute",14);addRegexToken("m",match1to2);addRegexToken("mm",match1to2,match2);addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",false);addFormatToken("s",["ss",2],0,"second");addUnitAlias("second","s");addUnitPriority("second",15);addRegexToken("s",match1to2);addRegexToken("ss",match1to2,match2);addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",false);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100);});addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10);});addFormatToken(0,["SSS",3],0,"millisecond");addFormatToken(0,["SSSS",4],0,function(){return this.millisecond()*10;});addFormatToken(0,["SSSSS",5],0,function(){return this.millisecond()*100;});addFormatToken(0,["SSSSSS",6],0,function(){return this.millisecond()*1000;});addFormatToken(0,["SSSSSSS",7],0,function(){return this.millisecond()*10000;});addFormatToken(0,["SSSSSSSS",8],0,function(){return this.millisecond()*100000;});addFormatToken(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1000000;});addUnitAlias("millisecond","ms");addUnitPriority("millisecond",16);addRegexToken("S",match1to3,match1);addRegexToken("SS",match1to3,match2);addRegexToken("SSS",match1to3,match3);var token,getSetMillisecond;for(token="SSSS";token.length<=9;token+="S"){addRegexToken(token,matchUnsigned);}
function parseMs(input,array){array[MILLISECOND]=toInt(("0."+input)*1000);}
for(token="S";token.length<=9;token+="S"){addParseToken(token,parseMs);}
getSetMillisecond=makeGetSet("Milliseconds",false);addFormatToken("z",0,0,"zoneAbbr");addFormatToken("zz",0,0,"zoneName");function getZoneAbbr(){return this._isUTC?"UTC":"";}
function getZoneName(){return this._isUTC?"Coordinated Universal Time":"";}
var proto=Moment.prototype;proto.add=add;proto.calendar=calendar$1;proto.clone=clone;proto.diff=diff;proto.endOf=endOf;proto.format=format;proto.from=from;proto.fromNow=fromNow;proto.to=to;proto.toNow=toNow;proto.get=stringGet;proto.invalidAt=invalidAt;proto.isAfter=isAfter;proto.isBefore=isBefore;proto.isBetween=isBetween;proto.isSame=isSame;proto.isSameOrAfter=isSameOrAfter;proto.isSameOrBefore=isSameOrBefore;proto.isValid=isValid$2;proto.lang=lang;proto.locale=locale;proto.localeData=localeData;proto.max=prototypeMax;proto.min=prototypeMin;proto.parsingFlags=parsingFlags;proto.set=stringSet;proto.startOf=startOf;proto.subtract=subtract;proto.toArray=toArray;proto.toObject=toObject;proto.toDate=toDate;proto.toISOString=toISOString;proto.inspect=inspect;if(typeof Symbol!=="undefined"&&Symbol.for!=null){proto[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">";};}
proto.toJSON=toJSON;proto.toString=toString;proto.unix=unix;proto.valueOf=valueOf;proto.creationData=creationData;proto.eraName=getEraName;proto.eraNarrow=getEraNarrow;proto.eraAbbr=getEraAbbr;proto.eraYear=getEraYear;proto.year=getSetYear;proto.isLeapYear=getIsLeapYear;proto.weekYear=getSetWeekYear;proto.isoWeekYear=getSetISOWeekYear;proto.quarter=proto.quarters=getSetQuarter;proto.month=getSetMonth;proto.daysInMonth=getDaysInMonth;proto.week=proto.weeks=getSetWeek;proto.isoWeek=proto.isoWeeks=getSetISOWeek;proto.weeksInYear=getWeeksInYear;proto.weeksInWeekYear=getWeeksInWeekYear;proto.isoWeeksInYear=getISOWeeksInYear;proto.isoWeeksInISOWeekYear=getISOWeeksInISOWeekYear;proto.date=getSetDayOfMonth;proto.day=proto.days=getSetDayOfWeek;proto.weekday=getSetLocaleDayOfWeek;proto.isoWeekday=getSetISODayOfWeek;proto.dayOfYear=getSetDayOfYear;proto.hour=proto.hours=getSetHour;proto.minute=proto.minutes=getSetMinute;proto.second=proto.seconds=getSetSecond;proto.millisecond=proto.milliseconds=getSetMillisecond;proto.utcOffset=getSetOffset;proto.utc=setOffsetToUTC;proto.local=setOffsetToLocal;proto.parseZone=setOffsetToParsedOffset;proto.hasAlignedHourOffset=hasAlignedHourOffset;proto.isDST=isDaylightSavingTime;proto.isLocal=isLocal;proto.isUtcOffset=isUtcOffset;proto.isUtc=isUtc;proto.isUTC=isUtc;proto.zoneAbbr=getZoneAbbr;proto.zoneName=getZoneName;proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth);proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth);proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear);proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone);proto.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);function createUnix(input){return createLocal(input*1000);}
function createInZone(){return createLocal.apply(null,arguments).parseZone();}
function preParsePostFormat(string){return string;}
var proto$1=Locale.prototype;proto$1.calendar=calendar;proto$1.longDateFormat=longDateFormat;proto$1.invalidDate=invalidDate;proto$1.ordinal=ordinal;proto$1.preparse=preParsePostFormat;proto$1.postformat=preParsePostFormat;proto$1.relativeTime=relativeTime;proto$1.pastFuture=pastFuture;proto$1.set=set;proto$1.eras=localeEras;proto$1.erasParse=localeErasParse;proto$1.erasConvertYear=localeErasConvertYear;proto$1.erasAbbrRegex=erasAbbrRegex;proto$1.erasNameRegex=erasNameRegex;proto$1.erasNarrowRegex=erasNarrowRegex;proto$1.months=localeMonths;proto$1.monthsShort=localeMonthsShort;proto$1.monthsParse=localeMonthsParse;proto$1.monthsRegex=monthsRegex;proto$1.monthsShortRegex=monthsShortRegex;proto$1.week=localeWeek;proto$1.firstDayOfYear=localeFirstDayOfYear;proto$1.firstDayOfWeek=localeFirstDayOfWeek;proto$1.weekdays=localeWeekdays;proto$1.weekdaysMin=localeWeekdaysMin;proto$1.weekdaysShort=localeWeekdaysShort;proto$1.weekdaysParse=localeWeekdaysParse;proto$1.weekdaysRegex=weekdaysRegex;proto$1.weekdaysShortRegex=weekdaysShortRegex;proto$1.weekdaysMinRegex=weekdaysMinRegex;proto$1.isPM=localeIsPM;proto$1.meridiem=localeMeridiem;function get$1(format,index,field,setter){var locale=getLocale(),utc=createUTC().set(setter,index);return locale[field](utc,format);}
function listMonthsImpl(format,index,field){if(isNumber(format)){index=format;format=undefined;}
format=format||"";if(index!=null){return get$1(format,index,field,"month");}
var i,out=[];for(i=0;i<12;i++){out[i]=get$1(format,i,field,"month");}
return out;}
function listWeekdaysImpl(localeSorted,format,index,field){if(typeof localeSorted==="boolean"){if(isNumber(format)){index=format;format=undefined;}
format=format||"";}else{format=localeSorted;index=format;localeSorted=false;if(isNumber(format)){index=format;format=undefined;}
format=format||"";}
var locale=getLocale(),shift=localeSorted?locale._week.dow:0,i,out=[];if(index!=null){return get$1(format,(index+shift)%7,field,"day");}
for(i=0;i<7;i++){out[i]=get$1(format,(i+shift)%7,field,"day");}
return out;}
function listMonths(format,index){return listMonthsImpl(format,index,"months");}
function listMonthsShort(format,index){return listMonthsImpl(format,index,"monthsShort");}
function listWeekdays(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdays");}
function listWeekdaysShort(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysShort");}
function listWeekdaysMin(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysMin");}
getSetGlobalLocale("en",{eras:[{since:"0001-01-01",until:+Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=toInt((number%100)/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output;}});hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale);hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var mathAbs=Math.abs;function abs(){var data=this._data;this._milliseconds=mathAbs(this._milliseconds);this._days=mathAbs(this._days);this._months=mathAbs(this._months);data.milliseconds=mathAbs(data.milliseconds);data.seconds=mathAbs(data.seconds);data.minutes=mathAbs(data.minutes);data.hours=mathAbs(data.hours);data.months=mathAbs(data.months);data.years=mathAbs(data.years);return this;}
function addSubtract$1(duration,input,value,direction){var other=createDuration(input,value);duration._milliseconds+=direction*other._milliseconds;duration._days+=direction*other._days;duration._months+=direction*other._months;return duration._bubble();}
function add$1(input,value){return addSubtract$1(this,input,value,1);}
function subtract$1(input,value){return addSubtract$1(this,input,value,-1);}
function absCeil(number){if(number<0){return Math.floor(number);}else{return Math.ceil(number);}}
function bubble(){var milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data,seconds,minutes,hours,years,monthsFromDays;if(!((milliseconds>=0&&days>=0&&months>=0)||(milliseconds<=0&&days<=0&&months<=0))){milliseconds+=absCeil(monthsToDays(months)+days)*864e5;days=0;months=0;}
data.milliseconds=milliseconds%1000;seconds=absFloor(milliseconds/1000);data.seconds=seconds%60;minutes=absFloor(seconds/60);data.minutes=minutes%60;hours=absFloor(minutes/60);data.hours=hours%24;days+=absFloor(hours/24);monthsFromDays=absFloor(daysToMonths(days));months+=monthsFromDays;days-=absCeil(monthsToDays(monthsFromDays));years=absFloor(months/12);months%=12;data.days=days;data.months=months;data.years=years;return this;}
function daysToMonths(days){return days*4800/146097;}
function monthsToDays(months){return months*146097/4800;}
function as(units){if(!this.isValid()){return NaN;}
var days,months,milliseconds=this._milliseconds;units=normalizeUnits(units);if(units==="month"||units==="quarter"||units==="year"){days=this._days+milliseconds/864e5;months=this._months+daysToMonths(days);switch(units){case"month":return months;case"quarter":return months/3;case"year":return months/12;}}else{days=this._days+Math.round(monthsToDays(this._months));switch(units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return days*24+milliseconds/36e5;case"minute":return days*1440+milliseconds/6e4;case"second":return days*86400+milliseconds/1000;case"millisecond":return Math.floor(days*864e5)+milliseconds;default:throw new Error("Unknown unit "+units);}}}
function valueOf$1(){if(!this.isValid()){return NaN;}
return(this._milliseconds+
this._days*864e5+
(this._months%12)*2592e6+
toInt(this._months/12)*31536e6);}
function makeAs(alias){return function(){return this.as(alias);};}
var asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asQuarters=makeAs("Q"),asYears=makeAs("y");function clone$1(){return createDuration(this);}
function get$2(units){units=normalizeUnits(units);return this.isValid()?this[units+"s"]():NaN;}
function makeGetter(name){return function(){return this.isValid()?this._data[name]:NaN;};}
var milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years");function weeks(){return absFloor(this.days()/7);}
var round=Math.round,thresholds={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture);}
function relativeTime$1(posNegDuration,withoutSuffix,thresholds,locale){var duration=createDuration(posNegDuration).abs(),seconds=round(duration.as("s")),minutes=round(duration.as("m")),hours=round(duration.as("h")),days=round(duration.as("d")),months=round(duration.as("M")),weeks=round(duration.as("w")),years=round(duration.as("y")),a=(seconds<=thresholds.ss&&["s",seconds])||(seconds<thresholds.s&&["ss",seconds])||(minutes<=1&&["m"])||(minutes<thresholds.m&&["mm",minutes])||(hours<=1&&["h"])||(hours<thresholds.h&&["hh",hours])||(days<=1&&["d"])||(days<thresholds.d&&["dd",days]);if(thresholds.w!=null){a=a||(weeks<=1&&["w"])||(weeks<thresholds.w&&["ww",weeks]);}
a=a||(months<=1&&["M"])||(months<thresholds.M&&["MM",months])||(years<=1&&["y"])||["yy",years];a[2]=withoutSuffix;a[3]=+posNegDuration>0;a[4]=locale;return substituteTimeAgo.apply(null,a);}
function getSetRelativeTimeRounding(roundingFunction){if(roundingFunction===undefined){return round;}
if(typeof roundingFunction==="function"){round=roundingFunction;return true;}
return false;}
function getSetRelativeTimeThreshold(threshold,limit){if(thresholds[threshold]===undefined){return false;}
if(limit===undefined){return thresholds[threshold];}
thresholds[threshold]=limit;if(threshold==="s"){thresholds.ss=limit-1;}
return true;}
function humanize(argWithSuffix,argThresholds){if(!this.isValid()){return this.localeData().invalidDate();}
var withSuffix=false,th=thresholds,locale,output;if(typeof argWithSuffix==="object"){argThresholds=argWithSuffix;argWithSuffix=false;}
if(typeof argWithSuffix==="boolean"){withSuffix=argWithSuffix;}
if(typeof argThresholds==="object"){th=Object.assign({},thresholds,argThresholds);if(argThresholds.s!=null&&argThresholds.ss==null){th.ss=argThresholds.s-1;}}
locale=this.localeData();output=relativeTime$1(this,!withSuffix,th,locale);if(withSuffix){output=locale.pastFuture(+this,output);}
return locale.postformat(output);}
var abs$1=Math.abs;function sign(x){return(x>0)-(x<0)||+x;}
function toISOString$1(){if(!this.isValid()){return this.localeData().invalidDate();}
var seconds=abs$1(this._milliseconds)/1000,days=abs$1(this._days),months=abs$1(this._months),minutes,hours,years,s,total=this.asSeconds(),totalSign,ymSign,daysSign,hmsSign;if(!total){return"P0D";}
minutes=absFloor(seconds/60);hours=absFloor(minutes/60);seconds%=60;minutes%=60;years=absFloor(months/12);months%=12;s=seconds?seconds.toFixed(3).replace(/\.?0+$/,""):"";totalSign=total<0?"-":"";ymSign=sign(this._months)!==sign(total)?"-":"";daysSign=sign(this._days)!==sign(total)?"-":"";hmsSign=sign(this._milliseconds)!==sign(total)?"-":"";return(totalSign+"P"+
(years?ymSign+years+"Y":"")+
(months?ymSign+months+"M":"")+
(days?daysSign+days+"D":"")+
(hours||minutes||seconds?"T":"")+
(hours?hmsSign+hours+"H":"")+
(minutes?hmsSign+minutes+"M":"")+
(seconds?hmsSign+s+"S":""));}
var proto$2=Duration.prototype;proto$2.isValid=isValid$1;proto$2.abs=abs;proto$2.add=add$1;proto$2.subtract=subtract$1;proto$2.as=as;proto$2.asMilliseconds=asMilliseconds;proto$2.asSeconds=asSeconds;proto$2.asMinutes=asMinutes;proto$2.asHours=asHours;proto$2.asDays=asDays;proto$2.asWeeks=asWeeks;proto$2.asMonths=asMonths;proto$2.asQuarters=asQuarters;proto$2.asYears=asYears;proto$2.valueOf=valueOf$1;proto$2._bubble=bubble;proto$2.clone=clone$1;proto$2.get=get$2;proto$2.milliseconds=milliseconds;proto$2.seconds=seconds;proto$2.minutes=minutes;proto$2.hours=hours;proto$2.days=days;proto$2.weeks=weeks;proto$2.months=months;proto$2.years=years;proto$2.humanize=humanize;proto$2.toISOString=toISOString$1;proto$2.toString=toISOString$1;proto$2.toJSON=toISOString$1;proto$2.locale=locale;proto$2.localeData=localeData;proto$2.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1);proto$2.lang=lang;addFormatToken("X",0,0,"unix");addFormatToken("x",0,0,"valueOf");addRegexToken("x",matchSigned);addRegexToken("X",matchTimestamp);addParseToken("X",function(input,array,config){config._d=new Date(parseFloat(input)*1000);});addParseToken("x",function(input,array,config){config._d=new Date(toInt(input));});hooks.version="2.29.1";setHookCallback(createLocal);hooks.fn=proto;hooks.min=min;hooks.max=max;hooks.now=now;hooks.utc=createUTC;hooks.unix=createUnix;hooks.months=listMonths;hooks.isDate=isDate;hooks.locale=getSetGlobalLocale;hooks.invalid=createInvalid;hooks.duration=createDuration;hooks.isMoment=isMoment;hooks.weekdays=listWeekdays;hooks.parseZone=createInZone;hooks.localeData=getLocale;hooks.isDuration=isDuration;hooks.monthsShort=listMonthsShort;hooks.weekdaysMin=listWeekdaysMin;hooks.defineLocale=defineLocale;hooks.updateLocale=updateLocale;hooks.locales=listLocales;hooks.weekdaysShort=listWeekdaysShort;hooks.normalizeUnits=normalizeUnits;hooks.relativeTimeRounding=getSetRelativeTimeRounding;hooks.relativeTimeThreshold=getSetRelativeTimeThreshold;hooks.calendarFormat=getCalendarFormat;hooks.prototype=proto;hooks.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return hooks;});
(function(root,factory){"use strict";if(typeof module==="object"&&module.exports){module.exports=factory(require("moment"));}else if(typeof define==="function"&&define.amd){define(["moment"],factory);}else{factory(root.moment);}})(this,function(moment){"use strict";if(moment.version===undefined&&moment.default){moment=moment.default;}
var VERSION="0.5.32",zones={},links={},countries={},names={},guesses={},cachedGuess;if(!moment||typeof moment.version!=="string"){logError("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");}
var momentVersion=moment.version.split("."),major=+momentVersion[0],minor=+momentVersion[1];if(major<2||(major===2&&minor<6)){logError("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+
moment.version+". See momentjs.com");}
function charCodeToInt(charCode){if(charCode>96){return charCode-87;}else if(charCode>64){return charCode-29;}
return charCode-48;}
function unpackBase60(string){var i=0,parts=string.split("."),whole=parts[0],fractional=parts[1]||"",multiplier=1,num,out=0,sign=1;if(string.charCodeAt(0)===45){i=1;sign=-1;}
for(i;i<whole.length;i++){num=charCodeToInt(whole.charCodeAt(i));out=60*out+num;}
for(i=0;i<fractional.length;i++){multiplier=multiplier/60;num=charCodeToInt(fractional.charCodeAt(i));out+=num*multiplier;}
return out*sign;}
function arrayToInt(array){for(var i=0;i<array.length;i++){array[i]=unpackBase60(array[i]);}}
function intToUntil(array,length){for(var i=0;i<length;i++){array[i]=Math.round((array[i-1]||0)+array[i]*60000);}
array[length-1]=Infinity;}
function mapIndices(source,indices){var out=[],i;for(i=0;i<indices.length;i++){out[i]=source[indices[i]];}
return out;}
function unpack(string){var data=string.split("|"),offsets=data[2].split(" "),indices=data[3].split(""),untils=data[4].split(" ");arrayToInt(offsets);arrayToInt(indices);arrayToInt(untils);intToUntil(untils,indices.length);return{name:data[0],abbrs:mapIndices(data[1].split(" "),indices),offsets:mapIndices(offsets,indices),untils:untils,population:data[5]|0};}
function Zone(packedString){if(packedString){this._set(unpack(packedString));}}
Zone.prototype={_set:function(unpacked){this.name=unpacked.name;this.abbrs=unpacked.abbrs;this.untils=unpacked.untils;this.offsets=unpacked.offsets;this.population=unpacked.population;},_index:function(timestamp){var target=+timestamp,untils=this.untils,i;for(i=0;i<untils.length;i++){if(target<untils[i]){return i;}}},countries:function(){var zone_name=this.name;return Object.keys(countries).filter(function(country_code){return countries[country_code].zones.indexOf(zone_name)!==-1;});},parse:function(timestamp){var target=+timestamp,offsets=this.offsets,untils=this.untils,max=untils.length-1,offset,offsetNext,offsetPrev,i;for(i=0;i<max;i++){offset=offsets[i];offsetNext=offsets[i+1];offsetPrev=offsets[i?i-1:i];if(offset<offsetNext&&tz.moveAmbiguousForward){offset=offsetNext;}else if(offset>offsetPrev&&tz.moveInvalidForward){offset=offsetPrev;}
if(target<untils[i]-offset*60000){return offsets[i];}}
return offsets[max];},abbr:function(mom){return this.abbrs[this._index(mom)];},offset:function(mom){logError("zone.offset has been deprecated in favor of zone.utcOffset");return this.offsets[this._index(mom)];},utcOffset:function(mom){return this.offsets[this._index(mom)];}};function Country(country_name,zone_names){this.name=country_name;this.zones=zone_names;}
function OffsetAt(at){var timeString=at.toTimeString();var abbr=timeString.match(/\([a-z ]+\)/i);if(abbr&&abbr[0]){abbr=abbr[0].match(/[A-Z]/g);abbr=abbr?abbr.join(""):undefined;}else{abbr=timeString.match(/[A-Z]{3,5}/g);abbr=abbr?abbr[0]:undefined;}
if(abbr==="GMT"){abbr=undefined;}
this.at=+at;this.abbr=abbr;this.offset=at.getTimezoneOffset();}
function ZoneScore(zone){this.zone=zone;this.offsetScore=0;this.abbrScore=0;}
ZoneScore.prototype.scoreOffsetAt=function(offsetAt){this.offsetScore+=Math.abs(this.zone.utcOffset(offsetAt.at)-offsetAt.offset);if(this.zone.abbr(offsetAt.at).replace(/[^A-Z]/g,"")!==offsetAt.abbr){this.abbrScore++;}};function findChange(low,high){var mid,diff;while((diff=(((high.at-low.at)/12e4)|0)*6e4)){mid=new OffsetAt(new Date(low.at+diff));if(mid.offset===low.offset){low=mid;}else{high=mid;}}
return low;}
function userOffsets(){var startYear=new Date().getFullYear()-2,last=new OffsetAt(new Date(startYear,0,1)),offsets=[last],change,next,i;for(i=1;i<48;i++){next=new OffsetAt(new Date(startYear,i,1));if(next.offset!==last.offset){change=findChange(last,next);offsets.push(change);offsets.push(new OffsetAt(new Date(change.at+6e4)));}
last=next;}
for(i=0;i<4;i++){offsets.push(new OffsetAt(new Date(startYear+i,0,1)));offsets.push(new OffsetAt(new Date(startYear+i,6,1)));}
return offsets;}
function sortZoneScores(a,b){if(a.offsetScore!==b.offsetScore){return a.offsetScore-b.offsetScore;}
if(a.abbrScore!==b.abbrScore){return a.abbrScore-b.abbrScore;}
if(a.zone.population!==b.zone.population){return b.zone.population-a.zone.population;}
return b.zone.name.localeCompare(a.zone.name);}
function addToGuesses(name,offsets){var i,offset;arrayToInt(offsets);for(i=0;i<offsets.length;i++){offset=offsets[i];guesses[offset]=guesses[offset]||{};guesses[offset][name]=true;}}
function guessesForUserOffsets(offsets){var offsetsLength=offsets.length,filteredGuesses={},out=[],i,j,guessesOffset;for(i=0;i<offsetsLength;i++){guessesOffset=guesses[offsets[i].offset]||{};for(j in guessesOffset){if(guessesOffset.hasOwnProperty(j)){filteredGuesses[j]=true;}}}
for(i in filteredGuesses){if(filteredGuesses.hasOwnProperty(i)){out.push(names[i]);}}
return out;}
function rebuildGuess(){try{var intlName=Intl.DateTimeFormat().resolvedOptions().timeZone;if(intlName&&intlName.length>3){var name=names[normalizeName(intlName)];if(name){return name;}
logError("Moment Timezone found "+
intlName+" from the Intl api, but did not have that data loaded.");}}catch(e){}
var offsets=userOffsets(),offsetsLength=offsets.length,guesses=guessesForUserOffsets(offsets),zoneScores=[],zoneScore,i,j;for(i=0;i<guesses.length;i++){zoneScore=new ZoneScore(getZone(guesses[i]),offsetsLength);for(j=0;j<offsetsLength;j++){zoneScore.scoreOffsetAt(offsets[j]);}
zoneScores.push(zoneScore);}
zoneScores.sort(sortZoneScores);return zoneScores.length>0?zoneScores[0].zone.name:undefined;}
function guess(ignoreCache){if(!cachedGuess||ignoreCache){cachedGuess=rebuildGuess();}
return cachedGuess;}
function normalizeName(name){return(name||"").toLowerCase().replace(/\//g,"_");}
function addZone(packed){var i,name,split,normalized;if(typeof packed==="string"){packed=[packed];}
for(i=0;i<packed.length;i++){split=packed[i].split("|");name=split[0];normalized=normalizeName(name);zones[normalized]=packed[i];names[normalized]=name;addToGuesses(normalized,split[2].split(" "));}}
function getZone(name,caller){name=normalizeName(name);var zone=zones[name];var link;if(zone instanceof Zone){return zone;}
if(typeof zone==="string"){zone=new Zone(zone);zones[name]=zone;return zone;}
if(links[name]&&caller!==getZone&&(link=getZone(links[name],getZone))){zone=zones[name]=new Zone();zone._set(link);zone.name=names[name];return zone;}
return null;}
function getNames(){var i,out=[];for(i in names){if(names.hasOwnProperty(i)&&(zones[i]||zones[links[i]])&&names[i]){out.push(names[i]);}}
return out.sort();}
function getCountryNames(){return Object.keys(countries);}
function addLink(aliases){var i,alias,normal0,normal1;if(typeof aliases==="string"){aliases=[aliases];}
for(i=0;i<aliases.length;i++){alias=aliases[i].split("|");normal0=normalizeName(alias[0]);normal1=normalizeName(alias[1]);links[normal0]=normal1;names[normal0]=alias[0];links[normal1]=normal0;names[normal1]=alias[1];}}
function addCountries(data){var i,country_code,country_zones,split;if(!data||!data.length)return;for(i=0;i<data.length;i++){split=data[i].split("|");country_code=split[0].toUpperCase();country_zones=split[1].split(" ");countries[country_code]=new Country(country_code,country_zones);}}
function getCountry(name){name=name.toUpperCase();return countries[name]||null;}
function zonesForCountry(country,with_offset){country=getCountry(country);if(!country)return null;var zones=country.zones.sort();if(with_offset){return zones.map(function(zone_name){var zone=getZone(zone_name);return{name:zone_name,offset:zone.utcOffset(new Date())};});}
return zones;}
function loadData(data){addZone(data.zones);addLink(data.links);addCountries(data.countries);tz.dataVersion=data.version;}
function zoneExists(name){if(!zoneExists.didShowError){zoneExists.didShowError=true;logError("moment.tz.zoneExists('"+
name+"') has been deprecated in favor of !moment.tz.zone('"+
name+"')");}
return!!getZone(name);}
function needsOffset(m){var isUnixTimestamp=m._f==="X"||m._f==="x";return!!(m._a&&m._tzm===undefined&&!isUnixTimestamp);}
function logError(message){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(message);}}
function tz(input){var args=Array.prototype.slice.call(arguments,0,-1),name=arguments[arguments.length-1],zone=getZone(name),out=moment.utc.apply(null,args);if(zone&&!moment.isMoment(input)&&needsOffset(out)){out.add(zone.parse(out),"minutes");}
out.tz(name);return out;}
tz.version=VERSION;tz.dataVersion="";tz._zones=zones;tz._links=links;tz._names=names;tz._countries=countries;tz.add=addZone;tz.link=addLink;tz.load=loadData;tz.zone=getZone;tz.zoneExists=zoneExists;tz.guess=guess;tz.names=getNames;tz.Zone=Zone;tz.unpack=unpack;tz.unpackBase60=unpackBase60;tz.needsOffset=needsOffset;tz.moveInvalidForward=true;tz.moveAmbiguousForward=false;tz.countries=getCountryNames;tz.zonesForCountry=zonesForCountry;var fn=moment.fn;moment.tz=tz;moment.defaultZone=null;moment.updateOffset=function(mom,keepTime){var zone=moment.defaultZone,offset;if(mom._z===undefined){if(zone&&needsOffset(mom)&&!mom._isUTC){mom._d=moment.utc(mom._a)._d;mom.utc().add(zone.parse(mom),"minutes");}
mom._z=zone;}
if(mom._z){offset=mom._z.utcOffset(mom);if(Math.abs(offset)<16){offset=offset/60;}
if(mom.utcOffset!==undefined){var z=mom._z;mom.utcOffset(-offset,keepTime);mom._z=z;}else{mom.zone(offset,keepTime);}}};fn.tz=function(name,keepTime){if(name){if(typeof name!=="string"){throw new Error("Time zone name must be a string, got "+
name+" ["+
typeof name+"]");}
this._z=getZone(name);if(this._z){moment.updateOffset(this,keepTime);}else{logError("Moment Timezone has no data for "+
name+". See http://momentjs.com/timezone/docs/#/data-loading/.");}
return this;}
if(this._z){return this._z.name;}};function abbrWrap(old){return function(){if(this._z){return this._z.abbr(this);}
return old.call(this);};}
function resetZoneWrap(old){return function(){this._z=null;return old.apply(this,arguments);};}
function resetZoneWrap2(old){return function(){if(arguments.length>0)this._z=null;return old.apply(this,arguments);};}
fn.zoneName=abbrWrap(fn.zoneName);fn.zoneAbbr=abbrWrap(fn.zoneAbbr);fn.utc=resetZoneWrap(fn.utc);fn.local=resetZoneWrap(fn.local);fn.utcOffset=resetZoneWrap2(fn.utcOffset);moment.tz.setDefault=function(name){if(major<2||(major===2&&minor<9)){logError("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+
moment.version+".");}
moment.defaultZone=name?getZone(name):null;return moment;};var momentProperties=moment.momentProperties;if(Object.prototype.toString.call(momentProperties)==="[object Array]"){momentProperties.push("_z");momentProperties.push("_a");}else if(momentProperties){momentProperties._z=null;}
loadData({version:"2020a",zones:["Africa/Abidjan|GMT|0|0||48e5","Africa/Nairobi|EAT|-30|0||47e5","Africa/Algiers|CET|-10|0||26e5","Africa/Lagos|WAT|-10|0||17e6","Africa/Maputo|CAT|-20|0||26e5","Africa/Cairo|EET|-20|0||15e6","Africa/Casablanca|+00 +01|0 -10|010101010101010101010101010101|1O9e0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 28M0 e00 2600 gM0 2600 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0|32e5","Europe/Paris|CET CEST|-10 -20|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|11e6","Africa/Johannesburg|SAST|-20|0||84e5","Africa/Khartoum|EAT CAT|-30 -20|01|1Usl0|51e5","Africa/Sao_Tome|GMT WAT|0 -10|010|1UQN0 2q00|","Africa/Windhoek|CAT WAT|-20 -10|0101010|1Oc00 11B0 1nX0 11B0 1nX0 11B0|32e4","America/Adak|HST HDT|a0 90|01010101010101010101010|1O100 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|326","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1O0X0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|30e4","America/Santo_Domingo|AST|40|0||29e5","America/Fortaleza|-03|30|0||34e5","America/Asuncion|-03 -04|30 40|01010101010101010101010|1O6r0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0|28e5","America/Panama|EST|50|0||15e5","America/Mexico_City|CST CDT|60 50|01010101010101010101010|1Oc80 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|20e6","America/Managua|CST|60|0||22e5","America/La_Paz|-04|40|0||19e5","America/Lima|-05|50|0||11e6","America/Denver|MST MDT|70 60|01010101010101010101010|1O0V0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|26e5","America/Campo_Grande|-03 -04|30 40|0101010101|1NTf0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0|77e4","America/Cancun|CST EST|60 50|01|1NKU0|63e4","America/Caracas|-0430 -04|4u 40|01|1QMT0|29e5","America/Chicago|CST CDT|60 50|01010101010101010101010|1O0U0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|92e5","America/Chihuahua|MST MDT|70 60|01010101010101010101010|1Oc90 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|81e4","America/Phoenix|MST|70|0||42e5","America/Whitehorse|PST PDT MST|80 70 70|010101010102|1O0W0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0|23e3","America/New_York|EST EDT|50 40|01010101010101010101010|1O0T0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e6","America/Los_Angeles|PST PDT|80 70|01010101010101010101010|1O0W0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|15e6","America/Fort_Nelson|PST MST|80 70|01|1O0W0|39e2","America/Halifax|AST ADT|40 30|01010101010101010101010|1O0S0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|39e4","America/Godthab|-03 -02|30 20|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|17e3","America/Grand_Turk|EST EDT AST|50 40 40|0121010101010101010|1O0T0 1zb0 5Ip0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e2","America/Havana|CST CDT|50 40|01010101010101010101010|1O0R0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0|21e5","America/Metlakatla|PST AKST AKDT|80 90 80|01212120121212121212121|1PAa0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 uM0 jB0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|14e2","America/Miquelon|-03 -02|30 20|01010101010101010101010|1O0R0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|61e2","America/Montevideo|-02 -03|20 30|01|1O0Q0|17e5","America/Noronha|-02|20|0||30e2","America/Port-au-Prince|EST EDT|50 40|010101010101010101010|1O0T0 1zb0 3iN0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e5","Antarctica/Palmer|-03 -04|30 40|010|1QSr0 Ap0|40","America/Santiago|-03 -04|30 40|010101010101010101010|1QSr0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0|62e5","America/Sao_Paulo|-02 -03|20 30|0101010101|1NTe0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0|20e6","Atlantic/Azores|-01 +00|10 0|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|25e4","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1O0Ru 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|11e4","Antarctica/Casey|+08 +11|-80 -b0|010|1RWg0 3m10|10","Asia/Bangkok|+07|-70|0||15e6","Asia/Vladivostok|+10|-a0|0||60e4","Pacific/Bougainville|+11|-b0|0||18e4","Asia/Tashkent|+05|-50|0||23e5","Pacific/Auckland|NZDT NZST|-d0 -c0|01010101010101010101010|1ObO0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00|14e5","Asia/Baghdad|+03|-30|0||66e5","Antarctica/Troll|+00 +02|0 -20|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|40","Asia/Dhaka|+06|-60|0||16e6","Asia/Amman|EET EEST|-20 -30|01010101010101010101010|1O8m0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0|25e5","Asia/Kamchatka|+12|-c0|0||18e4","Asia/Baku|+04 +05|-40 -50|010|1O9c0 1o00|27e5","Asia/Barnaul|+06 +07|-60 -70|01|1QyI0|","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1O9a0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0|22e5","Asia/Kuala_Lumpur|+08|-80|0||71e5","Asia/Kolkata|IST|-5u|0||15e6","Asia/Chita|+08 +09|-80 -90|01|1QyG0|33e4","Asia/Ulaanbaatar|+08 +09|-80 -90|01010|1O8G0 1cJ0 1cP0 1cJ0|12e5","Asia/Shanghai|CST|-80|0||23e6","Asia/Colombo|+0530|-5u|0||22e5","Asia/Damascus|EET EEST|-20 -30|01010101010101010101010|1O8m0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0|26e5","Asia/Yakutsk|+09|-90|0||28e4","Asia/Dubai|+04|-40|0||39e5","Asia/Famagusta|EET EEST +03|-20 -30 -30|0101201010101010101010|1O9d0 1o00 11A0 15U0 2Ks0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1O8K0 1nz0 1220 1qL0 WN0 1qL0 WN0 1qL0 11c0 1oo0 11c0 1rc0 Wo0 1rc0 Wo0 1rc0 11c0 1oo0 11c0 1oo0 11c0 1oo0|18e5","Asia/Hong_Kong|HKT|-80|0||73e5","Asia/Hovd|+07 +08|-70 -80|01010|1O8H0 1cJ0 1cP0 1cJ0|81e3","Europe/Istanbul|EET EEST +03|-20 -30 -30|01012|1O9d0 1tA0 U00 15w0|13e6","Asia/Jakarta|WIB|-70|0||31e6","Asia/Jayapura|WIT|-90|0||26e4","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1O8o0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0|81e4","Asia/Kabul|+0430|-4u|0||46e5","Asia/Karachi|PKT|-50|0||24e6","Asia/Kathmandu|+0545|-5J|0||12e5","Asia/Magadan|+10 +11|-a0 -b0|01|1QJQ0|95e3","Asia/Makassar|WITA|-80|0||15e5","Asia/Manila|PST|-80|0||24e6","Europe/Athens|EET EEST|-20 -30|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|35e5","Asia/Novosibirsk|+06 +07|-60 -70|01|1Rmk0|15e5","Asia/Pyongyang|KST KST|-90 -8u|010|1P4D0 6BA0|29e5","Asia/Qyzylorda|+06 +05|-60 -50|01|1Xei0|73e4","Asia/Rangoon|+0630|-6u|0||48e5","Asia/Sakhalin|+10 +11|-a0 -b0|01|1QyE0|58e4","Asia/Seoul|KST|-90|0||23e6","Asia/Tehran|+0330 +0430|-3u -4u|01010101010101010101010|1O6ku 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0|14e6","Asia/Tokyo|JST|-90|0||38e6","Asia/Tomsk|+06 +07|-60 -70|01|1QXU0|10e5","Europe/Lisbon|WET WEST|0 -10|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|27e5","Atlantic/Cape_Verde|-01|10|0||50e4","Australia/Sydney|AEDT AEST|-b0 -a0|01010101010101010101010|1ObQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0|40e5","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1ObQu 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0|11e5","Australia/Brisbane|AEST|-a0|0||20e5","Australia/Darwin|ACST|-9u|0||12e4","Australia/Eucla|+0845|-8J|0||368","Australia/Lord_Howe|+11 +1030|-b0 -au|01010101010101010101010|1ObP0 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1fzu 1cMu 1cLu 1cMu|347","Australia/Perth|AWST|-80|0||18e5","Pacific/Easter|-05 -06|50 60|010101010101010101010|1QSr0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0|30e2","Europe/Dublin|GMT IST|0 -10|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|12e5","Etc/GMT-1|+01|-10|0||","Pacific/Fakaofo|+13|-d0|0||483","Pacific/Kiritimati|+14|-e0|0||51e2","Etc/GMT-2|+02|-20|0||","Pacific/Tahiti|-10|a0|0||18e4","Pacific/Niue|-11|b0|0||12e2","Etc/GMT+12|-12|c0|0||","Pacific/Galapagos|-06|60|0||25e3","Etc/GMT+7|-07|70|0||","Pacific/Pitcairn|-08|80|0||56","Pacific/Gambier|-09|90|0||125","Etc/UTC|UTC|0|0||","Europe/Ulyanovsk|+03 +04|-30 -40|01|1QyL0|13e5","Europe/London|GMT BST|0 -10|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|10e6","Europe/Chisinau|EET EEST|-20 -30|01010101010101010101010|1O9c0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|67e4","Europe/Moscow|MSK|-30|0||16e6","Europe/Saratov|+03 +04|-30 -40|01|1Sfz0|","Europe/Volgograd|+03 +04|-30 -40|01|1WQL0|10e5","Pacific/Honolulu|HST|a0|0||37e4","MET|MET MEST|-10 -20|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|","Pacific/Chatham|+1345 +1245|-dJ -cJ|01010101010101010101010|1ObO0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00|600","Pacific/Apia|+14 +13|-e0 -d0|01010101010101010101010|1ObO0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00|37e3","Pacific/Fiji|+13 +12|-d0 -c0|01010101010101010101010|1NF20 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 20o0 pc0 20o0 s00 20o0 pc0 20o0 pc0 20o0 pc0 20o0 pc0 20o0|88e4","Pacific/Guam|ChST|-a0|0||17e4","Pacific/Marquesas|-0930|9u|0||86e2","Pacific/Pago_Pago|SST|b0|0||37e2","Pacific/Norfolk|+1130 +11 +12|-bu -b0 -c0|012121212121212|1PoCu 9Jcu 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0|25e4","Pacific/Tongatapu|+13 +14|-d0 -e0|010|1S4d0 s00|75e3"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Algiers|Africa/Tunis","Africa/Cairo|Africa/Tripoli","Africa/Cairo|Egypt","Africa/Cairo|Europe/Kaliningrad","Africa/Cairo|Libya","Africa/Casablanca|Africa/El_Aaiun","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Lagos|Africa/Bangui","Africa/Lagos|Africa/Brazzaville","Africa/Lagos|Africa/Douala","Africa/Lagos|Africa/Kinshasa","Africa/Lagos|Africa/Libreville","Africa/Lagos|Africa/Luanda","Africa/Lagos|Africa/Malabo","Africa/Lagos|Africa/Ndjamena","Africa/Lagos|Africa/Niamey","Africa/Lagos|Africa/Porto-Novo","Africa/Maputo|Africa/Blantyre","Africa/Maputo|Africa/Bujumbura","Africa/Maputo|Africa/Gaborone","Africa/Maputo|Africa/Harare","Africa/Maputo|Africa/Kigali","Africa/Maputo|Africa/Lubumbashi","Africa/Maputo|Africa/Lusaka","Africa/Nairobi|Africa/Addis_Ababa","Africa/Nairobi|Africa/Asmara","Africa/Nairobi|Africa/Asmera","Africa/Nairobi|Africa/Dar_es_Salaam","Africa/Nairobi|Africa/Djibouti","Africa/Nairobi|Africa/Juba","Africa/Nairobi|Africa/Kampala","Africa/Nairobi|Africa/Mogadishu","Africa/Nairobi|Indian/Antananarivo","Africa/Nairobi|Indian/Comoro","Africa/Nairobi|Indian/Mayotte","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Campo_Grande|America/Cuiaba","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Beulah","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Chihuahua|America/Mazatlan","America/Chihuahua|Mexico/BajaSur","America/Denver|America/Boise","America/Denver|America/Cambridge_Bay","America/Denver|America/Edmonton","America/Denver|America/Inuvik","America/Denver|America/Ojinaga","America/Denver|America/Shiprock","America/Denver|America/Yellowknife","America/Denver|Canada/Mountain","America/Denver|MST7MDT","America/Denver|Navajo","America/Denver|US/Mountain","America/Fortaleza|America/Araguaina","America/Fortaleza|America/Argentina/Buenos_Aires","America/Fortaleza|America/Argentina/Catamarca","America/Fortaleza|America/Argentina/ComodRivadavia","America/Fortaleza|America/Argentina/Cordoba","America/Fortaleza|America/Argentina/Jujuy","America/Fortaleza|America/Argentina/La_Rioja","America/Fortaleza|America/Argentina/Mendoza","America/Fortaleza|America/Argentina/Rio_Gallegos","America/Fortaleza|America/Argentina/Salta","America/Fortaleza|America/Argentina/San_Juan","America/Fortaleza|America/Argentina/San_Luis","America/Fortaleza|America/Argentina/Tucuman","America/Fortaleza|America/Argentina/Ushuaia","America/Fortaleza|America/Bahia","America/Fortaleza|America/Belem","America/Fortaleza|America/Buenos_Aires","America/Fortaleza|America/Catamarca","America/Fortaleza|America/Cayenne","America/Fortaleza|America/Cordoba","America/Fortaleza|America/Jujuy","America/Fortaleza|America/Maceio","America/Fortaleza|America/Mendoza","America/Fortaleza|America/Paramaribo","America/Fortaleza|America/Recife","America/Fortaleza|America/Rosario","America/Fortaleza|America/Santarem","America/Fortaleza|Antarctica/Rothera","America/Fortaleza|Atlantic/Stanley","America/Fortaleza|Etc/GMT+3","America/Godthab|America/Nuuk","America/Halifax|America/Glace_Bay","America/Halifax|America/Goose_Bay","America/Halifax|America/Moncton","America/Halifax|America/Thule","America/Halifax|Atlantic/Bermuda","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/La_Paz|America/Boa_Vista","America/La_Paz|America/Guyana","America/La_Paz|America/Manaus","America/La_Paz|America/Porto_Velho","America/La_Paz|Brazil/West","America/La_Paz|Etc/GMT+4","America/Lima|America/Bogota","America/Lima|America/Eirunepe","America/Lima|America/Guayaquil","America/Lima|America/Porto_Acre","America/Lima|America/Rio_Branco","America/Lima|Brazil/Acre","America/Lima|Etc/GMT+5","America/Los_Angeles|America/Ensenada","America/Los_Angeles|America/Santa_Isabel","America/Los_Angeles|America/Tijuana","America/Los_Angeles|America/Vancouver","America/Los_Angeles|Canada/Pacific","America/Los_Angeles|Mexico/BajaNorte","America/Los_Angeles|PST8PDT","America/Los_Angeles|US/Pacific","America/Los_Angeles|US/Pacific-New","America/Managua|America/Belize","America/Managua|America/Costa_Rica","America/Managua|America/El_Salvador","America/Managua|America/Guatemala","America/Managua|America/Regina","America/Managua|America/Swift_Current","America/Managua|America/Tegucigalpa","America/Managua|Canada/Saskatchewan","America/Mexico_City|America/Bahia_Banderas","America/Mexico_City|America/Merida","America/Mexico_City|America/Monterrey","America/Mexico_City|Mexico/General","America/New_York|America/Detroit","America/New_York|America/Fort_Wayne","America/New_York|America/Indiana/Indianapolis","America/New_York|America/Indiana/Marengo","America/New_York|America/Indiana/Petersburg","America/New_York|America/Indiana/Vevay","America/New_York|America/Indiana/Vincennes","America/New_York|America/Indiana/Winamac","America/New_York|America/Indianapolis","America/New_York|America/Iqaluit","America/New_York|America/Kentucky/Louisville","America/New_York|America/Kentucky/Monticello","America/New_York|America/Louisville","America/New_York|America/Montreal","America/New_York|America/Nassau","America/New_York|America/Nipigon","America/New_York|America/Pangnirtung","America/New_York|America/Thunder_Bay","America/New_York|America/Toronto","America/New_York|Canada/Eastern","America/New_York|EST5EDT","America/New_York|US/East-Indiana","America/New_York|US/Eastern","America/New_York|US/Michigan","America/Noronha|Atlantic/South_Georgia","America/Noronha|Brazil/DeNoronha","America/Noronha|Etc/GMT+2","America/Panama|America/Atikokan","America/Panama|America/Cayman","America/Panama|America/Coral_Harbour","America/Panama|America/Jamaica","America/Panama|EST","America/Panama|Jamaica","America/Phoenix|America/Creston","America/Phoenix|America/Dawson_Creek","America/Phoenix|America/Hermosillo","America/Phoenix|MST","America/Phoenix|US/Arizona","America/Santiago|Chile/Continental","America/Santo_Domingo|America/Anguilla","America/Santo_Domingo|America/Antigua","America/Santo_Domingo|America/Aruba","America/Santo_Domingo|America/Barbados","America/Santo_Domingo|America/Blanc-Sablon","America/Santo_Domingo|America/Curacao","America/Santo_Domingo|America/Dominica","America/Santo_Domingo|America/Grenada","America/Santo_Domingo|America/Guadeloupe","America/Santo_Domingo|America/Kralendijk","America/Santo_Domingo|America/Lower_Princes","America/Santo_Domingo|America/Marigot","America/Santo_Domingo|America/Martinique","America/Santo_Domingo|America/Montserrat","America/Santo_Domingo|America/Port_of_Spain","America/Santo_Domingo|America/Puerto_Rico","America/Santo_Domingo|America/St_Barthelemy","America/Santo_Domingo|America/St_Kitts","America/Santo_Domingo|America/St_Lucia","America/Santo_Domingo|America/St_Thomas","America/Santo_Domingo|America/St_Vincent","America/Santo_Domingo|America/Tortola","America/Santo_Domingo|America/Virgin","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","America/Whitehorse|America/Dawson","America/Whitehorse|Canada/Yukon","Antarctica/Palmer|America/Punta_Arenas","Asia/Baghdad|Antarctica/Syowa","Asia/Baghdad|Asia/Aden","Asia/Baghdad|Asia/Bahrain","Asia/Baghdad|Asia/Kuwait","Asia/Baghdad|Asia/Qatar","Asia/Baghdad|Asia/Riyadh","Asia/Baghdad|Etc/GMT-3","Asia/Baghdad|Europe/Kirov","Asia/Baghdad|Europe/Minsk","Asia/Bangkok|Antarctica/Davis","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Krasnoyarsk","Asia/Bangkok|Asia/Novokuznetsk","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Vientiane","Asia/Bangkok|Etc/GMT-7","Asia/Bangkok|Indian/Christmas","Asia/Dhaka|Antarctica/Vostok","Asia/Dhaka|Asia/Almaty","Asia/Dhaka|Asia/Bishkek","Asia/Dhaka|Asia/Dacca","Asia/Dhaka|Asia/Kashgar","Asia/Dhaka|Asia/Omsk","Asia/Dhaka|Asia/Qostanay","Asia/Dhaka|Asia/Thimbu","Asia/Dhaka|Asia/Thimphu","Asia/Dhaka|Asia/Urumqi","Asia/Dhaka|Etc/GMT-6","Asia/Dhaka|Indian/Chagos","Asia/Dubai|Asia/Muscat","Asia/Dubai|Asia/Tbilisi","Asia/Dubai|Asia/Yerevan","Asia/Dubai|Etc/GMT-4","Asia/Dubai|Europe/Samara","Asia/Dubai|Indian/Mahe","Asia/Dubai|Indian/Mauritius","Asia/Dubai|Indian/Reunion","Asia/Gaza|Asia/Hebron","Asia/Hong_Kong|Hongkong","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kamchatka|Asia/Anadyr","Asia/Kamchatka|Etc/GMT-12","Asia/Kamchatka|Kwajalein","Asia/Kamchatka|Pacific/Funafuti","Asia/Kamchatka|Pacific/Kwajalein","Asia/Kamchatka|Pacific/Majuro","Asia/Kamchatka|Pacific/Nauru","Asia/Kamchatka|Pacific/Tarawa","Asia/Kamchatka|Pacific/Wake","Asia/Kamchatka|Pacific/Wallis","Asia/Kathmandu|Asia/Katmandu","Asia/Kolkata|Asia/Calcutta","Asia/Kuala_Lumpur|Asia/Brunei","Asia/Kuala_Lumpur|Asia/Irkutsk","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Kuala_Lumpur|Asia/Singapore","Asia/Kuala_Lumpur|Etc/GMT-8","Asia/Kuala_Lumpur|Singapore","Asia/Makassar|Asia/Ujung_Pandang","Asia/Rangoon|Asia/Yangon","Asia/Rangoon|Indian/Cocos","Asia/Seoul|ROK","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|Asia/Macao","Asia/Shanghai|Asia/Macau","Asia/Shanghai|Asia/Taipei","Asia/Shanghai|PRC","Asia/Shanghai|ROC","Asia/Tashkent|Antarctica/Mawson","Asia/Tashkent|Asia/Aqtau","Asia/Tashkent|Asia/Aqtobe","Asia/Tashkent|Asia/Ashgabat","Asia/Tashkent|Asia/Ashkhabad","Asia/Tashkent|Asia/Atyrau","Asia/Tashkent|Asia/Dushanbe","Asia/Tashkent|Asia/Oral","Asia/Tashkent|Asia/Samarkand","Asia/Tashkent|Asia/Yekaterinburg","Asia/Tashkent|Etc/GMT-5","Asia/Tashkent|Indian/Kerguelen","Asia/Tashkent|Indian/Maldives","Asia/Tehran|Iran","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Choibalsan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Asia/Vladivostok|Antarctica/DumontDUrville","Asia/Vladivostok|Asia/Ust-Nera","Asia/Vladivostok|Etc/GMT-10","Asia/Vladivostok|Pacific/Chuuk","Asia/Vladivostok|Pacific/Port_Moresby","Asia/Vladivostok|Pacific/Truk","Asia/Vladivostok|Pacific/Yap","Asia/Yakutsk|Asia/Dili","Asia/Yakutsk|Asia/Khandyga","Asia/Yakutsk|Etc/GMT-9","Asia/Yakutsk|Pacific/Palau","Atlantic/Azores|America/Scoresbysund","Atlantic/Cape_Verde|Etc/GMT+1","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/Lord_Howe|Australia/LHI","Australia/Perth|Australia/West","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/Currie","Australia/Sydney|Australia/Hobart","Australia/Sydney|Australia/Melbourne","Australia/Sydney|Australia/NSW","Australia/Sydney|Australia/Tasmania","Australia/Sydney|Australia/Victoria","Etc/UTC|Etc/UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UCT","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Athens|Asia/Nicosia","Europe/Athens|EET","Europe/Athens|Europe/Bucharest","Europe/Athens|Europe/Helsinki","Europe/Athens|Europe/Kiev","Europe/Athens|Europe/Mariehamn","Europe/Athens|Europe/Nicosia","Europe/Athens|Europe/Riga","Europe/Athens|Europe/Sofia","Europe/Athens|Europe/Tallinn","Europe/Athens|Europe/Uzhgorod","Europe/Athens|Europe/Vilnius","Europe/Athens|Europe/Zaporozhye","Europe/Chisinau|Europe/Tiraspol","Europe/Dublin|Eire","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Turkey","Europe/Lisbon|Atlantic/Canary","Europe/Lisbon|Atlantic/Faeroe","Europe/Lisbon|Atlantic/Faroe","Europe/Lisbon|Atlantic/Madeira","Europe/Lisbon|Portugal","Europe/Lisbon|WET","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Moscow|Europe/Simferopol","Europe/Moscow|W-SU","Europe/Paris|Africa/Ceuta","Europe/Paris|Arctic/Longyearbyen","Europe/Paris|Atlantic/Jan_Mayen","Europe/Paris|CET","Europe/Paris|Europe/Amsterdam","Europe/Paris|Europe/Andorra","Europe/Paris|Europe/Belgrade","Europe/Paris|Europe/Berlin","Europe/Paris|Europe/Bratislava","Europe/Paris|Europe/Brussels","Europe/Paris|Europe/Budapest","Europe/Paris|Europe/Busingen","Europe/Paris|Europe/Copenhagen","Europe/Paris|Europe/Gibraltar","Europe/Paris|Europe/Ljubljana","Europe/Paris|Europe/Luxembourg","Europe/Paris|Europe/Madrid","Europe/Paris|Europe/Malta","Europe/Paris|Europe/Monaco","Europe/Paris|Europe/Oslo","Europe/Paris|Europe/Podgorica","Europe/Paris|Europe/Prague","Europe/Paris|Europe/Rome","Europe/Paris|Europe/San_Marino","Europe/Paris|Europe/Sarajevo","Europe/Paris|Europe/Skopje","Europe/Paris|Europe/Stockholm","Europe/Paris|Europe/Tirane","Europe/Paris|Europe/Vaduz","Europe/Paris|Europe/Vatican","Europe/Paris|Europe/Vienna","Europe/Paris|Europe/Warsaw","Europe/Paris|Europe/Zagreb","Europe/Paris|Europe/Zurich","Europe/Paris|Poland","Europe/Ulyanovsk|Europe/Astrakhan","Pacific/Auckland|Antarctica/McMurdo","Pacific/Auckland|Antarctica/South_Pole","Pacific/Auckland|NZ","Pacific/Bougainville|Antarctica/Macquarie","Pacific/Bougainville|Asia/Srednekolymsk","Pacific/Bougainville|Etc/GMT-11","Pacific/Bougainville|Pacific/Efate","Pacific/Bougainville|Pacific/Guadalcanal","Pacific/Bougainville|Pacific/Kosrae","Pacific/Bougainville|Pacific/Noumea","Pacific/Bougainville|Pacific/Pohnpei","Pacific/Bougainville|Pacific/Ponape","Pacific/Chatham|NZ-CHAT","Pacific/Easter|Chile/EasterIsland","Pacific/Fakaofo|Etc/GMT-13","Pacific/Fakaofo|Pacific/Enderbury","Pacific/Galapagos|Etc/GMT+6","Pacific/Gambier|Etc/GMT+9","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|HST","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Kiritimati|Etc/GMT-14","Pacific/Niue|Etc/GMT+11","Pacific/Pago_Pago|Pacific/Midway","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Pitcairn|Etc/GMT+8","Pacific/Tahiti|Etc/GMT+10","Pacific/Tahiti|Pacific/Rarotonga"],countries:["AD|Europe/Andorra","AE|Asia/Dubai","AF|Asia/Kabul","AG|America/Port_of_Spain America/Antigua","AI|America/Port_of_Spain America/Anguilla","AL|Europe/Tirane","AM|Asia/Yerevan","AO|Africa/Lagos Africa/Luanda","AQ|Antarctica/Casey Antarctica/Davis Antarctica/DumontDUrville Antarctica/Mawson Antarctica/Palmer Antarctica/Rothera Antarctica/Syowa Antarctica/Troll Antarctica/Vostok Pacific/Auckland Antarctica/McMurdo","AR|America/Argentina/Buenos_Aires America/Argentina/Cordoba America/Argentina/Salta America/Argentina/Jujuy America/Argentina/Tucuman America/Argentina/Catamarca America/Argentina/La_Rioja America/Argentina/San_Juan America/Argentina/Mendoza America/Argentina/San_Luis America/Argentina/Rio_Gallegos America/Argentina/Ushuaia","AS|Pacific/Pago_Pago","AT|Europe/Vienna","AU|Australia/Lord_Howe Antarctica/Macquarie Australia/Hobart Australia/Currie Australia/Melbourne Australia/Sydney Australia/Broken_Hill Australia/Brisbane Australia/Lindeman Australia/Adelaide Australia/Darwin Australia/Perth Australia/Eucla","AW|America/Curacao America/Aruba","AX|Europe/Helsinki Europe/Mariehamn","AZ|Asia/Baku","BA|Europe/Belgrade Europe/Sarajevo","BB|America/Barbados","BD|Asia/Dhaka","BE|Europe/Brussels","BF|Africa/Abidjan Africa/Ouagadougou","BG|Europe/Sofia","BH|Asia/Qatar Asia/Bahrain","BI|Africa/Maputo Africa/Bujumbura","BJ|Africa/Lagos Africa/Porto-Novo","BL|America/Port_of_Spain America/St_Barthelemy","BM|Atlantic/Bermuda","BN|Asia/Brunei","BO|America/La_Paz","BQ|America/Curacao America/Kralendijk","BR|America/Noronha America/Belem America/Fortaleza America/Recife America/Araguaina America/Maceio America/Bahia America/Sao_Paulo America/Campo_Grande America/Cuiaba America/Santarem America/Porto_Velho America/Boa_Vista America/Manaus America/Eirunepe America/Rio_Branco","BS|America/Nassau","BT|Asia/Thimphu","BW|Africa/Maputo Africa/Gaborone","BY|Europe/Minsk","BZ|America/Belize","CA|America/St_Johns America/Halifax America/Glace_Bay America/Moncton America/Goose_Bay America/Blanc-Sablon America/Toronto America/Nipigon America/Thunder_Bay America/Iqaluit America/Pangnirtung America/Atikokan America/Winnipeg America/Rainy_River America/Resolute America/Rankin_Inlet America/Regina America/Swift_Current America/Edmonton America/Cambridge_Bay America/Yellowknife America/Inuvik America/Creston America/Dawson_Creek America/Fort_Nelson America/Vancouver America/Whitehorse America/Dawson","CC|Indian/Cocos","CD|Africa/Maputo Africa/Lagos Africa/Kinshasa Africa/Lubumbashi","CF|Africa/Lagos Africa/Bangui","CG|Africa/Lagos Africa/Brazzaville","CH|Europe/Zurich","CI|Africa/Abidjan","CK|Pacific/Rarotonga","CL|America/Santiago America/Punta_Arenas Pacific/Easter","CM|Africa/Lagos Africa/Douala","CN|Asia/Shanghai Asia/Urumqi","CO|America/Bogota","CR|America/Costa_Rica","CU|America/Havana","CV|Atlantic/Cape_Verde","CW|America/Curacao","CX|Indian/Christmas","CY|Asia/Nicosia Asia/Famagusta","CZ|Europe/Prague","DE|Europe/Zurich Europe/Berlin Europe/Busingen","DJ|Africa/Nairobi Africa/Djibouti","DK|Europe/Copenhagen","DM|America/Port_of_Spain America/Dominica","DO|America/Santo_Domingo","DZ|Africa/Algiers","EC|America/Guayaquil Pacific/Galapagos","EE|Europe/Tallinn","EG|Africa/Cairo","EH|Africa/El_Aaiun","ER|Africa/Nairobi Africa/Asmara","ES|Europe/Madrid Africa/Ceuta Atlantic/Canary","ET|Africa/Nairobi Africa/Addis_Ababa","FI|Europe/Helsinki","FJ|Pacific/Fiji","FK|Atlantic/Stanley","FM|Pacific/Chuuk Pacific/Pohnpei Pacific/Kosrae","FO|Atlantic/Faroe","FR|Europe/Paris","GA|Africa/Lagos Africa/Libreville","GB|Europe/London","GD|America/Port_of_Spain America/Grenada","GE|Asia/Tbilisi","GF|America/Cayenne","GG|Europe/London Europe/Guernsey","GH|Africa/Accra","GI|Europe/Gibraltar","GL|America/Godthab America/Danmarkshavn America/Scoresbysund America/Thule","GM|Africa/Abidjan Africa/Banjul","GN|Africa/Abidjan Africa/Conakry","GP|America/Port_of_Spain America/Guadeloupe","GQ|Africa/Lagos Africa/Malabo","GR|Europe/Athens","GS|Atlantic/South_Georgia","GT|America/Guatemala","GU|Pacific/Guam","GW|Africa/Bissau","GY|America/Guyana","HK|Asia/Hong_Kong","HN|America/Tegucigalpa","HR|Europe/Belgrade Europe/Zagreb","HT|America/Port-au-Prince","HU|Europe/Budapest","ID|Asia/Jakarta Asia/Pontianak Asia/Makassar Asia/Jayapura","IE|Europe/Dublin","IL|Asia/Jerusalem","IM|Europe/London Europe/Isle_of_Man","IN|Asia/Kolkata","IO|Indian/Chagos","IQ|Asia/Baghdad","IR|Asia/Tehran","IS|Atlantic/Reykjavik","IT|Europe/Rome","JE|Europe/London Europe/Jersey","JM|America/Jamaica","JO|Asia/Amman","JP|Asia/Tokyo","KE|Africa/Nairobi","KG|Asia/Bishkek","KH|Asia/Bangkok Asia/Phnom_Penh","KI|Pacific/Tarawa Pacific/Enderbury Pacific/Kiritimati","KM|Africa/Nairobi Indian/Comoro","KN|America/Port_of_Spain America/St_Kitts","KP|Asia/Pyongyang","KR|Asia/Seoul","KW|Asia/Riyadh Asia/Kuwait","KY|America/Panama America/Cayman","KZ|Asia/Almaty Asia/Qyzylorda Asia/Qostanay Asia/Aqtobe Asia/Aqtau Asia/Atyrau Asia/Oral","LA|Asia/Bangkok Asia/Vientiane","LB|Asia/Beirut","LC|America/Port_of_Spain America/St_Lucia","LI|Europe/Zurich Europe/Vaduz","LK|Asia/Colombo","LR|Africa/Monrovia","LS|Africa/Johannesburg Africa/Maseru","LT|Europe/Vilnius","LU|Europe/Luxembourg","LV|Europe/Riga","LY|Africa/Tripoli","MA|Africa/Casablanca","MC|Europe/Monaco","MD|Europe/Chisinau","ME|Europe/Belgrade Europe/Podgorica","MF|America/Port_of_Spain America/Marigot","MG|Africa/Nairobi Indian/Antananarivo","MH|Pacific/Majuro Pacific/Kwajalein","MK|Europe/Belgrade Europe/Skopje","ML|Africa/Abidjan Africa/Bamako","MM|Asia/Yangon","MN|Asia/Ulaanbaatar Asia/Hovd Asia/Choibalsan","MO|Asia/Macau","MP|Pacific/Guam Pacific/Saipan","MQ|America/Martinique","MR|Africa/Abidjan Africa/Nouakchott","MS|America/Port_of_Spain America/Montserrat","MT|Europe/Malta","MU|Indian/Mauritius","MV|Indian/Maldives","MW|Africa/Maputo Africa/Blantyre","MX|America/Mexico_City America/Cancun America/Merida America/Monterrey America/Matamoros America/Mazatlan America/Chihuahua America/Ojinaga America/Hermosillo America/Tijuana America/Bahia_Banderas","MY|Asia/Kuala_Lumpur Asia/Kuching","MZ|Africa/Maputo","NA|Africa/Windhoek","NC|Pacific/Noumea","NE|Africa/Lagos Africa/Niamey","NF|Pacific/Norfolk","NG|Africa/Lagos","NI|America/Managua","NL|Europe/Amsterdam","NO|Europe/Oslo","NP|Asia/Kathmandu","NR|Pacific/Nauru","NU|Pacific/Niue","NZ|Pacific/Auckland Pacific/Chatham","OM|Asia/Dubai Asia/Muscat","PA|America/Panama","PE|America/Lima","PF|Pacific/Tahiti Pacific/Marquesas Pacific/Gambier","PG|Pacific/Port_Moresby Pacific/Bougainville","PH|Asia/Manila","PK|Asia/Karachi","PL|Europe/Warsaw","PM|America/Miquelon","PN|Pacific/Pitcairn","PR|America/Puerto_Rico","PS|Asia/Gaza Asia/Hebron","PT|Europe/Lisbon Atlantic/Madeira Atlantic/Azores","PW|Pacific/Palau","PY|America/Asuncion","QA|Asia/Qatar","RE|Indian/Reunion","RO|Europe/Bucharest","RS|Europe/Belgrade","RU|Europe/Kaliningrad Europe/Moscow Europe/Simferopol Europe/Kirov Europe/Astrakhan Europe/Volgograd Europe/Saratov Europe/Ulyanovsk Europe/Samara Asia/Yekaterinburg Asia/Omsk Asia/Novosibirsk Asia/Barnaul Asia/Tomsk Asia/Novokuznetsk Asia/Krasnoyarsk Asia/Irkutsk Asia/Chita Asia/Yakutsk Asia/Khandyga Asia/Vladivostok Asia/Ust-Nera Asia/Magadan Asia/Sakhalin Asia/Srednekolymsk Asia/Kamchatka Asia/Anadyr","RW|Africa/Maputo Africa/Kigali","SA|Asia/Riyadh","SB|Pacific/Guadalcanal","SC|Indian/Mahe","SD|Africa/Khartoum","SE|Europe/Stockholm","SG|Asia/Singapore","SH|Africa/Abidjan Atlantic/St_Helena","SI|Europe/Belgrade Europe/Ljubljana","SJ|Europe/Oslo Arctic/Longyearbyen","SK|Europe/Prague Europe/Bratislava","SL|Africa/Abidjan Africa/Freetown","SM|Europe/Rome Europe/San_Marino","SN|Africa/Abidjan Africa/Dakar","SO|Africa/Nairobi Africa/Mogadishu","SR|America/Paramaribo","SS|Africa/Juba","ST|Africa/Sao_Tome","SV|America/El_Salvador","SX|America/Curacao America/Lower_Princes","SY|Asia/Damascus","SZ|Africa/Johannesburg Africa/Mbabane","TC|America/Grand_Turk","TD|Africa/Ndjamena","TF|Indian/Reunion Indian/Kerguelen","TG|Africa/Abidjan Africa/Lome","TH|Asia/Bangkok","TJ|Asia/Dushanbe","TK|Pacific/Fakaofo","TL|Asia/Dili","TM|Asia/Ashgabat","TN|Africa/Tunis","TO|Pacific/Tongatapu","TR|Europe/Istanbul","TT|America/Port_of_Spain","TV|Pacific/Funafuti","TW|Asia/Taipei","TZ|Africa/Nairobi Africa/Dar_es_Salaam","UA|Europe/Simferopol Europe/Kiev Europe/Uzhgorod Europe/Zaporozhye","UG|Africa/Nairobi Africa/Kampala","UM|Pacific/Pago_Pago Pacific/Wake Pacific/Honolulu Pacific/Midway","US|America/New_York America/Detroit America/Kentucky/Louisville America/Kentucky/Monticello America/Indiana/Indianapolis America/Indiana/Vincennes America/Indiana/Winamac America/Indiana/Marengo America/Indiana/Petersburg America/Indiana/Vevay America/Chicago America/Indiana/Tell_City America/Indiana/Knox America/Menominee America/North_Dakota/Center America/North_Dakota/New_Salem America/North_Dakota/Beulah America/Denver America/Boise America/Phoenix America/Los_Angeles America/Anchorage America/Juneau America/Sitka America/Metlakatla America/Yakutat America/Nome America/Adak Pacific/Honolulu","UY|America/Montevideo","UZ|Asia/Samarkand Asia/Tashkent","VA|Europe/Rome Europe/Vatican","VC|America/Port_of_Spain America/St_Vincent","VE|America/Caracas","VG|America/Port_of_Spain America/Tortola","VI|America/Port_of_Spain America/St_Thomas","VN|Asia/Bangkok Asia/Ho_Chi_Minh","VU|Pacific/Efate","WF|Pacific/Wallis","WS|Pacific/Apia","YE|Asia/Riyadh Asia/Aden","YT|Africa/Nairobi Indian/Mayotte","ZA|Africa/Johannesburg","ZM|Africa/Maputo Africa/Lusaka","ZW|Africa/Maputo Africa/Harare"]});return moment;});
(function(root,factory){if(typeof define==="function"&&define.amd){define(["moment","jquery"],function(moment,jquery){return(root.daterangepicker=factory(moment,jquery));});}else if(typeof module==="object"&&module.exports){var jQuery=typeof window!="undefined"?window.jQuery:undefined;if(!jQuery){jQuery=require("jquery");if(!jQuery.fn)jQuery.fn={};}
module.exports=factory(require("moment"),jQuery);}else{root.daterangepicker=factory(root.moment,root.jQuery);}})(this,function(moment,$){var DateRangePicker=function(element,options,cb){this.parentEl="body";this.element=$(element);this.startDate=moment().startOf("day");this.endDate=moment().endOf("day");this.minDate=false;this.maxDate=false;this.dateLimit=false;this.autoApply=false;this.singleDatePicker=false;this.showDropdowns=false;this.showWeekNumbers=false;this.showISOWeekNumbers=false;this.showCustomRangeLabel=true;this.timePicker=false;this.timePicker24Hour=false;this.timePickerIncrement=1;this.timePickerSeconds=false;this.linkedCalendars=true;this.autoUpdateInput=true;this.alwaysShowCalendars=false;this.ranges={};this.opens="right";if(this.element.hasClass("pull-right"))this.opens="left";this.drops="down";if(this.element.hasClass("dropup"))this.drops="up";this.buttonClasses="btn btn-sm";this.applyClass="btn-success";this.cancelClass="btn-default";this.locale={direction:"ltr",format:moment.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:moment.weekdaysMin(),monthNames:moment.monthsShort(),firstDay:moment.localeData().firstDayOfWeek()};this.callback=function(){};this.isShowing=false;this.leftCalendar={};this.rightCalendar={};if(typeof options!=="object"||options===null)options={};options=$.extend(this.element.data(),options);if(typeof options.template!=="string"&&!(options.template instanceof $))
options.template='<div class="daterangepicker dropdown-menu">'+'<div class="calendar left">'+'<div class="daterangepicker_input">'+'<input class="input-mini form-control" type="text" name="daterangepicker_start" value="" />'+'<i class="fa fa-calendar glyphicon glyphicon-calendar"></i>'+'<div class="calendar-time">'+"<div></div>"+'<i class="fa fa-clock-o glyphicon glyphicon-time"></i>'+"</div>"+"</div>"+'<div class="calendar-table"></div>'+"</div>"+'<div class="calendar right">'+'<div class="daterangepicker_input">'+'<input class="input-mini form-control" type="text" name="daterangepicker_end" value="" />'+'<i class="fa fa-calendar glyphicon glyphicon-calendar"></i>'+'<div class="calendar-time">'+"<div></div>"+'<i class="fa fa-clock-o glyphicon glyphicon-time"></i>'+"</div>"+"</div>"+'<div class="calendar-table"></div>'+"</div>"+'<div class="ranges">'+'<div class="range_inputs">'+'<button class="applyBtn" disabled="disabled" type="button"></button> '+'<button class="cancelBtn" type="button"></button>'+"</div>"+"</div>"+"</div>";this.parentEl=options.parentEl&&$(options.parentEl).length?$(options.parentEl):$(this.parentEl);this.container=$(options.template).appendTo(this.parentEl);if(typeof options.locale==="object"){if(typeof options.locale.direction==="string")
this.locale.direction=options.locale.direction;if(typeof options.locale.format==="string")
this.locale.format=options.locale.format;if(typeof options.locale.separator==="string")
this.locale.separator=options.locale.separator;if(typeof options.locale.daysOfWeek==="object")
this.locale.daysOfWeek=options.locale.daysOfWeek.slice();if(typeof options.locale.monthNames==="object")
this.locale.monthNames=options.locale.monthNames.slice();if(typeof options.locale.firstDay==="number")
this.locale.firstDay=options.locale.firstDay;if(typeof options.locale.applyLabel==="string")
this.locale.applyLabel=options.locale.applyLabel;if(typeof options.locale.cancelLabel==="string")
this.locale.cancelLabel=options.locale.cancelLabel;if(typeof options.locale.weekLabel==="string")
this.locale.weekLabel=options.locale.weekLabel;if(typeof options.locale.customRangeLabel==="string"){var elem=document.createElement("textarea");elem.innerHTML=options.locale.customRangeLabel;var rangeHtml=elem.value;this.locale.customRangeLabel=rangeHtml;}}
this.container.addClass(this.locale.direction);if(typeof options.startDate==="string")
this.startDate=moment(options.startDate,this.locale.format);if(typeof options.endDate==="string")
this.endDate=moment(options.endDate,this.locale.format);if(typeof options.minDate==="string")
this.minDate=moment(options.minDate,this.locale.format);if(typeof options.maxDate==="string")
this.maxDate=moment(options.maxDate,this.locale.format);if(typeof options.startDate==="object")
this.startDate=moment(options.startDate);if(typeof options.endDate==="object")
this.endDate=moment(options.endDate);if(typeof options.minDate==="object")
this.minDate=moment(options.minDate);if(typeof options.maxDate==="object")
this.maxDate=moment(options.maxDate);if(this.minDate&&this.startDate.isBefore(this.minDate))
this.startDate=this.minDate.clone();if(this.maxDate&&this.endDate.isAfter(this.maxDate))
this.endDate=this.maxDate.clone();if(typeof options.applyClass==="string")
this.applyClass=options.applyClass;if(typeof options.cancelClass==="string")
this.cancelClass=options.cancelClass;if(typeof options.dateLimit==="object")
this.dateLimit=options.dateLimit;if(typeof options.opens==="string")this.opens=options.opens;if(typeof options.drops==="string")this.drops=options.drops;if(typeof options.showWeekNumbers==="boolean")
this.showWeekNumbers=options.showWeekNumbers;if(typeof options.showISOWeekNumbers==="boolean")
this.showISOWeekNumbers=options.showISOWeekNumbers;if(typeof options.buttonClasses==="string")
this.buttonClasses=options.buttonClasses;if(typeof options.buttonClasses==="object")
this.buttonClasses=options.buttonClasses.join(" ");if(typeof options.showDropdowns==="boolean")
this.showDropdowns=options.showDropdowns;if(typeof options.showCustomRangeLabel==="boolean")
this.showCustomRangeLabel=options.showCustomRangeLabel;if(typeof options.singleDatePicker==="boolean"){this.singleDatePicker=options.singleDatePicker;if(this.singleDatePicker)this.endDate=this.startDate.clone();}
if(typeof options.timePicker==="boolean")
this.timePicker=options.timePicker;if(typeof options.timePickerSeconds==="boolean")
this.timePickerSeconds=options.timePickerSeconds;if(typeof options.timePickerIncrement==="number")
this.timePickerIncrement=options.timePickerIncrement;if(typeof options.timePicker24Hour==="boolean")
this.timePicker24Hour=options.timePicker24Hour;if(typeof options.autoApply==="boolean")
this.autoApply=options.autoApply;if(typeof options.autoUpdateInput==="boolean")
this.autoUpdateInput=options.autoUpdateInput;if(typeof options.linkedCalendars==="boolean")
this.linkedCalendars=options.linkedCalendars;if(typeof options.isInvalidDate==="function")
this.isInvalidDate=options.isInvalidDate;if(typeof options.isCustomDate==="function")
this.isCustomDate=options.isCustomDate;if(typeof options.alwaysShowCalendars==="boolean")
this.alwaysShowCalendars=options.alwaysShowCalendars;if(this.locale.firstDay!=0){var iterator=this.locale.firstDay;while(iterator>0){this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());iterator--;}}
var start,end,range;if(typeof options.startDate==="undefined"&&typeof options.endDate==="undefined"){if($(this.element).is("input[type=text]")){var val=$(this.element).val(),split=val.split(this.locale.separator);start=end=null;if(split.length==2){start=moment(split[0],this.locale.format);end=moment(split[1],this.locale.format);}else if(this.singleDatePicker&&val!==""){start=moment(val,this.locale.format);end=moment(val,this.locale.format);}
if(start!==null&&end!==null){this.setStartDate(start);this.setEndDate(end);}}}
if(typeof options.ranges==="object"){for(range in options.ranges){if(typeof options.ranges[range][0]==="string")
start=moment(options.ranges[range][0],this.locale.format);else start=moment(options.ranges[range][0]);if(typeof options.ranges[range][1]==="string")
end=moment(options.ranges[range][1],this.locale.format);else end=moment(options.ranges[range][1]);if(this.minDate&&start.isBefore(this.minDate))
start=this.minDate.clone();var maxDate=this.maxDate;if(this.dateLimit&&maxDate&&start.clone().add(this.dateLimit).isAfter(maxDate))
maxDate=start.clone().add(this.dateLimit);if(maxDate&&end.isAfter(maxDate))end=maxDate.clone();if((this.minDate&&end.isBefore(this.minDate,this.timepicker?"minute":"day"))||(maxDate&&start.isAfter(maxDate,this.timepicker?"minute":"day")))
continue;var elem=document.createElement("textarea");elem.innerHTML=range;var rangeHtml=elem.value;this.ranges[rangeHtml]=[start,end];}
var list="<ul>";for(range in this.ranges){list+='<li data-range-key="'+range+'">'+range+"</li>";}
if(this.showCustomRangeLabel){list+='<li data-range-key="'+
this.locale.customRangeLabel+'">'+
this.locale.customRangeLabel+"</li>";}
list+="</ul>";this.container.find(".ranges").prepend(list);}
if(typeof cb==="function"){this.callback=cb;}
if(!this.timePicker){this.startDate=this.startDate.startOf("day");this.endDate=this.endDate.endOf("day");this.container.find(".calendar-time").hide();}
if(this.timePicker&&this.autoApply)this.autoApply=false;if(this.autoApply&&typeof options.ranges!=="object"){this.container.find(".ranges").hide();}else if(this.autoApply){this.container.find(".applyBtn, .cancelBtn").addClass("hide");}
if(this.singleDatePicker){this.container.addClass("single");this.container.find(".calendar.left").addClass("single");this.container.find(".calendar.left").show();this.container.find(".calendar.right").hide();this.container.find(".daterangepicker_input input, .daterangepicker_input > i").hide();if(this.timePicker){this.container.find(".ranges ul").hide();}else{this.container.find(".ranges").hide();}}
if((typeof options.ranges==="undefined"&&!this.singleDatePicker)||this.alwaysShowCalendars){this.container.addClass("show-calendar");}
this.container.addClass("opens"+this.opens);if(typeof options.ranges!=="undefined"&&this.opens=="right"){this.container.find(".ranges").prependTo(this.container.find(".calendar.left").parent());}
this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses);if(this.applyClass.length)
this.container.find(".applyBtn").addClass(this.applyClass);if(this.cancelClass.length)
this.container.find(".cancelBtn").addClass(this.cancelClass);this.container.find(".applyBtn").html(this.locale.applyLabel);this.container.find(".cancelBtn").html(this.locale.cancelLabel);this.container.find(".calendar").on("click.daterangepicker",".prev",$.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",$.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",$.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",$.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",$.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",$.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",$.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",$.proxy(this.timeChanged,this)).on("click.daterangepicker",".daterangepicker_input input",$.proxy(this.showCalendars,this)).on("focus.daterangepicker",".daterangepicker_input input",$.proxy(this.formInputsFocused,this)).on("blur.daterangepicker",".daterangepicker_input input",$.proxy(this.formInputsBlurred,this)).on("change.daterangepicker",".daterangepicker_input input",$.proxy(this.formInputsChanged,this));this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",$.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",$.proxy(this.clickCancel,this)).on("click.daterangepicker","li",$.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",$.proxy(this.hoverRange,this)).on("mouseleave.daterangepicker","li",$.proxy(this.updateFormInputs,this));if(this.element.is("input")||this.element.is("button")){this.element.on({"click.daterangepicker":$.proxy(this.show,this),"focus.daterangepicker":$.proxy(this.show,this),"keyup.daterangepicker":$.proxy(this.elementChanged,this),"keydown.daterangepicker":$.proxy(this.keydown,this)});}else{this.element.on("click.daterangepicker",$.proxy(this.toggle,this));}
if(this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput){this.element.val(this.startDate.format(this.locale.format)+
this.locale.separator+
this.endDate.format(this.locale.format));this.element.trigger("change");}else if(this.element.is("input")&&this.autoUpdateInput){this.element.val(this.startDate.format(this.locale.format));this.element.trigger("change");}};DateRangePicker.prototype={constructor:DateRangePicker,setStartDate:function(startDate){if(typeof startDate==="string")
this.startDate=moment(startDate,this.locale.format);if(typeof startDate==="object")this.startDate=moment(startDate);if(!this.timePicker)this.startDate=this.startDate.startOf("day");if(this.timePicker&&this.timePickerIncrement)
this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);if(this.minDate&&this.startDate.isBefore(this.minDate)){this.startDate=this.minDate.clone();if(this.timePicker&&this.timePickerIncrement)
this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);}
if(this.maxDate&&this.startDate.isAfter(this.maxDate)){this.startDate=this.maxDate.clone();if(this.timePicker&&this.timePickerIncrement)
this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);}
if(!this.isShowing)this.updateElement();this.updateMonthsInView();},setEndDate:function(endDate){if(typeof endDate==="string")
this.endDate=moment(endDate,this.locale.format);if(typeof endDate==="object")this.endDate=moment(endDate);if(!this.timePicker)this.endDate=this.endDate.endOf("day");if(this.timePicker&&this.timePickerIncrement)
this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);if(this.endDate.isBefore(this.startDate))
this.endDate=this.startDate.clone();if(this.maxDate&&this.endDate.isAfter(this.maxDate))
this.endDate=this.maxDate.clone();if(this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate))
this.endDate=this.startDate.clone().add(this.dateLimit);this.previousRightTime=this.endDate.clone();if(!this.isShowing)this.updateElement();this.updateMonthsInView();},isInvalidDate:function(){return false;},isCustomDate:function(){return false;},updateView:function(){if(this.timePicker){this.renderTimePicker("left");this.renderTimePicker("right");if(!this.endDate){this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled");}else{this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled");}}
if(this.endDate){this.container.find('input[name="daterangepicker_end"]').removeClass("active");this.container.find('input[name="daterangepicker_start"]').addClass("active");}else{this.container.find('input[name="daterangepicker_end"]').addClass("active");this.container.find('input[name="daterangepicker_start"]').removeClass("active");}
this.updateMonthsInView();this.updateCalendars();this.updateFormInputs();},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))){return;}
this.leftCalendar.month=this.startDate.clone().date(2);if(!this.linkedCalendars&&(this.endDate.month()!=this.startDate.month()||this.endDate.year()!=this.startDate.year())){this.rightCalendar.month=this.endDate.clone().date(2);}else{this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month");}}else{if(this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")){this.leftCalendar.month=this.startDate.clone().date(2);this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month");}}
if(this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate){this.rightCalendar.month=this.maxDate.clone().date(2);this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month");}},updateCalendars:function(){if(this.timePicker){var hour,minute,second;if(this.endDate){hour=parseInt(this.container.find(".left .hourselect").val(),10);minute=parseInt(this.container.find(".left .minuteselect").val(),10);second=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;if(!this.timePicker24Hour){var ampm=this.container.find(".left .ampmselect").val();if(ampm==="PM"&&hour<12)hour+=12;if(ampm==="AM"&&hour===12)hour=0;}}else{hour=parseInt(this.container.find(".right .hourselect").val(),10);minute=parseInt(this.container.find(".right .minuteselect").val(),10);second=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0;if(!this.timePicker24Hour){var ampm=this.container.find(".right .ampmselect").val();if(ampm==="PM"&&hour<12)hour+=12;if(ampm==="AM"&&hour===12)hour=0;}}
this.leftCalendar.month.hour(hour).minute(minute).second(second);this.rightCalendar.month.hour(hour).minute(minute).second(second);}
this.renderCalendar("left");this.renderCalendar("right");this.container.find(".ranges li").removeClass("active");if(this.endDate==null)return;this.calculateChosenLabel();},renderCalendar:function(side){var calendar=side=="left"?this.leftCalendar:this.rightCalendar;var month=calendar.month.month();var year=calendar.month.year();var hour=calendar.month.hour();var minute=calendar.month.minute();var second=calendar.month.second();var daysInMonth=moment([year,month]).daysInMonth();var firstDay=moment([year,month,1]);var lastDay=moment([year,month,daysInMonth]);var lastMonth=moment(firstDay).subtract(1,"month").month();var lastYear=moment(firstDay).subtract(1,"month").year();var daysInLastMonth=moment([lastYear,lastMonth]).daysInMonth();var dayOfWeek=firstDay.day();var calendar=[];calendar.firstDay=firstDay;calendar.lastDay=lastDay;for(var i=0;i<6;i++){calendar[i]=[];}
var startDay=daysInLastMonth-dayOfWeek+this.locale.firstDay+1;if(startDay>daysInLastMonth)startDay-=7;if(dayOfWeek==this.locale.firstDay)startDay=daysInLastMonth-6;var curDate=moment([lastYear,lastMonth,startDay,12,minute,second]);var col,row;for(var i=0,col=0,row=0;i<42;i++,col++,curDate=moment(curDate).add(24,"hour")){if(i>0&&col%7===0){col=0;row++;}
calendar[row][col]=curDate.clone().hour(hour).minute(minute).second(second);curDate.hour(12);if(this.minDate&&calendar[row][col].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&calendar[row][col].isBefore(this.minDate)&&side=="left"){calendar[row][col]=this.minDate.clone();}
if(this.maxDate&&calendar[row][col].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&calendar[row][col].isAfter(this.maxDate)&&side=="right"){calendar[row][col]=this.maxDate.clone();}}
if(side=="left"){this.leftCalendar.calendar=calendar;}else{this.rightCalendar.calendar=calendar;}
var minDate=side=="left"?this.minDate:this.startDate;var maxDate=this.maxDate;var selected=side=="left"?this.startDate:this.endDate;var arrow=this.locale.direction=="ltr"?{left:"chevron-left",right:"chevron-right"}:{left:"chevron-right",right:"chevron-left"};var html='<table class="table-condensed">';html+="<thead>";html+="<tr>";if(this.showWeekNumbers||this.showISOWeekNumbers)html+="<th></th>";if((!minDate||minDate.isBefore(calendar.firstDay))&&(!this.linkedCalendars||side=="left")){html+='<th class="prev available"><i class="fa fa-'+
arrow.left+" glyphicon glyphicon-"+
arrow.left+'"></i></th>';}else{html+="<th></th>";}
var dateHtml=this.locale.monthNames[calendar[1][1].month()]+
calendar[1][1].format(" YYYY");if(this.showDropdowns){var currentMonth=calendar[1][1].month();var currentYear=calendar[1][1].year();var maxYear=(maxDate&&maxDate.year())||currentYear+5;var minYear=(minDate&&minDate.year())||currentYear-50;var inMinYear=currentYear==minYear;var inMaxYear=currentYear==maxYear;var monthHtml='<select class="monthselect">';for(var m=0;m<12;m++){if((!inMinYear||m>=minDate.month())&&(!inMaxYear||m<=maxDate.month())){monthHtml+="<option value='"+
m+"'"+
(m===currentMonth?" selected='selected'":"")+">"+
this.locale.monthNames[m]+"</option>";}else{monthHtml+="<option value='"+
m+"'"+
(m===currentMonth?" selected='selected'":"")+" disabled='disabled'>"+
this.locale.monthNames[m]+"</option>";}}
monthHtml+="</select>";var yearHtml='<select class="yearselect">';for(var y=minYear;y<=maxYear;y++){yearHtml+='<option value="'+
y+'"'+
(y===currentYear?' selected="selected"':"")+">"+
y+"</option>";}
yearHtml+="</select>";dateHtml=monthHtml+yearHtml;}
html+='<th colspan="5" class="month">'+dateHtml+"</th>";if((!maxDate||maxDate.isAfter(calendar.lastDay))&&(!this.linkedCalendars||side=="right"||this.singleDatePicker)){html+='<th class="next available"><i class="fa fa-'+
arrow.right+" glyphicon glyphicon-"+
arrow.right+'"></i></th>';}else{html+="<th></th>";}
html+="</tr>";html+="<tr>";if(this.showWeekNumbers||this.showISOWeekNumbers)
html+='<th class="week">'+this.locale.weekLabel+"</th>";$.each(this.locale.daysOfWeek,function(index,dayOfWeek){html+="<th>"+dayOfWeek+"</th>";});html+="</tr>";html+="</thead>";html+="<tbody>";if(this.endDate==null&&this.dateLimit){var maxLimit=this.startDate.clone().add(this.dateLimit).endOf("day");if(!maxDate||maxLimit.isBefore(maxDate)){maxDate=maxLimit;}}
for(var row=0;row<6;row++){html+="<tr>";if(this.showWeekNumbers)
html+='<td class="week">'+calendar[row][0].week()+"</td>";else if(this.showISOWeekNumbers)
html+='<td class="week">'+calendar[row][0].isoWeek()+"</td>";for(var col=0;col<7;col++){var classes=[];if(calendar[row][col].isSame(new Date(),"day"))
classes.push("today");if(calendar[row][col].isoWeekday()>5)classes.push("weekend");if(calendar[row][col].month()!=calendar[1][1].month())
classes.push("off");if(this.minDate&&calendar[row][col].isBefore(this.minDate,"day"))
classes.push("off","disabled");if(maxDate&&calendar[row][col].isAfter(maxDate,"day"))
classes.push("off","disabled");if(this.isInvalidDate(calendar[row][col]))
classes.push("off","disabled");if(calendar[row][col].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD"))
classes.push("active","start-date");if(this.endDate!=null&&calendar[row][col].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD"))
classes.push("active","end-date");if(this.endDate!=null&&calendar[row][col]>this.startDate&&calendar[row][col]<this.endDate)
classes.push("in-range");var isCustom=this.isCustomDate(calendar[row][col]);if(isCustom!==false){if(typeof isCustom==="string")classes.push(isCustom);else Array.prototype.push.apply(classes,isCustom);}
var cname="",disabled=false;for(var i=0;i<classes.length;i++){cname+=classes[i]+" ";if(classes[i]=="disabled")disabled=true;}
if(!disabled)cname+="available";html+='<td class="'+
cname.replace(/^\s+|\s+$/g,"")+'" data-title="'+"r"+
row+"c"+
col+'">'+
calendar[row][col].date()+"</td>";}
html+="</tr>";}
html+="</tbody>";html+="</table>";this.container.find(".calendar."+side+" .calendar-table").html(html);},renderTimePicker:function(side){if(side=="right"&&!this.endDate)return;var html,selected,minDate,maxDate=this.maxDate;if(this.dateLimit&&(!this.maxDate||this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)))
maxDate=this.startDate.clone().add(this.dateLimit);if(side=="left"){selected=this.startDate.clone();minDate=this.minDate;}else if(side=="right"){selected=this.endDate.clone();minDate=this.startDate;var timeSelector=this.container.find(".calendar.right .calendar-time div");if(timeSelector.html()!=""){selected.hour(timeSelector.find(".hourselect option:selected").val()||selected.hour());selected.minute(timeSelector.find(".minuteselect option:selected").val()||selected.minute());selected.second(timeSelector.find(".secondselect option:selected").val()||selected.second());if(!this.timePicker24Hour){var ampm=timeSelector.find(".ampmselect option:selected").val();if(ampm==="PM"&&selected.hour()<12)
selected.hour(selected.hour()+12);if(ampm==="AM"&&selected.hour()===12)selected.hour(0);}}
if(selected.isBefore(this.startDate))
selected=this.startDate.clone();if(maxDate&&selected.isAfter(maxDate))selected=maxDate.clone();}
html='<select class="hourselect">';var start=this.timePicker24Hour?0:1;var end=this.timePicker24Hour?23:12;for(var i=start;i<=end;i++){var i_in_24=i;if(!this.timePicker24Hour)
i_in_24=selected.hour()>=12?(i==12?12:i+12):i==12?0:i;var time=selected.clone().hour(i_in_24);var disabled=false;if(minDate&&time.minute(59).isBefore(minDate))disabled=true;if(maxDate&&time.minute(0).isAfter(maxDate))disabled=true;if(i_in_24==selected.hour()&&!disabled){html+='<option value="'+i+'" selected="selected">'+i+"</option>";}else if(disabled){html+='<option value="'+
i+'" disabled="disabled" class="disabled">'+
i+"</option>";}else{html+='<option value="'+i+'">'+i+"</option>";}}
html+="</select> ";html+=': <select class="minuteselect">';for(var i=0;i<60;i+=this.timePickerIncrement){var padded=i<10?"0"+i:i;var time=selected.clone().minute(i);var disabled=false;if(minDate&&time.second(59).isBefore(minDate))disabled=true;if(maxDate&&time.second(0).isAfter(maxDate))disabled=true;if(selected.minute()==i&&!disabled){html+='<option value="'+
i+'" selected="selected">'+
padded+"</option>";}else if(disabled){html+='<option value="'+
i+'" disabled="disabled" class="disabled">'+
padded+"</option>";}else{html+='<option value="'+i+'">'+padded+"</option>";}}
html+="</select> ";if(this.timePickerSeconds){html+=': <select class="secondselect">';for(var i=0;i<60;i++){var padded=i<10?"0"+i:i;var time=selected.clone().second(i);var disabled=false;if(minDate&&time.isBefore(minDate))disabled=true;if(maxDate&&time.isAfter(maxDate))disabled=true;if(selected.second()==i&&!disabled){html+='<option value="'+
i+'" selected="selected">'+
padded+"</option>";}else if(disabled){html+='<option value="'+
i+'" disabled="disabled" class="disabled">'+
padded+"</option>";}else{html+='<option value="'+i+'">'+padded+"</option>";}}
html+="</select> ";}
if(!this.timePicker24Hour){html+='<select class="ampmselect">';var am_html="";var pm_html="";if(minDate&&selected.clone().hour(12).minute(0).second(0).isBefore(minDate))
am_html=' disabled="disabled" class="disabled"';if(maxDate&&selected.clone().hour(0).minute(0).second(0).isAfter(maxDate))
pm_html=' disabled="disabled" class="disabled"';if(selected.hour()>=12){html+='<option value="AM"'+
am_html+'>AM</option><option value="PM" selected="selected"'+
pm_html+">PM</option>";}else{html+='<option value="AM" selected="selected"'+
am_html+'>AM</option><option value="PM"'+
pm_html+">PM</option>";}
html+="</select>";}
this.container.find(".calendar."+side+" .calendar-time div").html(html);},updateFormInputs:function(){if(this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus"))
return;this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format));if(this.endDate)
this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format));if(this.singleDatePicker||(this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate)))){this.container.find("button.applyBtn").removeAttr("disabled");}else{this.container.find("button.applyBtn").attr("disabled","disabled");}},move:function(){var parentOffset={top:0,left:0},containerTop;var parentRightEdge=$(window).width();if(!this.parentEl.is("body")){parentOffset={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()};parentRightEdge=this.parentEl[0].clientWidth+this.parentEl.offset().left;}
if(this.drops=="up")
containerTop=this.element.offset().top-
this.container.outerHeight()-
parentOffset.top;else
containerTop=this.element.offset().top+
this.element.outerHeight()-
parentOffset.top;this.container[this.drops=="up"?"addClass":"removeClass"]("dropup");if(this.opens=="left"){this.container.css({top:containerTop,right:parentRightEdge-
this.element.offset().left-
this.element.outerWidth(),left:"auto"});if(this.container.offset().left<0){this.container.css({right:"auto",left:9});}}else if(this.opens=="center"){this.container.css({top:containerTop,left:this.element.offset().left-
parentOffset.left+
this.element.outerWidth()/2-
this.container.outerWidth()/2,right:"auto"});if(this.container.offset().left<0){this.container.css({right:"auto",left:9});}}else{this.container.css({top:containerTop,left:this.element.offset().left-parentOffset.left,right:"auto"});if(this.container.offset().left+this.container.outerWidth()>$(window).width()){this.container.css({left:"auto",right:0});}}},show:function(e){if(this.isShowing)return;this._outsideClickProxy=$.proxy(function(e){this.outsideClick(e);},this);$(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy);$(window).on("resize.daterangepicker",$.proxy(function(e){this.move(e);},this));this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.previousRightTime=this.endDate.clone();this.updateView();this.container.show();this.move();this.element.trigger("show.daterangepicker",this);this.isShowing=true;},hide:function(e){if(!this.isShowing)return;if(!this.endDate){this.startDate=this.oldStartDate.clone();this.endDate=this.oldEndDate.clone();}
if(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate))
this.callback(this.startDate,this.endDate,this.chosenLabel);this.updateElement();$(document).off(".daterangepicker");$(window).off(".daterangepicker");this.container.hide();this.element.trigger("hide.daterangepicker",this);this.isShowing=false;},toggle:function(e){if(this.isShowing){this.hide();}else{this.show();}},outsideClick:function(e){var target=$(e.target);if(e.type=="focusin"||target.closest(this.element).length||target.closest(this.container).length||target.closest(".calendar-table").length)
return;this.hide();this.element.trigger("outsideClick.daterangepicker",this);},showCalendars:function(){this.container.addClass("show-calendar");this.move();this.element.trigger("showCalendar.daterangepicker",this);},hideCalendars:function(){this.container.removeClass("show-calendar");this.element.trigger("hideCalendar.daterangepicker",this);},hoverRange:function(e){if(this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus"))
return;var label=e.target.getAttribute("data-range-key");if(label==this.locale.customRangeLabel){this.updateView();}else{var dates=this.ranges[label];this.container.find("input[name=daterangepicker_start]").val(dates[0].format(this.locale.format));this.container.find("input[name=daterangepicker_end]").val(dates[1].format(this.locale.format));}},clickRange:function(e){var label=e.target.getAttribute("data-range-key");this.chosenLabel=label;if(label==this.locale.customRangeLabel){this.showCalendars();}else{var dates=this.ranges[label];this.startDate=dates[0];this.endDate=dates[1];if(!this.timePicker){this.startDate.startOf("day");this.endDate.endOf("day");}
if(!this.alwaysShowCalendars)this.hideCalendars();this.clickApply();}},clickPrev:function(e){var cal=$(e.target).parents(".calendar");if(cal.hasClass("left")){this.leftCalendar.month.subtract(1,"month");if(this.linkedCalendars)this.rightCalendar.month.subtract(1,"month");}else{this.rightCalendar.month.subtract(1,"month");}
this.updateCalendars();},clickNext:function(e){var cal=$(e.target).parents(".calendar");if(cal.hasClass("left")){this.leftCalendar.month.add(1,"month");}else{this.rightCalendar.month.add(1,"month");if(this.linkedCalendars)this.leftCalendar.month.add(1,"month");}
this.updateCalendars();},hoverDate:function(e){if(!$(e.target).hasClass("available"))return;var title=$(e.target).attr("data-title");var row=title.substr(1,1);var col=title.substr(3,1);var cal=$(e.target).parents(".calendar");var date=cal.hasClass("left")?this.leftCalendar.calendar[row][col]:this.rightCalendar.calendar[row][col];if(this.endDate&&!this.container.find("input[name=daterangepicker_start]").is(":focus")){this.container.find("input[name=daterangepicker_start]").val(date.format(this.locale.format));}else if(!this.endDate&&!this.container.find("input[name=daterangepicker_end]").is(":focus")){this.container.find("input[name=daterangepicker_end]").val(date.format(this.locale.format));}
var leftCalendar=this.leftCalendar;var rightCalendar=this.rightCalendar;var startDate=this.startDate;if(!this.endDate){this.container.find(".calendar tbody td").each(function(index,el){if($(el).hasClass("week"))return;var title=$(el).attr("data-title");var row=title.substr(1,1);var col=title.substr(3,1);var cal=$(el).parents(".calendar");var dt=cal.hasClass("left")?leftCalendar.calendar[row][col]:rightCalendar.calendar[row][col];if((dt.isAfter(startDate)&&dt.isBefore(date))||dt.isSame(date,"day")){$(el).addClass("in-range");}else{$(el).removeClass("in-range");}});}},clickDate:function(e){if(!$(e.target).hasClass("available"))return;var title=$(e.target).attr("data-title");var row=title.substr(1,1);var col=title.substr(3,1);var cal=$(e.target).parents(".calendar");var date=cal.hasClass("left")?this.leftCalendar.calendar[row][col]:this.rightCalendar.calendar[row][col];if(this.endDate||date.isBefore(this.startDate,"day")){if(this.timePicker){var hour=parseInt(this.container.find(".left .hourselect").val(),10);if(!this.timePicker24Hour){var ampm=this.container.find(".left .ampmselect").val();if(ampm==="PM"&&hour<12)hour+=12;if(ampm==="AM"&&hour===12)hour=0;}
var minute=parseInt(this.container.find(".left .minuteselect").val(),10);var second=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;date=date.clone().hour(hour).minute(minute).second(second);}
this.endDate=null;this.setStartDate(date.clone());}else if(!this.endDate&&date.isBefore(this.startDate)){this.setEndDate(this.startDate.clone());}else{if(this.timePicker){var hour=parseInt(this.container.find(".right .hourselect").val(),10);if(!this.timePicker24Hour){var ampm=this.container.find(".right .ampmselect").val();if(ampm==="PM"&&hour<12)hour+=12;if(ampm==="AM"&&hour===12)hour=0;}
var minute=parseInt(this.container.find(".right .minuteselect").val(),10);var second=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0;date=date.clone().hour(hour).minute(minute).second(second);}
this.setEndDate(date.clone());if(this.autoApply){this.calculateChosenLabel();this.clickApply();}}
if(this.singleDatePicker){this.setEndDate(this.startDate);if(!this.timePicker)this.clickApply();}
this.updateView();e.stopPropagation();},calculateChosenLabel:function(){var customRange=true;var i=0;for(var range in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[range][0])&&this.endDate.isSame(this.ranges[range][1])){customRange=false;this.chosenLabel=this.container.find(".ranges li:eq("+i+")").addClass("active").html();break;}}else{if(this.startDate.format("YYYY-MM-DD")==this.ranges[range][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[range][1].format("YYYY-MM-DD")){customRange=false;this.chosenLabel=this.container.find(".ranges li:eq("+i+")").addClass("active").html();break;}}
i++;}
if(customRange){if(this.showCustomRangeLabel){this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html();}else{this.chosenLabel=null;}
this.showCalendars();}},clickApply:function(e){this.hide();this.element.trigger("apply.daterangepicker",this);},clickCancel:function(e){this.startDate=this.oldStartDate;this.endDate=this.oldEndDate;this.hide();this.element.trigger("cancel.daterangepicker",this);},monthOrYearChanged:function(e){var isLeft=$(e.target).closest(".calendar").hasClass("left"),leftOrRight=isLeft?"left":"right",cal=this.container.find(".calendar."+leftOrRight);var month=parseInt(cal.find(".monthselect").val(),10);var year=cal.find(".yearselect").val();if(!isLeft){if(year<this.startDate.year()||(year==this.startDate.year()&&month<this.startDate.month())){month=this.startDate.month();year=this.startDate.year();}}
if(this.minDate){if(year<this.minDate.year()||(year==this.minDate.year()&&month<this.minDate.month())){month=this.minDate.month();year=this.minDate.year();}}
if(this.maxDate){if(year>this.maxDate.year()||(year==this.maxDate.year()&&month>this.maxDate.month())){month=this.maxDate.month();year=this.maxDate.year();}}
if(isLeft){this.leftCalendar.month.month(month).year(year);if(this.linkedCalendars)
this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month");}else{this.rightCalendar.month.month(month).year(year);if(this.linkedCalendars)
this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month");}
this.updateCalendars();},timeChanged:function(e){var cal=$(e.target).closest(".calendar"),isLeft=cal.hasClass("left");var hour=parseInt(cal.find(".hourselect").val(),10);var minute=parseInt(cal.find(".minuteselect").val(),10);var second=this.timePickerSeconds?parseInt(cal.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var ampm=cal.find(".ampmselect").val();if(ampm==="PM"&&hour<12)hour+=12;if(ampm==="AM"&&hour===12)hour=0;}
if(isLeft){var start=this.startDate.clone();start.hour(hour);start.minute(minute);start.second(second);this.setStartDate(start);if(this.singleDatePicker){this.endDate=this.startDate.clone();}else if(this.endDate&&this.endDate.format("YYYY-MM-DD")==start.format("YYYY-MM-DD")&&this.endDate.isBefore(start)){this.setEndDate(start.clone());}}else if(this.endDate){var end=this.endDate.clone();end.hour(hour);end.minute(minute);end.second(second);this.setEndDate(end);}
this.updateCalendars();this.updateFormInputs();this.renderTimePicker("left");this.renderTimePicker("right");},formInputsChanged:function(e){var isRight=$(e.target).closest(".calendar").hasClass("right");var start=moment(this.container.find('input[name="daterangepicker_start"]').val(),this.locale.format);var end=moment(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);if(start.isValid()&&end.isValid()){if(isRight&&end.isBefore(start))start=end.clone();this.setStartDate(start);this.setEndDate(end);if(isRight){this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format));}else{this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format));}}
this.updateView();},formInputsFocused:function(e){this.container.find('input[name="daterangepicker_start"], input[name="daterangepicker_end"]').removeClass("active");$(e.target).addClass("active");var isRight=$(e.target).closest(".calendar").hasClass("right");if(isRight){this.endDate=null;this.setStartDate(this.startDate.clone());this.updateView();}},formInputsBlurred:function(e){if(!this.endDate){var val=this.container.find('input[name="daterangepicker_end"]').val();var end=moment(val,this.locale.format);if(end.isValid()){this.setEndDate(end);this.updateView();}}},elementChanged:function(){if(!this.element.is("input"))return;if(!this.element.val().length)return;if(this.element.val().length<this.locale.format.length)return;var dateString=this.element.val().split(this.locale.separator),start=null,end=null;if(dateString.length===2){start=moment(dateString[0],this.locale.format);end=moment(dateString[1],this.locale.format);}
if(this.singleDatePicker||start===null||end===null){start=moment(this.element.val(),this.locale.format);end=start;}
if(!start.isValid()||!end.isValid())return;this.setStartDate(start);this.setEndDate(end);this.updateView();},keydown:function(e){if(e.keyCode===9||e.keyCode===13){this.hide();}},updateElement:function(){if(this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput){this.element.val(this.startDate.format(this.locale.format)+
this.locale.separator+
this.endDate.format(this.locale.format));this.element.trigger("change");}else if(this.element.is("input")&&this.autoUpdateInput){this.element.val(this.startDate.format(this.locale.format));this.element.trigger("change");}},remove:function(){this.container.remove();this.element.off(".daterangepicker");this.element.removeData();}};$.fn.daterangepicker=function(options,callback){this.each(function(){var el=$(this);if(el.data("daterangepicker"))el.data("daterangepicker").remove();el.data("daterangepicker",new DateRangePicker(el,options,callback));});return this;};return DateRangePicker;});
(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):factory((global.d3=global.d3||{}));})(this,function(exports){"use strict";var version="5.4.0";function ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN;}
function bisector(compare){if(compare.length===1)compare=ascendingComparator(compare);return{left:function(a,x,lo,hi){if(lo==null)lo=0;if(hi==null)hi=a.length;while(lo<hi){var mid=(lo+hi)>>>1;if(compare(a[mid],x)<0)lo=mid+1;else hi=mid;}
return lo;},right:function(a,x,lo,hi){if(lo==null)lo=0;if(hi==null)hi=a.length;while(lo<hi){var mid=(lo+hi)>>>1;if(compare(a[mid],x)>0)hi=mid;else lo=mid+1;}
return lo;}};}
function ascendingComparator(f){return function(d,x){return ascending(f(d),x);};}
var ascendingBisect=bisector(ascending);var bisectRight=ascendingBisect.right;var bisectLeft=ascendingBisect.left;function pairs(array,f){if(f==null)f=pair;var i=0,n=array.length-1,p=array[0],pairs=new Array(n<0?0:n);while(i<n)pairs[i]=f(p,(p=array[++i]));return pairs;}
function pair(a,b){return[a,b];}
function cross(values0,values1,reduce){var n0=values0.length,n1=values1.length,values=new Array(n0*n1),i0,i1,i,value0;if(reduce==null)reduce=pair;for(i0=i=0;i0<n0;++i0){for(value0=values0[i0],i1=0;i1<n1;++i1,++i){values[i]=reduce(value0,values1[i1]);}}
return values;}
function descending(a,b){return b<a?-1:b>a?1:b>=a?0:NaN;}
function number(x){return x===null?NaN:+x;}
function variance(values,valueof){var n=values.length,m=0,i=-1,mean=0,value,delta,sum=0;if(valueof==null){while(++i<n){if(!isNaN((value=number(values[i])))){delta=value-mean;mean+=delta/++m;sum+=delta*(value-mean);}}}else{while(++i<n){if(!isNaN((value=number(valueof(values[i],i,values))))){delta=value-mean;mean+=delta/++m;sum+=delta*(value-mean);}}}
if(m>1)return sum/(m-1);}
function deviation(array,f){var v=variance(array,f);return v?Math.sqrt(v):v;}
function extent(values,valueof){var n=values.length,i=-1,value,min,max;if(valueof==null){while(++i<n){if((value=values[i])!=null&&value>=value){min=max=value;while(++i<n){if((value=values[i])!=null){if(min>value)min=value;if(max<value)max=value;}}}}}else{while(++i<n){if((value=valueof(values[i],i,values))!=null&&value>=value){min=max=value;while(++i<n){if((value=valueof(values[i],i,values))!=null){if(min>value)min=value;if(max<value)max=value;}}}}}
return[min,max];}
var array=Array.prototype;var slice=array.slice;var map=array.map;function constant(x){return function(){return x;};}
function identity(x){return x;}
function sequence(start,stop,step){(start=+start),(stop=+stop),(step=(n=arguments.length)<2?((stop=start),(start=0),1):n<3?1:+step);var i=-1,n=Math.max(0,Math.ceil((stop-start)/step))|0,range=new Array(n);while(++i<n){range[i]=start+i*step;}
return range;}
var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function ticks(start,stop,count){var reverse,i=-1,n,ticks,step;(stop=+stop),(start=+start),(count=+count);if(start===stop&&count>0)return[start];if((reverse=stop<start))(n=start),(start=stop),(stop=n);if((step=tickIncrement(start,stop,count))===0||!isFinite(step))
return[];if(step>0){start=Math.ceil(start/step);stop=Math.floor(stop/step);ticks=new Array((n=Math.ceil(stop-start+1)));while(++i<n)ticks[i]=(start+i)*step;}else{start=Math.floor(start*step);stop=Math.ceil(stop*step);ticks=new Array((n=Math.ceil(start-stop+1)));while(++i<n)ticks[i]=(start-i)/step;}
if(reverse)ticks.reverse();return ticks;}
function tickIncrement(start,stop,count){var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);return power>=0?(error>=e10?10:error>=e5?5:error>=e2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10?10:error>=e5?5:error>=e2?2:1);}
function tickStep(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;if(error>=e10)step1*=10;else if(error>=e5)step1*=5;else if(error>=e2)step1*=2;return stop<start?-step1:step1;}
function thresholdSturges(values){return Math.ceil(Math.log(values.length)/Math.LN2)+1;}
function histogram(){var value=identity,domain=extent,threshold=thresholdSturges;function histogram(data){var i,n=data.length,x,values=new Array(n);for(i=0;i<n;++i){values[i]=value(data[i],i,data);}
var xz=domain(values),x0=xz[0],x1=xz[1],tz=threshold(values,x0,x1);if(!Array.isArray(tz)){tz=tickStep(x0,x1,tz);tz=sequence(Math.ceil(x0/tz)*tz,Math.floor(x1/tz)*tz,tz);}
var m=tz.length;while(tz[0]<=x0)tz.shift(),--m;while(tz[m-1]>x1)tz.pop(),--m;var bins=new Array(m+1),bin;for(i=0;i<=m;++i){bin=bins[i]=[];bin.x0=i>0?tz[i-1]:x0;bin.x1=i<m?tz[i]:x1;}
for(i=0;i<n;++i){x=values[i];if(x0<=x&&x<=x1){bins[bisectRight(tz,x,0,m)].push(data[i]);}}
return bins;}
histogram.value=function(_){return arguments.length?((value=typeof _==="function"?_:constant(_)),histogram):value;};histogram.domain=function(_){return arguments.length?((domain=typeof _==="function"?_:constant([_[0],_[1]])),histogram):domain;};histogram.thresholds=function(_){return arguments.length?((threshold=typeof _==="function"?_:Array.isArray(_)?constant(slice.call(_)):constant(_)),histogram):threshold;};return histogram;}
function threshold(values,p,valueof){if(valueof==null)valueof=number;if(!(n=values.length))return;if((p=+p)<=0||n<2)return+valueof(values[0],0,values);if(p>=1)return+valueof(values[n-1],n-1,values);var n,i=(n-1)*p,i0=Math.floor(i),value0=+valueof(values[i0],i0,values),value1=+valueof(values[i0+1],i0+1,values);return value0+(value1-value0)*(i-i0);}
function freedmanDiaconis(values,min,max){values=map.call(values,number).sort(ascending);return Math.ceil((max-min)/(2*(threshold(values,0.75)-threshold(values,0.25))*Math.pow(values.length,-1/3)));}
function scott(values,min,max){return Math.ceil((max-min)/(3.5*deviation(values)*Math.pow(values.length,-1/3)));}
function max(values,valueof){var n=values.length,i=-1,value,max;if(valueof==null){while(++i<n){if((value=values[i])!=null&&value>=value){max=value;while(++i<n){if((value=values[i])!=null&&value>max){max=value;}}}}}else{while(++i<n){if((value=valueof(values[i],i,values))!=null&&value>=value){max=value;while(++i<n){if((value=valueof(values[i],i,values))!=null&&value>max){max=value;}}}}}
return max;}
function mean(values,valueof){var n=values.length,m=n,i=-1,value,sum=0;if(valueof==null){while(++i<n){if(!isNaN((value=number(values[i]))))sum+=value;else--m;}}else{while(++i<n){if(!isNaN((value=number(valueof(values[i],i,values)))))
sum+=value;else--m;}}
if(m)return sum/m;}
function median(values,valueof){var n=values.length,i=-1,value,numbers=[];if(valueof==null){while(++i<n){if(!isNaN((value=number(values[i])))){numbers.push(value);}}}else{while(++i<n){if(!isNaN((value=number(valueof(values[i],i,values))))){numbers.push(value);}}}
return threshold(numbers.sort(ascending),0.5);}
function merge(arrays){var n=arrays.length,m,i=-1,j=0,merged,array;while(++i<n)j+=arrays[i].length;merged=new Array(j);while(--n>=0){array=arrays[n];m=array.length;while(--m>=0){merged[--j]=array[m];}}
return merged;}
function min(values,valueof){var n=values.length,i=-1,value,min;if(valueof==null){while(++i<n){if((value=values[i])!=null&&value>=value){min=value;while(++i<n){if((value=values[i])!=null&&min>value){min=value;}}}}}else{while(++i<n){if((value=valueof(values[i],i,values))!=null&&value>=value){min=value;while(++i<n){if((value=valueof(values[i],i,values))!=null&&min>value){min=value;}}}}}
return min;}
function permute(array,indexes){var i=indexes.length,permutes=new Array(i);while(i--)permutes[i]=array[indexes[i]];return permutes;}
function scan(values,compare){if(!(n=values.length))return;var n,i=0,j=0,xi,xj=values[j];if(compare==null)compare=ascending;while(++i<n){if(compare((xi=values[i]),xj)<0||compare(xj,xj)!==0){(xj=xi),(j=i);}}
if(compare(xj,xj)===0)return j;}
function shuffle(array,i0,i1){var m=(i1==null?array.length:i1)-(i0=i0==null?0:+i0),t,i;while(m){i=(Math.random()*m--)|0;t=array[m+i0];array[m+i0]=array[i+i0];array[i+i0]=t;}
return array;}
function sum(values,valueof){var n=values.length,i=-1,value,sum=0;if(valueof==null){while(++i<n){if((value=+values[i]))sum+=value;}}else{while(++i<n){if((value=+valueof(values[i],i,values)))sum+=value;}}
return sum;}
function transpose(matrix){if(!(n=matrix.length))return[];for(var i=-1,m=min(matrix,length),transpose=new Array(m);++i<m;){for(var j=-1,n,row=(transpose[i]=new Array(n));++j<n;){row[j]=matrix[j][i];}}
return transpose;}
function length(d){return d.length;}
function zip(){return transpose(arguments);}
var slice$1=Array.prototype.slice;function identity$1(x){return x;}
var top=1,right=2,bottom=3,left=4,epsilon=1e-6;function translateX(x){return"translate("+(x+0.5)+",0)";}
function translateY(y){return"translate(0,"+(y+0.5)+")";}
function number$1(scale){return function(d){return+scale(d);};}
function center(scale){var offset=Math.max(0,scale.bandwidth()-1)/2;if(scale.round())offset=Math.round(offset);return function(d){return+scale(d)+offset;};}
function entering(){return!this.__axis;}
function axis(orient,scale){var tickArguments=[],tickValues=null,tickFormat=null,tickSizeInner=6,tickSizeOuter=6,tickPadding=3,k=orient===top||orient===left?-1:1,x=orient===left||orient===right?"x":"y",transform=orient===top||orient===bottom?translateX:translateY;function axis(context){var values=tickValues==null?scale.ticks?scale.ticks.apply(scale,tickArguments):scale.domain():tickValues,format=tickFormat==null?scale.tickFormat?scale.tickFormat.apply(scale,tickArguments):identity$1:tickFormat,spacing=Math.max(tickSizeInner,0)+tickPadding,range=scale.range(),range0=+range[0]+0.5,range1=+range[range.length-1]+0.5,position=(scale.bandwidth?center:number$1)(scale.copy()),selection=context.selection?context.selection():context,path=selection.selectAll(".domain").data([null]),tick=selection.selectAll(".tick").data(values,scale).order(),tickExit=tick.exit(),tickEnter=tick.enter().append("g").attr("class","tick"),line=tick.select("line"),text=tick.select("text");path=path.merge(path.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000"));tick=tick.merge(tickEnter);line=line.merge(tickEnter.append("line").attr("stroke","#000").attr(x+"2",k*tickSizeInner));text=text.merge(tickEnter.append("text").attr("fill","#000").attr(x,k*spacing).attr("dy",orient===top?"0em":orient===bottom?"0.71em":"0.32em"));if(context!==selection){path=path.transition(context);tick=tick.transition(context);line=line.transition(context);text=text.transition(context);tickExit=tickExit.transition(context).attr("opacity",epsilon).attr("transform",function(d){return isFinite((d=position(d)))?transform(d):this.getAttribute("transform");});tickEnter.attr("opacity",epsilon).attr("transform",function(d){var p=this.parentNode.__axis;return transform(p&&isFinite((p=p(d)))?p:position(d));});}
tickExit.remove();path.attr("d",orient===left||orient==right?"M"+
k*tickSizeOuter+","+
range0+"H0.5V"+
range1+"H"+
k*tickSizeOuter:"M"+
range0+","+
k*tickSizeOuter+"V0.5H"+
range1+"V"+
k*tickSizeOuter);tick.attr("opacity",1).attr("transform",function(d){return transform(position(d));});line.attr(x+"2",k*tickSizeInner);text.attr(x,k*spacing).text(format);selection.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",orient===right?"start":orient===left?"end":"middle");selection.each(function(){this.__axis=position;});}
axis.scale=function(_){return arguments.length?((scale=_),axis):scale;};axis.ticks=function(){return(tickArguments=slice$1.call(arguments)),axis;};axis.tickArguments=function(_){return arguments.length?((tickArguments=_==null?[]:slice$1.call(_)),axis):tickArguments.slice();};axis.tickValues=function(_){return arguments.length?((tickValues=_==null?null:slice$1.call(_)),axis):tickValues&&tickValues.slice();};axis.tickFormat=function(_){return arguments.length?((tickFormat=_),axis):tickFormat;};axis.tickSize=function(_){return arguments.length?((tickSizeInner=tickSizeOuter=+_),axis):tickSizeInner;};axis.tickSizeInner=function(_){return arguments.length?((tickSizeInner=+_),axis):tickSizeInner;};axis.tickSizeOuter=function(_){return arguments.length?((tickSizeOuter=+_),axis):tickSizeOuter;};axis.tickPadding=function(_){return arguments.length?((tickPadding=+_),axis):tickPadding;};return axis;}
function axisTop(scale){return axis(top,scale);}
function axisRight(scale){return axis(right,scale);}
function axisBottom(scale){return axis(bottom,scale);}
function axisLeft(scale){return axis(left,scale);}
var noop={value:function(){}};function dispatch(){for(var i=0,n=arguments.length,_={},t;i<n;++i){if(!(t=arguments[i]+"")||t in _)
throw new Error("illegal type: "+t);_[t]=[];}
return new Dispatch(_);}
function Dispatch(_){this._=_;}
function parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map(function(t){var name="",i=t.indexOf(".");if(i>=0)(name=t.slice(i+1)),(t=t.slice(0,i));if(t&&!types.hasOwnProperty(t))
throw new Error("unknown type: "+t);return{type:t,name:name};});}
Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(typename,callback){var _=this._,T=parseTypenames(typename+"",_),t,i=-1,n=T.length;if(arguments.length<2){while(++i<n)
if((t=(typename=T[i]).type)&&(t=get(_[t],typename.name)))
return t;return;}
if(callback!=null&&typeof callback!=="function")
throw new Error("invalid callback: "+callback);while(++i<n){if((t=(typename=T[i]).type))
_[t]=set(_[t],typename.name,callback);else if(callback==null)
for(t in _)_[t]=set(_[t],typename.name,null);}
return this;},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch(copy);},call:function(type,that){if((n=arguments.length-2)>0)
for(var args=new Array(n),i=0,n,t;i<n;++i)
args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))
throw new Error("unknown type: "+type);for(t=this._[type],i=0,n=t.length;i<n;++i)
t[i].value.apply(that,args);},apply:function(type,that,args){if(!this._.hasOwnProperty(type))
throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)
t[i].value.apply(that,args);}};function get(type,name){for(var i=0,n=type.length,c;i<n;++i){if((c=type[i]).name===name){return c.value;}}}
function set(type,name,callback){for(var i=0,n=type.length;i<n;++i){if(type[i].name===name){(type[i]=noop),(type=type.slice(0,i).concat(type.slice(i+1)));break;}}
if(callback!=null)type.push({name:name,value:callback});return type;}
var xhtml="http://www.w3.org/1999/xhtml";var namespaces={svg:"http://www.w3.org/2000/svg",xhtml:xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(name){var prefix=(name+=""),i=prefix.indexOf(":");if(i>=0&&(prefix=name.slice(0,i))!=="xmlns")
name=name.slice(i+1);return namespaces.hasOwnProperty(prefix)?{space:namespaces[prefix],local:name}:name;}
function creatorInherit(name){return function(){var document=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml&&document.documentElement.namespaceURI===xhtml?document.createElement(name):document.createElementNS(uri,name);};}
function creatorFixed(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local);};}
function creator(name){var fullname=namespace(name);return(fullname.local?creatorFixed:creatorInherit)(fullname);}
function none(){}
function selector(selector){return selector==null?none:function(){return this.querySelector(selector);};}
function selection_select(select){if(typeof select!=="function")select=selector(select);for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j){for(var group=groups[j],n=group.length,subgroup=(subgroups[j]=new Array(n)),node,subnode,i=0;i<n;++i){if((node=group[i])&&(subnode=select.call(node,node.__data__,i,group))){if("__data__"in node)subnode.__data__=node.__data__;subgroup[i]=subnode;}}}
return new Selection(subgroups,this._parents);}
function empty(){return[];}
function selectorAll(selector){return selector==null?empty:function(){return this.querySelectorAll(selector);};}
function selection_selectAll(select){if(typeof select!=="function")select=selectorAll(select);for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j){for(var group=groups[j],n=group.length,node,i=0;i<n;++i){if((node=group[i])){subgroups.push(select.call(node,node.__data__,i,group));parents.push(node);}}}
return new Selection(subgroups,parents);}
var matcher=function(selector){return function(){return this.matches(selector);};};if(typeof document!=="undefined"){var element=document.documentElement;if(!element.matches){var vendorMatches=element.webkitMatchesSelector||element.msMatchesSelector||element.mozMatchesSelector||element.oMatchesSelector;matcher=function(selector){return function(){return vendorMatches.call(this,selector);};};}}
var matcher$1=matcher;function selection_filter(match){if(typeof match!=="function")match=matcher$1(match);for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j){for(var group=groups[j],n=group.length,subgroup=(subgroups[j]=[]),node,i=0;i<n;++i){if((node=group[i])&&match.call(node,node.__data__,i,group)){subgroup.push(node);}}}
return new Selection(subgroups,this._parents);}
function sparse(update){return new Array(update.length);}
function selection_enter(){return new Selection(this._enter||this._groups.map(sparse),this._parents);}
function EnterNode(parent,datum){this.ownerDocument=parent.ownerDocument;this.namespaceURI=parent.namespaceURI;this._next=null;this._parent=parent;this.__data__=datum;}
EnterNode.prototype={constructor:EnterNode,appendChild:function(child){return this._parent.insertBefore(child,this._next);},insertBefore:function(child,next){return this._parent.insertBefore(child,next);},querySelector:function(selector){return this._parent.querySelector(selector);},querySelectorAll:function(selector){return this._parent.querySelectorAll(selector);}};function constant$1(x){return function(){return x;};}
var keyPrefix="$";function bindIndex(parent,group,enter,update,exit,data){var i=0,node,groupLength=group.length,dataLength=data.length;for(;i<dataLength;++i){if((node=group[i])){node.__data__=data[i];update[i]=node;}else{enter[i]=new EnterNode(parent,data[i]);}}
for(;i<groupLength;++i){if((node=group[i])){exit[i]=node;}}}
function bindKey(parent,group,enter,update,exit,data,key){var i,node,nodeByKeyValue={},groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength),keyValue;for(i=0;i<groupLength;++i){if((node=group[i])){keyValues[i]=keyValue=keyPrefix+key.call(node,node.__data__,i,group);if(keyValue in nodeByKeyValue){exit[i]=node;}else{nodeByKeyValue[keyValue]=node;}}}
for(i=0;i<dataLength;++i){keyValue=keyPrefix+key.call(parent,data[i],i,data);if((node=nodeByKeyValue[keyValue])){update[i]=node;node.__data__=data[i];nodeByKeyValue[keyValue]=null;}else{enter[i]=new EnterNode(parent,data[i]);}}
for(i=0;i<groupLength;++i){if((node=group[i])&&nodeByKeyValue[keyValues[i]]===node){exit[i]=node;}}}
function selection_data(value,key){if(!value){(data=new Array(this.size())),(j=-1);this.each(function(d){data[++j]=d;});return data;}
var bind=key?bindKey:bindIndex,parents=this._parents,groups=this._groups;if(typeof value!=="function")value=constant$1(value);for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group=groups[j],groupLength=group.length,data=value.call(parent,parent&&parent.__data__,j,parents),dataLength=data.length,enterGroup=(enter[j]=new Array(dataLength)),updateGroup=(update[j]=new Array(dataLength)),exitGroup=(exit[j]=new Array(groupLength));bind(parent,group,enterGroup,updateGroup,exitGroup,data,key);for(var i0=0,i1=0,previous,next;i0<dataLength;++i0){if((previous=enterGroup[i0])){if(i0>=i1)i1=i0+1;while(!(next=updateGroup[i1])&&++i1<dataLength);previous._next=next||null;}}}
update=new Selection(update,parents);update._enter=enter;update._exit=exit;return update;}
function selection_exit(){return new Selection(this._exit||this._groups.map(sparse),this._parents);}
function selection_merge(selection$$1){for(var groups0=this._groups,groups1=selection$$1._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j){for(var group0=groups0[j],group1=groups1[j],n=group0.length,merge=(merges[j]=new Array(n)),node,i=0;i<n;++i){if((node=group0[i]||group1[i])){merge[i]=node;}}}
for(;j<m0;++j){merges[j]=groups0[j];}
return new Selection(merges,this._parents);}
function selection_order(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;){for(var group=groups[j],i=group.length-1,next=group[i],node;--i>=0;){if((node=group[i])){if(next&&next!==node.nextSibling)
next.parentNode.insertBefore(node,next);next=node;}}}
return this;}
function selection_sort(compare){if(!compare)compare=ascending$1;function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b;}
for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){for(var group=groups[j],n=group.length,sortgroup=(sortgroups[j]=new Array(n)),node,i=0;i<n;++i){if((node=group[i])){sortgroup[i]=node;}}
sortgroup.sort(compareNode);}
return new Selection(sortgroups,this._parents).order();}
function ascending$1(a,b){return a<b?-1:a>b?1:a>=b?0:NaN;}
function selection_call(){var callback=arguments[0];arguments[0]=this;callback.apply(null,arguments);return this;}
function selection_nodes(){var nodes=new Array(this.size()),i=-1;this.each(function(){nodes[++i]=this;});return nodes;}
function selection_node(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j){for(var group=groups[j],i=0,n=group.length;i<n;++i){var node=group[i];if(node)return node;}}
return null;}
function selection_size(){var size=0;this.each(function(){++size;});return size;}
function selection_empty(){return!this.node();}
function selection_each(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j){for(var group=groups[j],i=0,n=group.length,node;i<n;++i){if((node=group[i]))callback.call(node,node.__data__,i,group);}}
return this;}
function attrRemove(name){return function(){this.removeAttribute(name);};}
function attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local);};}
function attrConstant(name,value){return function(){this.setAttribute(name,value);};}
function attrConstantNS(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value);};}
function attrFunction(name,value){return function(){var v=value.apply(this,arguments);if(v==null)this.removeAttribute(name);else this.setAttribute(name,v);};}
function attrFunctionNS(fullname,value){return function(){var v=value.apply(this,arguments);if(v==null)this.removeAttributeNS(fullname.space,fullname.local);else this.setAttributeNS(fullname.space,fullname.local,v);};}
function selection_attr(name,value){var fullname=namespace(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname);}
return this.each((value==null?fullname.local?attrRemoveNS:attrRemove:typeof value==="function"?fullname.local?attrFunctionNS:attrFunction:fullname.local?attrConstantNS:attrConstant)(fullname,value));}
function defaultView(node){return((node.ownerDocument&&node.ownerDocument.defaultView)||(node.document&&node)||node.defaultView);}
function styleRemove(name){return function(){this.style.removeProperty(name);};}
function styleConstant(name,value,priority){return function(){this.style.setProperty(name,value,priority);};}
function styleFunction(name,value,priority){return function(){var v=value.apply(this,arguments);if(v==null)this.style.removeProperty(name);else this.style.setProperty(name,v,priority);};}
function selection_style(name,value,priority){return arguments.length>1?this.each((value==null?styleRemove:typeof value==="function"?styleFunction:styleConstant)(name,value,priority==null?"":priority)):styleValue(this.node(),name);}
function styleValue(node,name){return(node.style.getPropertyValue(name)||defaultView(node).getComputedStyle(node,null).getPropertyValue(name));}
function propertyRemove(name){return function(){delete this[name];};}
function propertyConstant(name,value){return function(){this[name]=value;};}
function propertyFunction(name,value){return function(){var v=value.apply(this,arguments);if(v==null)delete this[name];else this[name]=v;};}
function selection_property(name,value){return arguments.length>1?this.each((value==null?propertyRemove:typeof value==="function"?propertyFunction:propertyConstant)(name,value)):this.node()[name];}
function classArray(string){return string.trim().split(/^|\s+/);}
function classList(node){return node.classList||new ClassList(node);}
function ClassList(node){this._node=node;this._names=classArray(node.getAttribute("class")||"");}
ClassList.prototype={add:function(name){var i=this._names.indexOf(name);if(i<0){this._names.push(name);this._node.setAttribute("class",this._names.join(" "));}},remove:function(name){var i=this._names.indexOf(name);if(i>=0){this._names.splice(i,1);this._node.setAttribute("class",this._names.join(" "));}},contains:function(name){return this._names.indexOf(name)>=0;}};function classedAdd(node,names){var list=classList(node),i=-1,n=names.length;while(++i<n)list.add(names[i]);}
function classedRemove(node,names){var list=classList(node),i=-1,n=names.length;while(++i<n)list.remove(names[i]);}
function classedTrue(names){return function(){classedAdd(this,names);};}
function classedFalse(names){return function(){classedRemove(this,names);};}
function classedFunction(names,value){return function(){(value.apply(this,arguments)?classedAdd:classedRemove)(this,names);};}
function selection_classed(name,value){var names=classArray(name+"");if(arguments.length<2){var list=classList(this.node()),i=-1,n=names.length;while(++i<n)if(!list.contains(names[i]))return false;return true;}
return this.each((typeof value==="function"?classedFunction:value?classedTrue:classedFalse)(names,value));}
function textRemove(){this.textContent="";}
function textConstant(value){return function(){this.textContent=value;};}
function textFunction(value){return function(){var v=value.apply(this,arguments);this.textContent=v==null?"":v;};}
function selection_text(value){return arguments.length?this.each(value==null?textRemove:(typeof value==="function"?textFunction:textConstant)(value)):this.node().textContent;}
function htmlRemove(){this.innerHTML="";}
function htmlConstant(value){return function(){this.innerHTML=value;};}
function htmlFunction(value){return function(){var v=value.apply(this,arguments);this.innerHTML=v==null?"":v;};}
function selection_html(value){return arguments.length?this.each(value==null?htmlRemove:(typeof value==="function"?htmlFunction:htmlConstant)(value)):this.node().innerHTML;}
function raise(){if(this.nextSibling)this.parentNode.appendChild(this);}
function selection_raise(){return this.each(raise);}
function lower(){if(this.previousSibling)
this.parentNode.insertBefore(this,this.parentNode.firstChild);}
function selection_lower(){return this.each(lower);}
function selection_append(name){var create=typeof name==="function"?name:creator(name);return this.select(function(){return this.appendChild(create.apply(this,arguments));});}
function constantNull(){return null;}
function selection_insert(name,before){var create=typeof name==="function"?name:creator(name),select=before==null?constantNull:typeof before==="function"?before:selector(before);return this.select(function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null);});}
function remove(){var parent=this.parentNode;if(parent)parent.removeChild(this);}
function selection_remove(){return this.each(remove);}
function selection_cloneShallow(){return this.parentNode.insertBefore(this.cloneNode(false),this.nextSibling);}
function selection_cloneDeep(){return this.parentNode.insertBefore(this.cloneNode(true),this.nextSibling);}
function selection_clone(deep){return this.select(deep?selection_cloneDeep:selection_cloneShallow);}
function selection_datum(value){return arguments.length?this.property("__data__",value):this.node().__data__;}
var filterEvents={};exports.event=null;if(typeof document!=="undefined"){var element$1=document.documentElement;if(!("onmouseenter"in element$1)){filterEvents={mouseenter:"mouseover",mouseleave:"mouseout"};}}
function filterContextListener(listener,index,group){listener=contextListener(listener,index,group);return function(event){var related=event.relatedTarget;if(!related||(related!==this&&!(related.compareDocumentPosition(this)&8))){listener.call(this,event);}};}
function contextListener(listener,index,group){return function(event1){var event0=exports.event;exports.event=event1;try{listener.call(this,this.__data__,index,group);}finally{exports.event=event0;}};}
function parseTypenames$1(typenames){return typenames.trim().split(/^|\s+/).map(function(t){var name="",i=t.indexOf(".");if(i>=0)(name=t.slice(i+1)),(t=t.slice(0,i));return{type:t,name:name};});}
function onRemove(typename){return function(){var on=this.__on;if(!on)return;for(var j=0,i=-1,m=on.length,o;j<m;++j){if(((o=on[j]),(!typename.type||o.type===typename.type)&&o.name===typename.name)){this.removeEventListener(o.type,o.listener,o.capture);}else{on[++i]=o;}}
if(++i)on.length=i;else delete this.__on;};}
function onAdd(typename,value,capture){var wrap=filterEvents.hasOwnProperty(typename.type)?filterContextListener:contextListener;return function(d,i,group){var on=this.__on,o,listener=wrap(value,i,group);if(on)
for(var j=0,m=on.length;j<m;++j){if((o=on[j]).type===typename.type&&o.name===typename.name){this.removeEventListener(o.type,o.listener,o.capture);this.addEventListener(o.type,(o.listener=listener),(o.capture=capture));o.value=value;return;}}
this.addEventListener(typename.type,listener,capture);o={type:typename.type,name:typename.name,value:value,listener:listener,capture:capture};if(!on)this.__on=[o];else on.push(o);};}
function selection_on(typename,value,capture){var typenames=parseTypenames$1(typename+""),i,n=typenames.length,t;if(arguments.length<2){var on=this.node().__on;if(on)
for(var j=0,m=on.length,o;j<m;++j){for(i=0,o=on[j];i<n;++i){if((t=typenames[i]).type===o.type&&t.name===o.name){return o.value;}}}
return;}
on=value?onAdd:onRemove;if(capture==null)capture=false;for(i=0;i<n;++i)this.each(on(typenames[i],value,capture));return this;}
function customEvent(event1,listener,that,args){var event0=exports.event;event1.sourceEvent=exports.event;exports.event=event1;try{return listener.apply(that,args);}finally{exports.event=event0;}}
function dispatchEvent(node,type,params){var window=defaultView(node),event=window.CustomEvent;if(typeof event==="function"){event=new event(type,params);}else{event=window.document.createEvent("Event");if(params)
event.initEvent(type,params.bubbles,params.cancelable),(event.detail=params.detail);else event.initEvent(type,false,false);}
node.dispatchEvent(event);}
function dispatchConstant(type,params){return function(){return dispatchEvent(this,type,params);};}
function dispatchFunction(type,params){return function(){return dispatchEvent(this,type,params.apply(this,arguments));};}
function selection_dispatch(type,params){return this.each((typeof params==="function"?dispatchFunction:dispatchConstant)(type,params));}
var root=[null];function Selection(groups,parents){this._groups=groups;this._parents=parents;}
function selection(){return new Selection([[document.documentElement]],root);}
Selection.prototype=selection.prototype={constructor:Selection,select:selection_select,selectAll:selection_selectAll,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,merge:selection_merge,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch};function select(selector){return typeof selector==="string"?new Selection([[document.querySelector(selector)]],[document.documentElement]):new Selection([[selector]],root);}
function create(name){return select(creator(name).call(document.documentElement));}
var nextId=0;function local(){return new Local();}
function Local(){this._="@"+(++nextId).toString(36);}
Local.prototype=local.prototype={constructor:Local,get:function(node){var id=this._;while(!(id in node))if(!(node=node.parentNode))return;return node[id];},set:function(node,value){return(node[this._]=value);},remove:function(node){return this._ in node&&delete node[this._];},toString:function(){return this._;}};function sourceEvent(){var current=exports.event,source;while((source=current.sourceEvent))current=source;return current;}
function point(node,event){var svg=node.ownerSVGElement||node;if(svg.createSVGPoint){var point=svg.createSVGPoint();(point.x=event.clientX),(point.y=event.clientY);point=point.matrixTransform(node.getScreenCTM().inverse());return[point.x,point.y];}
var rect=node.getBoundingClientRect();return[event.clientX-rect.left-node.clientLeft,event.clientY-rect.top-node.clientTop];}
function mouse(node){var event=sourceEvent();if(event.changedTouches)event=event.changedTouches[0];return point(node,event);}
function selectAll(selector){return typeof selector==="string"?new Selection([document.querySelectorAll(selector)],[document.documentElement]):new Selection([selector==null?[]:selector],root);}
function touch(node,touches,identifier){if(arguments.length<3)
(identifier=touches),(touches=sourceEvent().changedTouches);for(var i=0,n=touches?touches.length:0,touch;i<n;++i){if((touch=touches[i]).identifier===identifier){return point(node,touch);}}
return null;}
function touches(node,touches){if(touches==null)touches=sourceEvent().touches;for(var i=0,n=touches?touches.length:0,points=new Array(n);i<n;++i){points[i]=point(node,touches[i]);}
return points;}
function nopropagation(){exports.event.stopImmediatePropagation();}
function noevent(){exports.event.preventDefault();exports.event.stopImmediatePropagation();}
function dragDisable(view){var root=view.document.documentElement,selection$$1=select(view).on("dragstart.drag",noevent,true);if("onselectstart"in root){selection$$1.on("selectstart.drag",noevent,true);}else{root.__noselect=root.style.MozUserSelect;root.style.MozUserSelect="none";}}
function yesdrag(view,noclick){var root=view.document.documentElement,selection$$1=select(view).on("dragstart.drag",null);if(noclick){selection$$1.on("click.drag",noevent,true);setTimeout(function(){selection$$1.on("click.drag",null);},0);}
if("onselectstart"in root){selection$$1.on("selectstart.drag",null);}else{root.style.MozUserSelect=root.__noselect;delete root.__noselect;}}
function constant$2(x){return function(){return x;};}
function DragEvent(target,type,subject,id,active,x,y,dx,dy,dispatch){this.target=target;this.type=type;this.subject=subject;this.identifier=id;this.active=active;this.x=x;this.y=y;this.dx=dx;this.dy=dy;this._=dispatch;}
DragEvent.prototype.on=function(){var value=this._.on.apply(this._,arguments);return value===this._?this:value;};function defaultFilter(){return!exports.event.button;}
function defaultContainer(){return this.parentNode;}
function defaultSubject(d){return d==null?{x:exports.event.x,y:exports.event.y}:d;}
function defaultTouchable(){return"ontouchstart"in this;}
function drag(){var filter=defaultFilter,container=defaultContainer,subject=defaultSubject,touchable=defaultTouchable,gestures={},listeners=dispatch("start","drag","end"),active=0,mousedownx,mousedowny,mousemoving,touchending,clickDistance2=0;function drag(selection$$1){selection$$1.on("mousedown.drag",mousedowned).filter(touchable).on("touchstart.drag",touchstarted).on("touchmove.drag",touchmoved).on("touchend.drag touchcancel.drag",touchended).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)");}
function mousedowned(){if(touchending||!filter.apply(this,arguments))return;var gesture=beforestart("mouse",container.apply(this,arguments),mouse,this,arguments);if(!gesture)return;select(exports.event.view).on("mousemove.drag",mousemoved,true).on("mouseup.drag",mouseupped,true);dragDisable(exports.event.view);nopropagation();mousemoving=false;mousedownx=exports.event.clientX;mousedowny=exports.event.clientY;gesture("start");}
function mousemoved(){noevent();if(!mousemoving){var dx=exports.event.clientX-mousedownx,dy=exports.event.clientY-mousedowny;mousemoving=dx*dx+dy*dy>clickDistance2;}
gestures.mouse("drag");}
function mouseupped(){select(exports.event.view).on("mousemove.drag mouseup.drag",null);yesdrag(exports.event.view,mousemoving);noevent();gestures.mouse("end");}
function touchstarted(){if(!filter.apply(this,arguments))return;var touches$$1=exports.event.changedTouches,c=container.apply(this,arguments),n=touches$$1.length,i,gesture;for(i=0;i<n;++i){if((gesture=beforestart(touches$$1[i].identifier,c,touch,this,arguments))){nopropagation();gesture("start");}}}
function touchmoved(){var touches$$1=exports.event.changedTouches,n=touches$$1.length,i,gesture;for(i=0;i<n;++i){if((gesture=gestures[touches$$1[i].identifier])){noevent();gesture("drag");}}}
function touchended(){var touches$$1=exports.event.changedTouches,n=touches$$1.length,i,gesture;if(touchending)clearTimeout(touchending);touchending=setTimeout(function(){touchending=null;},500);for(i=0;i<n;++i){if((gesture=gestures[touches$$1[i].identifier])){nopropagation();gesture("end");}}}
function beforestart(id,container,point$$1,that,args){var p=point$$1(container,id),s,dx,dy,sublisteners=listeners.copy();if(!customEvent(new DragEvent(drag,"beforestart",s,id,active,p[0],p[1],0,0,sublisteners),function(){if((exports.event.subject=s=subject.apply(that,args))==null)
return false;dx=s.x-p[0]||0;dy=s.y-p[1]||0;return true;}))
return;return function gesture(type){var p0=p,n;switch(type){case"start":(gestures[id]=gesture),(n=active++);break;case"end":delete gestures[id],--active;case"drag":(p=point$$1(container,id)),(n=active);break;}
customEvent(new DragEvent(drag,type,s,id,n,p[0]+dx,p[1]+dy,p[0]-p0[0],p[1]-p0[1],sublisteners),sublisteners.apply,sublisteners,[type,that,args]);};}
drag.filter=function(_){return arguments.length?((filter=typeof _==="function"?_:constant$2(!!_)),drag):filter;};drag.container=function(_){return arguments.length?((container=typeof _==="function"?_:constant$2(_)),drag):container;};drag.subject=function(_){return arguments.length?((subject=typeof _==="function"?_:constant$2(_)),drag):subject;};drag.touchable=function(_){return arguments.length?((touchable=typeof _==="function"?_:constant$2(!!_)),drag):touchable;};drag.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?drag:value;};drag.clickDistance=function(_){return arguments.length?((clickDistance2=(_=+_)*_),drag):Math.sqrt(clickDistance2);};return drag;}
function define(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype;prototype.constructor=constructor;}
function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype;}
function Color(){}
var darker=0.7;var brighter=1/darker;var reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex3=/^#([0-9a-f]{3})$/,reHex6=/^#([0-9a-f]{6})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$");var named={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:0x00ffff,aquamarine:0x7fffd4,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0x000000,blanchedalmond:0xffebcd,blue:0x0000ff,blueviolet:0x8a2be2,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:0x5f9ea0,chartreuse:0x7fff00,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:0x6495ed,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:0x00ffff,darkblue:0x00008b,darkcyan:0x008b8b,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:0x006400,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:0x8b008b,darkolivegreen:0x556b2f,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:0x8b0000,darksalmon:0xe9967a,darkseagreen:0x8fbc8f,darkslateblue:0x483d8b,darkslategray:0x2f4f4f,darkslategrey:0x2f4f4f,darkturquoise:0x00ced1,darkviolet:0x9400d3,deeppink:0xff1493,deepskyblue:0x00bfff,dimgray:0x696969,dimgrey:0x696969,dodgerblue:0x1e90ff,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:0x228b22,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:0x808080,green:0x008000,greenyellow:0xadff2f,grey:0x808080,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:0x4b0082,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:0x7cfc00,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:0x90ee90,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:0x20b2aa,lightskyblue:0x87cefa,lightslategray:0x778899,lightslategrey:0x778899,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:0x00ff00,limegreen:0x32cd32,linen:0xfaf0e6,magenta:0xff00ff,maroon:0x800000,mediumaquamarine:0x66cdaa,mediumblue:0x0000cd,mediumorchid:0xba55d3,mediumpurple:0x9370db,mediumseagreen:0x3cb371,mediumslateblue:0x7b68ee,mediumspringgreen:0x00fa9a,mediumturquoise:0x48d1cc,mediumvioletred:0xc71585,midnightblue:0x191970,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:0x000080,oldlace:0xfdf5e6,olive:0x808000,olivedrab:0x6b8e23,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:0x800080,rebeccapurple:0x663399,red:0xff0000,rosybrown:0xbc8f8f,royalblue:0x4169e1,saddlebrown:0x8b4513,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:0x2e8b57,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:0x87ceeb,slateblue:0x6a5acd,slategray:0x708090,slategrey:0x708090,snow:0xfffafa,springgreen:0x00ff7f,steelblue:0x4682b4,tan:0xd2b48c,teal:0x008080,thistle:0xd8bfd8,tomato:0xff6347,turquoise:0x40e0d0,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};define(Color,color,{displayable:function(){return this.rgb().displayable();},hex:function(){return this.rgb().hex();},toString:function(){return this.rgb()+"";}});function color(format){var m;format=(format+"").trim().toLowerCase();return(m=reHex3.exec(format))?((m=parseInt(m[1],16)),new Rgb(((m>>8)&0xf)|((m>>4)&0x0f0),((m>>4)&0xf)|(m&0xf0),((m&0xf)<<4)|(m&0xf),1)):(m=reHex6.exec(format))?rgbn(parseInt(m[1],16)):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(m[1]*255/100,m[2]*255/100,m[3]*255/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(m[1]*255/100,m[2]*255/100,m[3]*255/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):format==="transparent"?new Rgb(NaN,NaN,NaN,0):null;}
function rgbn(n){return new Rgb((n>>16)&0xff,(n>>8)&0xff,n&0xff,1);}
function rgba(r,g,b,a){if(a<=0)r=g=b=NaN;return new Rgb(r,g,b,a);}
function rgbConvert(o){if(!(o instanceof Color))o=color(o);if(!o)return new Rgb();o=o.rgb();return new Rgb(o.r,o.g,o.b,o.opacity);}
function rgb(r,g,b,opacity){return arguments.length===1?rgbConvert(r):new Rgb(r,g,b,opacity==null?1:opacity);}
function Rgb(r,g,b,opacity){this.r=+r;this.g=+g;this.b=+b;this.opacity=+opacity;}
define(Rgb,rgb,extend(Color,{brighter:function(k){k=k==null?brighter:Math.pow(brighter,k);return new Rgb(this.r*k,this.g*k,this.b*k,this.opacity);},darker:function(k){k=k==null?darker:Math.pow(darker,k);return new Rgb(this.r*k,this.g*k,this.b*k,this.opacity);},rgb:function(){return this;},displayable:function(){return(0<=this.r&&this.r<=255&&(0<=this.g&&this.g<=255)&&(0<=this.b&&this.b<=255)&&(0<=this.opacity&&this.opacity<=1));},hex:function(){return"#"+hex(this.r)+hex(this.g)+hex(this.b);},toString:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return((a===1?"rgb(":"rgba(")+
Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+
Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+
Math.max(0,Math.min(255,Math.round(this.b)||0))+
(a===1?")":", "+a+")"));}}));function hex(value){value=Math.max(0,Math.min(255,Math.round(value)||0));return(value<16?"0":"")+value.toString(16);}
function hsla(h,s,l,a){if(a<=0)h=s=l=NaN;else if(l<=0||l>=1)h=s=NaN;else if(s<=0)h=NaN;return new Hsl(h,s,l,a);}
function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(!(o instanceof Color))o=color(o);if(!o)return new Hsl();if(o instanceof Hsl)return o;o=o.rgb();var r=o.r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;if(s){if(r===max)h=(g-b)/s+(g<b)*6;else if(g===max)h=(b-r)/s+2;else h=(r-g)/s+4;s/=l<0.5?max+min:2-max-min;h*=60;}else{s=l>0&&l<1?0:h;}
return new Hsl(h,s,l,o.opacity);}
function hsl(h,s,l,opacity){return arguments.length===1?hslConvert(h):new Hsl(h,s,l,opacity==null?1:opacity);}
function Hsl(h,s,l,opacity){this.h=+h;this.s=+s;this.l=+l;this.opacity=+opacity;}
define(Hsl,hsl,extend(Color,{brighter:function(k){k=k==null?brighter:Math.pow(brighter,k);return new Hsl(this.h,this.s,this.l*k,this.opacity);},darker:function(k){k=k==null?darker:Math.pow(darker,k);return new Hsl(this.h,this.s,this.l*k,this.opacity);},rgb:function(){var h=this.h%360+(this.h<0)*360,s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<0.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity);},displayable:function(){return(((0<=this.s&&this.s<=1)||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1));}}));function hsl2rgb(h,m1,m2){return((h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)*255);}
var deg2rad=Math.PI/180;var rad2deg=180/Math.PI;var K=18,Xn=0.96422,Yn=1,Zn=0.82521,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1;function labConvert(o){if(o instanceof Lab)return new Lab(o.l,o.a,o.b,o.opacity);if(o instanceof Hcl){if(isNaN(o.h))return new Lab(o.l,0,0,o.opacity);var h=o.h*deg2rad;return new Lab(o.l,Math.cos(h)*o.c,Math.sin(h)*o.c,o.opacity);}
if(!(o instanceof Rgb))o=rgbConvert(o);var r=rgb2lrgb(o.r),g=rgb2lrgb(o.g),b=rgb2lrgb(o.b),y=xyz2lab((0.2225045*r+0.7168786*g+0.0606169*b)/Yn),x,z;if(r===g&&g===b)x=z=y;else{x=xyz2lab((0.4360747*r+0.3850649*g+0.1430804*b)/Xn);z=xyz2lab((0.0139322*r+0.0971045*g+0.7141733*b)/Zn);}
return new Lab(116*y-16,500*(x-y),200*(y-z),o.opacity);}
function gray(l,opacity){return new Lab(l,0,0,opacity==null?1:opacity);}
function lab(l,a,b,opacity){return arguments.length===1?labConvert(l):new Lab(l,a,b,opacity==null?1:opacity);}
function Lab(l,a,b,opacity){this.l=+l;this.a=+a;this.b=+b;this.opacity=+opacity;}
define(Lab,lab,extend(Color,{brighter:function(k){return new Lab(this.l+K*(k==null?1:k),this.a,this.b,this.opacity);},darker:function(k){return new Lab(this.l-K*(k==null?1:k),this.a,this.b,this.opacity);},rgb:function(){var y=(this.l+16)/116,x=isNaN(this.a)?y:y+this.a/500,z=isNaN(this.b)?y:y-this.b/200;x=Xn*lab2xyz(x);y=Yn*lab2xyz(y);z=Zn*lab2xyz(z);return new Rgb(lrgb2rgb(3.1338561*x-1.6168667*y-0.4906146*z),lrgb2rgb(-0.9787684*x+1.9161415*y+0.033454*z),lrgb2rgb(0.0719453*x-0.2289914*y+1.4052427*z),this.opacity);}}));function xyz2lab(t){return t>t3?Math.pow(t,1/3):t/t2+t0;}
function lab2xyz(t){return t>t1?t*t*t:t2*(t-t0);}
function lrgb2rgb(x){return(255*(x<=0.0031308?12.92*x:1.055*Math.pow(x,1/2.4)-0.055));}
function rgb2lrgb(x){return(x/=255)<=0.04045?x/12.92:Math.pow((x+0.055)/1.055,2.4);}
function hclConvert(o){if(o instanceof Hcl)return new Hcl(o.h,o.c,o.l,o.opacity);if(!(o instanceof Lab))o=labConvert(o);if(o.a===0&&o.b===0)return new Hcl(NaN,0,o.l,o.opacity);var h=Math.atan2(o.b,o.a)*rad2deg;return new Hcl(h<0?h+360:h,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity);}
function lch(l,c,h,opacity){return arguments.length===1?hclConvert(l):new Hcl(h,c,l,opacity==null?1:opacity);}
function hcl(h,c,l,opacity){return arguments.length===1?hclConvert(h):new Hcl(h,c,l,opacity==null?1:opacity);}
function Hcl(h,c,l,opacity){this.h=+h;this.c=+c;this.l=+l;this.opacity=+opacity;}
define(Hcl,hcl,extend(Color,{brighter:function(k){return new Hcl(this.h,this.c,this.l+K*(k==null?1:k),this.opacity);},darker:function(k){return new Hcl(this.h,this.c,this.l-K*(k==null?1:k),this.opacity);},rgb:function(){return labConvert(this).rgb();}}));var A=-0.14861,B=+1.78277,C=-0.29227,D=-0.90649,E=+1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelixConvert(o){if(o instanceof Cubehelix)return new Cubehelix(o.h,o.s,o.l,o.opacity);if(!(o instanceof Rgb))o=rgbConvert(o);var r=o.r/255,g=o.g/255,b=o.b/255,l=(BC_DA*b+ED*r-EB*g)/(BC_DA+ED-EB),bl=b-l,k=(E*(g-l)-C*bl)/D,s=Math.sqrt(k*k+bl*bl)/(E*l*(1-l)),h=s?Math.atan2(k,bl)*rad2deg-120:NaN;return new Cubehelix(h<0?h+360:h,s,l,o.opacity);}
function cubehelix(h,s,l,opacity){return arguments.length===1?cubehelixConvert(h):new Cubehelix(h,s,l,opacity==null?1:opacity);}
function Cubehelix(h,s,l,opacity){this.h=+h;this.s=+s;this.l=+l;this.opacity=+opacity;}
define(Cubehelix,cubehelix,extend(Color,{brighter:function(k){k=k==null?brighter:Math.pow(brighter,k);return new Cubehelix(this.h,this.s,this.l*k,this.opacity);},darker:function(k){k=k==null?darker:Math.pow(darker,k);return new Cubehelix(this.h,this.s,this.l*k,this.opacity);},rgb:function(){var h=isNaN(this.h)?0:(this.h+120)*deg2rad,l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),cosh=Math.cos(h),sinh=Math.sin(h);return new Rgb(255*(l+a*(A*cosh+B*sinh)),255*(l+a*(C*cosh+D*sinh)),255*(l+a*(E*cosh)),this.opacity);}}));function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return(((1-3*t1+3*t2-t3)*v0+
(4-6*t2+3*t3)*v1+
(1+3*t1+3*t2-3*t3)*v2+
t3*v3)/6);}
function basis$1(values){var n=values.length-1;return function(t){var i=t<=0?(t=0):t>=1?((t=1),n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis((t-i/n)*n,v0,v1,v2,v3);};}
function basisClosed(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis((t-i/n)*n,v0,v1,v2,v3);};}
function constant$3(x){return function(){return x;};}
function linear(a,d){return function(t){return a+t*d;};}
function exponential(a,b,y){return((a=Math.pow(a,y)),(b=Math.pow(b,y)-a),(y=1/y),function(t){return Math.pow(a+t*b,y);});}
function hue(a,b){var d=b-a;return d?linear(a,d>180||d<-180?d-360*Math.round(d/360):d):constant$3(isNaN(a)?b:a);}
function gamma(y){return(y=+y)===1?nogamma:function(a,b){return b-a?exponential(a,b,y):constant$3(isNaN(a)?b:a);};}
function nogamma(a,b){var d=b-a;return d?linear(a,d):constant$3(isNaN(a)?b:a);}
var interpolateRgb=(function rgbGamma(y){var color$$1=gamma(y);function rgb$$1(start,end){var r=color$$1((start=rgb(start)).r,(end=rgb(end)).r),g=color$$1(start.g,end.g),b=color$$1(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){start.r=r(t);start.g=g(t);start.b=b(t);start.opacity=opacity(t);return start+"";};}
rgb$$1.gamma=rgbGamma;return rgb$$1;})(1);function rgbSpline(spline){return function(colors){var n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n),i,color$$1;for(i=0;i<n;++i){color$$1=rgb(colors[i]);r[i]=color$$1.r||0;g[i]=color$$1.g||0;b[i]=color$$1.b||0;}
r=spline(r);g=spline(g);b=spline(b);color$$1.opacity=1;return function(t){color$$1.r=r(t);color$$1.g=g(t);color$$1.b=b(t);return color$$1+"";};};}
var rgbBasis=rgbSpline(basis$1);var rgbBasisClosed=rgbSpline(basisClosed);function array$1(a,b){var nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb),i;for(i=0;i<na;++i)x[i]=interpolateValue(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c;};}
function date(a,b){var d=new Date();return((a=+a),(b-=a),function(t){return d.setTime(a+b*t),d;});}
function reinterpolate(a,b){return((a=+a),(b-=a),function(t){return a+b*t;});}
function object(a,b){var i={},c={},k;if(a===null||typeof a!=="object")a={};if(b===null||typeof b!=="object")b={};for(k in b){if(k in a){i[k]=interpolateValue(a[k],b[k]);}else{c[k]=b[k];}}
return function(t){for(k in i)c[k]=i[k](t);return c;};}
var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(b){return function(){return b;};}
function one(b){return function(t){return b(t)+"";};}
function interpolateString(a,b){var bi=(reA.lastIndex=reB.lastIndex=0),am,bm,bs,i=-1,s=[],q=[];(a=a+""),(b=b+"");while((am=reA.exec(a))&&(bm=reB.exec(b))){if((bs=bm.index)>bi){bs=b.slice(bi,bs);if(s[i])s[i]+=bs;else s[++i]=bs;}
if((am=am[0])===(bm=bm[0])){if(s[i])s[i]+=bm;else s[++i]=bm;}else{s[++i]=null;q.push({i:i,x:reinterpolate(am,bm)});}
bi=reB.lastIndex;}
if(bi<b.length){bs=b.slice(bi);if(s[i])s[i]+=bs;else s[++i]=bs;}
return s.length<2?q[0]?one(q[0].x):zero(b):((b=q.length),function(t){for(var i=0,o;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("");});}
function interpolateValue(a,b){var t=typeof b,c;return b==null||t==="boolean"?constant$3(b):(t==="number"?reinterpolate:t==="string"?(c=color(b))?((b=c),interpolateRgb):interpolateString:b instanceof color?interpolateRgb:b instanceof Date?date:Array.isArray(b)?array$1:(typeof b.valueOf!=="function"&&typeof b.toString!=="function")||isNaN(b)?object:reinterpolate)(a,b);}
function interpolateRound(a,b){return((a=+a),(b-=a),function(t){return Math.round(a+b*t);});}
var degrees=180/Math.PI;var identity$2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(a,b,c,d,e,f){var scaleX,scaleY,skewX;if((scaleX=Math.sqrt(a*a+b*b)))(a/=scaleX),(b/=scaleX);if((skewX=a*c+b*d))(c-=a*skewX),(d-=b*skewX);if((scaleY=Math.sqrt(c*c+d*d)))
(c/=scaleY),(d/=scaleY),(skewX/=scaleY);if(a*d<b*c)(a=-a),(b=-b),(skewX=-skewX),(scaleX=-scaleX);return{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,scaleX:scaleX,scaleY:scaleY};}
var cssNode,cssRoot,cssView,svgNode;function parseCss(value){if(value==="none")return identity$2;if(!cssNode)
(cssNode=document.createElement("DIV")),(cssRoot=document.documentElement),(cssView=document.defaultView);cssNode.style.transform=value;value=cssView.getComputedStyle(cssRoot.appendChild(cssNode),null).getPropertyValue("transform");cssRoot.removeChild(cssNode);value=value.slice(7,-1).split(",");return decompose(+value[0],+value[1],+value[2],+value[3],+value[4],+value[5]);}
function parseSvg(value){if(value==null)return identity$2;if(!svgNode)
svgNode=document.createElementNS("http://www.w3.org/2000/svg","g");svgNode.setAttribute("transform",value);if(!(value=svgNode.transform.baseVal.consolidate()))return identity$2;value=value.matrix;return decompose(value.a,value.b,value.c,value.d,value.e,value.f);}
function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":"";}
function translate(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:reinterpolate(xa,xb)},{i:i-2,x:reinterpolate(ya,yb)});}else if(xb||yb){s.push("translate("+xb+pxComma+yb+pxParen);}}
function rotate(a,b,s,q){if(a!==b){if(a-b>180)b+=360;else if(b-a>180)a+=360;q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:reinterpolate(a,b)});}else if(b){s.push(pop(s)+"rotate("+b+degParen);}}
function skewX(a,b,s,q){if(a!==b){q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:reinterpolate(a,b)});}else if(b){s.push(pop(s)+"skewX("+b+degParen);}}
function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:reinterpolate(xa,xb)},{i:i-2,x:reinterpolate(ya,yb)});}else if(xb!==1||yb!==1){s.push(pop(s)+"scale("+xb+","+yb+")");}}
return function(a,b){var s=[],q=[];(a=parse(a)),(b=parse(b));translate(a.translateX,a.translateY,b.translateX,b.translateY,s,q);rotate(a.rotate,b.rotate,s,q);skewX(a.skewX,b.skewX,s,q);scale(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q);a=b=null;return function(t){var i=-1,n=q.length,o;while(++i<n)s[(o=q[i]).i]=o.x(t);return s.join("");};};}
var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)");var interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")");var rho=Math.SQRT2,rho2=2,rho4=4,epsilon2=1e-12;function cosh(x){return((x=Math.exp(x))+1/x)/2;}
function sinh(x){return((x=Math.exp(x))-1/x)/2;}
function tanh(x){return((x=Math.exp(2*x))-1)/(x+1);}
function interpolateZoom(p0,p1){var ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy,i,S;if(d2<epsilon2){S=Math.log(w1/w0)/rho;i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(rho*t*S)];};}
else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+rho4*d2)/(2*w0*rho2*d1),b1=(w1*w1-w0*w0-rho4*d2)/(2*w1*rho2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/rho;i=function(t){var s=t*S,coshr0=cosh(r0),u=w0/(rho2*d1)*(coshr0*tanh(rho*s+r0)-sinh(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/cosh(rho*s+r0)];};}
i.duration=S*1000;return i;}
function hsl$1(hue$$1){return function(start,end){var h=hue$$1((start=hsl(start)).h,(end=hsl(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){start.h=h(t);start.s=s(t);start.l=l(t);start.opacity=opacity(t);return start+"";};};}
var hsl$2=hsl$1(hue);var hslLong=hsl$1(nogamma);function lab$1(start,end){var l=nogamma((start=lab(start)).l,(end=lab(end)).l),a=nogamma(start.a,end.a),b=nogamma(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){start.l=l(t);start.a=a(t);start.b=b(t);start.opacity=opacity(t);return start+"";};}
function hcl$1(hue$$1){return function(start,end){var h=hue$$1((start=hcl(start)).h,(end=hcl(end)).h),c=nogamma(start.c,end.c),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){start.h=h(t);start.c=c(t);start.l=l(t);start.opacity=opacity(t);return start+"";};};}
var hcl$2=hcl$1(hue);var hclLong=hcl$1(nogamma);function cubehelix$1(hue$$1){return(function cubehelixGamma(y){y=+y;function cubehelix$$1(start,end){var h=hue$$1((start=cubehelix(start)).h,(end=cubehelix(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){start.h=h(t);start.s=s(t);start.l=l(Math.pow(t,y));start.opacity=opacity(t);return start+"";};}
cubehelix$$1.gamma=cubehelixGamma;return cubehelix$$1;})(1);}
var cubehelix$2=cubehelix$1(hue);var cubehelixLong=cubehelix$1(nogamma);function piecewise(interpolate,values){var i=0,n=values.length-1,v=values[0],I=new Array(n<0?0:n);while(i<n)I[i]=interpolate(v,(v=values[++i]));return function(t){var i=Math.max(0,Math.min(n-1,Math.floor((t*=n))));return I[i](t-i);};}
function quantize(interpolator,n){var samples=new Array(n);for(var i=0;i<n;++i)samples[i]=interpolator(i/(n-1));return samples;}
var frame=0,timeout=0,interval=0,pokeDelay=1000,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance==="object"&&performance.now?performance:Date,setFrame=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17);};function now(){return(clockNow||(setFrame(clearNow),(clockNow=clock.now()+clockSkew)));}
function clearNow(){clockNow=0;}
function Timer(){this._call=this._time=this._next=null;}
Timer.prototype=timer.prototype={constructor:Timer,restart:function(callback,delay,time){if(typeof callback!=="function")
throw new TypeError("callback is not a function");time=(time==null?now():+time)+(delay==null?0:+delay);if(!this._next&&taskTail!==this){if(taskTail)taskTail._next=this;else taskHead=this;taskTail=this;}
this._call=callback;this._time=time;sleep();},stop:function(){if(this._call){this._call=null;this._time=Infinity;sleep();}}};function timer(callback,delay,time){var t=new Timer();t.restart(callback,delay,time);return t;}
function timerFlush(){now();++frame;var t=taskHead,e;while(t){if((e=clockNow-t._time)>=0)t._call.call(null,e);t=t._next;}
--frame;}
function wake(){clockNow=(clockLast=clock.now())+clockSkew;frame=timeout=0;try{timerFlush();}finally{frame=0;nap();clockNow=0;}}
function poke(){var now=clock.now(),delay=now-clockLast;if(delay>pokeDelay)(clockSkew-=delay),(clockLast=now);}
function nap(){var t0,t1=taskHead,t2,time=Infinity;while(t1){if(t1._call){if(time>t1._time)time=t1._time;(t0=t1),(t1=t1._next);}else{(t2=t1._next),(t1._next=null);t1=t0?(t0._next=t2):(taskHead=t2);}}
taskTail=t0;sleep(time);}
function sleep(time){if(frame)return;if(timeout)timeout=clearTimeout(timeout);var delay=time-clockNow;if(delay>24){if(time<Infinity)
timeout=setTimeout(wake,time-clock.now()-clockSkew);if(interval)interval=clearInterval(interval);}else{if(!interval)
(clockLast=clock.now()),(interval=setInterval(poke,pokeDelay));(frame=1),setFrame(wake);}}
function timeout$1(callback,delay,time){var t=new Timer();delay=delay==null?0:+delay;t.restart(function(elapsed){t.stop();callback(elapsed+delay);},delay,time);return t;}
function interval$1(callback,delay,time){var t=new Timer(),total=delay;if(delay==null)return t.restart(callback,delay,time),t;(delay=+delay),(time=time==null?now():+time);t.restart(function tick(elapsed){elapsed+=total;t.restart(tick,(total+=delay),time);callback(elapsed);},delay,time);return t;}
var emptyOn=dispatch("start","end","interrupt");var emptyTween=[];var CREATED=0;var SCHEDULED=1;var STARTING=2;var STARTED=3;var RUNNING=4;var ENDING=5;var ENDED=6;function schedule(node,name,id,index,group,timing){var schedules=node.__transition;if(!schedules)node.__transition={};else if(id in schedules)return;create$1(node,id,{name:name,index:index,group:group,on:emptyOn,tween:emptyTween,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:CREATED});}
function init(node,id){var schedule=get$1(node,id);if(schedule.state>CREATED)
throw new Error("too late; already scheduled");return schedule;}
function set$1(node,id){var schedule=get$1(node,id);if(schedule.state>STARTING)throw new Error("too late; already started");return schedule;}
function get$1(node,id){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id]))
throw new Error("transition not found");return schedule;}
function create$1(node,id,self){var schedules=node.__transition,tween;schedules[id]=self;self.timer=timer(schedule,0,self.time);function schedule(elapsed){self.state=SCHEDULED;self.timer.restart(start,self.delay,self.time);if(self.delay<=elapsed)start(elapsed-self.delay);}
function start(elapsed){var i,j,n,o;if(self.state!==SCHEDULED)return stop();for(i in schedules){o=schedules[i];if(o.name!==self.name)continue;if(o.state===STARTED)return timeout$1(start);if(o.state===RUNNING){o.state=ENDED;o.timer.stop();o.on.call("interrupt",node,node.__data__,o.index,o.group);delete schedules[i];}
else if(+i<id){o.state=ENDED;o.timer.stop();delete schedules[i];}}
timeout$1(function(){if(self.state===STARTED){self.state=RUNNING;self.timer.restart(tick,self.delay,self.time);tick(elapsed);}});self.state=STARTING;self.on.call("start",node,node.__data__,self.index,self.group);if(self.state!==STARTING)return;self.state=STARTED;tween=new Array((n=self.tween.length));for(i=0,j=-1;i<n;++i){if((o=self.tween[i].value.call(node,node.__data__,self.index,self.group))){tween[++j]=o;}}
tween.length=j+1;}
function tick(elapsed){var t=elapsed<self.duration?self.ease.call(null,elapsed/self.duration):(self.timer.restart(stop),(self.state=ENDING),1),i=-1,n=tween.length;while(++i<n){tween[i].call(null,t);}
if(self.state===ENDING){self.on.call("end",node,node.__data__,self.index,self.group);stop();}}
function stop(){self.state=ENDED;self.timer.stop();delete schedules[id];for(var i in schedules)return;delete node.__transition;}}
function interrupt(node,name){var schedules=node.__transition,schedule$$1,active,empty=true,i;if(!schedules)return;name=name==null?null:name+"";for(i in schedules){if((schedule$$1=schedules[i]).name!==name){empty=false;continue;}
active=schedule$$1.state>STARTING&&schedule$$1.state<ENDING;schedule$$1.state=ENDED;schedule$$1.timer.stop();if(active)
schedule$$1.on.call("interrupt",node,node.__data__,schedule$$1.index,schedule$$1.group);delete schedules[i];}
if(empty)delete node.__transition;}
function selection_interrupt(name){return this.each(function(){interrupt(this,name);});}
function tweenRemove(id,name){var tween0,tween1;return function(){var schedule$$1=set$1(this,id),tween=schedule$$1.tween;if(tween!==tween0){tween1=tween0=tween;for(var i=0,n=tween1.length;i<n;++i){if(tween1[i].name===name){tween1=tween1.slice();tween1.splice(i,1);break;}}}
schedule$$1.tween=tween1;};}
function tweenFunction(id,name,value){var tween0,tween1;if(typeof value!=="function")throw new Error();return function(){var schedule$$1=set$1(this,id),tween=schedule$$1.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t={name:name,value:value},i=0,n=tween1.length;i<n;++i){if(tween1[i].name===name){tween1[i]=t;break;}}
if(i===n)tween1.push(t);}
schedule$$1.tween=tween1;};}
function transition_tween(name,value){var id=this._id;name+="";if(arguments.length<2){var tween=get$1(this.node(),id).tween;for(var i=0,n=tween.length,t;i<n;++i){if((t=tween[i]).name===name){return t.value;}}
return null;}
return this.each((value==null?tweenRemove:tweenFunction)(id,name,value));}
function tweenValue(transition,name,value){var id=transition._id;transition.each(function(){var schedule$$1=set$1(this,id);(schedule$$1.value||(schedule$$1.value={}))[name]=value.apply(this,arguments);});return function(node){return get$1(node,id).value[name];};}
function interpolate(a,b){var c;return(typeof b==="number"?reinterpolate:b instanceof color?interpolateRgb:(c=color(b))?((b=c),interpolateRgb):interpolateString)(a,b);}
function attrRemove$1(name){return function(){this.removeAttribute(name);};}
function attrRemoveNS$1(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local);};}
function attrConstant$1(name,interpolate$$1,value1){var value00,interpolate0;return function(){var value0=this.getAttribute(name);return value0===value1?null:value0===value00?interpolate0:(interpolate0=interpolate$$1((value00=value0),value1));};}
function attrConstantNS$1(fullname,interpolate$$1,value1){var value00,interpolate0;return function(){var value0=this.getAttributeNS(fullname.space,fullname.local);return value0===value1?null:value0===value00?interpolate0:(interpolate0=interpolate$$1((value00=value0),value1));};}
function attrFunction$1(name,interpolate$$1,value){var value00,value10,interpolate0;return function(){var value0,value1=value(this);if(value1==null)return void this.removeAttribute(name);value0=this.getAttribute(name);return value0===value1?null:value0===value00&&value1===value10?interpolate0:(interpolate0=interpolate$$1((value00=value0),(value10=value1)));};}
function attrFunctionNS$1(fullname,interpolate$$1,value){var value00,value10,interpolate0;return function(){var value0,value1=value(this);if(value1==null)
return void this.removeAttributeNS(fullname.space,fullname.local);value0=this.getAttributeNS(fullname.space,fullname.local);return value0===value1?null:value0===value00&&value1===value10?interpolate0:(interpolate0=interpolate$$1((value00=value0),(value10=value1)));};}
function transition_attr(name,value){var fullname=namespace(name),i=fullname==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(name,typeof value==="function"?(fullname.local?attrFunctionNS$1:attrFunction$1)(fullname,i,tweenValue(this,"attr."+name,value)):value==null?(fullname.local?attrRemoveNS$1:attrRemove$1)(fullname):(fullname.local?attrConstantNS$1:attrConstant$1)(fullname,i,value+""));}
function attrTweenNS(fullname,value){function tween(){var node=this,i=value.apply(node,arguments);return(i&&function(t){node.setAttributeNS(fullname.space,fullname.local,i(t));});}
tween._value=value;return tween;}
function attrTween(name,value){function tween(){var node=this,i=value.apply(node,arguments);return(i&&function(t){node.setAttribute(name,i(t));});}
tween._value=value;return tween;}
function transition_attrTween(name,value){var key="attr."+name;if(arguments.length<2)return(key=this.tween(key))&&key._value;if(value==null)return this.tween(key,null);if(typeof value!=="function")throw new Error();var fullname=namespace(name);return this.tween(key,(fullname.local?attrTweenNS:attrTween)(fullname,value));}
function delayFunction(id,value){return function(){init(this,id).delay=+value.apply(this,arguments);};}
function delayConstant(id,value){return((value=+value),function(){init(this,id).delay=value;});}
function transition_delay(value){var id=this._id;return arguments.length?this.each((typeof value==="function"?delayFunction:delayConstant)(id,value)):get$1(this.node(),id).delay;}
function durationFunction(id,value){return function(){set$1(this,id).duration=+value.apply(this,arguments);};}
function durationConstant(id,value){return((value=+value),function(){set$1(this,id).duration=value;});}
function transition_duration(value){var id=this._id;return arguments.length?this.each((typeof value==="function"?durationFunction:durationConstant)(id,value)):get$1(this.node(),id).duration;}
function easeConstant(id,value){if(typeof value!=="function")throw new Error();return function(){set$1(this,id).ease=value;};}
function transition_ease(value){var id=this._id;return arguments.length?this.each(easeConstant(id,value)):get$1(this.node(),id).ease;}
function transition_filter(match){if(typeof match!=="function")match=matcher$1(match);for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j){for(var group=groups[j],n=group.length,subgroup=(subgroups[j]=[]),node,i=0;i<n;++i){if((node=group[i])&&match.call(node,node.__data__,i,group)){subgroup.push(node);}}}
return new Transition(subgroups,this._parents,this._name,this._id);}
function transition_merge(transition$$1){if(transition$$1._id!==this._id)throw new Error();for(var groups0=this._groups,groups1=transition$$1._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j){for(var group0=groups0[j],group1=groups1[j],n=group0.length,merge=(merges[j]=new Array(n)),node,i=0;i<n;++i){if((node=group0[i]||group1[i])){merge[i]=node;}}}
for(;j<m0;++j){merges[j]=groups0[j];}
return new Transition(merges,this._parents,this._name,this._id);}
function start(name){return(name+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");if(i>=0)t=t.slice(0,i);return!t||t==="start";});}
function onFunction(id,name,listener){var on0,on1,sit=start(name)?init:set$1;return function(){var schedule$$1=sit(this,id),on=schedule$$1.on;if(on!==on0)(on1=(on0=on).copy()).on(name,listener);schedule$$1.on=on1;};}
function transition_on(name,listener){var id=this._id;return arguments.length<2?get$1(this.node(),id).on.on(name):this.each(onFunction(id,name,listener));}
function removeFunction(id){return function(){var parent=this.parentNode;for(var i in this.__transition)if(+i!==id)return;if(parent)parent.removeChild(this);};}
function transition_remove(){return this.on("end.remove",removeFunction(this._id));}
function transition_select(select$$1){var name=this._name,id=this._id;if(typeof select$$1!=="function")select$$1=selector(select$$1);for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j){for(var group=groups[j],n=group.length,subgroup=(subgroups[j]=new Array(n)),node,subnode,i=0;i<n;++i){if((node=group[i])&&(subnode=select$$1.call(node,node.__data__,i,group))){if("__data__"in node)subnode.__data__=node.__data__;subgroup[i]=subnode;schedule(subgroup[i],name,id,i,subgroup,get$1(node,id));}}}
return new Transition(subgroups,this._parents,name,id);}
function transition_selectAll(select$$1){var name=this._name,id=this._id;if(typeof select$$1!=="function")select$$1=selectorAll(select$$1);for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j){for(var group=groups[j],n=group.length,node,i=0;i<n;++i){if((node=group[i])){for(var children=select$$1.call(node,node.__data__,i,group),child,inherit=get$1(node,id),k=0,l=children.length;k<l;++k){if((child=children[k])){schedule(child,name,id,k,children,inherit);}}
subgroups.push(children);parents.push(node);}}}
return new Transition(subgroups,parents,name,id);}
var Selection$1=selection.prototype.constructor;function transition_selection(){return new Selection$1(this._groups,this._parents);}
function styleRemove$1(name,interpolate$$1){var value00,value10,interpolate0;return function(){var value0=styleValue(this,name),value1=(this.style.removeProperty(name),styleValue(this,name));return value0===value1?null:value0===value00&&value1===value10?interpolate0:(interpolate0=interpolate$$1((value00=value0),(value10=value1)));};}
function styleRemoveEnd(name){return function(){this.style.removeProperty(name);};}
function styleConstant$1(name,interpolate$$1,value1){var value00,interpolate0;return function(){var value0=styleValue(this,name);return value0===value1?null:value0===value00?interpolate0:(interpolate0=interpolate$$1((value00=value0),value1));};}
function styleFunction$1(name,interpolate$$1,value){var value00,value10,interpolate0;return function(){var value0=styleValue(this,name),value1=value(this);if(value1==null)
value1=(this.style.removeProperty(name),styleValue(this,name));return value0===value1?null:value0===value00&&value1===value10?interpolate0:(interpolate0=interpolate$$1((value00=value0),(value10=value1)));};}
function transition_style(name,value,priority){var i=(name+="")==="transform"?interpolateTransformCss:interpolate;return value==null?this.styleTween(name,styleRemove$1(name,i)).on("end.style."+name,styleRemoveEnd(name)):this.styleTween(name,typeof value==="function"?styleFunction$1(name,i,tweenValue(this,"style."+name,value)):styleConstant$1(name,i,value+""),priority);}
function styleTween(name,value,priority){function tween(){var node=this,i=value.apply(node,arguments);return(i&&function(t){node.style.setProperty(name,i(t),priority);});}
tween._value=value;return tween;}
function transition_styleTween(name,value,priority){var key="style."+(name+="");if(arguments.length<2)return(key=this.tween(key))&&key._value;if(value==null)return this.tween(key,null);if(typeof value!=="function")throw new Error();return this.tween(key,styleTween(name,value,priority==null?"":priority));}
function textConstant$1(value){return function(){this.textContent=value;};}
function textFunction$1(value){return function(){var value1=value(this);this.textContent=value1==null?"":value1;};}
function transition_text(value){return this.tween("text",typeof value==="function"?textFunction$1(tweenValue(this,"text",value)):textConstant$1(value==null?"":value+""));}
function transition_transition(){var name=this._name,id0=this._id,id1=newId();for(var groups=this._groups,m=groups.length,j=0;j<m;++j){for(var group=groups[j],n=group.length,node,i=0;i<n;++i){if((node=group[i])){var inherit=get$1(node,id0);schedule(node,name,id1,i,group,{time:inherit.time+inherit.delay+inherit.duration,delay:0,duration:inherit.duration,ease:inherit.ease});}}}
return new Transition(groups,this._parents,name,id1);}
var id=0;function Transition(groups,parents,name,id){this._groups=groups;this._parents=parents;this._name=name;this._id=id;}
function transition(name){return selection().transition(name);}
function newId(){return++id;}
var selection_prototype=selection.prototype;Transition.prototype=transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease};function linear$1(t){return+t;}
function quadIn(t){return t*t;}
function quadOut(t){return t*(2-t);}
function quadInOut(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2;}
function cubicIn(t){return t*t*t;}
function cubicOut(t){return--t*t*t+1;}
function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2;}
var exponent=3;var polyIn=(function custom(e){e=+e;function polyIn(t){return Math.pow(t,e);}
polyIn.exponent=custom;return polyIn;})(exponent);var polyOut=(function custom(e){e=+e;function polyOut(t){return 1-Math.pow(1-t,e);}
polyOut.exponent=custom;return polyOut;})(exponent);var polyInOut=(function custom(e){e=+e;function polyInOut(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2;}
polyInOut.exponent=custom;return polyInOut;})(exponent);var pi=Math.PI,halfPi=pi/2;function sinIn(t){return 1-Math.cos(t*halfPi);}
function sinOut(t){return Math.sin(t*halfPi);}
function sinInOut(t){return(1-Math.cos(pi*t))/2;}
function expIn(t){return Math.pow(2,10*t-10);}
function expOut(t){return 1-Math.pow(2,-10*t);}
function expInOut(t){return(((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2);}
function circleIn(t){return 1-Math.sqrt(1-t*t);}
function circleOut(t){return Math.sqrt(1- --t*t);}
function circleInOut(t){return(((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2);}
var b1=4/11,b2=6/11,b3=8/11,b4=3/4,b5=9/11,b6=10/11,b7=15/16,b8=21/22,b9=63/64,b0=1/b1/b1;function bounceIn(t){return 1-bounceOut(1-t);}
function bounceOut(t){return(t=+t)<b1?b0*t*t:t<b3?b0*(t-=b2)*t+b4:t<b6?b0*(t-=b5)*t+b7:b0*(t-=b8)*t+b9;}
function bounceInOut(t){return((t*=2)<=1?1-bounceOut(1-t):bounceOut(t-1)+1)/2;}
var overshoot=1.70158;var backIn=(function custom(s){s=+s;function backIn(t){return t*t*((s+1)*t-s);}
backIn.overshoot=custom;return backIn;})(overshoot);var backOut=(function custom(s){s=+s;function backOut(t){return--t*t*((s+1)*t+s)+1;}
backOut.overshoot=custom;return backOut;})(overshoot);var backInOut=(function custom(s){s=+s;function backInOut(t){return(((t*=2)<1?t*t*((s+1)*t-s):(t-=2)*t*((s+1)*t+s)+2)/2);}
backInOut.overshoot=custom;return backInOut;})(overshoot);var tau=2*Math.PI,amplitude=1,period=0.3;var elasticIn=(function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau);function elasticIn(t){return a*Math.pow(2,10*--t)*Math.sin((s-t)/p);}
elasticIn.amplitude=function(a){return custom(a,p*tau);};elasticIn.period=function(p){return custom(a,p);};return elasticIn;})(amplitude,period);var elasticOut=(function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau);function elasticOut(t){return 1-a*Math.pow(2,-10*(t=+t))*Math.sin((t+s)/p);}
elasticOut.amplitude=function(a){return custom(a,p*tau);};elasticOut.period=function(p){return custom(a,p);};return elasticOut;})(amplitude,period);var elasticInOut=(function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau);function elasticInOut(t){return(((t=t*2-1)<0?a*Math.pow(2,10*t)*Math.sin((s-t)/p):2-a*Math.pow(2,-10*t)*Math.sin((s+t)/p))/2);}
elasticInOut.amplitude=function(a){return custom(a,p*tau);};elasticInOut.period=function(p){return custom(a,p);};return elasticInOut;})(amplitude,period);var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(node,id){var timing;while(!(timing=node.__transition)||!(timing=timing[id])){if(!(node=node.parentNode)){return(defaultTiming.time=now()),defaultTiming;}}
return timing;}
function selection_transition(name){var id,timing;if(name instanceof Transition){(id=name._id),(name=name._name);}else{(id=newId()),((timing=defaultTiming).time=now()),(name=name==null?null:name+"");}
for(var groups=this._groups,m=groups.length,j=0;j<m;++j){for(var group=groups[j],n=group.length,node,i=0;i<n;++i){if((node=group[i])){schedule(node,name,id,i,group,timing||inherit(node,id));}}}
return new Transition(groups,this._parents,name,id);}
selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;var root$1=[null];function active(node,name){var schedules=node.__transition,schedule$$1,i;if(schedules){name=name==null?null:name+"";for(i in schedules){if((schedule$$1=schedules[i]).state>SCHEDULED&&schedule$$1.name===name){return new Transition([[node]],root$1,name,+i);}}}
return null;}
function constant$4(x){return function(){return x;};}
function BrushEvent(target,type,selection){this.target=target;this.type=type;this.selection=selection;}
function nopropagation$1(){exports.event.stopImmediatePropagation();}
function noevent$1(){exports.event.preventDefault();exports.event.stopImmediatePropagation();}
var MODE_DRAG={name:"drag"},MODE_SPACE={name:"space"},MODE_HANDLE={name:"handle"},MODE_CENTER={name:"center"};var X={name:"x",handles:["e","w"].map(type),input:function(x,e){return x&&[[x[0],e[0][1]],[x[1],e[1][1]]];},output:function(xy){return xy&&[xy[0][0],xy[1][0]];}};var Y={name:"y",handles:["n","s"].map(type),input:function(y,e){return y&&[[e[0][0],y[0]],[e[1][0],y[1]]];},output:function(xy){return xy&&[xy[0][1],xy[1][1]];}};var XY={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(type),input:function(xy){return xy;},output:function(xy){return xy;}};var cursors={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var flipX={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"};var flipY={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"};var signsX={overlay:+1,selection:+1,n:null,e:+1,s:null,w:-1,nw:-1,ne:+1,se:+1,sw:-1};var signsY={overlay:+1,selection:+1,n:-1,e:null,s:+1,w:null,nw:-1,ne:-1,se:+1,sw:+1};function type(t){return{type:t};}
function defaultFilter$1(){return!exports.event.button;}
function defaultExtent(){var svg=this.ownerSVGElement||this;return[[0,0],[svg.width.baseVal.value,svg.height.baseVal.value]];}
function local$1(node){while(!node.__brush)if(!(node=node.parentNode))return;return node.__brush;}
function empty$1(extent){return extent[0][0]===extent[1][0]||extent[0][1]===extent[1][1];}
function brushSelection(node){var state=node.__brush;return state?state.dim.output(state.selection):null;}
function brushX(){return brush$1(X);}
function brushY(){return brush$1(Y);}
function brush(){return brush$1(XY);}
function brush$1(dim){var extent=defaultExtent,filter=defaultFilter$1,listeners=dispatch(brush,"start","brush","end"),handleSize=6,touchending;function brush(group){var overlay=group.property("__brush",initialize).selectAll(".overlay").data([type("overlay")]);overlay.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",cursors.overlay).merge(overlay).each(function(){var extent=local$1(this).extent;select(this).attr("x",extent[0][0]).attr("y",extent[0][1]).attr("width",extent[1][0]-extent[0][0]).attr("height",extent[1][1]-extent[0][1]);});group.selectAll(".selection").data([type("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cursors.selection).attr("fill","#777").attr("fill-opacity",0.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var handle=group.selectAll(".handle").data(dim.handles,function(d){return d.type;});handle.exit().remove();handle.enter().append("rect").attr("class",function(d){return"handle handle--"+d.type;}).attr("cursor",function(d){return cursors[d.type];});group.each(redraw).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",started);}
brush.move=function(group,selection$$1){if(group.selection){group.on("start.brush",function(){emitter(this,arguments).beforestart().start();}).on("interrupt.brush end.brush",function(){emitter(this,arguments).end();}).tween("brush",function(){var that=this,state=that.__brush,emit=emitter(that,arguments),selection0=state.selection,selection1=dim.input(typeof selection$$1==="function"?selection$$1.apply(this,arguments):selection$$1,state.extent),i=interpolateValue(selection0,selection1);function tween(t){state.selection=t===1&&empty$1(selection1)?null:i(t);redraw.call(that);emit.brush();}
return selection0&&selection1?tween:tween(1);});}else{group.each(function(){var that=this,args=arguments,state=that.__brush,selection1=dim.input(typeof selection$$1==="function"?selection$$1.apply(that,args):selection$$1,state.extent),emit=emitter(that,args).beforestart();interrupt(that);state.selection=selection1==null||empty$1(selection1)?null:selection1;redraw.call(that);emit.start().brush().end();});}};function redraw(){var group=select(this),selection$$1=local$1(this).selection;if(selection$$1){group.selectAll(".selection").style("display",null).attr("x",selection$$1[0][0]).attr("y",selection$$1[0][1]).attr("width",selection$$1[1][0]-selection$$1[0][0]).attr("height",selection$$1[1][1]-selection$$1[0][1]);group.selectAll(".handle").style("display",null).attr("x",function(d){return d.type[d.type.length-1]==="e"?selection$$1[1][0]-handleSize/2:selection$$1[0][0]-handleSize/2;}).attr("y",function(d){return d.type[0]==="s"?selection$$1[1][1]-handleSize/2:selection$$1[0][1]-handleSize/2;}).attr("width",function(d){return d.type==="n"||d.type==="s"?selection$$1[1][0]-selection$$1[0][0]+handleSize:handleSize;}).attr("height",function(d){return d.type==="e"||d.type==="w"?selection$$1[1][1]-selection$$1[0][1]+handleSize:handleSize;});}else{group.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null);}}
function emitter(that,args){return that.__brush.emitter||new Emitter(that,args);}
function Emitter(that,args){this.that=that;this.args=args;this.state=that.__brush;this.active=0;}
Emitter.prototype={beforestart:function(){if(++this.active===1)
(this.state.emitter=this),(this.starting=true);return this;},start:function(){if(this.starting)(this.starting=false),this.emit("start");return this;},brush:function(){this.emit("brush");return this;},end:function(){if(--this.active===0)delete this.state.emitter,this.emit("end");return this;},emit:function(type){customEvent(new BrushEvent(brush,type,dim.output(this.state.selection)),listeners.apply,listeners,[type,this.that,this.args]);}};function started(){if(exports.event.touches){if(exports.event.changedTouches.length<exports.event.touches.length)
return noevent$1();}else if(touchending)return;if(!filter.apply(this,arguments))return;var that=this,type=exports.event.target.__data__.type,mode=(exports.event.metaKey?(type="overlay"):type)==="selection"?MODE_DRAG:exports.event.altKey?MODE_CENTER:MODE_HANDLE,signX=dim===Y?null:signsX[type],signY=dim===X?null:signsY[type],state=local$1(that),extent=state.extent,selection$$1=state.selection,W=extent[0][0],w0,w1,N=extent[0][1],n0,n1,E=extent[1][0],e0,e1,S=extent[1][1],s0,s1,dx,dy,moving,shifting=signX&&signY&&exports.event.shiftKey,lockX,lockY,point0=mouse(that),point$$1=point0,emit=emitter(that,arguments).beforestart();if(type==="overlay"){state.selection=selection$$1=[[(w0=dim===Y?W:point0[0]),(n0=dim===X?N:point0[1])],[(e0=dim===Y?E:w0),(s0=dim===X?S:n0)]];}else{w0=selection$$1[0][0];n0=selection$$1[0][1];e0=selection$$1[1][0];s0=selection$$1[1][1];}
w1=w0;n1=n0;e1=e0;s1=s0;var group=select(that).attr("pointer-events","none");var overlay=group.selectAll(".overlay").attr("cursor",cursors[type]);if(exports.event.touches){group.on("touchmove.brush",moved,true).on("touchend.brush touchcancel.brush",ended,true);}else{var view=select(exports.event.view).on("keydown.brush",keydowned,true).on("keyup.brush",keyupped,true).on("mousemove.brush",moved,true).on("mouseup.brush",ended,true);dragDisable(exports.event.view);}
nopropagation$1();interrupt(that);redraw.call(that);emit.start();function moved(){var point1=mouse(that);if(shifting&&!lockX&&!lockY){if(Math.abs(point1[0]-point$$1[0])>Math.abs(point1[1]-point$$1[1]))
lockY=true;else lockX=true;}
point$$1=point1;moving=true;noevent$1();move();}
function move(){var t;dx=point$$1[0]-point0[0];dy=point$$1[1]-point0[1];switch(mode){case MODE_SPACE:case MODE_DRAG:{if(signX)
(dx=Math.max(W-w0,Math.min(E-e0,dx))),(w1=w0+dx),(e1=e0+dx);if(signY)
(dy=Math.max(N-n0,Math.min(S-s0,dy))),(n1=n0+dy),(s1=s0+dy);break;}
case MODE_HANDLE:{if(signX<0)
(dx=Math.max(W-w0,Math.min(E-w0,dx))),(w1=w0+dx),(e1=e0);else if(signX>0)
(dx=Math.max(W-e0,Math.min(E-e0,dx))),(w1=w0),(e1=e0+dx);if(signY<0)
(dy=Math.max(N-n0,Math.min(S-n0,dy))),(n1=n0+dy),(s1=s0);else if(signY>0)
(dy=Math.max(N-s0,Math.min(S-s0,dy))),(n1=n0),(s1=s0+dy);break;}
case MODE_CENTER:{if(signX)
(w1=Math.max(W,Math.min(E,w0-dx*signX))),(e1=Math.max(W,Math.min(E,e0+dx*signX)));if(signY)
(n1=Math.max(N,Math.min(S,n0-dy*signY))),(s1=Math.max(N,Math.min(S,s0+dy*signY)));break;}}
if(e1<w1){signX*=-1;(t=w0),(w0=e0),(e0=t);(t=w1),(w1=e1),(e1=t);if(type in flipX)
overlay.attr("cursor",cursors[(type=flipX[type])]);}
if(s1<n1){signY*=-1;(t=n0),(n0=s0),(s0=t);(t=n1),(n1=s1),(s1=t);if(type in flipY)
overlay.attr("cursor",cursors[(type=flipY[type])]);}
if(state.selection)selection$$1=state.selection;if(lockX)(w1=selection$$1[0][0]),(e1=selection$$1[1][0]);if(lockY)(n1=selection$$1[0][1]),(s1=selection$$1[1][1]);if(selection$$1[0][0]!==w1||selection$$1[0][1]!==n1||selection$$1[1][0]!==e1||selection$$1[1][1]!==s1){state.selection=[[w1,n1],[e1,s1]];redraw.call(that);emit.brush();}}
function ended(){nopropagation$1();if(exports.event.touches){if(exports.event.touches.length)return;if(touchending)clearTimeout(touchending);touchending=setTimeout(function(){touchending=null;},500);group.on("touchmove.brush touchend.brush touchcancel.brush",null);}else{yesdrag(exports.event.view,moving);view.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);}
group.attr("pointer-events","all");overlay.attr("cursor",cursors.overlay);if(state.selection)selection$$1=state.selection;if(empty$1(selection$$1))(state.selection=null),redraw.call(that);emit.end();}
function keydowned(){switch(exports.event.keyCode){case 16:{shifting=signX&&signY;break;}
case 18:{if(mode===MODE_HANDLE){if(signX)(e0=e1-dx*signX),(w0=w1+dx*signX);if(signY)(s0=s1-dy*signY),(n0=n1+dy*signY);mode=MODE_CENTER;move();}
break;}
case 32:{if(mode===MODE_HANDLE||mode===MODE_CENTER){if(signX<0)e0=e1-dx;else if(signX>0)w0=w1-dx;if(signY<0)s0=s1-dy;else if(signY>0)n0=n1-dy;mode=MODE_SPACE;overlay.attr("cursor",cursors.selection);move();}
break;}
default:return;}
noevent$1();}
function keyupped(){switch(exports.event.keyCode){case 16:{if(shifting){lockX=lockY=shifting=false;move();}
break;}
case 18:{if(mode===MODE_CENTER){if(signX<0)e0=e1;else if(signX>0)w0=w1;if(signY<0)s0=s1;else if(signY>0)n0=n1;mode=MODE_HANDLE;move();}
break;}
case 32:{if(mode===MODE_SPACE){if(exports.event.altKey){if(signX)(e0=e1-dx*signX),(w0=w1+dx*signX);if(signY)(s0=s1-dy*signY),(n0=n1+dy*signY);mode=MODE_CENTER;}else{if(signX<0)e0=e1;else if(signX>0)w0=w1;if(signY<0)s0=s1;else if(signY>0)n0=n1;mode=MODE_HANDLE;}
overlay.attr("cursor",cursors[type]);move();}
break;}
default:return;}
noevent$1();}}
function initialize(){var state=this.__brush||{selection:null};state.extent=extent.apply(this,arguments);state.dim=dim;return state;}
brush.extent=function(_){return arguments.length?((extent=typeof _==="function"?_:constant$4([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]])),brush):extent;};brush.filter=function(_){return arguments.length?((filter=typeof _==="function"?_:constant$4(!!_)),brush):filter;};brush.handleSize=function(_){return arguments.length?((handleSize=+_),brush):handleSize;};brush.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?brush:value;};return brush;}
var cos=Math.cos;var sin=Math.sin;var pi$1=Math.PI;var halfPi$1=pi$1/2;var tau$1=pi$1*2;var max$1=Math.max;function compareValue(compare){return function(a,b){return compare(a.source.value+a.target.value,b.source.value+b.target.value);};}
function chord(){var padAngle=0,sortGroups=null,sortSubgroups=null,sortChords=null;function chord(matrix){var n=matrix.length,groupSums=[],groupIndex=sequence(n),subgroupIndex=[],chords=[],groups=(chords.groups=new Array(n)),subgroups=new Array(n*n),k,x,x0,dx,i,j;(k=0),(i=-1);while(++i<n){(x=0),(j=-1);while(++j<n){x+=matrix[i][j];}
groupSums.push(x);subgroupIndex.push(sequence(n));k+=x;}
if(sortGroups)
groupIndex.sort(function(a,b){return sortGroups(groupSums[a],groupSums[b]);});if(sortSubgroups)
subgroupIndex.forEach(function(d,i){d.sort(function(a,b){return sortSubgroups(matrix[i][a],matrix[i][b]);});});k=max$1(0,tau$1-padAngle*n)/k;dx=k?padAngle:tau$1/n;(x=0),(i=-1);while(++i<n){(x0=x),(j=-1);while(++j<n){var di=groupIndex[i],dj=subgroupIndex[di][j],v=matrix[di][dj],a0=x,a1=(x+=v*k);subgroups[dj*n+di]={index:di,subindex:dj,startAngle:a0,endAngle:a1,value:v};}
groups[di]={index:di,startAngle:x0,endAngle:x,value:groupSums[di]};x+=dx;}
i=-1;while(++i<n){j=i-1;while(++j<n){var source=subgroups[j*n+i],target=subgroups[i*n+j];if(source.value||target.value){chords.push(source.value<target.value?{source:target,target:source}:{source:source,target:target});}}}
return sortChords?chords.sort(sortChords):chords;}
chord.padAngle=function(_){return arguments.length?((padAngle=max$1(0,_)),chord):padAngle;};chord.sortGroups=function(_){return arguments.length?((sortGroups=_),chord):sortGroups;};chord.sortSubgroups=function(_){return arguments.length?((sortSubgroups=_),chord):sortSubgroups;};chord.sortChords=function(_){return arguments.length?(_==null?(sortChords=null):((sortChords=compareValue(_))._=_),chord):sortChords&&sortChords._;};return chord;}
var slice$2=Array.prototype.slice;function constant$5(x){return function(){return x;};}
var pi$2=Math.PI,tau$2=2*pi$2,epsilon$1=1e-6,tauEpsilon=tau$2-epsilon$1;function Path(){this._x0=this._y0=this._x1=this._y1=null;this._="";}
function path(){return new Path();}
Path.prototype=path.prototype={constructor:Path,moveTo:function(x,y){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y);},closePath:function(){if(this._x1!==null){(this._x1=this._x0),(this._y1=this._y0);this._+="Z";}},lineTo:function(x,y){this._+="L"+(this._x1=+x)+","+(this._y1=+y);},quadraticCurveTo:function(x1,y1,x,y){this._+="Q"+ +x1+","+ +y1+","+(this._x1=+x)+","+(this._y1=+y);},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._+="C"+
+x1+","+
+y1+","+
+x2+","+
+y2+","+
(this._x1=+x)+","+
(this._y1=+y);},arcTo:function(x1,y1,x2,y2,r){(x1=+x1),(y1=+y1),(x2=+x2),(y2=+y2),(r=+r);var x0=this._x1,y0=this._y1,x21=x2-x1,y21=y2-y1,x01=x0-x1,y01=y0-y1,l01_2=x01*x01+y01*y01;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null){this._+="M"+(this._x1=x1)+","+(this._y1=y1);}
else if(!(l01_2>epsilon$1)){}
else if(!(Math.abs(y01*x21-y21*x01)>epsilon$1)||!r){this._+="L"+(this._x1=x1)+","+(this._y1=y1);}
else{var x20=x2-x0,y20=y2-y0,l21_2=x21*x21+y21*y21,l20_2=x20*x20+y20*y20,l21=Math.sqrt(l21_2),l01=Math.sqrt(l01_2),l=r*Math.tan((pi$2-Math.acos((l21_2+l01_2-l20_2)/(2*l21*l01)))/2),t01=l/l01,t21=l/l21;if(Math.abs(t01-1)>epsilon$1){this._+="L"+(x1+t01*x01)+","+(y1+t01*y01);}
this._+="A"+
r+","+
r+",0,0,"+
+(y01*x20>x01*y20)+","+
(this._x1=x1+t21*x21)+","+
(this._y1=y1+t21*y21);}},arc:function(x,y,r,a0,a1,ccw){(x=+x),(y=+y),(r=+r);var dx=r*Math.cos(a0),dy=r*Math.sin(a0),x0=x+dx,y0=y+dy,cw=1^ccw,da=ccw?a0-a1:a1-a0;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null){this._+="M"+x0+","+y0;}
else if(Math.abs(this._x1-x0)>epsilon$1||Math.abs(this._y1-y0)>epsilon$1){this._+="L"+x0+","+y0;}
if(!r)return;if(da<0)da=da%tau$2+tau$2;if(da>tauEpsilon){this._+="A"+
r+","+
r+",0,1,"+
cw+","+
(x-dx)+","+
(y-dy)+"A"+
r+","+
r+",0,1,"+
cw+","+
(this._x1=x0)+","+
(this._y1=y0);}
else if(da>epsilon$1){this._+="A"+
r+","+
r+",0,"+
+(da>=pi$2)+","+
cw+","+
(this._x1=x+r*Math.cos(a1))+","+
(this._y1=y+r*Math.sin(a1));}},rect:function(x,y,w,h){this._+="M"+
(this._x0=this._x1=+x)+","+
(this._y0=this._y1=+y)+"h"+
+w+"v"+
+h+"h"+
-w+"Z";},toString:function(){return this._;}};function defaultSource(d){return d.source;}
function defaultTarget(d){return d.target;}
function defaultRadius(d){return d.radius;}
function defaultStartAngle(d){return d.startAngle;}
function defaultEndAngle(d){return d.endAngle;}
function ribbon(){var source=defaultSource,target=defaultTarget,radius=defaultRadius,startAngle=defaultStartAngle,endAngle=defaultEndAngle,context=null;function ribbon(){var buffer,argv=slice$2.call(arguments),s=source.apply(this,argv),t=target.apply(this,argv),sr=+radius.apply(this,((argv[0]=s),argv)),sa0=startAngle.apply(this,argv)-halfPi$1,sa1=endAngle.apply(this,argv)-halfPi$1,sx0=sr*cos(sa0),sy0=sr*sin(sa0),tr=+radius.apply(this,((argv[0]=t),argv)),ta0=startAngle.apply(this,argv)-halfPi$1,ta1=endAngle.apply(this,argv)-halfPi$1;if(!context)context=buffer=path();context.moveTo(sx0,sy0);context.arc(0,0,sr,sa0,sa1);if(sa0!==ta0||sa1!==ta1){context.quadraticCurveTo(0,0,tr*cos(ta0),tr*sin(ta0));context.arc(0,0,tr,ta0,ta1);}
context.quadraticCurveTo(0,0,sx0,sy0);context.closePath();if(buffer)return(context=null),buffer+""||null;}
ribbon.radius=function(_){return arguments.length?((radius=typeof _==="function"?_:constant$5(+_)),ribbon):radius;};ribbon.startAngle=function(_){return arguments.length?((startAngle=typeof _==="function"?_:constant$5(+_)),ribbon):startAngle;};ribbon.endAngle=function(_){return arguments.length?((endAngle=typeof _==="function"?_:constant$5(+_)),ribbon):endAngle;};ribbon.source=function(_){return arguments.length?((source=_),ribbon):source;};ribbon.target=function(_){return arguments.length?((target=_),ribbon):target;};ribbon.context=function(_){return arguments.length?((context=_==null?null:_),ribbon):context;};return ribbon;}
var prefix="$";function Map(){}
Map.prototype=map$1.prototype={constructor:Map,has:function(key){return prefix+key in this;},get:function(key){return this[prefix+key];},set:function(key,value){this[prefix+key]=value;return this;},remove:function(key){var property=prefix+key;return property in this&&delete this[property];},clear:function(){for(var property in this)
if(property[0]===prefix)delete this[property];},keys:function(){var keys=[];for(var property in this)
if(property[0]===prefix)keys.push(property.slice(1));return keys;},values:function(){var values=[];for(var property in this)
if(property[0]===prefix)values.push(this[property]);return values;},entries:function(){var entries=[];for(var property in this)
if(property[0]===prefix)
entries.push({key:property.slice(1),value:this[property]});return entries;},size:function(){var size=0;for(var property in this)if(property[0]===prefix)++size;return size;},empty:function(){for(var property in this)if(property[0]===prefix)return false;return true;},each:function(f){for(var property in this)
if(property[0]===prefix)f(this[property],property.slice(1),this);}};function map$1(object,f){var map=new Map();if(object instanceof Map)
object.each(function(value,key){map.set(key,value);});else if(Array.isArray(object)){var i=-1,n=object.length,o;if(f==null)while(++i<n)map.set(i,object[i]);else while(++i<n)map.set(f((o=object[i]),i,object),o);}
else if(object)for(var key in object)map.set(key,object[key]);return map;}
function nest(){var keys=[],sortKeys=[],sortValues,rollup,nest;function apply(array,depth,createResult,setResult){if(depth>=keys.length){if(sortValues!=null)array.sort(sortValues);return rollup!=null?rollup(array):array;}
var i=-1,n=array.length,key=keys[depth++],keyValue,value,valuesByKey=map$1(),values,result=createResult();while(++i<n){if((values=valuesByKey.get((keyValue=key((value=array[i]))+"")))){values.push(value);}else{valuesByKey.set(keyValue,[value]);}}
valuesByKey.each(function(values,key){setResult(result,key,apply(values,depth,createResult,setResult));});return result;}
function entries(map,depth){if(++depth>keys.length)return map;var array,sortKey=sortKeys[depth-1];if(rollup!=null&&depth>=keys.length)array=map.entries();else
(array=[]),map.each(function(v,k){array.push({key:k,values:entries(v,depth)});});return sortKey!=null?array.sort(function(a,b){return sortKey(a.key,b.key);}):array;}
return(nest={object:function(array){return apply(array,0,createObject,setObject);},map:function(array){return apply(array,0,createMap,setMap);},entries:function(array){return entries(apply(array,0,createMap,setMap),0);},key:function(d){keys.push(d);return nest;},sortKeys:function(order){sortKeys[keys.length-1]=order;return nest;},sortValues:function(order){sortValues=order;return nest;},rollup:function(f){rollup=f;return nest;}});}
function createObject(){return{};}
function setObject(object,key,value){object[key]=value;}
function createMap(){return map$1();}
function setMap(map,key,value){map.set(key,value);}
function Set(){}
var proto=map$1.prototype;Set.prototype=set$2.prototype={constructor:Set,has:proto.has,add:function(value){value+="";this[prefix+value]=value;return this;},remove:proto.remove,clear:proto.clear,values:proto.keys,size:proto.size,empty:proto.empty,each:proto.each};function set$2(object,f){var set=new Set();if(object instanceof Set)
object.each(function(value){set.add(value);});else if(object){var i=-1,n=object.length;if(f==null)while(++i<n)set.add(object[i]);else while(++i<n)set.add(f(object[i],i,object));}
return set;}
function keys(map){var keys=[];for(var key in map)keys.push(key);return keys;}
function values(map){var values=[];for(var key in map)values.push(map[key]);return values;}
function entries(map){var entries=[];for(var key in map)entries.push({key:key,value:map[key]});return entries;}
var array$2=Array.prototype;var slice$3=array$2.slice;function ascending$2(a,b){return a-b;}
function area(ring){var i=0,n=ring.length,area=ring[n-1][1]*ring[0][0]-ring[n-1][0]*ring[0][1];while(++i<n)
area+=ring[i-1][1]*ring[i][0]-ring[i-1][0]*ring[i][1];return area;}
function constant$6(x){return function(){return x;};}
function contains(ring,hole){var i=-1,n=hole.length,c;while(++i<n)if((c=ringContains(ring,hole[i])))return c;return 0;}
function ringContains(ring,point){var x=point[0],y=point[1],contains=-1;for(var i=0,n=ring.length,j=n-1;i<n;j=i++){var pi=ring[i],xi=pi[0],yi=pi[1],pj=ring[j],xj=pj[0],yj=pj[1];if(segmentContains(pi,pj,point))return 0;if(yi>y!==yj>y&&x<(xj-xi)*(y-yi)/(yj-yi)+xi)
contains=-contains;}
return contains;}
function segmentContains(a,b,c){var i;return collinear(a,b,c)&&within(a[(i=+(a[0]===b[0]))],c[i],b[i]);}
function collinear(a,b,c){return(b[0]-a[0])*(c[1]-a[1])===(c[0]-a[0])*(b[1]-a[1]);}
function within(p,q,r){return(p<=q&&q<=r)||(r<=q&&q<=p);}
function noop$1(){}
var cases=[[],[[[1.0,1.5],[0.5,1.0]]],[[[1.5,1.0],[1.0,1.5]]],[[[1.5,1.0],[0.5,1.0]]],[[[1.0,0.5],[1.5,1.0]]],[[[1.0,1.5],[0.5,1.0]],[[1.0,0.5],[1.5,1.0]]],[[[1.0,0.5],[1.0,1.5]]],[[[1.0,0.5],[0.5,1.0]]],[[[0.5,1.0],[1.0,0.5]]],[[[1.0,1.5],[1.0,0.5]]],[[[0.5,1.0],[1.0,0.5]],[[1.5,1.0],[1.0,1.5]]],[[[1.5,1.0],[1.0,0.5]]],[[[0.5,1.0],[1.5,1.0]]],[[[1.0,1.5],[1.5,1.0]]],[[[0.5,1.0],[1.0,1.5]]],[]];function contours(){var dx=1,dy=1,threshold$$1=thresholdSturges,smooth=smoothLinear;function contours(values){var tz=threshold$$1(values);if(!Array.isArray(tz)){var domain=extent(values),start=domain[0],stop=domain[1];tz=tickStep(start,stop,tz);tz=sequence(Math.floor(start/tz)*tz,Math.floor(stop/tz)*tz,tz);}else{tz=tz.slice().sort(ascending$2);}
return tz.map(function(value){return contour(values,value);});}
function contour(values,value){var polygons=[],holes=[];isorings(values,value,function(ring){smooth(ring,values,value);if(area(ring)>0)polygons.push([ring]);else holes.push(ring);});holes.forEach(function(hole){for(var i=0,n=polygons.length,polygon;i<n;++i){if(contains((polygon=polygons[i])[0],hole)!==-1){polygon.push(hole);return;}}});return{type:"MultiPolygon",value:value,coordinates:polygons};}
function isorings(values,value,callback){var fragmentByStart=new Array(),fragmentByEnd=new Array(),x,y,t0,t1,t2,t3;x=y=-1;t1=values[0]>=value;cases[t1<<1].forEach(stitch);while(++x<dx-1){(t0=t1),(t1=values[x+1]>=value);cases[t0|(t1<<1)].forEach(stitch);}
cases[t1<<0].forEach(stitch);while(++y<dy-1){x=-1;t1=values[y*dx+dx]>=value;t2=values[y*dx]>=value;cases[(t1<<1)|(t2<<2)].forEach(stitch);while(++x<dx-1){(t0=t1),(t1=values[y*dx+dx+x+1]>=value);(t3=t2),(t2=values[y*dx+x+1]>=value);cases[t0|(t1<<1)|(t2<<2)|(t3<<3)].forEach(stitch);}
cases[t1|(t2<<3)].forEach(stitch);}
x=-1;t2=values[y*dx]>=value;cases[t2<<2].forEach(stitch);while(++x<dx-1){(t3=t2),(t2=values[y*dx+x+1]>=value);cases[(t2<<2)|(t3<<3)].forEach(stitch);}
cases[t2<<3].forEach(stitch);function stitch(line){var start=[line[0][0]+x,line[0][1]+y],end=[line[1][0]+x,line[1][1]+y],startIndex=index(start),endIndex=index(end),f,g;if((f=fragmentByEnd[startIndex])){if((g=fragmentByStart[endIndex])){delete fragmentByEnd[f.end];delete fragmentByStart[g.start];if(f===g){f.ring.push(end);callback(f.ring);}else{fragmentByStart[f.start]=fragmentByEnd[g.end]={start:f.start,end:g.end,ring:f.ring.concat(g.ring)};}}else{delete fragmentByEnd[f.end];f.ring.push(end);fragmentByEnd[(f.end=endIndex)]=f;}}else if((f=fragmentByStart[endIndex])){if((g=fragmentByEnd[startIndex])){delete fragmentByStart[f.start];delete fragmentByEnd[g.end];if(f===g){f.ring.push(end);callback(f.ring);}else{fragmentByStart[g.start]=fragmentByEnd[f.end]={start:g.start,end:f.end,ring:g.ring.concat(f.ring)};}}else{delete fragmentByStart[f.start];f.ring.unshift(start);fragmentByStart[(f.start=startIndex)]=f;}}else{fragmentByStart[startIndex]=fragmentByEnd[endIndex]={start:startIndex,end:endIndex,ring:[start,end]};}}}
function index(point){return point[0]*2+point[1]*(dx+1)*4;}
function smoothLinear(ring,values,value){ring.forEach(function(point){var x=point[0],y=point[1],xt=x|0,yt=y|0,v0,v1=values[yt*dx+xt];if(x>0&&x<dx&&xt===x){v0=values[yt*dx+xt-1];point[0]=x+(value-v0)/(v1-v0)-0.5;}
if(y>0&&y<dy&&yt===y){v0=values[(yt-1)*dx+xt];point[1]=y+(value-v0)/(v1-v0)-0.5;}});}
contours.contour=contour;contours.size=function(_){if(!arguments.length)return[dx,dy];var _0=Math.ceil(_[0]),_1=Math.ceil(_[1]);if(!(_0>0)||!(_1>0))throw new Error("invalid size");return(dx=_0),(dy=_1),contours;};contours.thresholds=function(_){return arguments.length?((threshold$$1=typeof _==="function"?_:Array.isArray(_)?constant$6(slice$3.call(_)):constant$6(_)),contours):threshold$$1;};contours.smooth=function(_){return arguments.length?((smooth=_?smoothLinear:noop$1),contours):smooth===smoothLinear;};return contours;}
function blurX(source,target,r){var n=source.width,m=source.height,w=(r<<1)+1;for(var j=0;j<m;++j){for(var i=0,sr=0;i<n+r;++i){if(i<n){sr+=source.data[i+j*n];}
if(i>=r){if(i>=w){sr-=source.data[i-w+j*n];}
target.data[i-r+j*n]=sr/Math.min(i+1,n-1+w-i,w);}}}}
function blurY(source,target,r){var n=source.width,m=source.height,w=(r<<1)+1;for(var i=0;i<n;++i){for(var j=0,sr=0;j<m+r;++j){if(j<m){sr+=source.data[i+j*n];}
if(j>=r){if(j>=w){sr-=source.data[i+(j-w)*n];}
target.data[i+(j-r)*n]=sr/Math.min(j+1,m-1+w-j,w);}}}}
function defaultX(d){return d[0];}
function defaultY(d){return d[1];}
function density(){var x=defaultX,y=defaultY,dx=960,dy=500,r=20,k=2,o=r*3,n=(dx+o*2)>>k,m=(dy+o*2)>>k,threshold$$1=constant$6(20);function density(data){var values0=new Float32Array(n*m),values1=new Float32Array(n*m);data.forEach(function(d,i,data){var xi=(x(d,i,data)+o)>>k,yi=(y(d,i,data)+o)>>k;if(xi>=0&&xi<n&&yi>=0&&yi<m){++values0[xi+yi*n];}});blurX({width:n,height:m,data:values0},{width:n,height:m,data:values1},r>>k);blurY({width:n,height:m,data:values1},{width:n,height:m,data:values0},r>>k);blurX({width:n,height:m,data:values0},{width:n,height:m,data:values1},r>>k);blurY({width:n,height:m,data:values1},{width:n,height:m,data:values0},r>>k);blurX({width:n,height:m,data:values0},{width:n,height:m,data:values1},r>>k);blurY({width:n,height:m,data:values1},{width:n,height:m,data:values0},r>>k);var tz=threshold$$1(values0);if(!Array.isArray(tz)){var stop=max(values0);tz=tickStep(0,stop,tz);tz=sequence(0,Math.floor(stop/tz)*tz,tz);tz.shift();}
return contours().thresholds(tz).size([n,m])(values0).map(transform);}
function transform(geometry){geometry.value*=Math.pow(2,-2*k);geometry.coordinates.forEach(transformPolygon);return geometry;}
function transformPolygon(coordinates){coordinates.forEach(transformRing);}
function transformRing(coordinates){coordinates.forEach(transformPoint);}
function transformPoint(coordinates){coordinates[0]=coordinates[0]*Math.pow(2,k)-o;coordinates[1]=coordinates[1]*Math.pow(2,k)-o;}
function resize(){o=r*3;n=(dx+o*2)>>k;m=(dy+o*2)>>k;return density;}
density.x=function(_){return arguments.length?((x=typeof _==="function"?_:constant$6(+_)),density):x;};density.y=function(_){return arguments.length?((y=typeof _==="function"?_:constant$6(+_)),density):y;};density.size=function(_){if(!arguments.length)return[dx,dy];var _0=Math.ceil(_[0]),_1=Math.ceil(_[1]);if(!(_0>=0)&&!(_0>=0))throw new Error("invalid size");return(dx=_0),(dy=_1),resize();};density.cellSize=function(_){if(!arguments.length)return 1<<k;if(!((_=+_)>=1))throw new Error("invalid cell size");return(k=Math.floor(Math.log(_)/Math.LN2)),resize();};density.thresholds=function(_){return arguments.length?((threshold$$1=typeof _==="function"?_:Array.isArray(_)?constant$6(slice$3.call(_)):constant$6(_)),density):threshold$$1;};density.bandwidth=function(_){if(!arguments.length)return Math.sqrt(r*(r+1));if(!((_=+_)>=0))throw new Error("invalid bandwidth");return(r=Math.round((Math.sqrt(4*_*_+1)-1)/2)),resize();};return density;}
var EOL={},EOF={},QUOTE=34,NEWLINE=10,RETURN=13;function objectConverter(columns){return new Function("d","return {"+
columns.map(function(name,i){return JSON.stringify(name)+": d["+i+"]";}).join(",")+"}");}
function customConverter(columns,f){var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns);};}
function inferColumns(rows){var columnSet=Object.create(null),columns=[];rows.forEach(function(row){for(var column in row){if(!(column in columnSet)){columns.push((columnSet[column]=column));}}});return columns;}
function dsvFormat(delimiter){var reFormat=new RegExp('["'+delimiter+"\n\r]"),DELIMITER=delimiter.charCodeAt(0);function parse(text,f){var convert,columns,rows=parseRows(text,function(row,i){if(convert)return convert(row,i-1);(columns=row),(convert=f?customConverter(row,f):objectConverter(row));});rows.columns=columns||[];return rows;}
function parseRows(text,f){var rows=[],N=text.length,I=0,n=0,t,eof=N<=0,eol=false;if(text.charCodeAt(N-1)===NEWLINE)--N;if(text.charCodeAt(N-1)===RETURN)--N;function token(){if(eof)return EOF;if(eol)return(eol=false),EOL;var i,j=I,c;if(text.charCodeAt(j)===QUOTE){while((I++<N&&text.charCodeAt(I)!==QUOTE)||text.charCodeAt(++I)===QUOTE);if((i=I)>=N)eof=true;else if((c=text.charCodeAt(I++))===NEWLINE)eol=true;else if(c===RETURN){eol=true;if(text.charCodeAt(I)===NEWLINE)++I;}
return text.slice(j+1,i-1).replace(/""/g,'"');}
while(I<N){if((c=text.charCodeAt((i=I++)))===NEWLINE)eol=true;else if(c===RETURN){eol=true;if(text.charCodeAt(I)===NEWLINE)++I;}else if(c!==DELIMITER)continue;return text.slice(j,i);}
return(eof=true),text.slice(j,N);}
while((t=token())!==EOF){var row=[];while(t!==EOL&&t!==EOF)row.push(t),(t=token());if(f&&(row=f(row,n++))==null)continue;rows.push(row);}
return rows;}
function format(rows,columns){if(columns==null)columns=inferColumns(rows);return[columns.map(formatValue).join(delimiter)].concat(rows.map(function(row){return columns.map(function(column){return formatValue(row[column]);}).join(delimiter);})).join("\n");}
function formatRows(rows){return rows.map(formatRow).join("\n");}
function formatRow(row){return row.map(formatValue).join(delimiter);}
function formatValue(text){return text==null?"":reFormat.test((text+=""))?'"'+text.replace(/"/g,'""')+'"':text;}
return{parse:parse,parseRows:parseRows,format:format,formatRows:formatRows};}
var csv=dsvFormat(",");var csvParse=csv.parse;var csvParseRows=csv.parseRows;var csvFormat=csv.format;var csvFormatRows=csv.formatRows;var tsv=dsvFormat("\t");var tsvParse=tsv.parse;var tsvParseRows=tsv.parseRows;var tsvFormat=tsv.format;var tsvFormatRows=tsv.formatRows;function responseBlob(response){if(!response.ok)
throw new Error(response.status+" "+response.statusText);return response.blob();}
function blob(input,init){return fetch(input,init).then(responseBlob);}
function responseArrayBuffer(response){if(!response.ok)
throw new Error(response.status+" "+response.statusText);return response.arrayBuffer();}
function buffer(input,init){return fetch(input,init).then(responseArrayBuffer);}
function responseText(response){if(!response.ok)
throw new Error(response.status+" "+response.statusText);return response.text();}
function text(input,init){return fetch(input,init).then(responseText);}
function dsvParse(parse){return function(input,init,row){if(arguments.length===2&&typeof init==="function")
(row=init),(init=undefined);return text(input,init).then(function(response){return parse(response,row);});};}
function dsv(delimiter,input,init,row){if(arguments.length===3&&typeof init==="function")
(row=init),(init=undefined);var format=dsvFormat(delimiter);return text(input,init).then(function(response){return format.parse(response,row);});}
var csv$1=dsvParse(csvParse);var tsv$1=dsvParse(tsvParse);function image(input,init){return new Promise(function(resolve,reject){var image=new Image();for(var key in init)image[key]=init[key];image.onerror=reject;image.onload=function(){resolve(image);};image.src=input;});}
function responseJson(response){if(!response.ok)
throw new Error(response.status+" "+response.statusText);return response.json();}
function json(input,init){return fetch(input,init).then(responseJson);}
function parser(type){return function(input,init){return text(input,init).then(function(text$$1){return new DOMParser().parseFromString(text$$1,type);});};}
var xml=parser("application/xml");var html=parser("text/html");var svg=parser("image/svg+xml");function center$1(x,y){var nodes;if(x==null)x=0;if(y==null)y=0;function force(){var i,n=nodes.length,node,sx=0,sy=0;for(i=0;i<n;++i){(node=nodes[i]),(sx+=node.x),(sy+=node.y);}
for(sx=sx/n-x,sy=sy/n-y,i=0;i<n;++i){(node=nodes[i]),(node.x-=sx),(node.y-=sy);}}
force.initialize=function(_){nodes=_;};force.x=function(_){return arguments.length?((x=+_),force):x;};force.y=function(_){return arguments.length?((y=+_),force):y;};return force;}
function constant$7(x){return function(){return x;};}
function jiggle(){return(Math.random()-0.5)*1e-6;}
function tree_add(d){var x=+this._x.call(null,d),y=+this._y.call(null,d);return add(this.cover(x,y),x,y,d);}
function add(tree,x,y,d){if(isNaN(x)||isNaN(y))return tree;var parent,node=tree._root,leaf={data:d},x0=tree._x0,y0=tree._y0,x1=tree._x1,y1=tree._y1,xm,ym,xp,yp,right,bottom,i,j;if(!node)return(tree._root=leaf),tree;while(node.length){if((right=x>=(xm=(x0+x1)/2)))x0=xm;else x1=xm;if((bottom=y>=(ym=(y0+y1)/2)))y0=ym;else y1=ym;if(((parent=node),!(node=node[(i=(bottom<<1)|right)])))
return(parent[i]=leaf),tree;}
xp=+tree._x.call(null,node.data);yp=+tree._y.call(null,node.data);if(x===xp&&y===yp)
return((leaf.next=node),parent?(parent[i]=leaf):(tree._root=leaf),tree);do{parent=parent?(parent[i]=new Array(4)):(tree._root=new Array(4));if((right=x>=(xm=(x0+x1)/2)))x0=xm;else x1=xm;if((bottom=y>=(ym=(y0+y1)/2)))y0=ym;else y1=ym;}while((i=(bottom<<1)|right)===(j=((yp>=ym)<<1)|(xp>=xm)));return(parent[j]=node),(parent[i]=leaf),tree;}
function addAll(data){var d,i,n=data.length,x,y,xz=new Array(n),yz=new Array(n),x0=Infinity,y0=Infinity,x1=-Infinity,y1=-Infinity;for(i=0;i<n;++i){if(isNaN((x=+this._x.call(null,(d=data[i]))))||isNaN((y=+this._y.call(null,d))))
continue;xz[i]=x;yz[i]=y;if(x<x0)x0=x;if(x>x1)x1=x;if(y<y0)y0=y;if(y>y1)y1=y;}
if(x1<x0)(x0=this._x0),(x1=this._x1);if(y1<y0)(y0=this._y0),(y1=this._y1);this.cover(x0,y0).cover(x1,y1);for(i=0;i<n;++i){add(this,xz[i],yz[i],data[i]);}
return this;}
function tree_cover(x,y){if(isNaN((x=+x))||isNaN((y=+y)))return this;var x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(isNaN(x0)){x1=(x0=Math.floor(x))+1;y1=(y0=Math.floor(y))+1;}
else if(x0>x||x>x1||y0>y||y>y1){var z=x1-x0,node=this._root,parent,i;switch((i=((y<(y0+y1)/2)<<1)|(x<(x0+x1)/2))){case 0:{do(parent=new Array(4)),(parent[i]=node),(node=parent);while(((z*=2),(x1=x0+z),(y1=y0+z),x>x1||y>y1));break;}
case 1:{do(parent=new Array(4)),(parent[i]=node),(node=parent);while(((z*=2),(x0=x1-z),(y1=y0+z),x0>x||y>y1));break;}
case 2:{do(parent=new Array(4)),(parent[i]=node),(node=parent);while(((z*=2),(x1=x0+z),(y0=y1-z),x>x1||y0>y));break;}
case 3:{do(parent=new Array(4)),(parent[i]=node),(node=parent);while(((z*=2),(x0=x1-z),(y0=y1-z),x0>x||y0>y));break;}}
if(this._root&&this._root.length)this._root=node;}
else return this;this._x0=x0;this._y0=y0;this._x1=x1;this._y1=y1;return this;}
function tree_data(){var data=[];this.visit(function(node){if(!node.length)
do data.push(node.data);while((node=node.next));});return data;}
function tree_extent(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?undefined:[[this._x0,this._y0],[this._x1,this._y1]];}
function Quad(node,x0,y0,x1,y1){this.node=node;this.x0=x0;this.y0=y0;this.x1=x1;this.y1=y1;}
function tree_find(x,y,radius){var data,x0=this._x0,y0=this._y0,x1,y1,x2,y2,x3=this._x1,y3=this._y1,quads=[],node=this._root,q,i;if(node)quads.push(new Quad(node,x0,y0,x3,y3));if(radius==null)radius=Infinity;else{(x0=x-radius),(y0=y-radius);(x3=x+radius),(y3=y+radius);radius*=radius;}
while((q=quads.pop())){if(!(node=q.node)||(x1=q.x0)>x3||(y1=q.y0)>y3||(x2=q.x1)<x0||(y2=q.y1)<y0)
continue;if(node.length){var xm=(x1+x2)/2,ym=(y1+y2)/2;quads.push(new Quad(node[3],xm,ym,x2,y2),new Quad(node[2],x1,ym,xm,y2),new Quad(node[1],xm,y1,x2,ym),new Quad(node[0],x1,y1,xm,ym));if((i=((y>=ym)<<1)|(x>=xm))){q=quads[quads.length-1];quads[quads.length-1]=quads[quads.length-1-i];quads[quads.length-1-i]=q;}}
else{var dx=x-+this._x.call(null,node.data),dy=y-+this._y.call(null,node.data),d2=dx*dx+dy*dy;if(d2<radius){var d=Math.sqrt((radius=d2));(x0=x-d),(y0=y-d);(x3=x+d),(y3=y+d);data=node.data;}}}
return data;}
function tree_remove(d){if(isNaN((x=+this._x.call(null,d)))||isNaN((y=+this._y.call(null,d))))
return this;var parent,node=this._root,retainer,previous,next,x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1,x,y,xm,ym,right,bottom,i,j;if(!node)return this;if(node.length)
while(true){if((right=x>=(xm=(x0+x1)/2)))x0=xm;else x1=xm;if((bottom=y>=(ym=(y0+y1)/2)))y0=ym;else y1=ym;if(!((parent=node),(node=node[(i=(bottom<<1)|right)])))
return this;if(!node.length)break;if(parent[(i+1)&3]||parent[(i+2)&3]||parent[(i+3)&3])
(retainer=parent),(j=i);}
while(node.data!==d)
if(!((previous=node),(node=node.next)))return this;if((next=node.next))delete node.next;if(previous)
return next?(previous.next=next):delete previous.next,this;if(!parent)return(this._root=next),this;next?(parent[i]=next):delete parent[i];if((node=parent[0]||parent[1]||parent[2]||parent[3])&&node===(parent[3]||parent[2]||parent[1]||parent[0])&&!node.length){if(retainer)retainer[j]=node;else this._root=node;}
return this;}
function removeAll(data){for(var i=0,n=data.length;i<n;++i)this.remove(data[i]);return this;}
function tree_root(){return this._root;}
function tree_size(){var size=0;this.visit(function(node){if(!node.length)
do++size;while((node=node.next));});return size;}
function tree_visit(callback){var quads=[],q,node=this._root,child,x0,y0,x1,y1;if(node)
quads.push(new Quad(node,this._x0,this._y0,this._x1,this._y1));while((q=quads.pop())){if(!callback((node=q.node),(x0=q.x0),(y0=q.y0),(x1=q.x1),(y1=q.y1))&&node.length){var xm=(x0+x1)/2,ym=(y0+y1)/2;if((child=node[3]))quads.push(new Quad(child,xm,ym,x1,y1));if((child=node[2]))quads.push(new Quad(child,x0,ym,xm,y1));if((child=node[1]))quads.push(new Quad(child,xm,y0,x1,ym));if((child=node[0]))quads.push(new Quad(child,x0,y0,xm,ym));}}
return this;}
function tree_visitAfter(callback){var quads=[],next=[],q;if(this._root)
quads.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));while((q=quads.pop())){var node=q.node;if(node.length){var child,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1,xm=(x0+x1)/2,ym=(y0+y1)/2;if((child=node[0]))quads.push(new Quad(child,x0,y0,xm,ym));if((child=node[1]))quads.push(new Quad(child,xm,y0,x1,ym));if((child=node[2]))quads.push(new Quad(child,x0,ym,xm,y1));if((child=node[3]))quads.push(new Quad(child,xm,ym,x1,y1));}
next.push(q);}
while((q=next.pop())){callback(q.node,q.x0,q.y0,q.x1,q.y1);}
return this;}
function defaultX$1(d){return d[0];}
function tree_x(_){return arguments.length?((this._x=_),this):this._x;}
function defaultY$1(d){return d[1];}
function tree_y(_){return arguments.length?((this._y=_),this):this._y;}
function quadtree(nodes,x,y){var tree=new Quadtree(x==null?defaultX$1:x,y==null?defaultY$1:y,NaN,NaN,NaN,NaN);return nodes==null?tree:tree.addAll(nodes);}
function Quadtree(x,y,x0,y0,x1,y1){this._x=x;this._y=y;this._x0=x0;this._y0=y0;this._x1=x1;this._y1=y1;this._root=undefined;}
function leaf_copy(leaf){var copy={data:leaf.data},next=copy;while((leaf=leaf.next))next=next.next={data:leaf.data};return copy;}
var treeProto=(quadtree.prototype=Quadtree.prototype);treeProto.copy=function(){var copy=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),node=this._root,nodes,child;if(!node)return copy;if(!node.length)return(copy._root=leaf_copy(node)),copy;nodes=[{source:node,target:(copy._root=new Array(4))}];while((node=nodes.pop())){for(var i=0;i<4;++i){if((child=node.source[i])){if(child.length)
nodes.push({source:child,target:(node.target[i]=new Array(4))});else node.target[i]=leaf_copy(child);}}}
return copy;};treeProto.add=tree_add;treeProto.addAll=addAll;treeProto.cover=tree_cover;treeProto.data=tree_data;treeProto.extent=tree_extent;treeProto.find=tree_find;treeProto.remove=tree_remove;treeProto.removeAll=removeAll;treeProto.root=tree_root;treeProto.size=tree_size;treeProto.visit=tree_visit;treeProto.visitAfter=tree_visitAfter;treeProto.x=tree_x;treeProto.y=tree_y;function x(d){return d.x+d.vx;}
function y(d){return d.y+d.vy;}
function collide(radius){var nodes,radii,strength=1,iterations=1;if(typeof radius!=="function")
radius=constant$7(radius==null?1:+radius);function force(){var i,n=nodes.length,tree,node,xi,yi,ri,ri2;for(var k=0;k<iterations;++k){tree=quadtree(nodes,x,y).visitAfter(prepare);for(i=0;i<n;++i){node=nodes[i];(ri=radii[node.index]),(ri2=ri*ri);xi=node.x+node.vx;yi=node.y+node.vy;tree.visit(apply);}}
function apply(quad,x0,y0,x1,y1){var data=quad.data,rj=quad.r,r=ri+rj;if(data){if(data.index>node.index){var x=xi-data.x-data.vx,y=yi-data.y-data.vy,l=x*x+y*y;if(l<r*r){if(x===0)(x=jiggle()),(l+=x*x);if(y===0)(y=jiggle()),(l+=y*y);l=(r-(l=Math.sqrt(l)))/l*strength;node.vx+=(x*=l)*(r=(rj*=rj)/(ri2+rj));node.vy+=(y*=l)*r;data.vx-=x*(r=1-r);data.vy-=y*r;}}
return;}
return x0>xi+r||x1<xi-r||y0>yi+r||y1<yi-r;}}
function prepare(quad){if(quad.data)return(quad.r=radii[quad.data.index]);for(var i=(quad.r=0);i<4;++i){if(quad[i]&&quad[i].r>quad.r){quad.r=quad[i].r;}}}
function initialize(){if(!nodes)return;var i,n=nodes.length,node;radii=new Array(n);for(i=0;i<n;++i)
(node=nodes[i]),(radii[node.index]=+radius(node,i,nodes));}
force.initialize=function(_){nodes=_;initialize();};force.iterations=function(_){return arguments.length?((iterations=+_),force):iterations;};force.strength=function(_){return arguments.length?((strength=+_),force):strength;};force.radius=function(_){return arguments.length?((radius=typeof _==="function"?_:constant$7(+_)),initialize(),force):radius;};return force;}
function index(d){return d.index;}
function find(nodeById,nodeId){var node=nodeById.get(nodeId);if(!node)throw new Error("missing: "+nodeId);return node;}
function link(links){var id=index,strength=defaultStrength,strengths,distance=constant$7(30),distances,nodes,count,bias,iterations=1;if(links==null)links=[];function defaultStrength(link){return 1/Math.min(count[link.source.index],count[link.target.index]);}
function force(alpha){for(var k=0,n=links.length;k<iterations;++k){for(var i=0,link,source,target,x,y,l,b;i<n;++i){(link=links[i]),(source=link.source),(target=link.target);x=target.x+target.vx-source.x-source.vx||jiggle();y=target.y+target.vy-source.y-source.vy||jiggle();l=Math.sqrt(x*x+y*y);l=(l-distances[i])/l*alpha*strengths[i];(x*=l),(y*=l);target.vx-=x*(b=bias[i]);target.vy-=y*b;source.vx+=x*(b=1-b);source.vy+=y*b;}}}
function initialize(){if(!nodes)return;var i,n=nodes.length,m=links.length,nodeById=map$1(nodes,id),link;for(i=0,count=new Array(n);i<m;++i){(link=links[i]),(link.index=i);if(typeof link.source!=="object")
link.source=find(nodeById,link.source);if(typeof link.target!=="object")
link.target=find(nodeById,link.target);count[link.source.index]=(count[link.source.index]||0)+1;count[link.target.index]=(count[link.target.index]||0)+1;}
for(i=0,bias=new Array(m);i<m;++i){(link=links[i]),(bias[i]=count[link.source.index]/(count[link.source.index]+count[link.target.index]));}
(strengths=new Array(m)),initializeStrength();(distances=new Array(m)),initializeDistance();}
function initializeStrength(){if(!nodes)return;for(var i=0,n=links.length;i<n;++i){strengths[i]=+strength(links[i],i,links);}}
function initializeDistance(){if(!nodes)return;for(var i=0,n=links.length;i<n;++i){distances[i]=+distance(links[i],i,links);}}
force.initialize=function(_){nodes=_;initialize();};force.links=function(_){return arguments.length?((links=_),initialize(),force):links;};force.id=function(_){return arguments.length?((id=_),force):id;};force.iterations=function(_){return arguments.length?((iterations=+_),force):iterations;};force.strength=function(_){return arguments.length?((strength=typeof _==="function"?_:constant$7(+_)),initializeStrength(),force):strength;};force.distance=function(_){return arguments.length?((distance=typeof _==="function"?_:constant$7(+_)),initializeDistance(),force):distance;};return force;}
function x$1(d){return d.x;}
function y$1(d){return d.y;}
var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function simulation(nodes){var simulation,alpha=1,alphaMin=0.001,alphaDecay=1-Math.pow(alphaMin,1/300),alphaTarget=0,velocityDecay=0.6,forces=map$1(),stepper=timer(step),event=dispatch("tick","end");if(nodes==null)nodes=[];function step(){tick();event.call("tick",simulation);if(alpha<alphaMin){stepper.stop();event.call("end",simulation);}}
function tick(){var i,n=nodes.length,node;alpha+=(alphaTarget-alpha)*alphaDecay;forces.each(function(force){force(alpha);});for(i=0;i<n;++i){node=nodes[i];if(node.fx==null)node.x+=node.vx*=velocityDecay;else(node.x=node.fx),(node.vx=0);if(node.fy==null)node.y+=node.vy*=velocityDecay;else(node.y=node.fy),(node.vy=0);}}
function initializeNodes(){for(var i=0,n=nodes.length,node;i<n;++i){(node=nodes[i]),(node.index=i);if(isNaN(node.x)||isNaN(node.y)){var radius=initialRadius*Math.sqrt(i),angle=i*initialAngle;node.x=radius*Math.cos(angle);node.y=radius*Math.sin(angle);}
if(isNaN(node.vx)||isNaN(node.vy)){node.vx=node.vy=0;}}}
function initializeForce(force){if(force.initialize)force.initialize(nodes);return force;}
initializeNodes();return(simulation={tick:tick,restart:function(){return stepper.restart(step),simulation;},stop:function(){return stepper.stop(),simulation;},nodes:function(_){return arguments.length?((nodes=_),initializeNodes(),forces.each(initializeForce),simulation):nodes;},alpha:function(_){return arguments.length?((alpha=+_),simulation):alpha;},alphaMin:function(_){return arguments.length?((alphaMin=+_),simulation):alphaMin;},alphaDecay:function(_){return arguments.length?((alphaDecay=+_),simulation):+alphaDecay;},alphaTarget:function(_){return arguments.length?((alphaTarget=+_),simulation):alphaTarget;},velocityDecay:function(_){return arguments.length?((velocityDecay=1-_),simulation):1-velocityDecay;},force:function(name,_){return arguments.length>1?(_==null?forces.remove(name):forces.set(name,initializeForce(_)),simulation):forces.get(name);},find:function(x,y,radius){var i=0,n=nodes.length,dx,dy,d2,node,closest;if(radius==null)radius=Infinity;else radius*=radius;for(i=0;i<n;++i){node=nodes[i];dx=x-node.x;dy=y-node.y;d2=dx*dx+dy*dy;if(d2<radius)(closest=node),(radius=d2);}
return closest;},on:function(name,_){return arguments.length>1?(event.on(name,_),simulation):event.on(name);}});}
function manyBody(){var nodes,node,alpha,strength=constant$7(-30),strengths,distanceMin2=1,distanceMax2=Infinity,theta2=0.81;function force(_){var i,n=nodes.length,tree=quadtree(nodes,x$1,y$1).visitAfter(accumulate);for(alpha=_,i=0;i<n;++i)(node=nodes[i]),tree.visit(apply);}
function initialize(){if(!nodes)return;var i,n=nodes.length,node;strengths=new Array(n);for(i=0;i<n;++i)
(node=nodes[i]),(strengths[node.index]=+strength(node,i,nodes));}
function accumulate(quad){var strength=0,q,c,weight=0,x,y,i;if(quad.length){for(x=y=i=0;i<4;++i){if((q=quad[i])&&(c=Math.abs(q.value))){(strength+=q.value),(weight+=c),(x+=c*q.x),(y+=c*q.y);}}
quad.x=x/weight;quad.y=y/weight;}
else{q=quad;q.x=q.data.x;q.y=q.data.y;do strength+=strengths[q.data.index];while((q=q.next));}
quad.value=strength;}
function apply(quad,x1,_,x2){if(!quad.value)return true;var x=quad.x-node.x,y=quad.y-node.y,w=x2-x1,l=x*x+y*y;if(w*w/theta2<l){if(l<distanceMax2){if(x===0)(x=jiggle()),(l+=x*x);if(y===0)(y=jiggle()),(l+=y*y);if(l<distanceMin2)l=Math.sqrt(distanceMin2*l);node.vx+=x*quad.value*alpha/l;node.vy+=y*quad.value*alpha/l;}
return true;}
else if(quad.length||l>=distanceMax2)return;if(quad.data!==node||quad.next){if(x===0)(x=jiggle()),(l+=x*x);if(y===0)(y=jiggle()),(l+=y*y);if(l<distanceMin2)l=Math.sqrt(distanceMin2*l);}
do
if(quad.data!==node){w=strengths[quad.data.index]*alpha/l;node.vx+=x*w;node.vy+=y*w;}
while((quad=quad.next));}
force.initialize=function(_){nodes=_;initialize();};force.strength=function(_){return arguments.length?((strength=typeof _==="function"?_:constant$7(+_)),initialize(),force):strength;};force.distanceMin=function(_){return arguments.length?((distanceMin2=_*_),force):Math.sqrt(distanceMin2);};force.distanceMax=function(_){return arguments.length?((distanceMax2=_*_),force):Math.sqrt(distanceMax2);};force.theta=function(_){return arguments.length?((theta2=_*_),force):Math.sqrt(theta2);};return force;}
function radial(radius,x,y){var nodes,strength=constant$7(0.1),strengths,radiuses;if(typeof radius!=="function")radius=constant$7(+radius);if(x==null)x=0;if(y==null)y=0;function force(alpha){for(var i=0,n=nodes.length;i<n;++i){var node=nodes[i],dx=node.x-x||1e-6,dy=node.y-y||1e-6,r=Math.sqrt(dx*dx+dy*dy),k=(radiuses[i]-r)*strengths[i]*alpha/r;node.vx+=dx*k;node.vy+=dy*k;}}
function initialize(){if(!nodes)return;var i,n=nodes.length;strengths=new Array(n);radiuses=new Array(n);for(i=0;i<n;++i){radiuses[i]=+radius(nodes[i],i,nodes);strengths[i]=isNaN(radiuses[i])?0:+strength(nodes[i],i,nodes);}}
force.initialize=function(_){(nodes=_),initialize();};force.strength=function(_){return arguments.length?((strength=typeof _==="function"?_:constant$7(+_)),initialize(),force):strength;};force.radius=function(_){return arguments.length?((radius=typeof _==="function"?_:constant$7(+_)),initialize(),force):radius;};force.x=function(_){return arguments.length?((x=+_),force):x;};force.y=function(_){return arguments.length?((y=+_),force):y;};return force;}
function x$2(x){var strength=constant$7(0.1),nodes,strengths,xz;if(typeof x!=="function")x=constant$7(x==null?0:+x);function force(alpha){for(var i=0,n=nodes.length,node;i<n;++i){(node=nodes[i]),(node.vx+=(xz[i]-node.x)*strengths[i]*alpha);}}
function initialize(){if(!nodes)return;var i,n=nodes.length;strengths=new Array(n);xz=new Array(n);for(i=0;i<n;++i){strengths[i]=isNaN((xz[i]=+x(nodes[i],i,nodes)))?0:+strength(nodes[i],i,nodes);}}
force.initialize=function(_){nodes=_;initialize();};force.strength=function(_){return arguments.length?((strength=typeof _==="function"?_:constant$7(+_)),initialize(),force):strength;};force.x=function(_){return arguments.length?((x=typeof _==="function"?_:constant$7(+_)),initialize(),force):x;};return force;}
function y$2(y){var strength=constant$7(0.1),nodes,strengths,yz;if(typeof y!=="function")y=constant$7(y==null?0:+y);function force(alpha){for(var i=0,n=nodes.length,node;i<n;++i){(node=nodes[i]),(node.vy+=(yz[i]-node.y)*strengths[i]*alpha);}}
function initialize(){if(!nodes)return;var i,n=nodes.length;strengths=new Array(n);yz=new Array(n);for(i=0;i<n;++i){strengths[i]=isNaN((yz[i]=+y(nodes[i],i,nodes)))?0:+strength(nodes[i],i,nodes);}}
force.initialize=function(_){nodes=_;initialize();};force.strength=function(_){return arguments.length?((strength=typeof _==="function"?_:constant$7(+_)),initialize(),force):strength;};force.y=function(_){return arguments.length?((y=typeof _==="function"?_:constant$7(+_)),initialize(),force):y;};return force;}
function formatDecimal(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)
return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)];}
function exponent$1(x){return(x=formatDecimal(Math.abs(x))),x?x[1]:NaN;}
function formatGroup(grouping,thousands){return function(value,width){var i=value.length,t=[],j=0,g=grouping[0],length=0;while(i>0&&g>0){if(length+g+1>width)g=Math.max(1,width-length);t.push(value.substring((i-=g),i+g));if((length+=g+1)>width)break;g=grouping[(j=(j+1)%grouping.length)];}
return t.reverse().join(thousands);};}
function formatNumerals(numerals){return function(value){return value.replace(/[0-9]/g,function(i){return numerals[+i];});};}
var re=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){return new FormatSpecifier(specifier);}
formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(specifier){if(!(match=re.exec(specifier)))
throw new Error("invalid format: "+specifier);var match;this.fill=match[1]||" ";this.align=match[2]||">";this.sign=match[3]||"-";this.symbol=match[4]||"";this.zero=!!match[5];this.width=match[6]&&+match[6];this.comma=!!match[7];this.precision=match[8]&&+match[8].slice(1);this.trim=!!match[9];this.type=match[10]||"";}
FormatSpecifier.prototype.toString=function(){return(this.fill+
this.align+
this.sign+
this.symbol+
(this.zero?"0":"")+
(this.width==null?"":Math.max(1,this.width|0))+
(this.comma?",":"")+
(this.precision==null?"":"."+Math.max(0,this.precision|0))+
(this.trim?"~":"")+
this.type);};function formatTrim(s){out:for(var n=s.length,i=1,i0=-1,i1;i<n;++i){switch(s[i]){case".":i0=i1=i;break;case"0":if(i0===0)i0=i;i1=i;break;default:if(i0>0){if(!+s[i])break out;i0=0;}
break;}}
return i0>0?s.slice(0,i0)+s.slice(i1+1):s;}
var prefixExponent;function formatPrefixAuto(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-
(prefixExponent=Math.max(-8,Math.min(8,Math.floor(exponent/3)))*3)+
1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+
new Array(1-i).join("0")+
formatDecimal(x,Math.max(0,p+i-1))[0];}
function formatRounded(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+
coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0");}
var formatTypes={"%":function(x,p){return(x*100).toFixed(p);},b:function(x){return Math.round(x).toString(2);},c:function(x){return x+"";},d:function(x){return Math.round(x).toString(10);},e:function(x,p){return x.toExponential(p);},f:function(x,p){return x.toFixed(p);},g:function(x,p){return x.toPrecision(p);},o:function(x){return Math.round(x).toString(8);},p:function(x,p){return formatRounded(x*100,p);},r:formatRounded,s:formatPrefixAuto,X:function(x){return Math.round(x).toString(16).toUpperCase();},x:function(x){return Math.round(x).toString(16);}};function identity$3(x){return x;}
var prefixes=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(locale){var group=locale.grouping&&locale.thousands?formatGroup(locale.grouping,locale.thousands):identity$3,currency=locale.currency,decimal=locale.decimal,numerals=locale.numerals?formatNumerals(locale.numerals):identity$3,percent=locale.percent||"%";function newFormat(specifier){specifier=formatSpecifier(specifier);var fill=specifier.fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;if(type==="n")(comma=true),(type="g");else if(!formatTypes[type])
precision==null&&(precision=12),(trim=true),(type="g");if(zero||(fill==="0"&&align==="="))
(zero=true),(fill="0"),(align="=");var prefix=symbol==="$"?currency[0]:symbol==="#"&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix=symbol==="$"?currency[1]:/[%p]/.test(type)?percent:"";var formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);precision=precision==null?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision));function format(value){var valuePrefix=prefix,valueSuffix=suffix,i,n,c;if(type==="c"){valueSuffix=formatType(value)+valueSuffix;value="";}else{value=+value;var valueNegative=value<0;value=formatType(Math.abs(value),precision);if(trim)value=formatTrim(value);if(valueNegative&&+value===0)valueNegative=false;valuePrefix=(valueNegative?sign==="("?sign:"-":sign==="-"||sign==="("?"":sign)+valuePrefix;valueSuffix=(type==="s"?prefixes[8+prefixExponent/3]:"")+
valueSuffix+
(valueNegative&&sign==="("?")":"");if(maybeSuffix){(i=-1),(n=value.length);while(++i<n){if(((c=value.charCodeAt(i)),48>c||c>57)){valueSuffix=(c===46?decimal+value.slice(i+1):value.slice(i))+
valueSuffix;value=value.slice(0,i);break;}}}}
if(comma&&!zero)value=group(value,Infinity);var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";if(comma&&zero)
(value=group(padding+value,padding.length?width-valueSuffix.length:Infinity)),(padding="");switch(align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,(length=padding.length>>1))+
valuePrefix+
value+
valueSuffix+
padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix;break;}
return numerals(value);}
format.toString=function(){return specifier+"";};return format;}
function formatPrefix(specifier,value){var f=newFormat(((specifier=formatSpecifier(specifier)),(specifier.type="f"),specifier)),e=Math.max(-8,Math.min(8,Math.floor(exponent$1(value)/3)))*3,k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix;};}
return{format:newFormat,formatPrefix:formatPrefix};}
var locale;defaultLocale({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(definition){locale=formatLocale(definition);exports.format=locale.format;exports.formatPrefix=locale.formatPrefix;return locale;}
function precisionFixed(step){return Math.max(0,-exponent$1(Math.abs(step)));}
function precisionPrefix(step,value){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent$1(value)/3)))*3-
exponent$1(Math.abs(step)));}
function precisionRound(step,max){(step=Math.abs(step)),(max=Math.abs(max)-step);return Math.max(0,exponent$1(max)-exponent$1(step))+1;}
function adder(){return new Adder();}
function Adder(){this.reset();}
Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0;},add:function(y){add$1(temp,y,this.t);add$1(this,temp.s,this.s);if(this.s)this.t+=temp.t;else this.s=temp.t;},valueOf:function(){return this.s;}};var temp=new Adder();function add$1(adder,a,b){var x=(adder.s=a+b),bv=x-a,av=x-bv;adder.t=a-av+(b-bv);}
var epsilon$2=1e-6;var epsilon2$1=1e-12;var pi$3=Math.PI;var halfPi$2=pi$3/2;var quarterPi=pi$3/4;var tau$3=pi$3*2;var degrees$1=180/pi$3;var radians=pi$3/180;var abs=Math.abs;var atan=Math.atan;var atan2=Math.atan2;var cos$1=Math.cos;var ceil=Math.ceil;var exp=Math.exp;var log=Math.log;var pow=Math.pow;var sin$1=Math.sin;var sign=Math.sign||function(x){return x>0?1:x<0?-1:0;};var sqrt=Math.sqrt;var tan=Math.tan;function acos(x){return x>1?0:x<-1?pi$3:Math.acos(x);}
function asin(x){return x>1?halfPi$2:x<-1?-halfPi$2:Math.asin(x);}
function haversin(x){return(x=sin$1(x/2))*x;}
function noop$2(){}
function streamGeometry(geometry,stream){if(geometry&&streamGeometryType.hasOwnProperty(geometry.type)){streamGeometryType[geometry.type](geometry,stream);}}
var streamObjectType={Feature:function(object,stream){streamGeometry(object.geometry,stream);},FeatureCollection:function(object,stream){var features=object.features,i=-1,n=features.length;while(++i<n)streamGeometry(features[i].geometry,stream);}};var streamGeometryType={Sphere:function(object,stream){stream.sphere();},Point:function(object,stream){object=object.coordinates;stream.point(object[0],object[1],object[2]);},MultiPoint:function(object,stream){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)
(object=coordinates[i]),stream.point(object[0],object[1],object[2]);},LineString:function(object,stream){streamLine(object.coordinates,stream,0);},MultiLineString:function(object,stream){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)streamLine(coordinates[i],stream,0);},Polygon:function(object,stream){streamPolygon(object.coordinates,stream);},MultiPolygon:function(object,stream){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)streamPolygon(coordinates[i],stream);},GeometryCollection:function(object,stream){var geometries=object.geometries,i=-1,n=geometries.length;while(++i<n)streamGeometry(geometries[i],stream);}};function streamLine(coordinates,stream,closed){var i=-1,n=coordinates.length-closed,coordinate;stream.lineStart();while(++i<n)
(coordinate=coordinates[i]),stream.point(coordinate[0],coordinate[1],coordinate[2]);stream.lineEnd();}
function streamPolygon(coordinates,stream){var i=-1,n=coordinates.length;stream.polygonStart();while(++i<n)streamLine(coordinates[i],stream,1);stream.polygonEnd();}
function geoStream(object,stream){if(object&&streamObjectType.hasOwnProperty(object.type)){streamObjectType[object.type](object,stream);}else{streamGeometry(object,stream);}}
var areaRingSum=adder();var areaSum=adder(),lambda00,phi00,lambda0,cosPhi0,sinPhi0;var areaStream={point:noop$2,lineStart:noop$2,lineEnd:noop$2,polygonStart:function(){areaRingSum.reset();areaStream.lineStart=areaRingStart;areaStream.lineEnd=areaRingEnd;},polygonEnd:function(){var areaRing=+areaRingSum;areaSum.add(areaRing<0?tau$3+areaRing:areaRing);this.lineStart=this.lineEnd=this.point=noop$2;},sphere:function(){areaSum.add(tau$3);}};function areaRingStart(){areaStream.point=areaPointFirst;}
function areaRingEnd(){areaPoint(lambda00,phi00);}
function areaPointFirst(lambda,phi){areaStream.point=areaPoint;(lambda00=lambda),(phi00=phi);(lambda*=radians),(phi*=radians);(lambda0=lambda),(cosPhi0=cos$1((phi=phi/2+quarterPi))),(sinPhi0=sin$1(phi));}
function areaPoint(lambda,phi){(lambda*=radians),(phi*=radians);phi=phi/2+quarterPi;var dLambda=lambda-lambda0,sdLambda=dLambda>=0?1:-1,adLambda=sdLambda*dLambda,cosPhi=cos$1(phi),sinPhi=sin$1(phi),k=sinPhi0*sinPhi,u=cosPhi0*cosPhi+k*cos$1(adLambda),v=k*sdLambda*sin$1(adLambda);areaRingSum.add(atan2(v,u));(lambda0=lambda),(cosPhi0=cosPhi),(sinPhi0=sinPhi);}
function area$1(object){areaSum.reset();geoStream(object,areaStream);return areaSum*2;}
function spherical(cartesian){return[atan2(cartesian[1],cartesian[0]),asin(cartesian[2])];}
function cartesian(spherical){var lambda=spherical[0],phi=spherical[1],cosPhi=cos$1(phi);return[cosPhi*cos$1(lambda),cosPhi*sin$1(lambda),sin$1(phi)];}
function cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2];}
function cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]];}
function cartesianAddInPlace(a,b){(a[0]+=b[0]),(a[1]+=b[1]),(a[2]+=b[2]);}
function cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k];}
function cartesianNormalizeInPlace(d){var l=sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);(d[0]/=l),(d[1]/=l),(d[2]/=l);}
var lambda0$1,phi0,lambda1,phi1,lambda2,lambda00$1,phi00$1,p0,deltaSum=adder(),ranges,range;var boundsStream={point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){boundsStream.point=boundsRingPoint;boundsStream.lineStart=boundsRingStart;boundsStream.lineEnd=boundsRingEnd;deltaSum.reset();areaStream.polygonStart();},polygonEnd:function(){areaStream.polygonEnd();boundsStream.point=boundsPoint;boundsStream.lineStart=boundsLineStart;boundsStream.lineEnd=boundsLineEnd;if(areaRingSum<0)
(lambda0$1=-(lambda1=180)),(phi0=-(phi1=90));else if(deltaSum>epsilon$2)phi1=90;else if(deltaSum<-epsilon$2)phi0=-90;(range[0]=lambda0$1),(range[1]=lambda1);}};function boundsPoint(lambda,phi){ranges.push((range=[(lambda0$1=lambda),(lambda1=lambda)]));if(phi<phi0)phi0=phi;if(phi>phi1)phi1=phi;}
function linePoint(lambda,phi){var p=cartesian([lambda*radians,phi*radians]);if(p0){var normal=cartesianCross(p0,p),equatorial=[normal[1],-normal[0],0],inflection=cartesianCross(equatorial,normal);cartesianNormalizeInPlace(inflection);inflection=spherical(inflection);var delta=lambda-lambda2,sign$$1=delta>0?1:-1,lambdai=inflection[0]*degrees$1*sign$$1,phii,antimeridian=abs(delta)>180;if(antimeridian^(sign$$1*lambda2<lambdai&&lambdai<sign$$1*lambda)){phii=inflection[1]*degrees$1;if(phii>phi1)phi1=phii;}else if(((lambdai=(lambdai+360)%360-180),antimeridian^(sign$$1*lambda2<lambdai&&lambdai<sign$$1*lambda))){phii=-inflection[1]*degrees$1;if(phii<phi0)phi0=phii;}else{if(phi<phi0)phi0=phi;if(phi>phi1)phi1=phi;}
if(antimeridian){if(lambda<lambda2){if(angle(lambda0$1,lambda)>angle(lambda0$1,lambda1))
lambda1=lambda;}else{if(angle(lambda,lambda1)>angle(lambda0$1,lambda1))
lambda0$1=lambda;}}else{if(lambda1>=lambda0$1){if(lambda<lambda0$1)lambda0$1=lambda;if(lambda>lambda1)lambda1=lambda;}else{if(lambda>lambda2){if(angle(lambda0$1,lambda)>angle(lambda0$1,lambda1))
lambda1=lambda;}else{if(angle(lambda,lambda1)>angle(lambda0$1,lambda1))
lambda0$1=lambda;}}}}else{ranges.push((range=[(lambda0$1=lambda),(lambda1=lambda)]));}
if(phi<phi0)phi0=phi;if(phi>phi1)phi1=phi;(p0=p),(lambda2=lambda);}
function boundsLineStart(){boundsStream.point=linePoint;}
function boundsLineEnd(){(range[0]=lambda0$1),(range[1]=lambda1);boundsStream.point=boundsPoint;p0=null;}
function boundsRingPoint(lambda,phi){if(p0){var delta=lambda-lambda2;deltaSum.add(abs(delta)>180?delta+(delta>0?360:-360):delta);}else{(lambda00$1=lambda),(phi00$1=phi);}
areaStream.point(lambda,phi);linePoint(lambda,phi);}
function boundsRingStart(){areaStream.lineStart();}
function boundsRingEnd(){boundsRingPoint(lambda00$1,phi00$1);areaStream.lineEnd();if(abs(deltaSum)>epsilon$2)lambda0$1=-(lambda1=180);(range[0]=lambda0$1),(range[1]=lambda1);p0=null;}
function angle(lambda0,lambda1){return(lambda1-=lambda0)<0?lambda1+360:lambda1;}
function rangeCompare(a,b){return a[0]-b[0];}
function rangeContains(range,x){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x;}
function bounds(feature){var i,n,a,b,merged,deltaMax,delta;phi1=lambda1=-(lambda0$1=phi0=Infinity);ranges=[];geoStream(feature,boundsStream);if((n=ranges.length)){ranges.sort(rangeCompare);for(i=1,a=ranges[0],merged=[a];i<n;++i){b=ranges[i];if(rangeContains(a,b[0])||rangeContains(a,b[1])){if(angle(a[0],b[1])>angle(a[0],a[1]))a[1]=b[1];if(angle(b[0],a[1])>angle(a[0],a[1]))a[0]=b[0];}else{merged.push((a=b));}}
for(deltaMax=-Infinity,n=merged.length-1,i=0,a=merged[n];i<=n;a=b,++i){b=merged[i];if((delta=angle(a[1],b[0]))>deltaMax)
(deltaMax=delta),(lambda0$1=b[0]),(lambda1=a[1]);}}
ranges=range=null;return lambda0$1===Infinity||phi0===Infinity?[[NaN,NaN],[NaN,NaN]]:[[lambda0$1,phi0],[lambda1,phi1]];}
var W0,W1,X0,Y0,Z0,X1,Y1,Z1,X2,Y2,Z2,lambda00$2,phi00$2,x0,y0,z0;var centroidStream={sphere:noop$2,point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart;centroidStream.lineEnd=centroidRingEnd;},polygonEnd:function(){centroidStream.lineStart=centroidLineStart;centroidStream.lineEnd=centroidLineEnd;}};function centroidPoint(lambda,phi){(lambda*=radians),(phi*=radians);var cosPhi=cos$1(phi);centroidPointCartesian(cosPhi*cos$1(lambda),cosPhi*sin$1(lambda),sin$1(phi));}
function centroidPointCartesian(x,y,z){++W0;X0+=(x-X0)/W0;Y0+=(y-Y0)/W0;Z0+=(z-Z0)/W0;}
function centroidLineStart(){centroidStream.point=centroidLinePointFirst;}
function centroidLinePointFirst(lambda,phi){(lambda*=radians),(phi*=radians);var cosPhi=cos$1(phi);x0=cosPhi*cos$1(lambda);y0=cosPhi*sin$1(lambda);z0=sin$1(phi);centroidStream.point=centroidLinePoint;centroidPointCartesian(x0,y0,z0);}
function centroidLinePoint(lambda,phi){(lambda*=radians),(phi*=radians);var cosPhi=cos$1(phi),x=cosPhi*cos$1(lambda),y=cosPhi*sin$1(lambda),z=sin$1(phi),w=atan2(sqrt((w=y0*z-z0*y)*w+
(w=z0*x-x0*z)*w+
(w=x0*y-y0*x)*w),x0*x+y0*y+z0*z);W1+=w;X1+=w*(x0+(x0=x));Y1+=w*(y0+(y0=y));Z1+=w*(z0+(z0=z));centroidPointCartesian(x0,y0,z0);}
function centroidLineEnd(){centroidStream.point=centroidPoint;}
function centroidRingStart(){centroidStream.point=centroidRingPointFirst;}
function centroidRingEnd(){centroidRingPoint(lambda00$2,phi00$2);centroidStream.point=centroidPoint;}
function centroidRingPointFirst(lambda,phi){(lambda00$2=lambda),(phi00$2=phi);(lambda*=radians),(phi*=radians);centroidStream.point=centroidRingPoint;var cosPhi=cos$1(phi);x0=cosPhi*cos$1(lambda);y0=cosPhi*sin$1(lambda);z0=sin$1(phi);centroidPointCartesian(x0,y0,z0);}
function centroidRingPoint(lambda,phi){(lambda*=radians),(phi*=radians);var cosPhi=cos$1(phi),x=cosPhi*cos$1(lambda),y=cosPhi*sin$1(lambda),z=sin$1(phi),cx=y0*z-z0*y,cy=z0*x-x0*z,cz=x0*y-y0*x,m=sqrt(cx*cx+cy*cy+cz*cz),w=asin(m),v=m&&-w/m;X2+=v*cx;Y2+=v*cy;Z2+=v*cz;W1+=w;X1+=w*(x0+(x0=x));Y1+=w*(y0+(y0=y));Z1+=w*(z0+(z0=z));centroidPointCartesian(x0,y0,z0);}
function centroid(object){W0=W1=X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0;geoStream(object,centroidStream);var x=X2,y=Y2,z=Z2,m=x*x+y*y+z*z;if(m<epsilon2$1){(x=X1),(y=Y1),(z=Z1);if(W1<epsilon$2)(x=X0),(y=Y0),(z=Z0);m=x*x+y*y+z*z;if(m<epsilon2$1)return[NaN,NaN];}
return[atan2(y,x)*degrees$1,asin(z/sqrt(m))*degrees$1];}
function constant$8(x){return function(){return x;};}
function compose(a,b){function compose(x,y){return(x=a(x,y)),b(x[0],x[1]);}
if(a.invert&&b.invert)
compose.invert=function(x,y){return(x=b.invert(x,y)),x&&a.invert(x[0],x[1]);};return compose;}
function rotationIdentity(lambda,phi){return[lambda>pi$3?lambda-tau$3:lambda<-pi$3?lambda+tau$3:lambda,phi];}
rotationIdentity.invert=rotationIdentity;function rotateRadians(deltaLambda,deltaPhi,deltaGamma){return(deltaLambda%=tau$3)?deltaPhi||deltaGamma?compose(rotationLambda(deltaLambda),rotationPhiGamma(deltaPhi,deltaGamma)):rotationLambda(deltaLambda):deltaPhi||deltaGamma?rotationPhiGamma(deltaPhi,deltaGamma):rotationIdentity;}
function forwardRotationLambda(deltaLambda){return function(lambda,phi){return((lambda+=deltaLambda),[lambda>pi$3?lambda-tau$3:lambda<-pi$3?lambda+tau$3:lambda,phi]);};}
function rotationLambda(deltaLambda){var rotation=forwardRotationLambda(deltaLambda);rotation.invert=forwardRotationLambda(-deltaLambda);return rotation;}
function rotationPhiGamma(deltaPhi,deltaGamma){var cosDeltaPhi=cos$1(deltaPhi),sinDeltaPhi=sin$1(deltaPhi),cosDeltaGamma=cos$1(deltaGamma),sinDeltaGamma=sin$1(deltaGamma);function rotation(lambda,phi){var cosPhi=cos$1(phi),x=cos$1(lambda)*cosPhi,y=sin$1(lambda)*cosPhi,z=sin$1(phi),k=z*cosDeltaPhi+x*sinDeltaPhi;return[atan2(y*cosDeltaGamma-k*sinDeltaGamma,x*cosDeltaPhi-z*sinDeltaPhi),asin(k*cosDeltaGamma+y*sinDeltaGamma)];}
rotation.invert=function(lambda,phi){var cosPhi=cos$1(phi),x=cos$1(lambda)*cosPhi,y=sin$1(lambda)*cosPhi,z=sin$1(phi),k=z*cosDeltaGamma-y*sinDeltaGamma;return[atan2(y*cosDeltaGamma+z*sinDeltaGamma,x*cosDeltaPhi+k*sinDeltaPhi),asin(k*cosDeltaPhi-x*sinDeltaPhi)];};return rotation;}
function rotation(rotate){rotate=rotateRadians(rotate[0]*radians,rotate[1]*radians,rotate.length>2?rotate[2]*radians:0);function forward(coordinates){coordinates=rotate(coordinates[0]*radians,coordinates[1]*radians);return((coordinates[0]*=degrees$1),(coordinates[1]*=degrees$1),coordinates);}
forward.invert=function(coordinates){coordinates=rotate.invert(coordinates[0]*radians,coordinates[1]*radians);return((coordinates[0]*=degrees$1),(coordinates[1]*=degrees$1),coordinates);};return forward;}
function circleStream(stream,radius,delta,direction,t0,t1){if(!delta)return;var cosRadius=cos$1(radius),sinRadius=sin$1(radius),step=direction*delta;if(t0==null){t0=radius+direction*tau$3;t1=radius-step/2;}else{t0=circleRadius(cosRadius,t0);t1=circleRadius(cosRadius,t1);if(direction>0?t0<t1:t0>t1)t0+=direction*tau$3;}
for(var point,t=t0;direction>0?t>t1:t<t1;t-=step){point=spherical([cosRadius,-sinRadius*cos$1(t),-sinRadius*sin$1(t)]);stream.point(point[0],point[1]);}}
function circleRadius(cosRadius,point){(point=cartesian(point)),(point[0]-=cosRadius);cartesianNormalizeInPlace(point);var radius=acos(-point[1]);return((-point[2]<0?-radius:radius)+tau$3-epsilon$2)%tau$3;}
function circle(){var center=constant$8([0,0]),radius=constant$8(90),precision=constant$8(6),ring,rotate,stream={point:point};function point(x,y){ring.push((x=rotate(x,y)));(x[0]*=degrees$1),(x[1]*=degrees$1);}
function circle(){var c=center.apply(this,arguments),r=radius.apply(this,arguments)*radians,p=precision.apply(this,arguments)*radians;ring=[];rotate=rotateRadians(-c[0]*radians,-c[1]*radians,0).invert;circleStream(stream,r,p,1);c={type:"Polygon",coordinates:[ring]};ring=rotate=null;return c;}
circle.center=function(_){return arguments.length?((center=typeof _==="function"?_:constant$8([+_[0],+_[1]])),circle):center;};circle.radius=function(_){return arguments.length?((radius=typeof _==="function"?_:constant$8(+_)),circle):radius;};circle.precision=function(_){return arguments.length?((precision=typeof _==="function"?_:constant$8(+_)),circle):precision;};return circle;}
function clipBuffer(){var lines=[],line;return{point:function(x,y){line.push([x,y]);},lineStart:function(){lines.push((line=[]));},lineEnd:noop$2,rejoin:function(){if(lines.length>1)lines.push(lines.pop().concat(lines.shift()));},result:function(){var result=lines;lines=[];line=null;return result;}};}
function pointEqual(a,b){return abs(a[0]-b[0])<epsilon$2&&abs(a[1]-b[1])<epsilon$2;}
function Intersection(point,points,other,entry){this.x=point;this.z=points;this.o=other;this.e=entry;this.v=false;this.n=this.p=null;}
function clipRejoin(segments,compareIntersection,startInside,interpolate,stream){var subject=[],clip=[],i,n;segments.forEach(function(segment){if((n=segment.length-1)<=0)return;var n,p0=segment[0],p1=segment[n],x;if(pointEqual(p0,p1)){stream.lineStart();for(i=0;i<n;++i)stream.point((p0=segment[i])[0],p0[1]);stream.lineEnd();return;}
subject.push((x=new Intersection(p0,segment,null,true)));clip.push((x.o=new Intersection(p0,null,x,false)));subject.push((x=new Intersection(p1,segment,null,false)));clip.push((x.o=new Intersection(p1,null,x,true)));});if(!subject.length)return;clip.sort(compareIntersection);link$1(subject);link$1(clip);for(i=0,n=clip.length;i<n;++i){clip[i].e=startInside=!startInside;}
var start=subject[0],points,point;while(1){var current=start,isSubject=true;while(current.v)if((current=current.n)===start)return;points=current.z;stream.lineStart();do{current.v=current.o.v=true;if(current.e){if(isSubject){for(i=0,n=points.length;i<n;++i)
stream.point((point=points[i])[0],point[1]);}else{interpolate(current.x,current.n.x,1,stream);}
current=current.n;}else{if(isSubject){points=current.p.z;for(i=points.length-1;i>=0;--i)
stream.point((point=points[i])[0],point[1]);}else{interpolate(current.x,current.p.x,-1,stream);}
current=current.p;}
current=current.o;points=current.z;isSubject=!isSubject;}while(!current.v);stream.lineEnd();}}
function link$1(array){if(!(n=array.length))return;var n,i=0,a=array[0],b;while(++i<n){a.n=b=array[i];b.p=a;a=b;}
a.n=b=array[0];b.p=a;}
var sum$1=adder();function polygonContains(polygon,point){var lambda=point[0],phi=point[1],sinPhi=sin$1(phi),normal=[sin$1(lambda),-cos$1(lambda),0],angle=0,winding=0;sum$1.reset();if(sinPhi===1)phi=halfPi$2+epsilon$2;else if(sinPhi===-1)phi=-halfPi$2-epsilon$2;for(var i=0,n=polygon.length;i<n;++i){if(!(m=(ring=polygon[i]).length))continue;var ring,m,point0=ring[m-1],lambda0=point0[0],phi0=point0[1]/2+quarterPi,sinPhi0=sin$1(phi0),cosPhi0=cos$1(phi0);for(var j=0;j<m;++j,lambda0=lambda1,sinPhi0=sinPhi1,cosPhi0=cosPhi1,point0=point1){var point1=ring[j],lambda1=point1[0],phi1=point1[1]/2+quarterPi,sinPhi1=sin$1(phi1),cosPhi1=cos$1(phi1),delta=lambda1-lambda0,sign$$1=delta>=0?1:-1,absDelta=sign$$1*delta,antimeridian=absDelta>pi$3,k=sinPhi0*sinPhi1;sum$1.add(atan2(k*sign$$1*sin$1(absDelta),cosPhi0*cosPhi1+k*cos$1(absDelta)));angle+=antimeridian?delta+sign$$1*tau$3:delta;if(antimeridian^(lambda0>=lambda)^(lambda1>=lambda)){var arc=cartesianCross(cartesian(point0),cartesian(point1));cartesianNormalizeInPlace(arc);var intersection=cartesianCross(normal,arc);cartesianNormalizeInPlace(intersection);var phiArc=(antimeridian^(delta>=0)?-1:1)*asin(intersection[2]);if(phi>phiArc||(phi===phiArc&&(arc[0]||arc[1]))){winding+=antimeridian^(delta>=0)?1:-1;}}}}
return((angle<-epsilon$2||(angle<epsilon$2&&sum$1<-epsilon$2))^(winding&1));}
function clip(pointVisible,clipLine,interpolate,start){return function(sink){var line=clipLine(sink),ringBuffer=clipBuffer(),ringSink=clipLine(ringBuffer),polygonStarted=false,polygon,segments,ring;var clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){clip.point=pointRing;clip.lineStart=ringStart;clip.lineEnd=ringEnd;segments=[];polygon=[];},polygonEnd:function(){clip.point=point;clip.lineStart=lineStart;clip.lineEnd=lineEnd;segments=merge(segments);var startInside=polygonContains(polygon,start);if(segments.length){if(!polygonStarted)sink.polygonStart(),(polygonStarted=true);clipRejoin(segments,compareIntersection,startInside,interpolate,sink);}else if(startInside){if(!polygonStarted)sink.polygonStart(),(polygonStarted=true);sink.lineStart();interpolate(null,null,1,sink);sink.lineEnd();}
if(polygonStarted)sink.polygonEnd(),(polygonStarted=false);segments=polygon=null;},sphere:function(){sink.polygonStart();sink.lineStart();interpolate(null,null,1,sink);sink.lineEnd();sink.polygonEnd();}};function point(lambda,phi){if(pointVisible(lambda,phi))sink.point(lambda,phi);}
function pointLine(lambda,phi){line.point(lambda,phi);}
function lineStart(){clip.point=pointLine;line.lineStart();}
function lineEnd(){clip.point=point;line.lineEnd();}
function pointRing(lambda,phi){ring.push([lambda,phi]);ringSink.point(lambda,phi);}
function ringStart(){ringSink.lineStart();ring=[];}
function ringEnd(){pointRing(ring[0][0],ring[0][1]);ringSink.lineEnd();var clean=ringSink.clean(),ringSegments=ringBuffer.result(),i,n=ringSegments.length,m,segment,point;ring.pop();polygon.push(ring);ring=null;if(!n)return;if(clean&1){segment=ringSegments[0];if((m=segment.length-1)>0){if(!polygonStarted)sink.polygonStart(),(polygonStarted=true);sink.lineStart();for(i=0;i<m;++i)
sink.point((point=segment[i])[0],point[1]);sink.lineEnd();}
return;}
if(n>1&&clean&2)
ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));segments.push(ringSegments.filter(validSegment));}
return clip;};}
function validSegment(segment){return segment.length>1;}
function compareIntersection(a,b){return(((a=a.x)[0]<0?a[1]-halfPi$2-epsilon$2:halfPi$2-a[1])-
((b=b.x)[0]<0?b[1]-halfPi$2-epsilon$2:halfPi$2-b[1]));}
var clipAntimeridian=clip(function(){return true;},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi$3,-halfPi$2]);function clipAntimeridianLine(stream){var lambda0=NaN,phi0=NaN,sign0=NaN,clean;return{lineStart:function(){stream.lineStart();clean=1;},point:function(lambda1,phi1){var sign1=lambda1>0?pi$3:-pi$3,delta=abs(lambda1-lambda0);if(abs(delta-pi$3)<epsilon$2){stream.point(lambda0,(phi0=(phi0+phi1)/2>0?halfPi$2:-halfPi$2));stream.point(sign0,phi0);stream.lineEnd();stream.lineStart();stream.point(sign1,phi0);stream.point(lambda1,phi0);clean=0;}else if(sign0!==sign1&&delta>=pi$3){if(abs(lambda0-sign0)<epsilon$2)lambda0-=sign0*epsilon$2;if(abs(lambda1-sign1)<epsilon$2)lambda1-=sign1*epsilon$2;phi0=clipAntimeridianIntersect(lambda0,phi0,lambda1,phi1);stream.point(sign0,phi0);stream.lineEnd();stream.lineStart();stream.point(sign1,phi0);clean=0;}
stream.point((lambda0=lambda1),(phi0=phi1));sign0=sign1;},lineEnd:function(){stream.lineEnd();lambda0=phi0=NaN;},clean:function(){return 2-clean;}};}
function clipAntimeridianIntersect(lambda0,phi0,lambda1,phi1){var cosPhi0,cosPhi1,sinLambda0Lambda1=sin$1(lambda0-lambda1);return abs(sinLambda0Lambda1)>epsilon$2?atan((sin$1(phi0)*(cosPhi1=cos$1(phi1))*sin$1(lambda1)-
sin$1(phi1)*(cosPhi0=cos$1(phi0))*sin$1(lambda0))/(cosPhi0*cosPhi1*sinLambda0Lambda1)):(phi0+phi1)/2;}
function clipAntimeridianInterpolate(from,to,direction,stream){var phi;if(from==null){phi=direction*halfPi$2;stream.point(-pi$3,phi);stream.point(0,phi);stream.point(pi$3,phi);stream.point(pi$3,0);stream.point(pi$3,-phi);stream.point(0,-phi);stream.point(-pi$3,-phi);stream.point(-pi$3,0);stream.point(-pi$3,phi);}else if(abs(from[0]-to[0])>epsilon$2){var lambda=from[0]<to[0]?pi$3:-pi$3;phi=direction*lambda/2;stream.point(-lambda,phi);stream.point(0,phi);stream.point(lambda,phi);}else{stream.point(to[0],to[1]);}}
function clipCircle(radius){var cr=cos$1(radius),delta=6*radians,smallRadius=cr>0,notHemisphere=abs(cr)>epsilon$2;function interpolate(from,to,direction,stream){circleStream(stream,radius,delta,direction,from,to);}
function visible(lambda,phi){return cos$1(lambda)*cos$1(phi)>cr;}
function clipLine(stream){var point0,c0,v0,v00,clean;return{lineStart:function(){v00=v0=false;clean=1;},point:function(lambda,phi){var point1=[lambda,phi],point2,v=visible(lambda,phi),c=smallRadius?v?0:code(lambda,phi):v?code(lambda+(lambda<0?pi$3:-pi$3),phi):0;if(!point0&&(v00=v0=v))stream.lineStart();if(v!==v0){point2=intersect(point0,point1);if(!point2||pointEqual(point0,point2)||pointEqual(point1,point2)){point1[0]+=epsilon$2;point1[1]+=epsilon$2;v=visible(point1[0],point1[1]);}}
if(v!==v0){clean=0;if(v){stream.lineStart();point2=intersect(point1,point0);stream.point(point2[0],point2[1]);}else{point2=intersect(point0,point1);stream.point(point2[0],point2[1]);stream.lineEnd();}
point0=point2;}else if(notHemisphere&&point0&&smallRadius^v){var t;if(!(c&c0)&&(t=intersect(point1,point0,true))){clean=0;if(smallRadius){stream.lineStart();stream.point(t[0][0],t[0][1]);stream.point(t[1][0],t[1][1]);stream.lineEnd();}else{stream.point(t[1][0],t[1][1]);stream.lineEnd();stream.lineStart();stream.point(t[0][0],t[0][1]);}}}
if(v&&(!point0||!pointEqual(point0,point1))){stream.point(point1[0],point1[1]);}
(point0=point1),(v0=v),(c0=c);},lineEnd:function(){if(v0)stream.lineEnd();point0=null;},clean:function(){return clean|((v00&&v0)<<1);}};}
function intersect(a,b,two){var pa=cartesian(a),pb=cartesian(b);var n1=[1,0,0],n2=cartesianCross(pa,pb),n2n2=cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=cartesianCross(n1,n2),A=cartesianScale(n1,c1),B=cartesianScale(n2,c2);cartesianAddInPlace(A,B);var u=n1xn2,w=cartesianDot(A,u),uu=cartesianDot(u,u),t2=w*w-uu*(cartesianDot(A,A)-1);if(t2<0)return;var t=sqrt(t2),q=cartesianScale(u,(-w-t)/uu);cartesianAddInPlace(q,A);q=spherical(q);if(!two)return q;var lambda0=a[0],lambda1=b[0],phi0=a[1],phi1=b[1],z;if(lambda1<lambda0)(z=lambda0),(lambda0=lambda1),(lambda1=z);var delta=lambda1-lambda0,polar=abs(delta-pi$3)<epsilon$2,meridian=polar||delta<epsilon$2;if(!polar&&phi1<phi0)(z=phi0),(phi0=phi1),(phi1=z);if(meridian?polar?(phi0+phi1>0)^(q[1]<(abs(q[0]-lambda0)<epsilon$2?phi0:phi1)):phi0<=q[1]&&q[1]<=phi1:(delta>pi$3)^(lambda0<=q[0]&&q[0]<=lambda1)){var q1=cartesianScale(u,(-w+t)/uu);cartesianAddInPlace(q1,A);return[q,spherical(q1)];}}
function code(lambda,phi){var r=smallRadius?radius:pi$3-radius,code=0;if(lambda<-r)code|=1;else if(lambda>r)code|=2;if(phi<-r)code|=4;else if(phi>r)code|=8;return code;}
return clip(visible,clipLine,interpolate,smallRadius?[0,-radius]:[-pi$3,radius-pi$3]);}
function clipLine(a,b,x0,y0,x1,y1){var ax=a[0],ay=a[1],bx=b[0],by=b[1],t0=0,t1=1,dx=bx-ax,dy=by-ay,r;r=x0-ax;if(!dx&&r>0)return;r/=dx;if(dx<0){if(r<t0)return;if(r<t1)t1=r;}else if(dx>0){if(r>t1)return;if(r>t0)t0=r;}
r=x1-ax;if(!dx&&r<0)return;r/=dx;if(dx<0){if(r>t1)return;if(r>t0)t0=r;}else if(dx>0){if(r<t0)return;if(r<t1)t1=r;}
r=y0-ay;if(!dy&&r>0)return;r/=dy;if(dy<0){if(r<t0)return;if(r<t1)t1=r;}else if(dy>0){if(r>t1)return;if(r>t0)t0=r;}
r=y1-ay;if(!dy&&r<0)return;r/=dy;if(dy<0){if(r>t1)return;if(r>t0)t0=r;}else if(dy>0){if(r<t0)return;if(r<t1)t1=r;}
if(t0>0)(a[0]=ax+t0*dx),(a[1]=ay+t0*dy);if(t1<1)(b[0]=ax+t1*dx),(b[1]=ay+t1*dy);return true;}
var clipMax=1e9,clipMin=-clipMax;function clipRectangle(x0,y0,x1,y1){function visible(x,y){return x0<=x&&x<=x1&&y0<=y&&y<=y1;}
function interpolate(from,to,direction,stream){var a=0,a1=0;if(from==null||(a=corner(from,direction))!==(a1=corner(to,direction))||(comparePoint(from,to)<0)^(direction>0)){do stream.point(a===0||a===3?x0:x1,a>1?y1:y0);while((a=(a+direction+4)%4)!==a1);}else{stream.point(to[0],to[1]);}}
function corner(p,direction){return abs(p[0]-x0)<epsilon$2?direction>0?0:3:abs(p[0]-x1)<epsilon$2?direction>0?2:1:abs(p[1]-y0)<epsilon$2?direction>0?1:0:direction>0?3:2;}
function compareIntersection(a,b){return comparePoint(a.x,b.x);}
function comparePoint(a,b){var ca=corner(a,1),cb=corner(b,1);return ca!==cb?ca-cb:ca===0?b[1]-a[1]:ca===1?a[0]-b[0]:ca===2?a[1]-b[1]:b[0]-a[0];}
return function(stream){var activeStream=stream,bufferStream=clipBuffer(),segments,polygon,ring,x__,y__,v__,x_,y_,v_,first,clean;var clipStream={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:polygonStart,polygonEnd:polygonEnd};function point(x,y){if(visible(x,y))activeStream.point(x,y);}
function polygonInside(){var winding=0;for(var i=0,n=polygon.length;i<n;++i){for(var ring=polygon[i],j=1,m=ring.length,point=ring[0],a0,a1,b0=point[0],b1=point[1];j<m;++j){(a0=b0),(a1=b1),(point=ring[j]),(b0=point[0]),(b1=point[1]);if(a1<=y1){if(b1>y1&&(b0-a0)*(y1-a1)>(b1-a1)*(x0-a0))
++winding;}else{if(b1<=y1&&(b0-a0)*(y1-a1)<(b1-a1)*(x0-a0))
--winding;}}}
return winding;}
function polygonStart(){(activeStream=bufferStream),(segments=[]),(polygon=[]),(clean=true);}
function polygonEnd(){var startInside=polygonInside(),cleanInside=clean&&startInside,visible=(segments=merge(segments)).length;if(cleanInside||visible){stream.polygonStart();if(cleanInside){stream.lineStart();interpolate(null,null,1,stream);stream.lineEnd();}
if(visible){clipRejoin(segments,compareIntersection,startInside,interpolate,stream);}
stream.polygonEnd();}
(activeStream=stream),(segments=polygon=ring=null);}
function lineStart(){clipStream.point=linePoint;if(polygon)polygon.push((ring=[]));first=true;v_=false;x_=y_=NaN;}
function lineEnd(){if(segments){linePoint(x__,y__);if(v__&&v_)bufferStream.rejoin();segments.push(bufferStream.result());}
clipStream.point=point;if(v_)activeStream.lineEnd();}
function linePoint(x,y){var v=visible(x,y);if(polygon)ring.push([x,y]);if(first){(x__=x),(y__=y),(v__=v);first=false;if(v){activeStream.lineStart();activeStream.point(x,y);}}else{if(v&&v_)activeStream.point(x,y);else{var a=[(x_=Math.max(clipMin,Math.min(clipMax,x_))),(y_=Math.max(clipMin,Math.min(clipMax,y_)))],b=[(x=Math.max(clipMin,Math.min(clipMax,x))),(y=Math.max(clipMin,Math.min(clipMax,y)))];if(clipLine(a,b,x0,y0,x1,y1)){if(!v_){activeStream.lineStart();activeStream.point(a[0],a[1]);}
activeStream.point(b[0],b[1]);if(!v)activeStream.lineEnd();clean=false;}else if(v){activeStream.lineStart();activeStream.point(x,y);clean=false;}}}
(x_=x),(y_=y),(v_=v);}
return clipStream;};}
function extent$1(){var x0=0,y0=0,x1=960,y1=500,cache,cacheStream,clip;return(clip={stream:function(stream){return cache&&cacheStream===stream?cache:(cache=clipRectangle(x0,y0,x1,y1)((cacheStream=stream)));},extent:function(_){return arguments.length?((x0=+_[0][0]),(y0=+_[0][1]),(x1=+_[1][0]),(y1=+_[1][1]),(cache=cacheStream=null),clip):[[x0,y0],[x1,y1]];}});}
var lengthSum=adder(),lambda0$2,sinPhi0$1,cosPhi0$1;var lengthStream={sphere:noop$2,point:noop$2,lineStart:lengthLineStart,lineEnd:noop$2,polygonStart:noop$2,polygonEnd:noop$2};function lengthLineStart(){lengthStream.point=lengthPointFirst;lengthStream.lineEnd=lengthLineEnd;}
function lengthLineEnd(){lengthStream.point=lengthStream.lineEnd=noop$2;}
function lengthPointFirst(lambda,phi){(lambda*=radians),(phi*=radians);(lambda0$2=lambda),(sinPhi0$1=sin$1(phi)),(cosPhi0$1=cos$1(phi));lengthStream.point=lengthPoint;}
function lengthPoint(lambda,phi){(lambda*=radians),(phi*=radians);var sinPhi=sin$1(phi),cosPhi=cos$1(phi),delta=abs(lambda-lambda0$2),cosDelta=cos$1(delta),sinDelta=sin$1(delta),x=cosPhi*sinDelta,y=cosPhi0$1*sinPhi-sinPhi0$1*cosPhi*cosDelta,z=sinPhi0$1*sinPhi+cosPhi0$1*cosPhi*cosDelta;lengthSum.add(atan2(sqrt(x*x+y*y),z));(lambda0$2=lambda),(sinPhi0$1=sinPhi),(cosPhi0$1=cosPhi);}
function length$1(object){lengthSum.reset();geoStream(object,lengthStream);return+lengthSum;}
var coordinates=[null,null],object$1={type:"LineString",coordinates:coordinates};function distance(a,b){coordinates[0]=a;coordinates[1]=b;return length$1(object$1);}
var containsObjectType={Feature:function(object,point){return containsGeometry(object.geometry,point);},FeatureCollection:function(object,point){var features=object.features,i=-1,n=features.length;while(++i<n)
if(containsGeometry(features[i].geometry,point))return true;return false;}};var containsGeometryType={Sphere:function(){return true;},Point:function(object,point){return containsPoint(object.coordinates,point);},MultiPoint:function(object,point){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)if(containsPoint(coordinates[i],point))return true;return false;},LineString:function(object,point){return containsLine(object.coordinates,point);},MultiLineString:function(object,point){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)if(containsLine(coordinates[i],point))return true;return false;},Polygon:function(object,point){return containsPolygon(object.coordinates,point);},MultiPolygon:function(object,point){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)if(containsPolygon(coordinates[i],point))return true;return false;},GeometryCollection:function(object,point){var geometries=object.geometries,i=-1,n=geometries.length;while(++i<n)if(containsGeometry(geometries[i],point))return true;return false;}};function containsGeometry(geometry,point){return geometry&&containsGeometryType.hasOwnProperty(geometry.type)?containsGeometryType[geometry.type](geometry,point):false;}
function containsPoint(coordinates,point){return distance(coordinates,point)===0;}
function containsLine(coordinates,point){var ab=distance(coordinates[0],coordinates[1]),ao=distance(coordinates[0],point),ob=distance(point,coordinates[1]);return ao+ob<=ab+epsilon$2;}
function containsPolygon(coordinates,point){return!!polygonContains(coordinates.map(ringRadians),pointRadians(point));}
function ringRadians(ring){return(ring=ring.map(pointRadians)),ring.pop(),ring;}
function pointRadians(point){return[point[0]*radians,point[1]*radians];}
function contains$1(object,point){return(object&&containsObjectType.hasOwnProperty(object.type)?containsObjectType[object.type]:containsGeometry)(object,point);}
function graticuleX(y0,y1,dy){var y=sequence(y0,y1-epsilon$2,dy).concat(y1);return function(x){return y.map(function(y){return[x,y];});};}
function graticuleY(x0,x1,dx){var x=sequence(x0,x1-epsilon$2,dx).concat(x1);return function(y){return x.map(function(x){return[x,y];});};}
function graticule(){var x1,x0,X1,X0,y1,y0,Y1,Y0,dx=10,dy=dx,DX=90,DY=360,x,y,X,Y,precision=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()};}
function lines(){return sequence(ceil(X0/DX)*DX,X1,DX).map(X).concat(sequence(ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(sequence(ceil(x0/dx)*dx,x1,dx).filter(function(x){return abs(x%DX)>epsilon$2;}).map(x)).concat(sequence(ceil(y0/dy)*dy,y1,dy).filter(function(y){return abs(y%DY)>epsilon$2;}).map(y));}
graticule.lines=function(){return lines().map(function(coordinates){return{type:"LineString",coordinates:coordinates};});};graticule.outline=function(){return{type:"Polygon",coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]};};graticule.extent=function(_){if(!arguments.length)return graticule.extentMinor();return graticule.extentMajor(_).extentMinor(_);};graticule.extentMajor=function(_){if(!arguments.length)return[[X0,Y0],[X1,Y1]];(X0=+_[0][0]),(X1=+_[1][0]);(Y0=+_[0][1]),(Y1=+_[1][1]);if(X0>X1)(_=X0),(X0=X1),(X1=_);if(Y0>Y1)(_=Y0),(Y0=Y1),(Y1=_);return graticule.precision(precision);};graticule.extentMinor=function(_){if(!arguments.length)return[[x0,y0],[x1,y1]];(x0=+_[0][0]),(x1=+_[1][0]);(y0=+_[0][1]),(y1=+_[1][1]);if(x0>x1)(_=x0),(x0=x1),(x1=_);if(y0>y1)(_=y0),(y0=y1),(y1=_);return graticule.precision(precision);};graticule.step=function(_){if(!arguments.length)return graticule.stepMinor();return graticule.stepMajor(_).stepMinor(_);};graticule.stepMajor=function(_){if(!arguments.length)return[DX,DY];(DX=+_[0]),(DY=+_[1]);return graticule;};graticule.stepMinor=function(_){if(!arguments.length)return[dx,dy];(dx=+_[0]),(dy=+_[1]);return graticule;};graticule.precision=function(_){if(!arguments.length)return precision;precision=+_;x=graticuleX(y0,y1,90);y=graticuleY(x0,x1,precision);X=graticuleX(Y0,Y1,90);Y=graticuleY(X0,X1,precision);return graticule;};return graticule.extentMajor([[-180,-90+epsilon$2],[180,90-epsilon$2]]).extentMinor([[-180,-80-epsilon$2],[180,80+epsilon$2]]);}
function graticule10(){return graticule()();}
function interpolate$1(a,b){var x0=a[0]*radians,y0=a[1]*radians,x1=b[0]*radians,y1=b[1]*radians,cy0=cos$1(y0),sy0=sin$1(y0),cy1=cos$1(y1),sy1=sin$1(y1),kx0=cy0*cos$1(x0),ky0=cy0*sin$1(x0),kx1=cy1*cos$1(x1),ky1=cy1*sin$1(x1),d=2*asin(sqrt(haversin(y1-y0)+cy0*cy1*haversin(x1-x0))),k=sin$1(d);var interpolate=d?function(t){var B=sin$1((t*=d))/k,A=sin$1(d-t)/k,x=A*kx0+B*kx1,y=A*ky0+B*ky1,z=A*sy0+B*sy1;return[atan2(y,x)*degrees$1,atan2(z,sqrt(x*x+y*y))*degrees$1];}:function(){return[x0*degrees$1,y0*degrees$1];};interpolate.distance=d;return interpolate;}
function identity$4(x){return x;}
var areaSum$1=adder(),areaRingSum$1=adder(),x00,y00,x0$1,y0$1;var areaStream$1={point:noop$2,lineStart:noop$2,lineEnd:noop$2,polygonStart:function(){areaStream$1.lineStart=areaRingStart$1;areaStream$1.lineEnd=areaRingEnd$1;},polygonEnd:function(){areaStream$1.lineStart=areaStream$1.lineEnd=areaStream$1.point=noop$2;areaSum$1.add(abs(areaRingSum$1));areaRingSum$1.reset();},result:function(){var area=areaSum$1/2;areaSum$1.reset();return area;}};function areaRingStart$1(){areaStream$1.point=areaPointFirst$1;}
function areaPointFirst$1(x,y){areaStream$1.point=areaPoint$1;(x00=x0$1=x),(y00=y0$1=y);}
function areaPoint$1(x,y){areaRingSum$1.add(y0$1*x-x0$1*y);(x0$1=x),(y0$1=y);}
function areaRingEnd$1(){areaPoint$1(x00,y00);}
var x0$2=Infinity,y0$2=x0$2,x1=-x0$2,y1=x1;var boundsStream$1={point:boundsPoint$1,lineStart:noop$2,lineEnd:noop$2,polygonStart:noop$2,polygonEnd:noop$2,result:function(){var bounds=[[x0$2,y0$2],[x1,y1]];x1=y1=-(y0$2=x0$2=Infinity);return bounds;}};function boundsPoint$1(x,y){if(x<x0$2)x0$2=x;if(x>x1)x1=x;if(y<y0$2)y0$2=y;if(y>y1)y1=y;}
var X0$1=0,Y0$1=0,Z0$1=0,X1$1=0,Y1$1=0,Z1$1=0,X2$1=0,Y2$1=0,Z2$1=0,x00$1,y00$1,x0$3,y0$3;var centroidStream$1={point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){centroidStream$1.lineStart=centroidRingStart$1;centroidStream$1.lineEnd=centroidRingEnd$1;},polygonEnd:function(){centroidStream$1.point=centroidPoint$1;centroidStream$1.lineStart=centroidLineStart$1;centroidStream$1.lineEnd=centroidLineEnd$1;},result:function(){var centroid=Z2$1?[X2$1/Z2$1,Y2$1/Z2$1]:Z1$1?[X1$1/Z1$1,Y1$1/Z1$1]:Z0$1?[X0$1/Z0$1,Y0$1/Z0$1]:[NaN,NaN];X0$1=Y0$1=Z0$1=X1$1=Y1$1=Z1$1=X2$1=Y2$1=Z2$1=0;return centroid;}};function centroidPoint$1(x,y){X0$1+=x;Y0$1+=y;++Z0$1;}
function centroidLineStart$1(){centroidStream$1.point=centroidPointFirstLine;}
function centroidPointFirstLine(x,y){centroidStream$1.point=centroidPointLine;centroidPoint$1((x0$3=x),(y0$3=y));}
function centroidPointLine(x,y){var dx=x-x0$3,dy=y-y0$3,z=sqrt(dx*dx+dy*dy);X1$1+=z*(x0$3+x)/2;Y1$1+=z*(y0$3+y)/2;Z1$1+=z;centroidPoint$1((x0$3=x),(y0$3=y));}
function centroidLineEnd$1(){centroidStream$1.point=centroidPoint$1;}
function centroidRingStart$1(){centroidStream$1.point=centroidPointFirstRing;}
function centroidRingEnd$1(){centroidPointRing(x00$1,y00$1);}
function centroidPointFirstRing(x,y){centroidStream$1.point=centroidPointRing;centroidPoint$1((x00$1=x0$3=x),(y00$1=y0$3=y));}
function centroidPointRing(x,y){var dx=x-x0$3,dy=y-y0$3,z=sqrt(dx*dx+dy*dy);X1$1+=z*(x0$3+x)/2;Y1$1+=z*(y0$3+y)/2;Z1$1+=z;z=y0$3*x-x0$3*y;X2$1+=z*(x0$3+x);Y2$1+=z*(y0$3+y);Z2$1+=z*3;centroidPoint$1((x0$3=x),(y0$3=y));}
function PathContext(context){this._context=context;}
PathContext.prototype={_radius:4.5,pointRadius:function(_){return(this._radius=_),this;},polygonStart:function(){this._line=0;},polygonEnd:function(){this._line=NaN;},lineStart:function(){this._point=0;},lineEnd:function(){if(this._line===0)this._context.closePath();this._point=NaN;},point:function(x,y){switch(this._point){case 0:{this._context.moveTo(x,y);this._point=1;break;}
case 1:{this._context.lineTo(x,y);break;}
default:{this._context.moveTo(x+this._radius,y);this._context.arc(x,y,this._radius,0,tau$3);break;}}},result:noop$2};var lengthSum$1=adder(),lengthRing,x00$2,y00$2,x0$4,y0$4;var lengthStream$1={point:noop$2,lineStart:function(){lengthStream$1.point=lengthPointFirst$1;},lineEnd:function(){if(lengthRing)lengthPoint$1(x00$2,y00$2);lengthStream$1.point=noop$2;},polygonStart:function(){lengthRing=true;},polygonEnd:function(){lengthRing=null;},result:function(){var length=+lengthSum$1;lengthSum$1.reset();return length;}};function lengthPointFirst$1(x,y){lengthStream$1.point=lengthPoint$1;(x00$2=x0$4=x),(y00$2=y0$4=y);}
function lengthPoint$1(x,y){(x0$4-=x),(y0$4-=y);lengthSum$1.add(sqrt(x0$4*x0$4+y0$4*y0$4));(x0$4=x),(y0$4=y);}
function PathString(){this._string=[];}
PathString.prototype={_radius:4.5,_circle:circle$1(4.5),pointRadius:function(_){if((_=+_)!==this._radius)(this._radius=_),(this._circle=null);return this;},polygonStart:function(){this._line=0;},polygonEnd:function(){this._line=NaN;},lineStart:function(){this._point=0;},lineEnd:function(){if(this._line===0)this._string.push("Z");this._point=NaN;},point:function(x,y){switch(this._point){case 0:{this._string.push("M",x,",",y);this._point=1;break;}
case 1:{this._string.push("L",x,",",y);break;}
default:{if(this._circle==null)this._circle=circle$1(this._radius);this._string.push("M",x,",",y,this._circle);break;}}},result:function(){if(this._string.length){var result=this._string.join("");this._string=[];return result;}else{return null;}}};function circle$1(radius){return("m0,"+
radius+"a"+
radius+","+
radius+" 0 1,1 0,"+
-2*radius+"a"+
radius+","+
radius+" 0 1,1 0,"+
2*radius+"z");}
function index$1(projection,context){var pointRadius=4.5,projectionStream,contextStream;function path(object){if(object){if(typeof pointRadius==="function")
contextStream.pointRadius(+pointRadius.apply(this,arguments));geoStream(object,projectionStream(contextStream));}
return contextStream.result();}
path.area=function(object){geoStream(object,projectionStream(areaStream$1));return areaStream$1.result();};path.measure=function(object){geoStream(object,projectionStream(lengthStream$1));return lengthStream$1.result();};path.bounds=function(object){geoStream(object,projectionStream(boundsStream$1));return boundsStream$1.result();};path.centroid=function(object){geoStream(object,projectionStream(centroidStream$1));return centroidStream$1.result();};path.projection=function(_){return arguments.length?((projectionStream=_==null?((projection=null),identity$4):(projection=_).stream),path):projection;};path.context=function(_){if(!arguments.length)return context;contextStream=_==null?((context=null),new PathString()):new PathContext((context=_));if(typeof pointRadius!=="function")
contextStream.pointRadius(pointRadius);return path;};path.pointRadius=function(_){if(!arguments.length)return pointRadius;pointRadius=typeof _==="function"?_:(contextStream.pointRadius(+_),+_);return path;};return path.projection(projection).context(context);}
function transform(methods){return{stream:transformer(methods)};}
function transformer(methods){return function(stream){var s=new TransformStream();for(var key in methods)s[key]=methods[key];s.stream=stream;return s;};}
function TransformStream(){}
TransformStream.prototype={constructor:TransformStream,point:function(x,y){this.stream.point(x,y);},sphere:function(){this.stream.sphere();},lineStart:function(){this.stream.lineStart();},lineEnd:function(){this.stream.lineEnd();},polygonStart:function(){this.stream.polygonStart();},polygonEnd:function(){this.stream.polygonEnd();}};function fit(projection,fitBounds,object){var clip=projection.clipExtent&&projection.clipExtent();projection.scale(150).translate([0,0]);if(clip!=null)projection.clipExtent(null);geoStream(object,projection.stream(boundsStream$1));fitBounds(boundsStream$1.result());if(clip!=null)projection.clipExtent(clip);return projection;}
function fitExtent(projection,extent,object){return fit(projection,function(b){var w=extent[1][0]-extent[0][0],h=extent[1][1]-extent[0][1],k=Math.min(w/(b[1][0]-b[0][0]),h/(b[1][1]-b[0][1])),x=+extent[0][0]+(w-k*(b[1][0]+b[0][0]))/2,y=+extent[0][1]+(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y]);},object);}
function fitSize(projection,size,object){return fitExtent(projection,[[0,0],size],object);}
function fitWidth(projection,width,object){return fit(projection,function(b){var w=+width,k=w/(b[1][0]-b[0][0]),x=(w-k*(b[1][0]+b[0][0]))/2,y=-k*b[0][1];projection.scale(150*k).translate([x,y]);},object);}
function fitHeight(projection,height,object){return fit(projection,function(b){var h=+height,k=h/(b[1][1]-b[0][1]),x=-k*b[0][0],y=(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y]);},object);}
var maxDepth=16,cosMinDistance=cos$1(30*radians);function resample(project,delta2){return+delta2?resample$1(project,delta2):resampleNone(project);}
function resampleNone(project){return transformer({point:function(x,y){x=project(x,y);this.stream.point(x[0],x[1]);}});}
function resample$1(project,delta2){function resampleLineTo(x0,y0,lambda0,a0,b0,c0,x1,y1,lambda1,a1,b1,c1,depth,stream){var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(d2>4*delta2&&depth--){var a=a0+a1,b=b0+b1,c=c0+c1,m=sqrt(a*a+b*b+c*c),phi2=asin((c/=m)),lambda2=abs(abs(c)-1)<epsilon$2||abs(lambda0-lambda1)<epsilon$2?(lambda0+lambda1)/2:atan2(b,a),p=project(lambda2,phi2),x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;if(dz*dz/d2>delta2||abs((dx*dx2+dy*dy2)/d2-0.5)>0.3||a0*a1+b0*b1+c0*c1<cosMinDistance){resampleLineTo(x0,y0,lambda0,a0,b0,c0,x2,y2,lambda2,(a/=m),(b/=m),c,depth,stream);stream.point(x2,y2);resampleLineTo(x2,y2,lambda2,a,b,c,x1,y1,lambda1,a1,b1,c1,depth,stream);}}}
return function(stream){var lambda00,x00,y00,a00,b00,c00,lambda0,x0,y0,a0,b0,c0;var resampleStream={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){stream.polygonStart();resampleStream.lineStart=ringStart;},polygonEnd:function(){stream.polygonEnd();resampleStream.lineStart=lineStart;}};function point(x,y){x=project(x,y);stream.point(x[0],x[1]);}
function lineStart(){x0=NaN;resampleStream.point=linePoint;stream.lineStart();}
function linePoint(lambda,phi){var c=cartesian([lambda,phi]),p=project(lambda,phi);resampleLineTo(x0,y0,lambda0,a0,b0,c0,(x0=p[0]),(y0=p[1]),(lambda0=lambda),(a0=c[0]),(b0=c[1]),(c0=c[2]),maxDepth,stream);stream.point(x0,y0);}
function lineEnd(){resampleStream.point=point;stream.lineEnd();}
function ringStart(){lineStart();resampleStream.point=ringPoint;resampleStream.lineEnd=ringEnd;}
function ringPoint(lambda,phi){linePoint((lambda00=lambda),phi),(x00=x0),(y00=y0),(a00=a0),(b00=b0),(c00=c0);resampleStream.point=linePoint;}
function ringEnd(){resampleLineTo(x0,y0,lambda0,a0,b0,c0,x00,y00,lambda00,a00,b00,c00,maxDepth,stream);resampleStream.lineEnd=lineEnd;lineEnd();}
return resampleStream;};}
var transformRadians=transformer({point:function(x,y){this.stream.point(x*radians,y*radians);}});function transformRotate(rotate){return transformer({point:function(x,y){var r=rotate(x,y);return this.stream.point(r[0],r[1]);}});}
function scaleTranslate(k,dx,dy){function transform$$1(x,y){return[dx+k*x,dy-k*y];}
transform$$1.invert=function(x,y){return[(x-dx)/k,(dy-y)/k];};return transform$$1;}
function scaleTranslateRotate(k,dx,dy,alpha){var cosAlpha=cos$1(alpha),sinAlpha=sin$1(alpha),a=cosAlpha*k,b=sinAlpha*k,ai=cosAlpha/k,bi=sinAlpha/k,ci=(sinAlpha*dy-cosAlpha*dx)/k,fi=(sinAlpha*dx+cosAlpha*dy)/k;function transform$$1(x,y){return[a*x-b*y+dx,dy-b*x-a*y];}
transform$$1.invert=function(x,y){return[ai*x-bi*y+ci,fi-bi*x-ai*y];};return transform$$1;}
function projection(project){return projectionMutator(function(){return project;})();}
function projectionMutator(projectAt){var project,k=150,x=480,y=250,lambda=0,phi=0,deltaLambda=0,deltaPhi=0,deltaGamma=0,rotate,alpha=0,theta=null,preclip=clipAntimeridian,x0=null,y0,x1,y1,postclip=identity$4,delta2=0.5,projectResample,projectTransform,projectRotateTransform,cache,cacheStream;function projection(point){return projectRotateTransform(point[0]*radians,point[1]*radians);}
function invert(point){point=projectRotateTransform.invert(point[0],point[1]);return point&&[point[0]*degrees$1,point[1]*degrees$1];}
projection.stream=function(stream){return cache&&cacheStream===stream?cache:(cache=transformRadians(transformRotate(rotate)(preclip(projectResample(postclip((cacheStream=stream)))))));};projection.preclip=function(_){return arguments.length?((preclip=_),(theta=undefined),reset()):preclip;};projection.postclip=function(_){return arguments.length?((postclip=_),(x0=y0=x1=y1=null),reset()):postclip;};projection.clipAngle=function(_){return arguments.length?((preclip=+_?clipCircle((theta=_*radians)):((theta=null),clipAntimeridian)),reset()):theta*degrees$1;};projection.clipExtent=function(_){return arguments.length?((postclip=_==null?((x0=y0=x1=y1=null),identity$4):clipRectangle((x0=+_[0][0]),(y0=+_[0][1]),(x1=+_[1][0]),(y1=+_[1][1]))),reset()):x0==null?null:[[x0,y0],[x1,y1]];};projection.scale=function(_){return arguments.length?((k=+_),recenter()):k;};projection.translate=function(_){return arguments.length?((x=+_[0]),(y=+_[1]),recenter()):[x,y];};projection.center=function(_){return arguments.length?((lambda=(_[0]%360)*radians),(phi=(_[1]%360)*radians),recenter()):[lambda*degrees$1,phi*degrees$1];};projection.rotate=function(_){return arguments.length?((deltaLambda=(_[0]%360)*radians),(deltaPhi=(_[1]%360)*radians),(deltaGamma=_.length>2?(_[2]%360)*radians:0),recenter()):[deltaLambda*degrees$1,deltaPhi*degrees$1,deltaGamma*degrees$1];};projection.angle=function(_){return arguments.length?((alpha=(_%360)*radians),recenter()):alpha*degrees$1;};projection.precision=function(_){return arguments.length?((projectResample=resample(projectTransform,(delta2=_*_))),reset()):sqrt(delta2);};projection.fitExtent=function(extent,object){return fitExtent(projection,extent,object);};projection.fitSize=function(size,object){return fitSize(projection,size,object);};projection.fitWidth=function(width,object){return fitWidth(projection,width,object);};projection.fitHeight=function(height,object){return fitHeight(projection,height,object);};function recenter(){var center=scaleTranslateRotate(k,0,0,alpha).apply(null,project(lambda,phi)),transform$$1=(alpha?scaleTranslateRotate:scaleTranslate)(k,x-center[0],y-center[1],alpha);rotate=rotateRadians(deltaLambda,deltaPhi,deltaGamma);projectTransform=compose(project,transform$$1);projectRotateTransform=compose(rotate,projectTransform);projectResample=resample(projectTransform,delta2);return reset();}
function reset(){cache=cacheStream=null;return projection;}
return function(){project=projectAt.apply(this,arguments);projection.invert=project.invert&&invert;return recenter();};}
function conicProjection(projectAt){var phi0=0,phi1=pi$3/3,m=projectionMutator(projectAt),p=m(phi0,phi1);p.parallels=function(_){return arguments.length?m((phi0=_[0]*radians),(phi1=_[1]*radians)):[phi0*degrees$1,phi1*degrees$1];};return p;}
function cylindricalEqualAreaRaw(phi0){var cosPhi0=cos$1(phi0);function forward(lambda,phi){return[lambda*cosPhi0,sin$1(phi)/cosPhi0];}
forward.invert=function(x,y){return[x/cosPhi0,asin(y*cosPhi0)];};return forward;}
function conicEqualAreaRaw(y0,y1){var sy0=sin$1(y0),n=(sy0+sin$1(y1))/2;if(abs(n)<epsilon$2)return cylindricalEqualAreaRaw(y0);var c=1+sy0*(2*n-sy0),r0=sqrt(c)/n;function project(x,y){var r=sqrt(c-2*n*sin$1(y))/n;return[r*sin$1((x*=n)),r0-r*cos$1(x)];}
project.invert=function(x,y){var r0y=r0-y;return[atan2(x,abs(r0y))/n*sign(r0y),asin((c-(x*x+r0y*r0y)*n*n)/(2*n))];};return project;}
function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442]);}
function albers(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-0.6,38.7]);}
function multiplex(streams){var n=streams.length;return{point:function(x,y){var i=-1;while(++i<n)streams[i].point(x,y);},sphere:function(){var i=-1;while(++i<n)streams[i].sphere();},lineStart:function(){var i=-1;while(++i<n)streams[i].lineStart();},lineEnd:function(){var i=-1;while(++i<n)streams[i].lineEnd();},polygonStart:function(){var i=-1;while(++i<n)streams[i].polygonStart();},polygonEnd:function(){var i=-1;while(++i<n)streams[i].polygonEnd();}};}
function albersUsa(){var cache,cacheStream,lower48=albers(),lower48Point,alaska=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),alaskaPoint,hawaii=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),hawaiiPoint,point,pointStream={point:function(x,y){point=[x,y];}};function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];return((point=null),(lower48Point.point(x,y),point)||(alaskaPoint.point(x,y),point)||(hawaiiPoint.point(x,y),point));}
albersUsa.invert=function(coordinates){var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;return(y>=0.12&&y<0.234&&x>=-0.425&&x<-0.214?alaska:y>=0.166&&y<0.234&&x>=-0.214&&x<-0.115?hawaii:lower48).invert(coordinates);};albersUsa.stream=function(stream){return cache&&cacheStream===stream?cache:(cache=multiplex([lower48.stream((cacheStream=stream)),alaska.stream(stream),hawaii.stream(stream)]));};albersUsa.precision=function(_){if(!arguments.length)return lower48.precision();lower48.precision(_),alaska.precision(_),hawaii.precision(_);return reset();};albersUsa.scale=function(_){if(!arguments.length)return lower48.scale();lower48.scale(_),alaska.scale(_*0.35),hawaii.scale(_);return albersUsa.translate(lower48.translate());};albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();var k=lower48.scale(),x=+_[0],y=+_[1];lower48Point=lower48.translate(_).clipExtent([[x-0.455*k,y-0.238*k],[x+0.455*k,y+0.238*k]]).stream(pointStream);alaskaPoint=alaska.translate([x-0.307*k,y+0.201*k]).clipExtent([[x-0.425*k+epsilon$2,y+0.12*k+epsilon$2],[x-0.214*k-epsilon$2,y+0.234*k-epsilon$2]]).stream(pointStream);hawaiiPoint=hawaii.translate([x-0.205*k,y+0.212*k]).clipExtent([[x-0.214*k+epsilon$2,y+0.166*k+epsilon$2],[x-0.115*k-epsilon$2,y+0.234*k-epsilon$2]]).stream(pointStream);return reset();};albersUsa.fitExtent=function(extent,object){return fitExtent(albersUsa,extent,object);};albersUsa.fitSize=function(size,object){return fitSize(albersUsa,size,object);};albersUsa.fitWidth=function(width,object){return fitWidth(albersUsa,width,object);};albersUsa.fitHeight=function(height,object){return fitHeight(albersUsa,height,object);};function reset(){cache=cacheStream=null;return albersUsa;}
return albersUsa.scale(1070);}
function azimuthalRaw(scale){return function(x,y){var cx=cos$1(x),cy=cos$1(y),k=scale(cx*cy);return[k*cy*sin$1(x),k*sin$1(y)];};}
function azimuthalInvert(angle){return function(x,y){var z=sqrt(x*x+y*y),c=angle(z),sc=sin$1(c),cc=cos$1(c);return[atan2(x*sc,z*cc),asin(z&&y*sc/z)];};}
var azimuthalEqualAreaRaw=azimuthalRaw(function(cxcy){return sqrt(2/(1+cxcy));});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(z){return 2*asin(z/2);});function azimuthalEqualArea(){return projection(azimuthalEqualAreaRaw).scale(124.75).clipAngle(180-1e-3);}
var azimuthalEquidistantRaw=azimuthalRaw(function(c){return(c=acos(c))&&c/sin$1(c);});azimuthalEquidistantRaw.invert=azimuthalInvert(function(z){return z;});function azimuthalEquidistant(){return projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(180-1e-3);}
function mercatorRaw(lambda,phi){return[lambda,log(tan((halfPi$2+phi)/2))];}
mercatorRaw.invert=function(x,y){return[x,2*atan(exp(y))-halfPi$2];};function mercator(){return mercatorProjection(mercatorRaw).scale(961/tau$3);}
function mercatorProjection(project){var m=projection(project),center=m.center,scale=m.scale,translate=m.translate,clipExtent=m.clipExtent,x0=null,y0,x1,y1;m.scale=function(_){return arguments.length?(scale(_),reclip()):scale();};m.translate=function(_){return arguments.length?(translate(_),reclip()):translate();};m.center=function(_){return arguments.length?(center(_),reclip()):center();};m.clipExtent=function(_){return arguments.length?(_==null?(x0=y0=x1=y1=null):((x0=+_[0][0]),(y0=+_[0][1]),(x1=+_[1][0]),(y1=+_[1][1])),reclip()):x0==null?null:[[x0,y0],[x1,y1]];};function reclip(){var k=pi$3*scale(),t=m(rotation(m.rotate()).invert([0,0]));return clipExtent(x0==null?[[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]]:project===mercatorRaw?[[Math.max(t[0]-k,x0),y0],[Math.min(t[0]+k,x1),y1]]:[[x0,Math.max(t[1]-k,y0)],[x1,Math.min(t[1]+k,y1)]]);}
return reclip();}
function tany(y){return tan((halfPi$2+y)/2);}
function conicConformalRaw(y0,y1){var cy0=cos$1(y0),n=y0===y1?sin$1(y0):log(cy0/cos$1(y1))/log(tany(y1)/tany(y0)),f=cy0*pow(tany(y0),n)/n;if(!n)return mercatorRaw;function project(x,y){if(f>0){if(y<-halfPi$2+epsilon$2)y=-halfPi$2+epsilon$2;}else{if(y>halfPi$2-epsilon$2)y=halfPi$2-epsilon$2;}
var r=f/pow(tany(y),n);return[r*sin$1(n*x),f-r*cos$1(n*x)];}
project.invert=function(x,y){var fy=f-y,r=sign(n)*sqrt(x*x+fy*fy);return[atan2(x,abs(fy))/n*sign(fy),2*atan(pow(f/r,1/n))-halfPi$2];};return project;}
function conicConformal(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30]);}
function equirectangularRaw(lambda,phi){return[lambda,phi];}
equirectangularRaw.invert=equirectangularRaw;function equirectangular(){return projection(equirectangularRaw).scale(152.63);}
function conicEquidistantRaw(y0,y1){var cy0=cos$1(y0),n=y0===y1?sin$1(y0):(cy0-cos$1(y1))/(y1-y0),g=cy0/n+y0;if(abs(n)<epsilon$2)return equirectangularRaw;function project(x,y){var gy=g-y,nx=n*x;return[gy*sin$1(nx),g-gy*cos$1(nx)];}
project.invert=function(x,y){var gy=g-y;return[atan2(x,abs(gy))/n*sign(gy),g-sign(n)*sqrt(x*x+gy*gy)];};return project;}
function conicEquidistant(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389]);}
function gnomonicRaw(x,y){var cy=cos$1(y),k=cos$1(x)*cy;return[cy*sin$1(x)/k,sin$1(y)/k];}
gnomonicRaw.invert=azimuthalInvert(atan);function gnomonic(){return projection(gnomonicRaw).scale(144.049).clipAngle(60);}
function scaleTranslate$1(kx,ky,tx,ty){return kx===1&&ky===1&&tx===0&&ty===0?identity$4:transformer({point:function(x,y){this.stream.point(x*kx+tx,y*ky+ty);}});}
function identity$5(){var k=1,tx=0,ty=0,sx=1,sy=1,transform$$1=identity$4,x0=null,y0,x1,y1,postclip=identity$4,cache,cacheStream,projection;function reset(){cache=cacheStream=null;return projection;}
return(projection={stream:function(stream){return cache&&cacheStream===stream?cache:(cache=transform$$1(postclip((cacheStream=stream))));},postclip:function(_){return arguments.length?((postclip=_),(x0=y0=x1=y1=null),reset()):postclip;},clipExtent:function(_){return arguments.length?((postclip=_==null?((x0=y0=x1=y1=null),identity$4):clipRectangle((x0=+_[0][0]),(y0=+_[0][1]),(x1=+_[1][0]),(y1=+_[1][1]))),reset()):x0==null?null:[[x0,y0],[x1,y1]];},scale:function(_){return arguments.length?((transform$$1=scaleTranslate$1((k=+_)*sx,k*sy,tx,ty)),reset()):k;},translate:function(_){return arguments.length?((transform$$1=scaleTranslate$1(k*sx,k*sy,(tx=+_[0]),(ty=+_[1]))),reset()):[tx,ty];},reflectX:function(_){return arguments.length?((transform$$1=scaleTranslate$1(k*(sx=_?-1:1),k*sy,tx,ty)),reset()):sx<0;},reflectY:function(_){return arguments.length?((transform$$1=scaleTranslate$1(k*sx,k*(sy=_?-1:1),tx,ty)),reset()):sy<0;},fitExtent:function(extent,object){return fitExtent(projection,extent,object);},fitSize:function(size,object){return fitSize(projection,size,object);},fitWidth:function(width,object){return fitWidth(projection,width,object);},fitHeight:function(height,object){return fitHeight(projection,height,object);}});}
function naturalEarth1Raw(lambda,phi){var phi2=phi*phi,phi4=phi2*phi2;return[lambda*(0.8707-
0.131979*phi2+
phi4*(-0.013791+phi4*(0.003971*phi2-0.001529*phi4))),phi*(1.007226+
phi2*(0.015085+phi4*(-0.044475+0.028874*phi2-0.005916*phi4)))];}
naturalEarth1Raw.invert=function(x,y){var phi=y,i=25,delta;do{var phi2=phi*phi,phi4=phi2*phi2;phi-=delta=(phi*(1.007226+
phi2*(0.015085+
phi4*(-0.044475+0.028874*phi2-0.005916*phi4)))-
y)/(1.007226+
phi2*(0.015085*3+
phi4*(-0.044475*7+0.028874*9*phi2-0.005916*11*phi4)));}while(abs(delta)>epsilon$2&&--i>0);return[x/(0.8707+
(phi2=phi*phi)*(-0.131979+
phi2*(-0.013791+
phi2*phi2*phi2*(0.003971-0.001529*phi2)))),phi];};function naturalEarth1(){return projection(naturalEarth1Raw).scale(175.295);}
function orthographicRaw(x,y){return[cos$1(y)*sin$1(x),sin$1(y)];}
orthographicRaw.invert=azimuthalInvert(asin);function orthographic(){return projection(orthographicRaw).scale(249.5).clipAngle(90+epsilon$2);}
function stereographicRaw(x,y){var cy=cos$1(y),k=1+cos$1(x)*cy;return[cy*sin$1(x)/k,sin$1(y)/k];}
stereographicRaw.invert=azimuthalInvert(function(z){return 2*atan(z);});function stereographic(){return projection(stereographicRaw).scale(250).clipAngle(142);}
function transverseMercatorRaw(lambda,phi){return[log(tan((halfPi$2+phi)/2)),-lambda];}
transverseMercatorRaw.invert=function(x,y){return[-y,2*atan(exp(x))-halfPi$2];};function transverseMercator(){var m=mercatorProjection(transverseMercatorRaw),center=m.center,rotate=m.rotate;m.center=function(_){return arguments.length?center([-_[1],_[0]]):((_=center()),[_[1],-_[0]]);};m.rotate=function(_){return arguments.length?rotate([_[0],_[1],_.length>2?_[2]+90:90]):((_=rotate()),[_[0],_[1],_[2]-90]);};return rotate([0,0,90]).scale(159.155);}
function defaultSeparation(a,b){return a.parent===b.parent?1:2;}
function meanX(children){return children.reduce(meanXReduce,0)/children.length;}
function meanXReduce(x,c){return x+c.x;}
function maxY(children){return 1+children.reduce(maxYReduce,0);}
function maxYReduce(y,c){return Math.max(y,c.y);}
function leafLeft(node){var children;while((children=node.children))node=children[0];return node;}
function leafRight(node){var children;while((children=node.children))node=children[children.length-1];return node;}
function cluster(){var separation=defaultSeparation,dx=1,dy=1,nodeSize=false;function cluster(root){var previousNode,x=0;root.eachAfter(function(node){var children=node.children;if(children){node.x=meanX(children);node.y=maxY(children);}else{node.x=previousNode?(x+=separation(node,previousNode)):0;node.y=0;previousNode=node;}});var left=leafLeft(root),right=leafRight(root),x0=left.x-separation(left,right)/2,x1=right.x+separation(right,left)/2;return root.eachAfter(nodeSize?function(node){node.x=(node.x-root.x)*dx;node.y=(root.y-node.y)*dy;}:function(node){node.x=(node.x-x0)/(x1-x0)*dx;node.y=(1-(root.y?node.y/root.y:1))*dy;});}
cluster.separation=function(x){return arguments.length?((separation=x),cluster):separation;};cluster.size=function(x){return arguments.length?((nodeSize=false),(dx=+x[0]),(dy=+x[1]),cluster):nodeSize?null:[dx,dy];};cluster.nodeSize=function(x){return arguments.length?((nodeSize=true),(dx=+x[0]),(dy=+x[1]),cluster):nodeSize?[dx,dy]:null;};return cluster;}
function count(node){var sum=0,children=node.children,i=children&&children.length;if(!i)sum=1;else while(--i>=0)sum+=children[i].value;node.value=sum;}
function node_count(){return this.eachAfter(count);}
function node_each(callback){var node=this,current,next=[node],children,i,n;do{(current=next.reverse()),(next=[]);while((node=current.pop())){callback(node),(children=node.children);if(children)
for(i=0,n=children.length;i<n;++i){next.push(children[i]);}}}while(next.length);return this;}
function node_eachBefore(callback){var node=this,nodes=[node],children,i;while((node=nodes.pop())){callback(node),(children=node.children);if(children)
for(i=children.length-1;i>=0;--i){nodes.push(children[i]);}}
return this;}
function node_eachAfter(callback){var node=this,nodes=[node],next=[],children,i,n;while((node=nodes.pop())){next.push(node),(children=node.children);if(children)
for(i=0,n=children.length;i<n;++i){nodes.push(children[i]);}}
while((node=next.pop())){callback(node);}
return this;}
function node_sum(value){return this.eachAfter(function(node){var sum=+value(node.data)||0,children=node.children,i=children&&children.length;while(--i>=0)sum+=children[i].value;node.value=sum;});}
function node_sort(compare){return this.eachBefore(function(node){if(node.children){node.children.sort(compare);}});}
function node_path(end){var start=this,ancestor=leastCommonAncestor(start,end),nodes=[start];while(start!==ancestor){start=start.parent;nodes.push(start);}
var k=nodes.length;while(end!==ancestor){nodes.splice(k,0,end);end=end.parent;}
return nodes;}
function leastCommonAncestor(a,b){if(a===b)return a;var aNodes=a.ancestors(),bNodes=b.ancestors(),c=null;a=aNodes.pop();b=bNodes.pop();while(a===b){c=a;a=aNodes.pop();b=bNodes.pop();}
return c;}
function node_ancestors(){var node=this,nodes=[node];while((node=node.parent)){nodes.push(node);}
return nodes;}
function node_descendants(){var nodes=[];this.each(function(node){nodes.push(node);});return nodes;}
function node_leaves(){var leaves=[];this.eachBefore(function(node){if(!node.children){leaves.push(node);}});return leaves;}
function node_links(){var root=this,links=[];root.each(function(node){if(node!==root){links.push({source:node.parent,target:node});}});return links;}
function hierarchy(data,children){var root=new Node(data),valued=+data.value&&(root.value=data.value),node,nodes=[root],child,childs,i,n;if(children==null)children=defaultChildren;while((node=nodes.pop())){if(valued)node.value=+node.data.value;if((childs=children(node.data))&&(n=childs.length)){node.children=new Array(n);for(i=n-1;i>=0;--i){nodes.push((child=node.children[i]=new Node(childs[i])));child.parent=node;child.depth=node.depth+1;}}}
return root.eachBefore(computeHeight);}
function node_copy(){return hierarchy(this).eachBefore(copyData);}
function defaultChildren(d){return d.children;}
function copyData(node){node.data=node.data.data;}
function computeHeight(node){var height=0;do node.height=height;while((node=node.parent)&&node.height<++height);}
function Node(data){this.data=data;this.depth=this.height=0;this.parent=null;}
Node.prototype=hierarchy.prototype={constructor:Node,count:node_count,each:node_each,eachAfter:node_eachAfter,eachBefore:node_eachBefore,sum:node_sum,sort:node_sort,path:node_path,ancestors:node_ancestors,descendants:node_descendants,leaves:node_leaves,links:node_links,copy:node_copy};var slice$4=Array.prototype.slice;function shuffle$1(array){var m=array.length,t,i;while(m){i=(Math.random()*m--)|0;t=array[m];array[m]=array[i];array[i]=t;}
return array;}
function enclose(circles){var i=0,n=(circles=shuffle$1(slice$4.call(circles))).length,B=[],p,e;while(i<n){p=circles[i];if(e&&enclosesWeak(e,p))++i;else(e=encloseBasis((B=extendBasis(B,p)))),(i=0);}
return e;}
function extendBasis(B,p){var i,j;if(enclosesWeakAll(p,B))return[p];for(i=0;i<B.length;++i){if(enclosesNot(p,B[i])&&enclosesWeakAll(encloseBasis2(B[i],p),B)){return[B[i],p];}}
for(i=0;i<B.length-1;++i){for(j=i+1;j<B.length;++j){if(enclosesNot(encloseBasis2(B[i],B[j]),p)&&enclosesNot(encloseBasis2(B[i],p),B[j])&&enclosesNot(encloseBasis2(B[j],p),B[i])&&enclosesWeakAll(encloseBasis3(B[i],B[j],p),B)){return[B[i],B[j],p];}}}
throw new Error();}
function enclosesNot(a,b){var dr=a.r-b.r,dx=b.x-a.x,dy=b.y-a.y;return dr<0||dr*dr<dx*dx+dy*dy;}
function enclosesWeak(a,b){var dr=a.r-b.r+1e-6,dx=b.x-a.x,dy=b.y-a.y;return dr>0&&dr*dr>dx*dx+dy*dy;}
function enclosesWeakAll(a,B){for(var i=0;i<B.length;++i){if(!enclosesWeak(a,B[i])){return false;}}
return true;}
function encloseBasis(B){switch(B.length){case 1:return encloseBasis1(B[0]);case 2:return encloseBasis2(B[0],B[1]);case 3:return encloseBasis3(B[0],B[1],B[2]);}}
function encloseBasis1(a){return{x:a.x,y:a.y,r:a.r};}
function encloseBasis2(a,b){var x1=a.x,y1=a.y,r1=a.r,x2=b.x,y2=b.y,r2=b.r,x21=x2-x1,y21=y2-y1,r21=r2-r1,l=Math.sqrt(x21*x21+y21*y21);return{x:(x1+x2+x21/l*r21)/2,y:(y1+y2+y21/l*r21)/2,r:(l+r1+r2)/2};}
function encloseBasis3(a,b,c){var x1=a.x,y1=a.y,r1=a.r,x2=b.x,y2=b.y,r2=b.r,x3=c.x,y3=c.y,r3=c.r,a2=x1-x2,a3=x1-x3,b2=y1-y2,b3=y1-y3,c2=r2-r1,c3=r3-r1,d1=x1*x1+y1*y1-r1*r1,d2=d1-x2*x2-y2*y2+r2*r2,d3=d1-x3*x3-y3*y3+r3*r3,ab=a3*b2-a2*b3,xa=(b2*d3-b3*d2)/(ab*2)-x1,xb=(b3*c2-b2*c3)/ab,ya=(a3*d2-a2*d3)/(ab*2)-y1,yb=(a2*c3-a3*c2)/ab,A=xb*xb+yb*yb-1,B=2*(r1+xa*xb+ya*yb),C=xa*xa+ya*ya-r1*r1,r=-(A?(B+Math.sqrt(B*B-4*A*C))/(2*A):C/B);return{x:x1+xa+xb*r,y:y1+ya+yb*r,r:r};}
function place(b,a,c){var dx=b.x-a.x,x,a2,dy=b.y-a.y,y,b2,d2=dx*dx+dy*dy;if(d2){(a2=a.r+c.r),(a2*=a2);(b2=b.r+c.r),(b2*=b2);if(a2>b2){x=(d2+b2-a2)/(2*d2);y=Math.sqrt(Math.max(0,b2/d2-x*x));c.x=b.x-x*dx-y*dy;c.y=b.y-x*dy+y*dx;}else{x=(d2+a2-b2)/(2*d2);y=Math.sqrt(Math.max(0,a2/d2-x*x));c.x=a.x+x*dx-y*dy;c.y=a.y+x*dy+y*dx;}}else{c.x=a.x+c.r;c.y=a.y;}}
function intersects(a,b){var dr=a.r+b.r-1e-6,dx=b.x-a.x,dy=b.y-a.y;return dr>0&&dr*dr>dx*dx+dy*dy;}
function score(node){var a=node._,b=node.next._,ab=a.r+b.r,dx=(a.x*b.r+b.x*a.r)/ab,dy=(a.y*b.r+b.y*a.r)/ab;return dx*dx+dy*dy;}
function Node$1(circle){this._=circle;this.next=null;this.previous=null;}
function packEnclose(circles){if(!(n=circles.length))return 0;var a,b,c,n,aa,ca,i,j,k,sj,sk;(a=circles[0]),(a.x=0),(a.y=0);if(!(n>1))return a.r;(b=circles[1]),(a.x=-b.r),(b.x=a.r),(b.y=0);if(!(n>2))return a.r+b.r;place(b,a,(c=circles[2]));(a=new Node$1(a)),(b=new Node$1(b)),(c=new Node$1(c));a.next=c.previous=b;b.next=a.previous=c;c.next=b.previous=a;pack:for(i=3;i<n;++i){place(a._,b._,(c=circles[i])),(c=new Node$1(c));(j=b.next),(k=a.previous),(sj=b._.r),(sk=a._.r);do{if(sj<=sk){if(intersects(j._,c._)){(b=j),(a.next=b),(b.previous=a),--i;continue pack;}
(sj+=j._.r),(j=j.next);}else{if(intersects(k._,c._)){(a=k),(a.next=b),(b.previous=a),--i;continue pack;}
(sk+=k._.r),(k=k.previous);}}while(j!==k.next);(c.previous=a),(c.next=b),(a.next=b.previous=b=c);aa=score(a);while((c=c.next)!==b){if((ca=score(c))<aa){(a=c),(aa=ca);}}
b=a.next;}
(a=[b._]),(c=b);while((c=c.next)!==b)a.push(c._);c=enclose(a);for(i=0;i<n;++i)(a=circles[i]),(a.x-=c.x),(a.y-=c.y);return c.r;}
function siblings(circles){packEnclose(circles);return circles;}
function optional(f){return f==null?null:required(f);}
function required(f){if(typeof f!=="function")throw new Error();return f;}
function constantZero(){return 0;}
function constant$9(x){return function(){return x;};}
function defaultRadius$1(d){return Math.sqrt(d.value);}
function index$2(){var radius=null,dx=1,dy=1,padding=constantZero;function pack(root){(root.x=dx/2),(root.y=dy/2);if(radius){root.eachBefore(radiusLeaf(radius)).eachAfter(packChildren(padding,0.5)).eachBefore(translateChild(1));}else{root.eachBefore(radiusLeaf(defaultRadius$1)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(padding,root.r/Math.min(dx,dy))).eachBefore(translateChild(Math.min(dx,dy)/(2*root.r)));}
return root;}
pack.radius=function(x){return arguments.length?((radius=optional(x)),pack):radius;};pack.size=function(x){return arguments.length?((dx=+x[0]),(dy=+x[1]),pack):[dx,dy];};pack.padding=function(x){return arguments.length?((padding=typeof x==="function"?x:constant$9(+x)),pack):padding;};return pack;}
function radiusLeaf(radius){return function(node){if(!node.children){node.r=Math.max(0,+radius(node)||0);}};}
function packChildren(padding,k){return function(node){if((children=node.children)){var children,i,n=children.length,r=padding(node)*k||0,e;if(r)for(i=0;i<n;++i)children[i].r+=r;e=packEnclose(children);if(r)for(i=0;i<n;++i)children[i].r-=r;node.r=e+r;}};}
function translateChild(k){return function(node){var parent=node.parent;node.r*=k;if(parent){node.x=parent.x+k*node.x;node.y=parent.y+k*node.y;}};}
function roundNode(node){node.x0=Math.round(node.x0);node.y0=Math.round(node.y0);node.x1=Math.round(node.x1);node.y1=Math.round(node.y1);}
function treemapDice(parent,x0,y0,x1,y1){var nodes=parent.children,node,i=-1,n=nodes.length,k=parent.value&&(x1-x0)/parent.value;while(++i<n){(node=nodes[i]),(node.y0=y0),(node.y1=y1);(node.x0=x0),(node.x1=x0+=node.value*k);}}
function partition(){var dx=1,dy=1,padding=0,round=false;function partition(root){var n=root.height+1;root.x0=root.y0=padding;root.x1=dx;root.y1=dy/n;root.eachBefore(positionNode(dy,n));if(round)root.eachBefore(roundNode);return root;}
function positionNode(dy,n){return function(node){if(node.children){treemapDice(node,node.x0,dy*(node.depth+1)/n,node.x1,dy*(node.depth+2)/n);}
var x0=node.x0,y0=node.y0,x1=node.x1-padding,y1=node.y1-padding;if(x1<x0)x0=x1=(x0+x1)/2;if(y1<y0)y0=y1=(y0+y1)/2;node.x0=x0;node.y0=y0;node.x1=x1;node.y1=y1;};}
partition.round=function(x){return arguments.length?((round=!!x),partition):round;};partition.size=function(x){return arguments.length?((dx=+x[0]),(dy=+x[1]),partition):[dx,dy];};partition.padding=function(x){return arguments.length?((padding=+x),partition):padding;};return partition;}
var keyPrefix$1="$",preroot={depth:-1},ambiguous={};function defaultId(d){return d.id;}
function defaultParentId(d){return d.parentId;}
function stratify(){var id=defaultId,parentId=defaultParentId;function stratify(data){var d,i,n=data.length,root,parent,node,nodes=new Array(n),nodeId,nodeKey,nodeByKey={};for(i=0;i<n;++i){(d=data[i]),(node=nodes[i]=new Node(d));if((nodeId=id(d,i,data))!=null&&(nodeId+="")){nodeKey=keyPrefix$1+(node.id=nodeId);nodeByKey[nodeKey]=nodeKey in nodeByKey?ambiguous:node;}}
for(i=0;i<n;++i){(node=nodes[i]),(nodeId=parentId(data[i],i,data));if(nodeId==null||!(nodeId+="")){if(root)throw new Error("multiple roots");root=node;}else{parent=nodeByKey[keyPrefix$1+nodeId];if(!parent)throw new Error("missing: "+nodeId);if(parent===ambiguous)throw new Error("ambiguous: "+nodeId);if(parent.children)parent.children.push(node);else parent.children=[node];node.parent=parent;}}
if(!root)throw new Error("no root");root.parent=preroot;root.eachBefore(function(node){node.depth=node.parent.depth+1;--n;}).eachBefore(computeHeight);root.parent=null;if(n>0)throw new Error("cycle");return root;}
stratify.id=function(x){return arguments.length?((id=required(x)),stratify):id;};stratify.parentId=function(x){return arguments.length?((parentId=required(x)),stratify):parentId;};return stratify;}
function defaultSeparation$1(a,b){return a.parent===b.parent?1:2;}
function nextLeft(v){var children=v.children;return children?children[0]:v.t;}
function nextRight(v){var children=v.children;return children?children[children.length-1]:v.t;}
function moveSubtree(wm,wp,shift){var change=shift/(wp.i-wm.i);wp.c-=change;wp.s+=shift;wm.c+=change;wp.z+=shift;wp.m+=shift;}
function executeShifts(v){var shift=0,change=0,children=v.children,i=children.length,w;while(--i>=0){w=children[i];w.z+=shift;w.m+=shift;shift+=w.s+(change+=w.c);}}
function nextAncestor(vim,v,ancestor){return vim.a.parent===v.parent?vim.a:ancestor;}
function TreeNode(node,i){this._=node;this.parent=null;this.children=null;this.A=null;this.a=this;this.z=0;this.m=0;this.c=0;this.s=0;this.t=null;this.i=i;}
TreeNode.prototype=Object.create(Node.prototype);function treeRoot(root){var tree=new TreeNode(root,0),node,nodes=[tree],child,children,i,n;while((node=nodes.pop())){if((children=node._.children)){node.children=new Array((n=children.length));for(i=n-1;i>=0;--i){nodes.push((child=node.children[i]=new TreeNode(children[i],i)));child.parent=node;}}}
(tree.parent=new TreeNode(null,0)).children=[tree];return tree;}
function tree(){var separation=defaultSeparation$1,dx=1,dy=1,nodeSize=null;function tree(root){var t=treeRoot(root);t.eachAfter(firstWalk),(t.parent.m=-t.z);t.eachBefore(secondWalk);if(nodeSize)root.eachBefore(sizeNode);else{var left=root,right=root,bottom=root;root.eachBefore(function(node){if(node.x<left.x)left=node;if(node.x>right.x)right=node;if(node.depth>bottom.depth)bottom=node;});var s=left===right?1:separation(left,right)/2,tx=s-left.x,kx=dx/(right.x+s+tx),ky=dy/(bottom.depth||1);root.eachBefore(function(node){node.x=(node.x+tx)*kx;node.y=node.depth*ky;});}
return root;}
function firstWalk(v){var children=v.children,siblings=v.parent.children,w=v.i?siblings[v.i-1]:null;if(children){executeShifts(v);var midpoint=(children[0].z+children[children.length-1].z)/2;if(w){v.z=w.z+separation(v._,w._);v.m=v.z-midpoint;}else{v.z=midpoint;}}else if(w){v.z=w.z+separation(v._,w._);}
v.parent.A=apportion(v,w,v.parent.A||siblings[0]);}
function secondWalk(v){v._.x=v.z+v.parent.m;v.m+=v.parent.m;}
function apportion(v,w,ancestor){if(w){var vip=v,vop=v,vim=w,vom=vip.parent.children[0],sip=vip.m,sop=vop.m,sim=vim.m,som=vom.m,shift;while(((vim=nextRight(vim)),(vip=nextLeft(vip)),vim&&vip)){vom=nextLeft(vom);vop=nextRight(vop);vop.a=v;shift=vim.z+sim-vip.z-sip+separation(vim._,vip._);if(shift>0){moveSubtree(nextAncestor(vim,v,ancestor),v,shift);sip+=shift;sop+=shift;}
sim+=vim.m;sip+=vip.m;som+=vom.m;sop+=vop.m;}
if(vim&&!nextRight(vop)){vop.t=vim;vop.m+=sim-sop;}
if(vip&&!nextLeft(vom)){vom.t=vip;vom.m+=sip-som;ancestor=v;}}
return ancestor;}
function sizeNode(node){node.x*=dx;node.y=node.depth*dy;}
tree.separation=function(x){return arguments.length?((separation=x),tree):separation;};tree.size=function(x){return arguments.length?((nodeSize=false),(dx=+x[0]),(dy=+x[1]),tree):nodeSize?null:[dx,dy];};tree.nodeSize=function(x){return arguments.length?((nodeSize=true),(dx=+x[0]),(dy=+x[1]),tree):nodeSize?[dx,dy]:null;};return tree;}
function treemapSlice(parent,x0,y0,x1,y1){var nodes=parent.children,node,i=-1,n=nodes.length,k=parent.value&&(y1-y0)/parent.value;while(++i<n){(node=nodes[i]),(node.x0=x0),(node.x1=x1);(node.y0=y0),(node.y1=y0+=node.value*k);}}
var phi=(1+Math.sqrt(5))/2;function squarifyRatio(ratio,parent,x0,y0,x1,y1){var rows=[],nodes=parent.children,row,nodeValue,i0=0,i1=0,n=nodes.length,dx,dy,value=parent.value,sumValue,minValue,maxValue,newRatio,minRatio,alpha,beta;while(i0<n){(dx=x1-x0),(dy=y1-y0);do sumValue=nodes[i1++].value;while(!sumValue&&i1<n);minValue=maxValue=sumValue;alpha=Math.max(dy/dx,dx/dy)/(value*ratio);beta=sumValue*sumValue*alpha;minRatio=Math.max(maxValue/beta,beta/minValue);for(;i1<n;++i1){sumValue+=nodeValue=nodes[i1].value;if(nodeValue<minValue)minValue=nodeValue;if(nodeValue>maxValue)maxValue=nodeValue;beta=sumValue*sumValue*alpha;newRatio=Math.max(maxValue/beta,beta/minValue);if(newRatio>minRatio){sumValue-=nodeValue;break;}
minRatio=newRatio;}
rows.push((row={value:sumValue,dice:dx<dy,children:nodes.slice(i0,i1)}));if(row.dice)
treemapDice(row,x0,y0,x1,value?(y0+=dy*sumValue/value):y1);else
treemapSlice(row,x0,y0,value?(x0+=dx*sumValue/value):x1,y1);(value-=sumValue),(i0=i1);}
return rows;}
var squarify=(function custom(ratio){function squarify(parent,x0,y0,x1,y1){squarifyRatio(ratio,parent,x0,y0,x1,y1);}
squarify.ratio=function(x){return custom((x=+x)>1?x:1);};return squarify;})(phi);function index$3(){var tile=squarify,round=false,dx=1,dy=1,paddingStack=[0],paddingInner=constantZero,paddingTop=constantZero,paddingRight=constantZero,paddingBottom=constantZero,paddingLeft=constantZero;function treemap(root){root.x0=root.y0=0;root.x1=dx;root.y1=dy;root.eachBefore(positionNode);paddingStack=[0];if(round)root.eachBefore(roundNode);return root;}
function positionNode(node){var p=paddingStack[node.depth],x0=node.x0+p,y0=node.y0+p,x1=node.x1-p,y1=node.y1-p;if(x1<x0)x0=x1=(x0+x1)/2;if(y1<y0)y0=y1=(y0+y1)/2;node.x0=x0;node.y0=y0;node.x1=x1;node.y1=y1;if(node.children){p=paddingStack[node.depth+1]=paddingInner(node)/2;x0+=paddingLeft(node)-p;y0+=paddingTop(node)-p;x1-=paddingRight(node)-p;y1-=paddingBottom(node)-p;if(x1<x0)x0=x1=(x0+x1)/2;if(y1<y0)y0=y1=(y0+y1)/2;tile(node,x0,y0,x1,y1);}}
treemap.round=function(x){return arguments.length?((round=!!x),treemap):round;};treemap.size=function(x){return arguments.length?((dx=+x[0]),(dy=+x[1]),treemap):[dx,dy];};treemap.tile=function(x){return arguments.length?((tile=required(x)),treemap):tile;};treemap.padding=function(x){return arguments.length?treemap.paddingInner(x).paddingOuter(x):treemap.paddingInner();};treemap.paddingInner=function(x){return arguments.length?((paddingInner=typeof x==="function"?x:constant$9(+x)),treemap):paddingInner;};treemap.paddingOuter=function(x){return arguments.length?treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x):treemap.paddingTop();};treemap.paddingTop=function(x){return arguments.length?((paddingTop=typeof x==="function"?x:constant$9(+x)),treemap):paddingTop;};treemap.paddingRight=function(x){return arguments.length?((paddingRight=typeof x==="function"?x:constant$9(+x)),treemap):paddingRight;};treemap.paddingBottom=function(x){return arguments.length?((paddingBottom=typeof x==="function"?x:constant$9(+x)),treemap):paddingBottom;};treemap.paddingLeft=function(x){return arguments.length?((paddingLeft=typeof x==="function"?x:constant$9(+x)),treemap):paddingLeft;};return treemap;}
function binary(parent,x0,y0,x1,y1){var nodes=parent.children,i,n=nodes.length,sum,sums=new Array(n+1);for(sums[0]=sum=i=0;i<n;++i){sums[i+1]=sum+=nodes[i].value;}
partition(0,n,parent.value,x0,y0,x1,y1);function partition(i,j,value,x0,y0,x1,y1){if(i>=j-1){var node=nodes[i];(node.x0=x0),(node.y0=y0);(node.x1=x1),(node.y1=y1);return;}
var valueOffset=sums[i],valueTarget=value/2+valueOffset,k=i+1,hi=j-1;while(k<hi){var mid=(k+hi)>>>1;if(sums[mid]<valueTarget)k=mid+1;else hi=mid;}
if(valueTarget-sums[k-1]<sums[k]-valueTarget&&i+1<k)--k;var valueLeft=sums[k]-valueOffset,valueRight=value-valueLeft;if(x1-x0>y1-y0){var xk=(x0*valueRight+x1*valueLeft)/value;partition(i,k,valueLeft,x0,y0,xk,y1);partition(k,j,valueRight,xk,y0,x1,y1);}else{var yk=(y0*valueRight+y1*valueLeft)/value;partition(i,k,valueLeft,x0,y0,x1,yk);partition(k,j,valueRight,x0,yk,x1,y1);}}}
function sliceDice(parent,x0,y0,x1,y1){(parent.depth&1?treemapSlice:treemapDice)(parent,x0,y0,x1,y1);}
var resquarify=(function custom(ratio){function resquarify(parent,x0,y0,x1,y1){if((rows=parent._squarify)&&rows.ratio===ratio){var rows,row,nodes,i,j=-1,n,m=rows.length,value=parent.value;while(++j<m){(row=rows[j]),(nodes=row.children);for(i=row.value=0,n=nodes.length;i<n;++i)
row.value+=nodes[i].value;if(row.dice)
treemapDice(row,x0,y0,x1,(y0+=(y1-y0)*row.value/value));else
treemapSlice(row,x0,y0,(x0+=(x1-x0)*row.value/value),y1);value-=row.value;}}else{parent._squarify=rows=squarifyRatio(ratio,parent,x0,y0,x1,y1);rows.ratio=ratio;}}
resquarify.ratio=function(x){return custom((x=+x)>1?x:1);};return resquarify;})(phi);function area$2(polygon){var i=-1,n=polygon.length,a,b=polygon[n-1],area=0;while(++i<n){a=b;b=polygon[i];area+=a[1]*b[0]-a[0]*b[1];}
return area/2;}
function centroid$1(polygon){var i=-1,n=polygon.length,x=0,y=0,a,b=polygon[n-1],c,k=0;while(++i<n){a=b;b=polygon[i];k+=c=a[0]*b[1]-b[0]*a[1];x+=(a[0]+b[0])*c;y+=(a[1]+b[1])*c;}
return(k*=3),[x/k,y/k];}
function cross$1(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0]);}
function lexicographicOrder(a,b){return a[0]-b[0]||a[1]-b[1];}
function computeUpperHullIndexes(points){var n=points.length,indexes=[0,1],size=2;for(var i=2;i<n;++i){while(size>1&&cross$1(points[indexes[size-2]],points[indexes[size-1]],points[i])<=0)
--size;indexes[size++]=i;}
return indexes.slice(0,size);}
function hull(points){if((n=points.length)<3)return null;var i,n,sortedPoints=new Array(n),flippedPoints=new Array(n);for(i=0;i<n;++i)sortedPoints[i]=[+points[i][0],+points[i][1],i];sortedPoints.sort(lexicographicOrder);for(i=0;i<n;++i)
flippedPoints[i]=[sortedPoints[i][0],-sortedPoints[i][1]];var upperIndexes=computeUpperHullIndexes(sortedPoints),lowerIndexes=computeUpperHullIndexes(flippedPoints);var skipLeft=lowerIndexes[0]===upperIndexes[0],skipRight=lowerIndexes[lowerIndexes.length-1]===upperIndexes[upperIndexes.length-1],hull=[];for(i=upperIndexes.length-1;i>=0;--i)
hull.push(points[sortedPoints[upperIndexes[i]][2]]);for(i=+skipLeft;i<lowerIndexes.length-skipRight;++i)
hull.push(points[sortedPoints[lowerIndexes[i]][2]]);return hull;}
function contains$2(polygon,point){var n=polygon.length,p=polygon[n-1],x=point[0],y=point[1],x0=p[0],y0=p[1],x1,y1,inside=false;for(var i=0;i<n;++i){(p=polygon[i]),(x1=p[0]),(y1=p[1]);if(y1>y!==y0>y&&x<(x0-x1)*(y-y1)/(y0-y1)+x1)
inside=!inside;(x0=x1),(y0=y1);}
return inside;}
function length$2(polygon){var i=-1,n=polygon.length,b=polygon[n-1],xa,ya,xb=b[0],yb=b[1],perimeter=0;while(++i<n){xa=xb;ya=yb;b=polygon[i];xb=b[0];yb=b[1];xa-=xb;ya-=yb;perimeter+=Math.sqrt(xa*xa+ya*ya);}
return perimeter;}
function defaultSource$1(){return Math.random();}
var uniform=(function sourceRandomUniform(source){function randomUniform(min,max){min=min==null?0:+min;max=max==null?1:+max;if(arguments.length===1)(max=min),(min=0);else max-=min;return function(){return source()*max+min;};}
randomUniform.source=sourceRandomUniform;return randomUniform;})(defaultSource$1);var normal=(function sourceRandomNormal(source){function randomNormal(mu,sigma){var x,r;mu=mu==null?0:+mu;sigma=sigma==null?1:+sigma;return function(){var y;if(x!=null)(y=x),(x=null);else
do{x=source()*2-1;y=source()*2-1;r=x*x+y*y;}while(!r||r>1);return mu+sigma*y*Math.sqrt(-2*Math.log(r)/r);};}
randomNormal.source=sourceRandomNormal;return randomNormal;})(defaultSource$1);var logNormal=(function sourceRandomLogNormal(source){function randomLogNormal(){var randomNormal=normal.source(source).apply(this,arguments);return function(){return Math.exp(randomNormal());};}
randomLogNormal.source=sourceRandomLogNormal;return randomLogNormal;})(defaultSource$1);var irwinHall=(function sourceRandomIrwinHall(source){function randomIrwinHall(n){return function(){for(var sum=0,i=0;i<n;++i)sum+=source();return sum;};}
randomIrwinHall.source=sourceRandomIrwinHall;return randomIrwinHall;})(defaultSource$1);var bates=(function sourceRandomBates(source){function randomBates(n){var randomIrwinHall=irwinHall.source(source)(n);return function(){return randomIrwinHall()/n;};}
randomBates.source=sourceRandomBates;return randomBates;})(defaultSource$1);var exponential$1=(function sourceRandomExponential(source){function randomExponential(lambda){return function(){return-Math.log(1-source())/lambda;};}
randomExponential.source=sourceRandomExponential;return randomExponential;})(defaultSource$1);var array$3=Array.prototype;var map$2=array$3.map;var slice$5=array$3.slice;var implicit={name:"implicit"};function ordinal(range){var index=map$1(),domain=[],unknown=implicit;range=range==null?[]:slice$5.call(range);function scale(d){var key=d+"",i=index.get(key);if(!i){if(unknown!==implicit)return unknown;index.set(key,(i=domain.push(d)));}
return range[(i-1)%range.length];}
scale.domain=function(_){if(!arguments.length)return domain.slice();(domain=[]),(index=map$1());var i=-1,n=_.length,d,key;while(++i<n)
if(!index.has((key=(d=_[i])+"")))index.set(key,domain.push(d));return scale;};scale.range=function(_){return arguments.length?((range=slice$5.call(_)),scale):range.slice();};scale.unknown=function(_){return arguments.length?((unknown=_),scale):unknown;};scale.copy=function(){return ordinal().domain(domain).range(range).unknown(unknown);};return scale;}
function band(){var scale=ordinal().unknown(undefined),domain=scale.domain,ordinalRange=scale.range,range$$1=[0,1],step,bandwidth,round=false,paddingInner=0,paddingOuter=0,align=0.5;delete scale.unknown;function rescale(){var n=domain().length,reverse=range$$1[1]<range$$1[0],start=range$$1[reverse-0],stop=range$$1[1-reverse];step=(stop-start)/Math.max(1,n-paddingInner+paddingOuter*2);if(round)step=Math.floor(step);start+=(stop-start-step*(n-paddingInner))*align;bandwidth=step*(1-paddingInner);if(round)
(start=Math.round(start)),(bandwidth=Math.round(bandwidth));var values=sequence(n).map(function(i){return start+step*i;});return ordinalRange(reverse?values.reverse():values);}
scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain();};scale.range=function(_){return arguments.length?((range$$1=[+_[0],+_[1]]),rescale()):range$$1.slice();};scale.rangeRound=function(_){return(range$$1=[+_[0],+_[1]]),(round=true),rescale();};scale.bandwidth=function(){return bandwidth;};scale.step=function(){return step;};scale.round=function(_){return arguments.length?((round=!!_),rescale()):round;};scale.padding=function(_){return arguments.length?((paddingInner=paddingOuter=Math.max(0,Math.min(1,_))),rescale()):paddingInner;};scale.paddingInner=function(_){return arguments.length?((paddingInner=Math.max(0,Math.min(1,_))),rescale()):paddingInner;};scale.paddingOuter=function(_){return arguments.length?((paddingOuter=Math.max(0,Math.min(1,_))),rescale()):paddingOuter;};scale.align=function(_){return arguments.length?((align=Math.max(0,Math.min(1,_))),rescale()):align;};scale.copy=function(){return band().domain(domain()).range(range$$1).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align);};return rescale();}
function pointish(scale){var copy=scale.copy;scale.padding=scale.paddingOuter;delete scale.paddingInner;delete scale.paddingOuter;scale.copy=function(){return pointish(copy());};return scale;}
function point$1(){return pointish(band().paddingInner(1));}
function constant$10(x){return function(){return x;};}
function number$2(x){return+x;}
var unit=[0,1];function deinterpolateLinear(a,b){return(b-=a=+a)?function(x){return(x-a)/b;}:constant$10(b);}
function deinterpolateClamp(deinterpolate){return function(a,b){var d=deinterpolate((a=+a),(b=+b));return function(x){return x<=a?0:x>=b?1:d(x);};};}
function reinterpolateClamp(reinterpolate$$1){return function(a,b){var r=reinterpolate$$1((a=+a),(b=+b));return function(t){return t<=0?a:t>=1?b:r(t);};};}
function bimap(domain,range,deinterpolate,reinterpolate$$1){var d0=domain[0],d1=domain[1],r0=range[0],r1=range[1];if(d1<d0)(d0=deinterpolate(d1,d0)),(r0=reinterpolate$$1(r1,r0));else(d0=deinterpolate(d0,d1)),(r0=reinterpolate$$1(r0,r1));return function(x){return r0(d0(x));};}
function polymap(domain,range,deinterpolate,reinterpolate$$1){var j=Math.min(domain.length,range.length)-1,d=new Array(j),r=new Array(j),i=-1;if(domain[j]<domain[0]){domain=domain.slice().reverse();range=range.slice().reverse();}
while(++i<j){d[i]=deinterpolate(domain[i],domain[i+1]);r[i]=reinterpolate$$1(range[i],range[i+1]);}
return function(x){var i=bisectRight(domain,x,1,j)-1;return r[i](d[i](x));};}
function copy(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp());}
function continuous(deinterpolate,reinterpolate$$1){var domain=unit,range=unit,interpolate$$1=interpolateValue,clamp=false,piecewise$$1,output,input;function rescale(){piecewise$$1=Math.min(domain.length,range.length)>2?polymap:bimap;output=input=null;return scale;}
function scale(x){return(output||(output=piecewise$$1(domain,range,clamp?deinterpolateClamp(deinterpolate):deinterpolate,interpolate$$1)))(+x);}
scale.invert=function(y){return(input||(input=piecewise$$1(range,domain,deinterpolateLinear,clamp?reinterpolateClamp(reinterpolate$$1):reinterpolate$$1)))(+y);};scale.domain=function(_){return arguments.length?((domain=map$2.call(_,number$2)),rescale()):domain.slice();};scale.range=function(_){return arguments.length?((range=slice$5.call(_)),rescale()):range.slice();};scale.rangeRound=function(_){return((range=slice$5.call(_)),(interpolate$$1=interpolateRound),rescale());};scale.clamp=function(_){return arguments.length?((clamp=!!_),rescale()):clamp;};scale.interpolate=function(_){return arguments.length?((interpolate$$1=_),rescale()):interpolate$$1;};return rescale();}
function tickFormat(domain,count,specifier){var start=domain[0],stop=domain[domain.length-1],step=tickStep(start,stop,count==null?10:count),precision;specifier=formatSpecifier(specifier==null?",f":specifier);switch(specifier.type){case"s":{var value=Math.max(Math.abs(start),Math.abs(stop));if(specifier.precision==null&&!isNaN((precision=precisionPrefix(step,value))))
specifier.precision=precision;return exports.formatPrefix(specifier,value);}
case"":case"e":case"g":case"p":case"r":{if(specifier.precision==null&&!isNaN((precision=precisionRound(step,Math.max(Math.abs(start),Math.abs(stop))))))
specifier.precision=precision-(specifier.type==="e");break;}
case"f":case"%":{if(specifier.precision==null&&!isNaN((precision=precisionFixed(step))))
specifier.precision=precision-(specifier.type==="%")*2;break;}}
return exports.format(specifier);}
function linearish(scale){var domain=scale.domain;scale.ticks=function(count){var d=domain();return ticks(d[0],d[d.length-1],count==null?10:count);};scale.tickFormat=function(count,specifier){return tickFormat(domain(),count,specifier);};scale.nice=function(count){if(count==null)count=10;var d=domain(),i0=0,i1=d.length-1,start=d[i0],stop=d[i1],step;if(stop<start){(step=start),(start=stop),(stop=step);(step=i0),(i0=i1),(i1=step);}
step=tickIncrement(start,stop,count);if(step>0){start=Math.floor(start/step)*step;stop=Math.ceil(stop/step)*step;step=tickIncrement(start,stop,count);}else if(step<0){start=Math.ceil(start*step)/step;stop=Math.floor(stop*step)/step;step=tickIncrement(start,stop,count);}
if(step>0){d[i0]=Math.floor(start/step)*step;d[i1]=Math.ceil(stop/step)*step;domain(d);}else if(step<0){d[i0]=Math.ceil(start*step)/step;d[i1]=Math.floor(stop*step)/step;domain(d);}
return scale;};return scale;}
function linear$2(){var scale=continuous(deinterpolateLinear,reinterpolate);scale.copy=function(){return copy(scale,linear$2());};return linearish(scale);}
function identity$6(){var domain=[0,1];function scale(x){return+x;}
scale.invert=scale;scale.domain=scale.range=function(_){return arguments.length?((domain=map$2.call(_,number$2)),scale):domain.slice();};scale.copy=function(){return identity$6().domain(domain);};return linearish(scale);}
function nice(domain,interval){domain=domain.slice();var i0=0,i1=domain.length-1,x0=domain[i0],x1=domain[i1],t;if(x1<x0){(t=i0),(i0=i1),(i1=t);(t=x0),(x0=x1),(x1=t);}
domain[i0]=interval.floor(x0);domain[i1]=interval.ceil(x1);return domain;}
function deinterpolate(a,b){return(b=Math.log(b/a))?function(x){return Math.log(x/a)/b;}:constant$10(b);}
function reinterpolate$1(a,b){return a<0?function(t){return-Math.pow(-b,t)*Math.pow(-a,1-t);}:function(t){return Math.pow(b,t)*Math.pow(a,1-t);};}
function pow10(x){return isFinite(x)?+("1e"+x):x<0?0:x;}
function powp(base){return base===10?pow10:base===Math.E?Math.exp:function(x){return Math.pow(base,x);};}
function logp(base){return base===Math.E?Math.log:(base===10&&Math.log10)||(base===2&&Math.log2)||((base=Math.log(base)),function(x){return Math.log(x)/base;});}
function reflect(f){return function(x){return-f(-x);};}
function log$1(){var scale=continuous(deinterpolate,reinterpolate$1).domain([1,10]),domain=scale.domain,base=10,logs=logp(10),pows=powp(10);function rescale(){(logs=logp(base)),(pows=powp(base));if(domain()[0]<0)(logs=reflect(logs)),(pows=reflect(pows));return scale;}
scale.base=function(_){return arguments.length?((base=+_),rescale()):base;};scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain();};scale.ticks=function(count){var d=domain(),u=d[0],v=d[d.length-1],r;if((r=v<u))(i=u),(u=v),(v=i);var i=logs(u),j=logs(v),p,k,t,n=count==null?10:+count,z=[];if(!(base%1)&&j-i<n){(i=Math.round(i)-1),(j=Math.round(j)+1);if(u>0)
for(;i<j;++i){for(k=1,p=pows(i);k<base;++k){t=p*k;if(t<u)continue;if(t>v)break;z.push(t);}}
else
for(;i<j;++i){for(k=base-1,p=pows(i);k>=1;--k){t=p*k;if(t<u)continue;if(t>v)break;z.push(t);}}}else{z=ticks(i,j,Math.min(j-i,n)).map(pows);}
return r?z.reverse():z;};scale.tickFormat=function(count,specifier){if(specifier==null)specifier=base===10?".0e":",";if(typeof specifier!=="function")
specifier=exports.format(specifier);if(count===Infinity)return specifier;if(count==null)count=10;var k=Math.max(1,base*count/scale.ticks().length);return function(d){var i=d/pows(Math.round(logs(d)));if(i*base<base-0.5)i*=base;return i<=k?specifier(d):"";};};scale.nice=function(){return domain(nice(domain(),{floor:function(x){return pows(Math.floor(logs(x)));},ceil:function(x){return pows(Math.ceil(logs(x)));}}));};scale.copy=function(){return copy(scale,log$1().base(base));};return scale;}
function raise$1(x,exponent){return x<0?-Math.pow(-x,exponent):Math.pow(x,exponent);}
function pow$1(){var exponent=1,scale=continuous(deinterpolate,reinterpolate),domain=scale.domain;function deinterpolate(a,b){return(b=raise$1(b,exponent)-(a=raise$1(a,exponent)))?function(x){return(raise$1(x,exponent)-a)/b;}:constant$10(b);}
function reinterpolate(a,b){b=raise$1(b,exponent)-(a=raise$1(a,exponent));return function(t){return raise$1(a+b*t,1/exponent);};}
scale.exponent=function(_){return arguments.length?((exponent=+_),domain(domain())):exponent;};scale.copy=function(){return copy(scale,pow$1().exponent(exponent));};return linearish(scale);}
function sqrt$1(){return pow$1().exponent(0.5);}
function quantile$$1(){var domain=[],range=[],thresholds=[];function rescale(){var i=0,n=Math.max(1,range.length);thresholds=new Array(n-1);while(++i<n)thresholds[i-1]=threshold(domain,i/n);return scale;}
function scale(x){if(!isNaN((x=+x)))return range[bisectRight(thresholds,x)];}
scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:[i>0?thresholds[i-1]:domain[0],i<thresholds.length?thresholds[i]:domain[domain.length-1]];};scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[];for(var i=0,n=_.length,d;i<n;++i)
if(((d=_[i]),d!=null&&!isNaN((d=+d))))domain.push(d);domain.sort(ascending);return rescale();};scale.range=function(_){return arguments.length?((range=slice$5.call(_)),rescale()):range.slice();};scale.quantiles=function(){return thresholds.slice();};scale.copy=function(){return quantile$$1().domain(domain).range(range);};return scale;}
function quantize$1(){var x0=0,x1=1,n=1,domain=[0.5],range=[0,1];function scale(x){if(x<=x)return range[bisectRight(domain,x,0,n)];}
function rescale(){var i=-1;domain=new Array(n);while(++i<n)domain[i]=((i+1)*x1-(i-n)*x0)/(n+1);return scale;}
scale.domain=function(_){return arguments.length?((x0=+_[0]),(x1=+_[1]),rescale()):[x0,x1];};scale.range=function(_){return arguments.length?((n=(range=slice$5.call(_)).length-1),rescale()):range.slice();};scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:i<1?[x0,domain[0]]:i>=n?[domain[n-1],x1]:[domain[i-1],domain[i]];};scale.copy=function(){return quantize$1().domain([x0,x1]).range(range);};return linearish(scale);}
function threshold$1(){var domain=[0.5],range=[0,1],n=1;function scale(x){if(x<=x)return range[bisectRight(domain,x,0,n)];}
scale.domain=function(_){return arguments.length?((domain=slice$5.call(_)),(n=Math.min(domain.length,range.length-1)),scale):domain.slice();};scale.range=function(_){return arguments.length?((range=slice$5.call(_)),(n=Math.min(domain.length,range.length-1)),scale):range.slice();};scale.invertExtent=function(y){var i=range.indexOf(y);return[domain[i-1],domain[i]];};scale.copy=function(){return threshold$1().domain(domain).range(range);};return scale;}
var t0$1=new Date(),t1$1=new Date();function newInterval(floori,offseti,count,field){function interval(date){return floori((date=new Date(+date))),date;}
interval.floor=interval;interval.ceil=function(date){return(floori((date=new Date(date-1))),offseti(date,1),floori(date),date);};interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);return date-d0<d1-date?d0:d1;};interval.offset=function(date,step){return(offseti((date=new Date(+date)),step==null?1:Math.floor(step)),date);};interval.range=function(start,stop,step){var range=[],previous;start=interval.ceil(start);step=step==null?1:Math.floor(step);if(!(start<stop)||!(step>0))return range;do
range.push((previous=new Date(+start))),offseti(start,step),floori(start);while(previous<start&&start<stop);return range;};interval.filter=function(test){return newInterval(function(date){if(date>=date)
while((floori(date),!test(date)))date.setTime(date-1);},function(date,step){if(date>=date){if(step<0)
while(++step<=0){while((offseti(date,-1),!test(date))){}}
else
while(--step>=0){while((offseti(date,+1),!test(date))){}}}});};if(count){interval.count=function(start,end){t0$1.setTime(+start),t1$1.setTime(+end);floori(t0$1),floori(t1$1);return Math.floor(count(t0$1,t1$1));};interval.every=function(step){step=Math.floor(step);return!isFinite(step)||!(step>0)?null:!(step>1)?interval:interval.filter(field?function(d){return field(d)%step===0;}:function(d){return interval.count(0,d)%step===0;});};}
return interval;}
var millisecond=newInterval(function(){},function(date,step){date.setTime(+date+step);},function(start,end){return end-start;});millisecond.every=function(k){k=Math.floor(k);if(!isFinite(k)||!(k>0))return null;if(!(k>1))return millisecond;return newInterval(function(date){date.setTime(Math.floor(date/k)*k);},function(date,step){date.setTime(+date+step*k);},function(start,end){return(end-start)/k;});};var milliseconds=millisecond.range;var durationSecond=1e3;var durationMinute=6e4;var durationHour=36e5;var durationDay=864e5;var durationWeek=6048e5;var second=newInterval(function(date){date.setTime(Math.floor(date/durationSecond)*durationSecond);},function(date,step){date.setTime(+date+step*durationSecond);},function(start,end){return(end-start)/durationSecond;},function(date){return date.getUTCSeconds();});var seconds=second.range;var minute=newInterval(function(date){date.setTime(Math.floor(date/durationMinute)*durationMinute);},function(date,step){date.setTime(+date+step*durationMinute);},function(start,end){return(end-start)/durationMinute;},function(date){return date.getMinutes();});var minutes=minute.range;var hour=newInterval(function(date){var offset=(date.getTimezoneOffset()*durationMinute)%durationHour;if(offset<0)offset+=durationHour;date.setTime(Math.floor((+date-offset)/durationHour)*durationHour+offset);},function(date,step){date.setTime(+date+step*durationHour);},function(start,end){return(end-start)/durationHour;},function(date){return date.getHours();});var hours=hour.range;var day=newInterval(function(date){date.setHours(0,0,0,0);},function(date,step){date.setDate(date.getDate()+step);},function(start,end){return((end-
start-
(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/durationDay);},function(date){return date.getDate()-1;});var days=day.range;function weekday(i){return newInterval(function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7);date.setHours(0,0,0,0);},function(date,step){date.setDate(date.getDate()+step*7);},function(start,end){return((end-
start-
(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/durationWeek);});}
var sunday=weekday(0);var monday=weekday(1);var tuesday=weekday(2);var wednesday=weekday(3);var thursday=weekday(4);var friday=weekday(5);var saturday=weekday(6);var sundays=sunday.range;var mondays=monday.range;var tuesdays=tuesday.range;var wednesdays=wednesday.range;var thursdays=thursday.range;var fridays=friday.range;var saturdays=saturday.range;var month=newInterval(function(date){date.setDate(1);date.setHours(0,0,0,0);},function(date,step){date.setMonth(date.getMonth()+step);},function(start,end){return(end.getMonth()-
start.getMonth()+
(end.getFullYear()-start.getFullYear())*12);},function(date){return date.getMonth();});var months=month.range;var year=newInterval(function(date){date.setMonth(0,1);date.setHours(0,0,0,0);},function(date,step){date.setFullYear(date.getFullYear()+step);},function(start,end){return end.getFullYear()-start.getFullYear();},function(date){return date.getFullYear();});year.every=function(k){return!isFinite((k=Math.floor(k)))||!(k>0)?null:newInterval(function(date){date.setFullYear(Math.floor(date.getFullYear()/k)*k);date.setMonth(0,1);date.setHours(0,0,0,0);},function(date,step){date.setFullYear(date.getFullYear()+step*k);});};var years=year.range;var utcMinute=newInterval(function(date){date.setUTCSeconds(0,0);},function(date,step){date.setTime(+date+step*durationMinute);},function(start,end){return(end-start)/durationMinute;},function(date){return date.getUTCMinutes();});var utcMinutes=utcMinute.range;var utcHour=newInterval(function(date){date.setUTCMinutes(0,0,0);},function(date,step){date.setTime(+date+step*durationHour);},function(start,end){return(end-start)/durationHour;},function(date){return date.getUTCHours();});var utcHours=utcHour.range;var utcDay=newInterval(function(date){date.setUTCHours(0,0,0,0);},function(date,step){date.setUTCDate(date.getUTCDate()+step);},function(start,end){return(end-start)/durationDay;},function(date){return date.getUTCDate()-1;});var utcDays=utcDay.range;function utcWeekday(i){return newInterval(function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7);date.setUTCHours(0,0,0,0);},function(date,step){date.setUTCDate(date.getUTCDate()+step*7);},function(start,end){return(end-start)/durationWeek;});}
var utcSunday=utcWeekday(0);var utcMonday=utcWeekday(1);var utcTuesday=utcWeekday(2);var utcWednesday=utcWeekday(3);var utcThursday=utcWeekday(4);var utcFriday=utcWeekday(5);var utcSaturday=utcWeekday(6);var utcSundays=utcSunday.range;var utcMondays=utcMonday.range;var utcTuesdays=utcTuesday.range;var utcWednesdays=utcWednesday.range;var utcThursdays=utcThursday.range;var utcFridays=utcFriday.range;var utcSaturdays=utcSaturday.range;var utcMonth=newInterval(function(date){date.setUTCDate(1);date.setUTCHours(0,0,0,0);},function(date,step){date.setUTCMonth(date.getUTCMonth()+step);},function(start,end){return(end.getUTCMonth()-
start.getUTCMonth()+
(end.getUTCFullYear()-start.getUTCFullYear())*12);},function(date){return date.getUTCMonth();});var utcMonths=utcMonth.range;var utcYear=newInterval(function(date){date.setUTCMonth(0,1);date.setUTCHours(0,0,0,0);},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step);},function(start,end){return end.getUTCFullYear()-start.getUTCFullYear();},function(date){return date.getUTCFullYear();});utcYear.every=function(k){return!isFinite((k=Math.floor(k)))||!(k>0)?null:newInterval(function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k);date.setUTCMonth(0,1);date.setUTCHours(0,0,0,0);},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k);});};var utcYears=utcYear.range;function localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);date.setFullYear(d.y);return date;}
return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L);}
function utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));date.setUTCFullYear(d.y);return date;}
return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L));}
function newYear(y){return{y:y,m:0,d:1,H:0,M:0,S:0,L:0};}
function formatLocale$1(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths;var periodRe=formatRe(locale_periods),periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths);var formats={a:formatShortWeekday,A:formatWeekday,b:formatShortMonth,B:formatMonth,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:formatPeriod,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent};var utcFormats={a:formatUTCShortWeekday,A:formatUTCWeekday,b:formatUTCShortMonth,B:formatUTCMonth,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:formatUTCPeriod,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent};var parses={a:parseShortWeekday,A:parseWeekday,b:parseShortMonth,B:parseMonth,c:parseLocaleDateTime,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:parsePeriod,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:parseLocaleDate,X:parseLocaleTime,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};formats.x=newFormat(locale_date,formats);formats.X=newFormat(locale_time,formats);formats.c=newFormat(locale_dateTime,formats);utcFormats.x=newFormat(locale_date,utcFormats);utcFormats.X=newFormat(locale_time,utcFormats);utcFormats.c=newFormat(locale_dateTime,utcFormats);function newFormat(specifier,formats){return function(date){var string=[],i=-1,j=0,n=specifier.length,c,pad,format;if(!(date instanceof Date))date=new Date(+date);while(++i<n){if(specifier.charCodeAt(i)===37){string.push(specifier.slice(j,i));if((pad=pads[(c=specifier.charAt(++i))])!=null)
c=specifier.charAt(++i);else pad=c==="e"?" ":"0";if((format=formats[c]))c=format(date,pad);string.push(c);j=i+1;}}
string.push(specifier.slice(j,i));return string.join("");};}
function newParse(specifier,newDate){return function(string){var d=newYear(1900),i=parseSpecifier(d,specifier,(string+=""),0),week,day$$1;if(i!=string.length)return null;if("Q"in d)return new Date(d.Q);if("p"in d)d.H=d.H%12+d.p*12;if("V"in d){if(d.V<1||d.V>53)return null;if(!("w"in d))d.w=1;if("Z"in d){(week=utcDate(newYear(d.y))),(day$$1=week.getUTCDay());week=day$$1>4||day$$1===0?utcMonday.ceil(week):utcMonday(week);week=utcDay.offset(week,(d.V-1)*7);d.y=week.getUTCFullYear();d.m=week.getUTCMonth();d.d=week.getUTCDate()+(d.w+6)%7;}else{(week=newDate(newYear(d.y))),(day$$1=week.getDay());week=day$$1>4||day$$1===0?monday.ceil(week):monday(week);week=day.offset(week,(d.V-1)*7);d.y=week.getFullYear();d.m=week.getMonth();d.d=week.getDate()+(d.w+6)%7;}}else if("W"in d||"U"in d){if(!("w"in d))d.w="u"in d?d.u%7:"W"in d?1:0;day$$1="Z"in d?utcDate(newYear(d.y)).getUTCDay():newDate(newYear(d.y)).getDay();d.m=0;d.d="W"in d?(d.w+6)%7+d.W*7-(day$$1+5)%7:d.w+d.U*7-(day$$1+6)%7;}
if("Z"in d){d.H+=(d.Z/100)|0;d.M+=d.Z%100;return utcDate(d);}
return newDate(d);};}
function parseSpecifier(d,specifier,string,j){var i=0,n=specifier.length,m=string.length,c,parse;while(i<n){if(j>=m)return-1;c=specifier.charCodeAt(i++);if(c===37){c=specifier.charAt(i++);parse=parses[c in pads?specifier.charAt(i++):c];if(!parse||(j=parse(d,string,j))<0)return-1;}else if(c!=string.charCodeAt(j++)){return-1;}}
return j;}
function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?((d.p=periodLookup[n[0].toLowerCase()]),i+n[0].length):-1;}
function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?((d.w=shortWeekdayLookup[n[0].toLowerCase()]),i+n[0].length):-1;}
function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?((d.w=weekdayLookup[n[0].toLowerCase()]),i+n[0].length):-1;}
function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?((d.m=shortMonthLookup[n[0].toLowerCase()]),i+n[0].length):-1;}
function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?((d.m=monthLookup[n[0].toLowerCase()]),i+n[0].length):-1;}
function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i);}
function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i);}
function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i);}
function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()];}
function formatWeekday(d){return locale_weekdays[d.getDay()];}
function formatShortMonth(d){return locale_shortMonths[d.getMonth()];}
function formatMonth(d){return locale_months[d.getMonth()];}
function formatPeriod(d){return locale_periods[+(d.getHours()>=12)];}
function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()];}
function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()];}
function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()];}
function formatUTCMonth(d){return locale_months[d.getUTCMonth()];}
function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)];}
return{format:function(specifier){var f=newFormat((specifier+=""),formats);f.toString=function(){return specifier;};return f;},parse:function(specifier){var p=newParse((specifier+=""),localDate);p.toString=function(){return specifier;};return p;},utcFormat:function(specifier){var f=newFormat((specifier+=""),utcFormats);f.toString=function(){return specifier;};return f;},utcParse:function(specifier){var p=newParse(specifier,utcDate);p.toString=function(){return specifier;};return p;}};}
var pads={"-":"",_:" ","0":"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return(sign+
(length<width?new Array(width-length+1).join(fill)+string:string));}
function requote(s){return s.replace(requoteRe,"\\$&");}
function formatRe(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i");}
function formatLookup(names){var map={},i=-1,n=names.length;while(++i<n)map[names[i].toLowerCase()]=i;return map;}
function parseWeekdayNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?((d.w=+n[0]),i+n[0].length):-1;}
function parseWeekdayNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?((d.u=+n[0]),i+n[0].length):-1;}
function parseWeekNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?((d.U=+n[0]),i+n[0].length):-1;}
function parseWeekNumberISO(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?((d.V=+n[0]),i+n[0].length):-1;}
function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?((d.W=+n[0]),i+n[0].length):-1;}
function parseFullYear(d,string,i){var n=numberRe.exec(string.slice(i,i+4));return n?((d.y=+n[0]),i+n[0].length):-1;}
function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?((d.y=+n[0]+(+n[0]>68?1900:2000)),i+n[0].length):-1;}
function parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?((d.Z=n[1]?0:-(n[2]+(n[3]||"00"))),i+n[0].length):-1;}
function parseMonthNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?((d.m=n[0]-1),i+n[0].length):-1;}
function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?((d.d=+n[0]),i+n[0].length):-1;}
function parseDayOfYear(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?((d.m=0),(d.d=+n[0]),i+n[0].length):-1;}
function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?((d.H=+n[0]),i+n[0].length):-1;}
function parseMinutes(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?((d.M=+n[0]),i+n[0].length):-1;}
function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?((d.S=+n[0]),i+n[0].length):-1;}
function parseMilliseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?((d.L=+n[0]),i+n[0].length):-1;}
function parseMicroseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+6));return n?((d.L=Math.floor(n[0]/1000)),i+n[0].length):-1;}
function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1;}
function parseUnixTimestamp(d,string,i){var n=numberRe.exec(string.slice(i));return n?((d.Q=+n[0]),i+n[0].length):-1;}
function parseUnixTimestampSeconds(d,string,i){var n=numberRe.exec(string.slice(i));return n?((d.Q=+n[0]*1000),i+n[0].length):-1;}
function formatDayOfMonth(d,p){return pad(d.getDate(),p,2);}
function formatHour24(d,p){return pad(d.getHours(),p,2);}
function formatHour12(d,p){return pad(d.getHours()%12||12,p,2);}
function formatDayOfYear(d,p){return pad(1+day.count(year(d),d),p,3);}
function formatMilliseconds(d,p){return pad(d.getMilliseconds(),p,3);}
function formatMicroseconds(d,p){return formatMilliseconds(d,p)+"000";}
function formatMonthNumber(d,p){return pad(d.getMonth()+1,p,2);}
function formatMinutes(d,p){return pad(d.getMinutes(),p,2);}
function formatSeconds(d,p){return pad(d.getSeconds(),p,2);}
function formatWeekdayNumberMonday(d){var day$$1=d.getDay();return day$$1===0?7:day$$1;}
function formatWeekNumberSunday(d,p){return pad(sunday.count(year(d),d),p,2);}
function formatWeekNumberISO(d,p){var day$$1=d.getDay();d=day$$1>=4||day$$1===0?thursday(d):thursday.ceil(d);return pad(thursday.count(year(d),d)+(year(d).getDay()===4),p,2);}
function formatWeekdayNumberSunday(d){return d.getDay();}
function formatWeekNumberMonday(d,p){return pad(monday.count(year(d),d),p,2);}
function formatYear(d,p){return pad(d.getFullYear()%100,p,2);}
function formatFullYear(d,p){return pad(d.getFullYear()%10000,p,4);}
function formatZone(d){var z=d.getTimezoneOffset();return((z>0?"-":((z*=-1),"+"))+
pad((z/60)|0,"0",2)+
pad(z%60,"0",2));}
function formatUTCDayOfMonth(d,p){return pad(d.getUTCDate(),p,2);}
function formatUTCHour24(d,p){return pad(d.getUTCHours(),p,2);}
function formatUTCHour12(d,p){return pad(d.getUTCHours()%12||12,p,2);}
function formatUTCDayOfYear(d,p){return pad(1+utcDay.count(utcYear(d),d),p,3);}
function formatUTCMilliseconds(d,p){return pad(d.getUTCMilliseconds(),p,3);}
function formatUTCMicroseconds(d,p){return formatUTCMilliseconds(d,p)+"000";}
function formatUTCMonthNumber(d,p){return pad(d.getUTCMonth()+1,p,2);}
function formatUTCMinutes(d,p){return pad(d.getUTCMinutes(),p,2);}
function formatUTCSeconds(d,p){return pad(d.getUTCSeconds(),p,2);}
function formatUTCWeekdayNumberMonday(d){var dow=d.getUTCDay();return dow===0?7:dow;}
function formatUTCWeekNumberSunday(d,p){return pad(utcSunday.count(utcYear(d),d),p,2);}
function formatUTCWeekNumberISO(d,p){var day$$1=d.getUTCDay();d=day$$1>=4||day$$1===0?utcThursday(d):utcThursday.ceil(d);return pad(utcThursday.count(utcYear(d),d)+(utcYear(d).getUTCDay()===4),p,2);}
function formatUTCWeekdayNumberSunday(d){return d.getUTCDay();}
function formatUTCWeekNumberMonday(d,p){return pad(utcMonday.count(utcYear(d),d),p,2);}
function formatUTCYear(d,p){return pad(d.getUTCFullYear()%100,p,2);}
function formatUTCFullYear(d,p){return pad(d.getUTCFullYear()%10000,p,4);}
function formatUTCZone(){return"+0000";}
function formatLiteralPercent(){return"%";}
function formatUnixTimestamp(d){return+d;}
function formatUnixTimestampSeconds(d){return Math.floor(+d/1000);}
var locale$1;defaultLocale$1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale$1(definition){locale$1=formatLocale$1(definition);exports.timeFormat=locale$1.format;exports.timeParse=locale$1.parse;exports.utcFormat=locale$1.utcFormat;exports.utcParse=locale$1.utcParse;return locale$1;}
var isoSpecifier="%Y-%m-%dT%H:%M:%S.%LZ";function formatIsoNative(date){return date.toISOString();}
var formatIso=Date.prototype.toISOString?formatIsoNative:exports.utcFormat(isoSpecifier);function parseIsoNative(string){var date=new Date(string);return isNaN(date)?null:date;}
var parseIso=+new Date("2000-01-01T00:00:00.000Z")?parseIsoNative:exports.utcParse(isoSpecifier);var durationSecond$1=1000,durationMinute$1=durationSecond$1*60,durationHour$1=durationMinute$1*60,durationDay$1=durationHour$1*24,durationWeek$1=durationDay$1*7,durationMonth=durationDay$1*30,durationYear=durationDay$1*365;function date$1(t){return new Date(t);}
function number$3(t){return t instanceof Date?+t:+new Date(+t);}
function calendar(year$$1,month$$1,week,day$$1,hour$$1,minute$$1,second$$1,millisecond$$1,format){var scale=continuous(deinterpolateLinear,reinterpolate),invert=scale.invert,domain=scale.domain;var formatMillisecond=format(".%L"),formatSecond=format(":%S"),formatMinute=format("%I:%M"),formatHour=format("%I %p"),formatDay=format("%a %d"),formatWeek=format("%b %d"),formatMonth=format("%B"),formatYear=format("%Y");var tickIntervals=[[second$$1,1,durationSecond$1],[second$$1,5,5*durationSecond$1],[second$$1,15,15*durationSecond$1],[second$$1,30,30*durationSecond$1],[minute$$1,1,durationMinute$1],[minute$$1,5,5*durationMinute$1],[minute$$1,15,15*durationMinute$1],[minute$$1,30,30*durationMinute$1],[hour$$1,1,durationHour$1],[hour$$1,3,3*durationHour$1],[hour$$1,6,6*durationHour$1],[hour$$1,12,12*durationHour$1],[day$$1,1,durationDay$1],[day$$1,2,2*durationDay$1],[week,1,durationWeek$1],[month$$1,1,durationMonth],[month$$1,3,3*durationMonth],[year$$1,1,durationYear]];function tickFormat(date$$1){return(second$$1(date$$1)<date$$1?formatMillisecond:minute$$1(date$$1)<date$$1?formatSecond:hour$$1(date$$1)<date$$1?formatMinute:day$$1(date$$1)<date$$1?formatHour:month$$1(date$$1)<date$$1?week(date$$1)<date$$1?formatDay:formatWeek:year$$1(date$$1)<date$$1?formatMonth:formatYear)(date$$1);}
function tickInterval(interval,start,stop,step){if(interval==null)interval=10;if(typeof interval==="number"){var target=Math.abs(stop-start)/interval,i=bisector(function(i){return i[2];}).right(tickIntervals,target);if(i===tickIntervals.length){step=tickStep(start/durationYear,stop/durationYear,interval);interval=year$$1;}else if(i){i=tickIntervals[target/tickIntervals[i-1][2]<tickIntervals[i][2]/target?i-1:i];step=i[1];interval=i[0];}else{step=Math.max(tickStep(start,stop,interval),1);interval=millisecond$$1;}}
return step==null?interval:interval.every(step);}
scale.invert=function(y){return new Date(invert(y));};scale.domain=function(_){return arguments.length?domain(map$2.call(_,number$3)):domain().map(date$1);};scale.ticks=function(interval,step){var d=domain(),t0=d[0],t1=d[d.length-1],r=t1<t0,t;if(r)(t=t0),(t0=t1),(t1=t);t=tickInterval(interval,t0,t1,step);t=t?t.range(t0,t1+1):[];return r?t.reverse():t;};scale.tickFormat=function(count,specifier){return specifier==null?tickFormat:format(specifier);};scale.nice=function(interval,step){var d=domain();return(interval=tickInterval(interval,d[0],d[d.length-1],step))?domain(nice(d,interval)):scale;};scale.copy=function(){return copy(scale,calendar(year$$1,month$$1,week,day$$1,hour$$1,minute$$1,second$$1,millisecond$$1,format));};return scale;}
function time(){return calendar(year,month,sunday,day,hour,minute,second,millisecond,exports.timeFormat).domain([new Date(2000,0,1),new Date(2000,0,2)]);}
function utcTime(){return calendar(utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,millisecond,exports.utcFormat).domain([Date.UTC(2000,0,1),Date.UTC(2000,0,2)]);}
function sequential(interpolator){var x0=0,x1=1,clamp=false;function scale(x){var t=(x-x0)/(x1-x0);return interpolator(clamp?Math.max(0,Math.min(1,t)):t);}
scale.domain=function(_){return arguments.length?((x0=+_[0]),(x1=+_[1]),scale):[x0,x1];};scale.clamp=function(_){return arguments.length?((clamp=!!_),scale):clamp;};scale.interpolator=function(_){return arguments.length?((interpolator=_),scale):interpolator;};scale.copy=function(){return sequential(interpolator).domain([x0,x1]).clamp(clamp);};return linearish(scale);}
function colors(specifier){var n=(specifier.length/6)|0,colors=new Array(n),i=0;while(i<n)colors[i]="#"+specifier.slice(i*6,++i*6);return colors;}
var category10=colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var Accent=colors("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666");var Dark2=colors("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666");var Paired=colors("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");var Pastel1=colors("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2");var Pastel2=colors("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc");var Set1=colors("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");var Set2=colors("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");var Set3=colors("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function ramp(scheme){return rgbBasis(scheme[scheme.length-1]);}
var scheme=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(colors);var BrBG=ramp(scheme);var scheme$1=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(colors);var PRGn=ramp(scheme$1);var scheme$2=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(colors);var PiYG=ramp(scheme$2);var scheme$3=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(colors);var PuOr=ramp(scheme$3);var scheme$4=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(colors);var RdBu=ramp(scheme$4);var scheme$5=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(colors);var RdGy=ramp(scheme$5);var scheme$6=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(colors);var RdYlBu=ramp(scheme$6);var scheme$7=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(colors);var RdYlGn=ramp(scheme$7);var scheme$8=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(colors);var Spectral=ramp(scheme$8);var scheme$9=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(colors);var BuGn=ramp(scheme$9);var scheme$10=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(colors);var BuPu=ramp(scheme$10);var scheme$11=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(colors);var GnBu=ramp(scheme$11);var scheme$12=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(colors);var OrRd=ramp(scheme$12);var scheme$13=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(colors);var PuBuGn=ramp(scheme$13);var scheme$14=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(colors);var PuBu=ramp(scheme$14);var scheme$15=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(colors);var PuRd=ramp(scheme$15);var scheme$16=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(colors);var RdPu=ramp(scheme$16);var scheme$17=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(colors);var YlGnBu=ramp(scheme$17);var scheme$18=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(colors);var YlGn=ramp(scheme$18);var scheme$19=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(colors);var YlOrBr=ramp(scheme$19);var scheme$20=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(colors);var YlOrRd=ramp(scheme$20);var scheme$21=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(colors);var Blues=ramp(scheme$21);var scheme$22=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(colors);var Greens=ramp(scheme$22);var scheme$23=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(colors);var Greys=ramp(scheme$23);var scheme$24=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(colors);var Purples=ramp(scheme$24);var scheme$25=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors);var Reds=ramp(scheme$25);var scheme$26=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(colors);var Oranges=ramp(scheme$26);var cubehelix$3=cubehelixLong(cubehelix(300,0.5,0.0),cubehelix(-240,0.5,1.0));var warm=cubehelixLong(cubehelix(-100,0.75,0.35),cubehelix(80,1.5,0.8));var cool=cubehelixLong(cubehelix(260,0.75,0.35),cubehelix(80,1.5,0.8));var c=cubehelix();function rainbow(t){if(t<0||t>1)t-=Math.floor(t);var ts=Math.abs(t-0.5);c.h=360*t-100;c.s=1.5-1.5*ts;c.l=0.8-0.9*ts;return c+"";}
var c$1=rgb(),pi_1_3=Math.PI/3,pi_2_3=Math.PI*2/3;function sinebow(t){var x;t=(0.5-t)*Math.PI;c$1.r=255*(x=Math.sin(t))*x;c$1.g=255*(x=Math.sin(t+pi_1_3))*x;c$1.b=255*(x=Math.sin(t+pi_2_3))*x;return c$1+"";}
function ramp$1(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))];};}
var viridis=ramp$1(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var magma=ramp$1(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));var inferno=ramp$1(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));var plasma=ramp$1(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function constant$11(x){return function constant(){return x;};}
var abs$1=Math.abs;var atan2$1=Math.atan2;var cos$2=Math.cos;var max$2=Math.max;var min$1=Math.min;var sin$2=Math.sin;var sqrt$2=Math.sqrt;var epsilon$3=1e-12;var pi$4=Math.PI;var halfPi$3=pi$4/2;var tau$4=2*pi$4;function acos$1(x){return x>1?0:x<-1?pi$4:Math.acos(x);}
function asin$1(x){return x>=1?halfPi$3:x<=-1?-halfPi$3:Math.asin(x);}
function arcInnerRadius(d){return d.innerRadius;}
function arcOuterRadius(d){return d.outerRadius;}
function arcStartAngle(d){return d.startAngle;}
function arcEndAngle(d){return d.endAngle;}
function arcPadAngle(d){return d&&d.padAngle;}
function intersect(x0,y0,x1,y1,x2,y2,x3,y3){var x10=x1-x0,y10=y1-y0,x32=x3-x2,y32=y3-y2,t=(x32*(y0-y2)-y32*(x0-x2))/(y32*x10-x32*y10);return[x0+t*x10,y0+t*y10];}
function cornerTangents(x0,y0,x1,y1,r1,rc,cw){var x01=x0-x1,y01=y0-y1,lo=(cw?rc:-rc)/sqrt$2(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x11=x0+ox,y11=y0+oy,x10=x1+ox,y10=y1+oy,x00=(x11+x10)/2,y00=(y11+y10)/2,dx=x10-x11,dy=y10-y11,d2=dx*dx+dy*dy,r=r1-rc,D=x11*y10-x10*y11,d=(dy<0?-1:1)*sqrt$2(max$2(0,r*r*d2-D*D)),cx0=(D*dy-dx*d)/d2,cy0=(-D*dx-dy*d)/d2,cx1=(D*dy+dx*d)/d2,cy1=(-D*dx+dy*d)/d2,dx0=cx0-x00,dy0=cy0-y00,dx1=cx1-x00,dy1=cy1-y00;if(dx0*dx0+dy0*dy0>dx1*dx1+dy1*dy1)(cx0=cx1),(cy0=cy1);return{cx:cx0,cy:cy0,x01:-ox,y01:-oy,x11:cx0*(r1/r-1),y11:cy0*(r1/r-1)};}
function arc(){var innerRadius=arcInnerRadius,outerRadius=arcOuterRadius,cornerRadius=constant$11(0),padRadius=null,startAngle=arcStartAngle,endAngle=arcEndAngle,padAngle=arcPadAngle,context=null;function arc(){var buffer,r,r0=+innerRadius.apply(this,arguments),r1=+outerRadius.apply(this,arguments),a0=startAngle.apply(this,arguments)-halfPi$3,a1=endAngle.apply(this,arguments)-halfPi$3,da=abs$1(a1-a0),cw=a1>a0;if(!context)context=buffer=path();if(r1<r0)(r=r1),(r1=r0),(r0=r);if(!(r1>epsilon$3))context.moveTo(0,0);else if(da>tau$4-epsilon$3){context.moveTo(r1*cos$2(a0),r1*sin$2(a0));context.arc(0,0,r1,a0,a1,!cw);if(r0>epsilon$3){context.moveTo(r0*cos$2(a1),r0*sin$2(a1));context.arc(0,0,r0,a1,a0,cw);}}
else{var a01=a0,a11=a1,a00=a0,a10=a1,da0=da,da1=da,ap=padAngle.apply(this,arguments)/2,rp=ap>epsilon$3&&(padRadius?+padRadius.apply(this,arguments):sqrt$2(r0*r0+r1*r1)),rc=min$1(abs$1(r1-r0)/2,+cornerRadius.apply(this,arguments)),rc0=rc,rc1=rc,t0,t1;if(rp>epsilon$3){var p0=asin$1(rp/r0*sin$2(ap)),p1=asin$1(rp/r1*sin$2(ap));if((da0-=p0*2)>epsilon$3)
(p0*=cw?1:-1),(a00+=p0),(a10-=p0);else(da0=0),(a00=a10=(a0+a1)/2);if((da1-=p1*2)>epsilon$3)
(p1*=cw?1:-1),(a01+=p1),(a11-=p1);else(da1=0),(a01=a11=(a0+a1)/2);}
var x01=r1*cos$2(a01),y01=r1*sin$2(a01),x10=r0*cos$2(a10),y10=r0*sin$2(a10);if(rc>epsilon$3){var x11=r1*cos$2(a11),y11=r1*sin$2(a11),x00=r0*cos$2(a00),y00=r0*sin$2(a00);if(da<pi$4){var oc=da0>epsilon$3?intersect(x01,y01,x00,y00,x11,y11,x10,y10):[x10,y10],ax=x01-oc[0],ay=y01-oc[1],bx=x11-oc[0],by=y11-oc[1],kc=1/sin$2(acos$1((ax*bx+ay*by)/(sqrt$2(ax*ax+ay*ay)*sqrt$2(bx*bx+by*by)))/2),lc=sqrt$2(oc[0]*oc[0]+oc[1]*oc[1]);rc0=min$1(rc,(r0-lc)/(kc-1));rc1=min$1(rc,(r1-lc)/(kc+1));}}
if(!(da1>epsilon$3))context.moveTo(x01,y01);else if(rc1>epsilon$3){t0=cornerTangents(x00,y00,x01,y01,r1,rc1,cw);t1=cornerTangents(x11,y11,x10,y10,r1,rc1,cw);context.moveTo(t0.cx+t0.x01,t0.cy+t0.y01);if(rc1<rc)
context.arc(t0.cx,t0.cy,rc1,atan2$1(t0.y01,t0.x01),atan2$1(t1.y01,t1.x01),!cw);else{context.arc(t0.cx,t0.cy,rc1,atan2$1(t0.y01,t0.x01),atan2$1(t0.y11,t0.x11),!cw);context.arc(0,0,r1,atan2$1(t0.cy+t0.y11,t0.cx+t0.x11),atan2$1(t1.cy+t1.y11,t1.cx+t1.x11),!cw);context.arc(t1.cx,t1.cy,rc1,atan2$1(t1.y11,t1.x11),atan2$1(t1.y01,t1.x01),!cw);}}
else context.moveTo(x01,y01),context.arc(0,0,r1,a01,a11,!cw);if(!(r0>epsilon$3)||!(da0>epsilon$3))context.lineTo(x10,y10);else if(rc0>epsilon$3){t0=cornerTangents(x10,y10,x11,y11,r0,-rc0,cw);t1=cornerTangents(x01,y01,x00,y00,r0,-rc0,cw);context.lineTo(t0.cx+t0.x01,t0.cy+t0.y01);if(rc0<rc)
context.arc(t0.cx,t0.cy,rc0,atan2$1(t0.y01,t0.x01),atan2$1(t1.y01,t1.x01),!cw);else{context.arc(t0.cx,t0.cy,rc0,atan2$1(t0.y01,t0.x01),atan2$1(t0.y11,t0.x11),!cw);context.arc(0,0,r0,atan2$1(t0.cy+t0.y11,t0.cx+t0.x11),atan2$1(t1.cy+t1.y11,t1.cx+t1.x11),cw);context.arc(t1.cx,t1.cy,rc0,atan2$1(t1.y11,t1.x11),atan2$1(t1.y01,t1.x01),!cw);}}
else context.arc(0,0,r0,a10,a00,cw);}
context.closePath();if(buffer)return(context=null),buffer+""||null;}
arc.centroid=function(){var r=(+innerRadius.apply(this,arguments)+
+outerRadius.apply(this,arguments))/2,a=(+startAngle.apply(this,arguments)+
+endAngle.apply(this,arguments))/2-
pi$4/2;return[cos$2(a)*r,sin$2(a)*r];};arc.innerRadius=function(_){return arguments.length?((innerRadius=typeof _==="function"?_:constant$11(+_)),arc):innerRadius;};arc.outerRadius=function(_){return arguments.length?((outerRadius=typeof _==="function"?_:constant$11(+_)),arc):outerRadius;};arc.cornerRadius=function(_){return arguments.length?((cornerRadius=typeof _==="function"?_:constant$11(+_)),arc):cornerRadius;};arc.padRadius=function(_){return arguments.length?((padRadius=_==null?null:typeof _==="function"?_:constant$11(+_)),arc):padRadius;};arc.startAngle=function(_){return arguments.length?((startAngle=typeof _==="function"?_:constant$11(+_)),arc):startAngle;};arc.endAngle=function(_){return arguments.length?((endAngle=typeof _==="function"?_:constant$11(+_)),arc):endAngle;};arc.padAngle=function(_){return arguments.length?((padAngle=typeof _==="function"?_:constant$11(+_)),arc):padAngle;};arc.context=function(_){return arguments.length?((context=_==null?null:_),arc):context;};return arc;}
function Linear(context){this._context=context;}
Linear.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._point=0;},lineEnd:function(){if(this._line||(this._line!==0&&this._point===1))
this._context.closePath();this._line=1-this._line;},point:function(x,y){(x=+x),(y=+y);switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:this._context.lineTo(x,y);break;}}};function curveLinear(context){return new Linear(context);}
function x$3(p){return p[0];}
function y$3(p){return p[1];}
function line(){var x$$1=x$3,y$$1=y$3,defined=constant$11(true),context=null,curve=curveLinear,output=null;function line(data){var i,n=data.length,d,defined0=false,buffer;if(context==null)output=curve((buffer=path()));for(i=0;i<=n;++i){if(!(i<n&&defined((d=data[i]),i,data))===defined0){if((defined0=!defined0))output.lineStart();else output.lineEnd();}
if(defined0)output.point(+x$$1(d,i,data),+y$$1(d,i,data));}
if(buffer)return(output=null),buffer+""||null;}
line.x=function(_){return arguments.length?((x$$1=typeof _==="function"?_:constant$11(+_)),line):x$$1;};line.y=function(_){return arguments.length?((y$$1=typeof _==="function"?_:constant$11(+_)),line):y$$1;};line.defined=function(_){return arguments.length?((defined=typeof _==="function"?_:constant$11(!!_)),line):defined;};line.curve=function(_){return arguments.length?((curve=_),context!=null&&(output=curve(context)),line):curve;};line.context=function(_){return arguments.length?(_==null?(context=output=null):(output=curve((context=_))),line):context;};return line;}
function area$3(){var x0=x$3,x1=null,y0=constant$11(0),y1=y$3,defined=constant$11(true),context=null,curve=curveLinear,output=null;function area(data){var i,j,k,n=data.length,d,defined0=false,buffer,x0z=new Array(n),y0z=new Array(n);if(context==null)output=curve((buffer=path()));for(i=0;i<=n;++i){if(!(i<n&&defined((d=data[i]),i,data))===defined0){if((defined0=!defined0)){j=i;output.areaStart();output.lineStart();}else{output.lineEnd();output.lineStart();for(k=i-1;k>=j;--k){output.point(x0z[k],y0z[k]);}
output.lineEnd();output.areaEnd();}}
if(defined0){(x0z[i]=+x0(d,i,data)),(y0z[i]=+y0(d,i,data));output.point(x1?+x1(d,i,data):x0z[i],y1?+y1(d,i,data):y0z[i]);}}
if(buffer)return(output=null),buffer+""||null;}
function arealine(){return line().defined(defined).curve(curve).context(context);}
area.x=function(_){return arguments.length?((x0=typeof _==="function"?_:constant$11(+_)),(x1=null),area):x0;};area.x0=function(_){return arguments.length?((x0=typeof _==="function"?_:constant$11(+_)),area):x0;};area.x1=function(_){return arguments.length?((x1=_==null?null:typeof _==="function"?_:constant$11(+_)),area):x1;};area.y=function(_){return arguments.length?((y0=typeof _==="function"?_:constant$11(+_)),(y1=null),area):y0;};area.y0=function(_){return arguments.length?((y0=typeof _==="function"?_:constant$11(+_)),area):y0;};area.y1=function(_){return arguments.length?((y1=_==null?null:typeof _==="function"?_:constant$11(+_)),area):y1;};area.lineX0=area.lineY0=function(){return arealine().x(x0).y(y0);};area.lineY1=function(){return arealine().x(x0).y(y1);};area.lineX1=function(){return arealine().x(x1).y(y0);};area.defined=function(_){return arguments.length?((defined=typeof _==="function"?_:constant$11(!!_)),area):defined;};area.curve=function(_){return arguments.length?((curve=_),context!=null&&(output=curve(context)),area):curve;};area.context=function(_){return arguments.length?(_==null?(context=output=null):(output=curve((context=_))),area):context;};return area;}
function descending$1(a,b){return b<a?-1:b>a?1:b>=a?0:NaN;}
function identity$7(d){return d;}
function pie(){var value=identity$7,sortValues=descending$1,sort=null,startAngle=constant$11(0),endAngle=constant$11(tau$4),padAngle=constant$11(0);function pie(data){var i,n=data.length,j,k,sum=0,index=new Array(n),arcs=new Array(n),a0=+startAngle.apply(this,arguments),da=Math.min(tau$4,Math.max(-tau$4,endAngle.apply(this,arguments)-a0)),a1,p=Math.min(Math.abs(da)/n,padAngle.apply(this,arguments)),pa=p*(da<0?-1:1),v;for(i=0;i<n;++i){if((v=arcs[(index[i]=i)]=+value(data[i],i,data))>0){sum+=v;}}
if(sortValues!=null)
index.sort(function(i,j){return sortValues(arcs[i],arcs[j]);});else if(sort!=null)
index.sort(function(i,j){return sort(data[i],data[j]);});for(i=0,k=sum?(da-n*pa)/sum:0;i<n;++i,a0=a1){(j=index[i]),(v=arcs[j]),(a1=a0+(v>0?v*k:0)+pa),(arcs[j]={data:data[j],index:i,value:v,startAngle:a0,endAngle:a1,padAngle:p});}
return arcs;}
pie.value=function(_){return arguments.length?((value=typeof _==="function"?_:constant$11(+_)),pie):value;};pie.sortValues=function(_){return arguments.length?((sortValues=_),(sort=null),pie):sortValues;};pie.sort=function(_){return arguments.length?((sort=_),(sortValues=null),pie):sort;};pie.startAngle=function(_){return arguments.length?((startAngle=typeof _==="function"?_:constant$11(+_)),pie):startAngle;};pie.endAngle=function(_){return arguments.length?((endAngle=typeof _==="function"?_:constant$11(+_)),pie):endAngle;};pie.padAngle=function(_){return arguments.length?((padAngle=typeof _==="function"?_:constant$11(+_)),pie):padAngle;};return pie;}
var curveRadialLinear=curveRadial(curveLinear);function Radial(curve){this._curve=curve;}
Radial.prototype={areaStart:function(){this._curve.areaStart();},areaEnd:function(){this._curve.areaEnd();},lineStart:function(){this._curve.lineStart();},lineEnd:function(){this._curve.lineEnd();},point:function(a,r){this._curve.point(r*Math.sin(a),r*-Math.cos(a));}};function curveRadial(curve){function radial(context){return new Radial(curve(context));}
radial._curve=curve;return radial;}
function lineRadial(l){var c=l.curve;(l.angle=l.x),delete l.x;(l.radius=l.y),delete l.y;l.curve=function(_){return arguments.length?c(curveRadial(_)):c()._curve;};return l;}
function lineRadial$1(){return lineRadial(line().curve(curveRadialLinear));}
function areaRadial(){var a=area$3().curve(curveRadialLinear),c=a.curve,x0=a.lineX0,x1=a.lineX1,y0=a.lineY0,y1=a.lineY1;(a.angle=a.x),delete a.x;(a.startAngle=a.x0),delete a.x0;(a.endAngle=a.x1),delete a.x1;(a.radius=a.y),delete a.y;(a.innerRadius=a.y0),delete a.y0;(a.outerRadius=a.y1),delete a.y1;(a.lineStartAngle=function(){return lineRadial(x0());}),delete a.lineX0;(a.lineEndAngle=function(){return lineRadial(x1());}),delete a.lineX1;(a.lineInnerRadius=function(){return lineRadial(y0());}),delete a.lineY0;(a.lineOuterRadius=function(){return lineRadial(y1());}),delete a.lineY1;a.curve=function(_){return arguments.length?c(curveRadial(_)):c()._curve;};return a;}
function pointRadial(x,y){return[(y=+y)*Math.cos((x-=Math.PI/2)),y*Math.sin(x)];}
var slice$6=Array.prototype.slice;function linkSource(d){return d.source;}
function linkTarget(d){return d.target;}
function link$2(curve){var source=linkSource,target=linkTarget,x$$1=x$3,y$$1=y$3,context=null;function link(){var buffer,argv=slice$6.call(arguments),s=source.apply(this,argv),t=target.apply(this,argv);if(!context)context=buffer=path();curve(context,+x$$1.apply(this,((argv[0]=s),argv)),+y$$1.apply(this,argv),+x$$1.apply(this,((argv[0]=t),argv)),+y$$1.apply(this,argv));if(buffer)return(context=null),buffer+""||null;}
link.source=function(_){return arguments.length?((source=_),link):source;};link.target=function(_){return arguments.length?((target=_),link):target;};link.x=function(_){return arguments.length?((x$$1=typeof _==="function"?_:constant$11(+_)),link):x$$1;};link.y=function(_){return arguments.length?((y$$1=typeof _==="function"?_:constant$11(+_)),link):y$$1;};link.context=function(_){return arguments.length?((context=_==null?null:_),link):context;};return link;}
function curveHorizontal(context,x0,y0,x1,y1){context.moveTo(x0,y0);context.bezierCurveTo((x0=(x0+x1)/2),y0,x0,y1,x1,y1);}
function curveVertical(context,x0,y0,x1,y1){context.moveTo(x0,y0);context.bezierCurveTo(x0,(y0=(y0+y1)/2),x1,y0,x1,y1);}
function curveRadial$1(context,x0,y0,x1,y1){var p0=pointRadial(x0,y0),p1=pointRadial(x0,(y0=(y0+y1)/2)),p2=pointRadial(x1,y0),p3=pointRadial(x1,y1);context.moveTo(p0[0],p0[1]);context.bezierCurveTo(p1[0],p1[1],p2[0],p2[1],p3[0],p3[1]);}
function linkHorizontal(){return link$2(curveHorizontal);}
function linkVertical(){return link$2(curveVertical);}
function linkRadial(){var l=link$2(curveRadial$1);(l.angle=l.x),delete l.x;(l.radius=l.y),delete l.y;return l;}
var circle$2={draw:function(context,size){var r=Math.sqrt(size/pi$4);context.moveTo(r,0);context.arc(0,0,r,0,tau$4);}};var cross$2={draw:function(context,size){var r=Math.sqrt(size/5)/2;context.moveTo(-3*r,-r);context.lineTo(-r,-r);context.lineTo(-r,-3*r);context.lineTo(r,-3*r);context.lineTo(r,-r);context.lineTo(3*r,-r);context.lineTo(3*r,r);context.lineTo(r,r);context.lineTo(r,3*r);context.lineTo(-r,3*r);context.lineTo(-r,r);context.lineTo(-3*r,r);context.closePath();}};var tan30=Math.sqrt(1/3),tan30_2=tan30*2;var diamond={draw:function(context,size){var y=Math.sqrt(size/tan30_2),x=y*tan30;context.moveTo(0,-y);context.lineTo(x,0);context.lineTo(0,y);context.lineTo(-x,0);context.closePath();}};var ka=0.8908130915292852281,kr=Math.sin(pi$4/10)/Math.sin(7*pi$4/10),kx=Math.sin(tau$4/10)*kr,ky=-Math.cos(tau$4/10)*kr;var star={draw:function(context,size){var r=Math.sqrt(size*ka),x=kx*r,y=ky*r;context.moveTo(0,-r);context.lineTo(x,y);for(var i=1;i<5;++i){var a=tau$4*i/5,c=Math.cos(a),s=Math.sin(a);context.lineTo(s*r,-c*r);context.lineTo(c*x-s*y,s*x+c*y);}
context.closePath();}};var square={draw:function(context,size){var w=Math.sqrt(size),x=-w/2;context.rect(x,x,w,w);}};var sqrt3=Math.sqrt(3);var triangle={draw:function(context,size){var y=-Math.sqrt(size/(sqrt3*3));context.moveTo(0,y*2);context.lineTo(-sqrt3*y,-y);context.lineTo(sqrt3*y,-y);context.closePath();}};var c$2=-0.5,s=Math.sqrt(3)/2,k=1/Math.sqrt(12),a=(k/2+1)*3;var wye={draw:function(context,size){var r=Math.sqrt(size/a),x0=r/2,y0=r*k,x1=x0,y1=r*k+r,x2=-x1,y2=y1;context.moveTo(x0,y0);context.lineTo(x1,y1);context.lineTo(x2,y2);context.lineTo(c$2*x0-s*y0,s*x0+c$2*y0);context.lineTo(c$2*x1-s*y1,s*x1+c$2*y1);context.lineTo(c$2*x2-s*y2,s*x2+c$2*y2);context.lineTo(c$2*x0+s*y0,c$2*y0-s*x0);context.lineTo(c$2*x1+s*y1,c$2*y1-s*x1);context.lineTo(c$2*x2+s*y2,c$2*y2-s*x2);context.closePath();}};var symbols=[circle$2,cross$2,diamond,square,star,triangle,wye];function symbol(){var type=constant$11(circle$2),size=constant$11(64),context=null;function symbol(){var buffer;if(!context)context=buffer=path();type.apply(this,arguments).draw(context,+size.apply(this,arguments));if(buffer)return(context=null),buffer+""||null;}
symbol.type=function(_){return arguments.length?((type=typeof _==="function"?_:constant$11(_)),symbol):type;};symbol.size=function(_){return arguments.length?((size=typeof _==="function"?_:constant$11(+_)),symbol):size;};symbol.context=function(_){return arguments.length?((context=_==null?null:_),symbol):context;};return symbol;}
function noop$3(){}
function point$2(that,x,y){that._context.bezierCurveTo((2*that._x0+that._x1)/3,(2*that._y0+that._y1)/3,(that._x0+2*that._x1)/3,(that._y0+2*that._y1)/3,(that._x0+4*that._x1+x)/6,(that._y0+4*that._y1+y)/6);}
function Basis(context){this._context=context;}
Basis.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0;},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break;}
if(this._line||(this._line!==0&&this._point===1))
this._context.closePath();this._line=1-this._line;},point:function(x,y){(x=+x),(y=+y);switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3;this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,x,y);break;}
(this._x0=this._x1),(this._x1=x);(this._y0=this._y1),(this._y1=y);}};function basis$2(context){return new Basis(context);}
function BasisClosed(context){this._context=context;}
BasisClosed.prototype={areaStart:noop$3,areaEnd:noop$3,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0;},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2);this._context.closePath();break;}
case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;}
case 3:{this.point(this._x2,this._y2);this.point(this._x3,this._y3);this.point(this._x4,this._y4);break;}}},point:function(x,y){(x=+x),(y=+y);switch(this._point){case 0:this._point=1;(this._x2=x),(this._y2=y);break;case 1:this._point=2;(this._x3=x),(this._y3=y);break;case 2:this._point=3;(this._x4=x),(this._y4=y);this._context.moveTo((this._x0+4*this._x1+x)/6,(this._y0+4*this._y1+y)/6);break;default:point$2(this,x,y);break;}
(this._x0=this._x1),(this._x1=x);(this._y0=this._y1),(this._y1=y);}};function basisClosed$1(context){return new BasisClosed(context);}
function BasisOpen(context){this._context=context;}
BasisOpen.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0;},lineEnd:function(){if(this._line||(this._line!==0&&this._point===3))
this._context.closePath();this._line=1-this._line;},point:function(x,y){(x=+x),(y=+y);switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var x0=(this._x0+4*this._x1+x)/6,y0=(this._y0+4*this._y1+y)/6;this._line?this._context.lineTo(x0,y0):this._context.moveTo(x0,y0);break;case 3:this._point=4;default:point$2(this,x,y);break;}
(this._x0=this._x1),(this._x1=x);(this._y0=this._y1),(this._y1=y);}};function basisOpen(context){return new BasisOpen(context);}
function Bundle(context,beta){this._basis=new Basis(context);this._beta=beta;}
Bundle.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart();},lineEnd:function(){var x=this._x,y=this._y,j=x.length-1;if(j>0){var x0=x[0],y0=y[0],dx=x[j]-x0,dy=y[j]-y0,i=-1,t;while(++i<=j){t=i/j;this._basis.point(this._beta*x[i]+(1-this._beta)*(x0+t*dx),this._beta*y[i]+(1-this._beta)*(y0+t*dy));}}
this._x=this._y=null;this._basis.lineEnd();},point:function(x,y){this._x.push(+x);this._y.push(+y);}};var bundle=(function custom(beta){function bundle(context){return beta===1?new Basis(context):new Bundle(context,beta);}
bundle.beta=function(beta){return custom(+beta);};return bundle;})(0.85);function point$3(that,x,y){that._context.bezierCurveTo(that._x1+that._k*(that._x2-that._x0),that._y1+that._k*(that._y2-that._y0),that._x2+that._k*(that._x1-x),that._y2+that._k*(that._y1-y),that._x2,that._y2);}
function Cardinal(context,tension){this._context=context;this._k=(1-tension)/6;}
Cardinal.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0;},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$3(this,this._x1,this._y1);break;}
if(this._line||(this._line!==0&&this._point===1))
this._context.closePath();this._line=1-this._line;},point:function(x,y){(x=+x),(y=+y);switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;(this._x1=x),(this._y1=y);break;case 2:this._point=3;default:point$3(this,x,y);break;}
(this._x0=this._x1),(this._x1=this._x2),(this._x2=x);(this._y0=this._y1),(this._y1=this._y2),(this._y2=y);}};var cardinal=(function custom(tension){function cardinal(context){return new Cardinal(context,tension);}
cardinal.tension=function(tension){return custom(+tension);};return cardinal;})(0);function CardinalClosed(context,tension){this._context=context;this._k=(1-tension)/6;}
CardinalClosed.prototype={areaStart:noop$3,areaEnd:noop$3,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0;},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break;}
case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break;}
case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break;}}},point:function(x,y){(x=+x),(y=+y);switch(this._point){case 0:this._point=1;(this._x3=x),(this._y3=y);break;case 1:this._point=2;this._context.moveTo((this._x4=x),(this._y4=y));break;case 2:this._point=3;(this._x5=x),(this._y5=y);break;default:point$3(this,x,y);break;}
(this._x0=this._x1),(this._x1=this._x2),(this._x2=x);(this._y0=this._y1),(this._y1=this._y2),(this._y2=y);}};var cardinalClosed=(function custom(tension){function cardinal$$1(context){return new CardinalClosed(context,tension);}
cardinal$$1.tension=function(tension){return custom(+tension);};return cardinal$$1;})(0);function CardinalOpen(context,tension){this._context=context;this._k=(1-tension)/6;}
CardinalOpen.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0;},lineEnd:function(){if(this._line||(this._line!==0&&this._point===3))
this._context.closePath();this._line=1-this._line;},point:function(x,y){(x=+x),(y=+y);switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$3(this,x,y);break;}
(this._x0=this._x1),(this._x1=this._x2),(this._x2=x);(this._y0=this._y1),(this._y1=this._y2),(this._y2=y);}};var cardinalOpen=(function custom(tension){function cardinal$$1(context){return new CardinalOpen(context,tension);}
cardinal$$1.tension=function(tension){return custom(+tension);};return cardinal$$1;})(0);function point$4(that,x,y){var x1=that._x1,y1=that._y1,x2=that._x2,y2=that._y2;if(that._l01_a>epsilon$3){var a=2*that._l01_2a+3*that._l01_a*that._l12_a+that._l12_2a,n=3*that._l01_a*(that._l01_a+that._l12_a);x1=(x1*a-that._x0*that._l12_2a+that._x2*that._l01_2a)/n;y1=(y1*a-that._y0*that._l12_2a+that._y2*that._l01_2a)/n;}
if(that._l23_a>epsilon$3){var b=2*that._l23_2a+3*that._l23_a*that._l12_a+that._l12_2a,m=3*that._l23_a*(that._l23_a+that._l12_a);x2=(x2*b+that._x1*that._l23_2a-x*that._l12_2a)/m;y2=(y2*b+that._y1*that._l23_2a-y*that._l12_2a)/m;}
that._context.bezierCurveTo(x1,y1,x2,y2,that._x2,that._y2);}
function CatmullRom(context,alpha){this._context=context;this._alpha=alpha;}
CatmullRom.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0;},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break;}
if(this._line||(this._line!==0&&this._point===1))
this._context.closePath();this._line=1-this._line;},point:function(x,y){(x=+x),(y=+y);if(this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt((this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha)));}
switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3;default:point$4(this,x,y);break;}
(this._l01_a=this._l12_a),(this._l12_a=this._l23_a);(this._l01_2a=this._l12_2a),(this._l12_2a=this._l23_2a);(this._x0=this._x1),(this._x1=this._x2),(this._x2=x);(this._y0=this._y1),(this._y1=this._y2),(this._y2=y);}};var catmullRom=(function custom(alpha){function catmullRom(context){return alpha?new CatmullRom(context,alpha):new Cardinal(context,0);}
catmullRom.alpha=function(alpha){return custom(+alpha);};return catmullRom;})(0.5);function CatmullRomClosed(context,alpha){this._context=context;this._alpha=alpha;}
CatmullRomClosed.prototype={areaStart:noop$3,areaEnd:noop$3,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0;},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break;}
case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break;}
case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break;}}},point:function(x,y){(x=+x),(y=+y);if(this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt((this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha)));}
switch(this._point){case 0:this._point=1;(this._x3=x),(this._y3=y);break;case 1:this._point=2;this._context.moveTo((this._x4=x),(this._y4=y));break;case 2:this._point=3;(this._x5=x),(this._y5=y);break;default:point$4(this,x,y);break;}
(this._l01_a=this._l12_a),(this._l12_a=this._l23_a);(this._l01_2a=this._l12_2a),(this._l12_2a=this._l23_2a);(this._x0=this._x1),(this._x1=this._x2),(this._x2=x);(this._y0=this._y1),(this._y1=this._y2),(this._y2=y);}};var catmullRomClosed=(function custom(alpha){function catmullRom$$1(context){return alpha?new CatmullRomClosed(context,alpha):new CardinalClosed(context,0);}
catmullRom$$1.alpha=function(alpha){return custom(+alpha);};return catmullRom$$1;})(0.5);function CatmullRomOpen(context,alpha){this._context=context;this._alpha=alpha;}
CatmullRomOpen.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0;},lineEnd:function(){if(this._line||(this._line!==0&&this._point===3))
this._context.closePath();this._line=1-this._line;},point:function(x,y){(x=+x),(y=+y);if(this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt((this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha)));}
switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$4(this,x,y);break;}
(this._l01_a=this._l12_a),(this._l12_a=this._l23_a);(this._l01_2a=this._l12_2a),(this._l12_2a=this._l23_2a);(this._x0=this._x1),(this._x1=this._x2),(this._x2=x);(this._y0=this._y1),(this._y1=this._y2),(this._y2=y);}};var catmullRomOpen=(function custom(alpha){function catmullRom$$1(context){return alpha?new CatmullRomOpen(context,alpha):new CardinalOpen(context,0);}
catmullRom$$1.alpha=function(alpha){return custom(+alpha);};return catmullRom$$1;})(0.5);function LinearClosed(context){this._context=context;}
LinearClosed.prototype={areaStart:noop$3,areaEnd:noop$3,lineStart:function(){this._point=0;},lineEnd:function(){if(this._point)this._context.closePath();},point:function(x,y){(x=+x),(y=+y);if(this._point)this._context.lineTo(x,y);else(this._point=1),this._context.moveTo(x,y);}};function linearClosed(context){return new LinearClosed(context);}
function sign$1(x){return x<0?-1:1;}
function slope3(that,x2,y2){var h0=that._x1-that._x0,h1=x2-that._x1,s0=(that._y1-that._y0)/(h0||(h1<0&&-0)),s1=(y2-that._y1)/(h1||(h0<0&&-0)),p=(s0*h1+s1*h0)/(h0+h1);return((sign$1(s0)+sign$1(s1))*Math.min(Math.abs(s0),Math.abs(s1),0.5*Math.abs(p))||0);}
function slope2(that,t){var h=that._x1-that._x0;return h?(3*(that._y1-that._y0)/h-t)/2:t;}
function point$5(that,t0,t1){var x0=that._x0,y0=that._y0,x1=that._x1,y1=that._y1,dx=(x1-x0)/3;that._context.bezierCurveTo(x0+dx,y0+dx*t0,x1-dx,y1-dx*t1,x1,y1);}
function MonotoneX(context){this._context=context;}
MonotoneX.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0;},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$5(this,this._t0,slope2(this,this._t0));break;}
if(this._line||(this._line!==0&&this._point===1))
this._context.closePath();this._line=1-this._line;},point:function(x,y){var t1=NaN;(x=+x),(y=+y);if(x===this._x1&&y===this._y1)return;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3;point$5(this,slope2(this,(t1=slope3(this,x,y))),t1);break;default:point$5(this,this._t0,(t1=slope3(this,x,y)));break;}
(this._x0=this._x1),(this._x1=x);(this._y0=this._y1),(this._y1=y);this._t0=t1;}};function MonotoneY(context){this._context=new ReflectContext(context);}
(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(x,y){MonotoneX.prototype.point.call(this,y,x);};function ReflectContext(context){this._context=context;}
ReflectContext.prototype={moveTo:function(x,y){this._context.moveTo(y,x);},closePath:function(){this._context.closePath();},lineTo:function(x,y){this._context.lineTo(y,x);},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._context.bezierCurveTo(y1,x1,y2,x2,y,x);}};function monotoneX(context){return new MonotoneX(context);}
function monotoneY(context){return new MonotoneY(context);}
function Natural(context){this._context=context;}
Natural.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x=[];this._y=[];},lineEnd:function(){var x=this._x,y=this._y,n=x.length;if(n){this._line?this._context.lineTo(x[0],y[0]):this._context.moveTo(x[0],y[0]);if(n===2){this._context.lineTo(x[1],y[1]);}else{var px=controlPoints(x),py=controlPoints(y);for(var i0=0,i1=1;i1<n;++i0,++i1){this._context.bezierCurveTo(px[0][i0],py[0][i0],px[1][i0],py[1][i0],x[i1],y[i1]);}}}
if(this._line||(this._line!==0&&n===1))
this._context.closePath();this._line=1-this._line;this._x=this._y=null;},point:function(x,y){this._x.push(+x);this._y.push(+y);}};function controlPoints(x){var i,n=x.length-1,m,a=new Array(n),b=new Array(n),r=new Array(n);(a[0]=0),(b[0]=2),(r[0]=x[0]+2*x[1]);for(i=1;i<n-1;++i)
(a[i]=1),(b[i]=4),(r[i]=4*x[i]+2*x[i+1]);(a[n-1]=2),(b[n-1]=7),(r[n-1]=8*x[n-1]+x[n]);for(i=1;i<n;++i)
(m=a[i]/b[i-1]),(b[i]-=m),(r[i]-=m*r[i-1]);a[n-1]=r[n-1]/b[n-1];for(i=n-2;i>=0;--i)a[i]=(r[i]-a[i+1])/b[i];b[n-1]=(x[n]+a[n-1])/2;for(i=0;i<n-1;++i)b[i]=2*x[i+1]-a[i+1];return[a,b];}
function natural(context){return new Natural(context);}
function Step(context,t){this._context=context;this._t=t;}
Step.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x=this._y=NaN;this._point=0;},lineEnd:function(){if(0<this._t&&this._t<1&&this._point===2)
this._context.lineTo(this._x,this._y);if(this._line||(this._line!==0&&this._point===1))
this._context.closePath();if(this._line>=0)
(this._t=1-this._t),(this._line=1-this._line);},point:function(x,y){(x=+x),(y=+y);switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:{if(this._t<=0){this._context.lineTo(this._x,y);this._context.lineTo(x,y);}else{var x1=this._x*(1-this._t)+x*this._t;this._context.lineTo(x1,this._y);this._context.lineTo(x1,y);}
break;}}
(this._x=x),(this._y=y);}};function step(context){return new Step(context,0.5);}
function stepBefore(context){return new Step(context,0);}
function stepAfter(context){return new Step(context,1);}
function none$1(series,order){if(!((n=series.length)>1))return;for(var i=1,j,s0,s1=series[order[0]],n,m=s1.length;i<n;++i){(s0=s1),(s1=series[order[i]]);for(j=0;j<m;++j){s1[j][1]+=s1[j][0]=isNaN(s0[j][1])?s0[j][0]:s0[j][1];}}}
function none$2(series){var n=series.length,o=new Array(n);while(--n>=0)o[n]=n;return o;}
function stackValue(d,key){return d[key];}
function stack(){var keys=constant$11([]),order=none$2,offset=none$1,value=stackValue;function stack(data){var kz=keys.apply(this,arguments),i,m=data.length,n=kz.length,sz=new Array(n),oz;for(i=0;i<n;++i){for(var ki=kz[i],si=(sz[i]=new Array(m)),j=0,sij;j<m;++j){si[j]=sij=[0,+value(data[j],ki,j,data)];sij.data=data[j];}
si.key=ki;}
for(i=0,oz=order(sz);i<n;++i){sz[oz[i]].index=i;}
offset(sz,oz);return sz;}
stack.keys=function(_){return arguments.length?((keys=typeof _==="function"?_:constant$11(slice$6.call(_))),stack):keys;};stack.value=function(_){return arguments.length?((value=typeof _==="function"?_:constant$11(+_)),stack):value;};stack.order=function(_){return arguments.length?((order=_==null?none$2:typeof _==="function"?_:constant$11(slice$6.call(_))),stack):order;};stack.offset=function(_){return arguments.length?((offset=_==null?none$1:_),stack):offset;};return stack;}
function expand(series,order){if(!((n=series.length)>0))return;for(var i,n,j=0,m=series[0].length,y;j<m;++j){for(y=i=0;i<n;++i)y+=series[i][j][1]||0;if(y)for(i=0;i<n;++i)series[i][j][1]/=y;}
none$1(series,order);}
function diverging(series,order){if(!((n=series.length)>1))return;for(var i,j=0,d,dy,yp,yn,n,m=series[order[0]].length;j<m;++j){for(yp=yn=0,i=0;i<n;++i){if((dy=(d=series[order[i]][j])[1]-d[0])>=0){(d[0]=yp),(d[1]=yp+=dy);}else if(dy<0){(d[1]=yn),(d[0]=yn+=dy);}else{d[0]=yp;}}}}
function silhouette(series,order){if(!((n=series.length)>0))return;for(var j=0,s0=series[order[0]],n,m=s0.length;j<m;++j){for(var i=0,y=0;i<n;++i)y+=series[i][j][1]||0;s0[j][1]+=s0[j][0]=-y/2;}
none$1(series,order);}
function wiggle(series,order){if(!((n=series.length)>0)||!((m=(s0=series[order[0]]).length)>0))
return;for(var y=0,j=1,s0,m,n;j<m;++j){for(var i=0,s1=0,s2=0;i<n;++i){var si=series[order[i]],sij0=si[j][1]||0,sij1=si[j-1][1]||0,s3=(sij0-sij1)/2;for(var k=0;k<i;++k){var sk=series[order[k]],skj0=sk[j][1]||0,skj1=sk[j-1][1]||0;s3+=skj0-skj1;}
(s1+=sij0),(s2+=s3*sij0);}
s0[j-1][1]+=s0[j-1][0]=y;if(s1)y-=s2/s1;}
s0[j-1][1]+=s0[j-1][0]=y;none$1(series,order);}
function ascending$3(series){var sums=series.map(sum$2);return none$2(series).sort(function(a,b){return sums[a]-sums[b];});}
function sum$2(series){var s=0,i=-1,n=series.length,v;while(++i<n)if((v=+series[i][1]))s+=v;return s;}
function descending$2(series){return ascending$3(series).reverse();}
function insideOut(series){var n=series.length,i,j,sums=series.map(sum$2),order=none$2(series).sort(function(a,b){return sums[b]-sums[a];}),top=0,bottom=0,tops=[],bottoms=[];for(i=0;i<n;++i){j=order[i];if(top<bottom){top+=sums[j];tops.push(j);}else{bottom+=sums[j];bottoms.push(j);}}
return bottoms.reverse().concat(tops);}
function reverse(series){return none$2(series).reverse();}
function constant$12(x){return function(){return x;};}
function x$4(d){return d[0];}
function y$4(d){return d[1];}
function RedBlackTree(){this._=null;}
function RedBlackNode(node){node.U=node.C=node.L=node.R=node.P=node.N=null;}
RedBlackTree.prototype={constructor:RedBlackTree,insert:function(after,node){var parent,grandpa,uncle;if(after){node.P=after;node.N=after.N;if(after.N)after.N.P=node;after.N=node;if(after.R){after=after.R;while(after.L)after=after.L;after.L=node;}else{after.R=node;}
parent=after;}else if(this._){after=RedBlackFirst(this._);node.P=null;node.N=after;after.P=after.L=node;parent=after;}else{node.P=node.N=null;this._=node;parent=null;}
node.L=node.R=null;node.U=parent;node.C=true;after=node;while(parent&&parent.C){grandpa=parent.U;if(parent===grandpa.L){uncle=grandpa.R;if(uncle&&uncle.C){parent.C=uncle.C=false;grandpa.C=true;after=grandpa;}else{if(after===parent.R){RedBlackRotateLeft(this,parent);after=parent;parent=after.U;}
parent.C=false;grandpa.C=true;RedBlackRotateRight(this,grandpa);}}else{uncle=grandpa.L;if(uncle&&uncle.C){parent.C=uncle.C=false;grandpa.C=true;after=grandpa;}else{if(after===parent.L){RedBlackRotateRight(this,parent);after=parent;parent=after.U;}
parent.C=false;grandpa.C=true;RedBlackRotateLeft(this,grandpa);}}
parent=after.U;}
this._.C=false;},remove:function(node){if(node.N)node.N.P=node.P;if(node.P)node.P.N=node.N;node.N=node.P=null;var parent=node.U,sibling,left=node.L,right=node.R,next,red;if(!left)next=right;else if(!right)next=left;else next=RedBlackFirst(right);if(parent){if(parent.L===node)parent.L=next;else parent.R=next;}else{this._=next;}
if(left&&right){red=next.C;next.C=node.C;next.L=left;left.U=next;if(next!==right){parent=next.U;next.U=node.U;node=next.R;parent.L=node;next.R=right;right.U=next;}else{next.U=parent;parent=next;node=next.R;}}else{red=node.C;node=next;}
if(node)node.U=parent;if(red)return;if(node&&node.C){node.C=false;return;}
do{if(node===this._)break;if(node===parent.L){sibling=parent.R;if(sibling.C){sibling.C=false;parent.C=true;RedBlackRotateLeft(this,parent);sibling=parent.R;}
if((sibling.L&&sibling.L.C)||(sibling.R&&sibling.R.C)){if(!sibling.R||!sibling.R.C){sibling.L.C=false;sibling.C=true;RedBlackRotateRight(this,sibling);sibling=parent.R;}
sibling.C=parent.C;parent.C=sibling.R.C=false;RedBlackRotateLeft(this,parent);node=this._;break;}}else{sibling=parent.L;if(sibling.C){sibling.C=false;parent.C=true;RedBlackRotateRight(this,parent);sibling=parent.L;}
if((sibling.L&&sibling.L.C)||(sibling.R&&sibling.R.C)){if(!sibling.L||!sibling.L.C){sibling.R.C=false;sibling.C=true;RedBlackRotateLeft(this,sibling);sibling=parent.L;}
sibling.C=parent.C;parent.C=sibling.L.C=false;RedBlackRotateRight(this,parent);node=this._;break;}}
sibling.C=true;node=parent;parent=parent.U;}while(!node.C);if(node)node.C=false;}};function RedBlackRotateLeft(tree,node){var p=node,q=node.R,parent=p.U;if(parent){if(parent.L===p)parent.L=q;else parent.R=q;}else{tree._=q;}
q.U=parent;p.U=q;p.R=q.L;if(p.R)p.R.U=p;q.L=p;}
function RedBlackRotateRight(tree,node){var p=node,q=node.L,parent=p.U;if(parent){if(parent.L===p)parent.L=q;else parent.R=q;}else{tree._=q;}
q.U=parent;p.U=q;p.L=q.R;if(p.L)p.L.U=p;q.R=p;}
function RedBlackFirst(node){while(node.L)node=node.L;return node;}
function createEdge(left,right,v0,v1){var edge=[null,null],index=edges.push(edge)-1;edge.left=left;edge.right=right;if(v0)setEdgeEnd(edge,left,right,v0);if(v1)setEdgeEnd(edge,right,left,v1);cells[left.index].halfedges.push(index);cells[right.index].halfedges.push(index);return edge;}
function createBorderEdge(left,v0,v1){var edge=[v0,v1];edge.left=left;return edge;}
function setEdgeEnd(edge,left,right,vertex){if(!edge[0]&&!edge[1]){edge[0]=vertex;edge.left=left;edge.right=right;}else if(edge.left===right){edge[1]=vertex;}else{edge[0]=vertex;}}
function clipEdge(edge,x0,y0,x1,y1){var a=edge[0],b=edge[1],ax=a[0],ay=a[1],bx=b[0],by=b[1],t0=0,t1=1,dx=bx-ax,dy=by-ay,r;r=x0-ax;if(!dx&&r>0)return;r/=dx;if(dx<0){if(r<t0)return;if(r<t1)t1=r;}else if(dx>0){if(r>t1)return;if(r>t0)t0=r;}
r=x1-ax;if(!dx&&r<0)return;r/=dx;if(dx<0){if(r>t1)return;if(r>t0)t0=r;}else if(dx>0){if(r<t0)return;if(r<t1)t1=r;}
r=y0-ay;if(!dy&&r>0)return;r/=dy;if(dy<0){if(r<t0)return;if(r<t1)t1=r;}else if(dy>0){if(r>t1)return;if(r>t0)t0=r;}
r=y1-ay;if(!dy&&r<0)return;r/=dy;if(dy<0){if(r>t1)return;if(r>t0)t0=r;}else if(dy>0){if(r<t0)return;if(r<t1)t1=r;}
if(!(t0>0)&&!(t1<1))return true;if(t0>0)edge[0]=[ax+t0*dx,ay+t0*dy];if(t1<1)edge[1]=[ax+t1*dx,ay+t1*dy];return true;}
function connectEdge(edge,x0,y0,x1,y1){var v1=edge[1];if(v1)return true;var v0=edge[0],left=edge.left,right=edge.right,lx=left[0],ly=left[1],rx=right[0],ry=right[1],fx=(lx+rx)/2,fy=(ly+ry)/2,fm,fb;if(ry===ly){if(fx<x0||fx>=x1)return;if(lx>rx){if(!v0)v0=[fx,y0];else if(v0[1]>=y1)return;v1=[fx,y1];}else{if(!v0)v0=[fx,y1];else if(v0[1]<y0)return;v1=[fx,y0];}}else{fm=(lx-rx)/(ry-ly);fb=fy-fm*fx;if(fm<-1||fm>1){if(lx>rx){if(!v0)v0=[(y0-fb)/fm,y0];else if(v0[1]>=y1)return;v1=[(y1-fb)/fm,y1];}else{if(!v0)v0=[(y1-fb)/fm,y1];else if(v0[1]<y0)return;v1=[(y0-fb)/fm,y0];}}else{if(ly<ry){if(!v0)v0=[x0,fm*x0+fb];else if(v0[0]>=x1)return;v1=[x1,fm*x1+fb];}else{if(!v0)v0=[x1,fm*x1+fb];else if(v0[0]<x0)return;v1=[x0,fm*x0+fb];}}}
edge[0]=v0;edge[1]=v1;return true;}
function clipEdges(x0,y0,x1,y1){var i=edges.length,edge;while(i--){if(!connectEdge((edge=edges[i]),x0,y0,x1,y1)||!clipEdge(edge,x0,y0,x1,y1)||!(Math.abs(edge[0][0]-edge[1][0])>epsilon$4||Math.abs(edge[0][1]-edge[1][1])>epsilon$4)){delete edges[i];}}}
function createCell(site){return(cells[site.index]={site:site,halfedges:[]});}
function cellHalfedgeAngle(cell,edge){var site=cell.site,va=edge.left,vb=edge.right;if(site===vb)(vb=va),(va=site);if(vb)return Math.atan2(vb[1]-va[1],vb[0]-va[0]);if(site===va)(va=edge[1]),(vb=edge[0]);else(va=edge[0]),(vb=edge[1]);return Math.atan2(va[0]-vb[0],vb[1]-va[1]);}
function cellHalfedgeStart(cell,edge){return edge[+(edge.left!==cell.site)];}
function cellHalfedgeEnd(cell,edge){return edge[+(edge.left===cell.site)];}
function sortCellHalfedges(){for(var i=0,n=cells.length,cell,halfedges,j,m;i<n;++i){if((cell=cells[i])&&(m=(halfedges=cell.halfedges).length)){var index=new Array(m),array=new Array(m);for(j=0;j<m;++j)
(index[j]=j),(array[j]=cellHalfedgeAngle(cell,edges[halfedges[j]]));index.sort(function(i,j){return array[j]-array[i];});for(j=0;j<m;++j)array[j]=halfedges[index[j]];for(j=0;j<m;++j)halfedges[j]=array[j];}}}
function clipCells(x0,y0,x1,y1){var nCells=cells.length,iCell,cell,site,iHalfedge,halfedges,nHalfedges,start,startX,startY,end,endX,endY,cover=true;for(iCell=0;iCell<nCells;++iCell){if((cell=cells[iCell])){site=cell.site;halfedges=cell.halfedges;iHalfedge=halfedges.length;while(iHalfedge--){if(!edges[halfedges[iHalfedge]]){halfedges.splice(iHalfedge,1);}}
(iHalfedge=0),(nHalfedges=halfedges.length);while(iHalfedge<nHalfedges){(end=cellHalfedgeEnd(cell,edges[halfedges[iHalfedge]])),(endX=end[0]),(endY=end[1]);(start=cellHalfedgeStart(cell,edges[halfedges[++iHalfedge%nHalfedges]])),(startX=start[0]),(startY=start[1]);if(Math.abs(endX-startX)>epsilon$4||Math.abs(endY-startY)>epsilon$4){halfedges.splice(iHalfedge,0,edges.push(createBorderEdge(site,end,Math.abs(endX-x0)<epsilon$4&&y1-endY>epsilon$4?[x0,Math.abs(startX-x0)<epsilon$4?startY:y1]:Math.abs(endY-y1)<epsilon$4&&x1-endX>epsilon$4?[Math.abs(startY-y1)<epsilon$4?startX:x1,y1]:Math.abs(endX-x1)<epsilon$4&&endY-y0>epsilon$4?[x1,Math.abs(startX-x1)<epsilon$4?startY:y0]:Math.abs(endY-y0)<epsilon$4&&endX-x0>epsilon$4?[Math.abs(startY-y0)<epsilon$4?startX:x0,y0]:null))-1);++nHalfedges;}}
if(nHalfedges)cover=false;}}
if(cover){var dx,dy,d2,dc=Infinity;for(iCell=0,cover=null;iCell<nCells;++iCell){if((cell=cells[iCell])){site=cell.site;dx=site[0]-x0;dy=site[1]-y0;d2=dx*dx+dy*dy;if(d2<dc)(dc=d2),(cover=cell);}}
if(cover){var v00=[x0,y0],v01=[x0,y1],v11=[x1,y1],v10=[x1,y0];cover.halfedges.push(edges.push(createBorderEdge((site=cover.site),v00,v01))-1,edges.push(createBorderEdge(site,v01,v11))-1,edges.push(createBorderEdge(site,v11,v10))-1,edges.push(createBorderEdge(site,v10,v00))-1);}}
for(iCell=0;iCell<nCells;++iCell){if((cell=cells[iCell])){if(!cell.halfedges.length){delete cells[iCell];}}}}
var circlePool=[];var firstCircle;function Circle(){RedBlackNode(this);this.x=this.y=this.arc=this.site=this.cy=null;}
function attachCircle(arc){var lArc=arc.P,rArc=arc.N;if(!lArc||!rArc)return;var lSite=lArc.site,cSite=arc.site,rSite=rArc.site;if(lSite===rSite)return;var bx=cSite[0],by=cSite[1],ax=lSite[0]-bx,ay=lSite[1]-by,cx=rSite[0]-bx,cy=rSite[1]-by;var d=2*(ax*cy-ay*cx);if(d>=-epsilon2$2)return;var ha=ax*ax+ay*ay,hc=cx*cx+cy*cy,x=(cy*ha-ay*hc)/d,y=(ax*hc-cx*ha)/d;var circle=circlePool.pop()||new Circle();circle.arc=arc;circle.site=cSite;circle.x=x+bx;circle.y=(circle.cy=y+by)+Math.sqrt(x*x+y*y);arc.circle=circle;var before=null,node=circles._;while(node){if(circle.y<node.y||(circle.y===node.y&&circle.x<=node.x)){if(node.L)node=node.L;else{before=node.P;break;}}else{if(node.R)node=node.R;else{before=node;break;}}}
circles.insert(before,circle);if(!before)firstCircle=circle;}
function detachCircle(arc){var circle=arc.circle;if(circle){if(!circle.P)firstCircle=circle.N;circles.remove(circle);circlePool.push(circle);RedBlackNode(circle);arc.circle=null;}}
var beachPool=[];function Beach(){RedBlackNode(this);this.edge=this.site=this.circle=null;}
function createBeach(site){var beach=beachPool.pop()||new Beach();beach.site=site;return beach;}
function detachBeach(beach){detachCircle(beach);beaches.remove(beach);beachPool.push(beach);RedBlackNode(beach);}
function removeBeach(beach){var circle=beach.circle,x=circle.x,y=circle.cy,vertex=[x,y],previous=beach.P,next=beach.N,disappearing=[beach];detachBeach(beach);var lArc=previous;while(lArc.circle&&Math.abs(x-lArc.circle.x)<epsilon$4&&Math.abs(y-lArc.circle.cy)<epsilon$4){previous=lArc.P;disappearing.unshift(lArc);detachBeach(lArc);lArc=previous;}
disappearing.unshift(lArc);detachCircle(lArc);var rArc=next;while(rArc.circle&&Math.abs(x-rArc.circle.x)<epsilon$4&&Math.abs(y-rArc.circle.cy)<epsilon$4){next=rArc.N;disappearing.push(rArc);detachBeach(rArc);rArc=next;}
disappearing.push(rArc);detachCircle(rArc);var nArcs=disappearing.length,iArc;for(iArc=1;iArc<nArcs;++iArc){rArc=disappearing[iArc];lArc=disappearing[iArc-1];setEdgeEnd(rArc.edge,lArc.site,rArc.site,vertex);}
lArc=disappearing[0];rArc=disappearing[nArcs-1];rArc.edge=createEdge(lArc.site,rArc.site,null,vertex);attachCircle(lArc);attachCircle(rArc);}
function addBeach(site){var x=site[0],directrix=site[1],lArc,rArc,dxl,dxr,node=beaches._;while(node){dxl=leftBreakPoint(node,directrix)-x;if(dxl>epsilon$4)node=node.L;else{dxr=x-rightBreakPoint(node,directrix);if(dxr>epsilon$4){if(!node.R){lArc=node;break;}
node=node.R;}else{if(dxl>-epsilon$4){lArc=node.P;rArc=node;}else if(dxr>-epsilon$4){lArc=node;rArc=node.N;}else{lArc=rArc=node;}
break;}}}
createCell(site);var newArc=createBeach(site);beaches.insert(lArc,newArc);if(!lArc&&!rArc)return;if(lArc===rArc){detachCircle(lArc);rArc=createBeach(lArc.site);beaches.insert(newArc,rArc);newArc.edge=rArc.edge=createEdge(lArc.site,newArc.site);attachCircle(lArc);attachCircle(rArc);return;}
if(!rArc){newArc.edge=createEdge(lArc.site,newArc.site);return;}
detachCircle(lArc);detachCircle(rArc);var lSite=lArc.site,ax=lSite[0],ay=lSite[1],bx=site[0]-ax,by=site[1]-ay,rSite=rArc.site,cx=rSite[0]-ax,cy=rSite[1]-ay,d=2*(bx*cy-by*cx),hb=bx*bx+by*by,hc=cx*cx+cy*cy,vertex=[(cy*hb-by*hc)/d+ax,(bx*hc-cx*hb)/d+ay];setEdgeEnd(rArc.edge,lSite,rSite,vertex);newArc.edge=createEdge(lSite,site,null,vertex);rArc.edge=createEdge(site,rSite,null,vertex);attachCircle(lArc);attachCircle(rArc);}
function leftBreakPoint(arc,directrix){var site=arc.site,rfocx=site[0],rfocy=site[1],pby2=rfocy-directrix;if(!pby2)return rfocx;var lArc=arc.P;if(!lArc)return-Infinity;site=lArc.site;var lfocx=site[0],lfocy=site[1],plby2=lfocy-directrix;if(!plby2)return lfocx;var hl=lfocx-rfocx,aby2=1/pby2-1/plby2,b=hl/plby2;if(aby2)
return((-b+
Math.sqrt(b*b-
2*aby2*(hl*hl/(-2*plby2)-lfocy+plby2/2+rfocy-pby2/2)))/aby2+
rfocx);return(rfocx+lfocx)/2;}
function rightBreakPoint(arc,directrix){var rArc=arc.N;if(rArc)return leftBreakPoint(rArc,directrix);var site=arc.site;return site[1]===directrix?site[0]:Infinity;}
var epsilon$4=1e-6;var epsilon2$2=1e-12;var beaches;var cells;var circles;var edges;function triangleArea(a,b,c){return(a[0]-c[0])*(b[1]-a[1])-(a[0]-b[0])*(c[1]-a[1]);}
function lexicographic(a,b){return b[1]-a[1]||b[0]-a[0];}
function Diagram(sites,extent){var site=sites.sort(lexicographic).pop(),x,y,circle;edges=[];cells=new Array(sites.length);beaches=new RedBlackTree();circles=new RedBlackTree();while(true){circle=firstCircle;if(site&&(!circle||site[1]<circle.y||(site[1]===circle.y&&site[0]<circle.x))){if(site[0]!==x||site[1]!==y){addBeach(site);(x=site[0]),(y=site[1]);}
site=sites.pop();}else if(circle){removeBeach(circle.arc);}else{break;}}
sortCellHalfedges();if(extent){var x0=+extent[0][0],y0=+extent[0][1],x1=+extent[1][0],y1=+extent[1][1];clipEdges(x0,y0,x1,y1);clipCells(x0,y0,x1,y1);}
this.edges=edges;this.cells=cells;beaches=circles=edges=cells=null;}
Diagram.prototype={constructor:Diagram,polygons:function(){var edges=this.edges;return this.cells.map(function(cell){var polygon=cell.halfedges.map(function(i){return cellHalfedgeStart(cell,edges[i]);});polygon.data=cell.site.data;return polygon;});},triangles:function(){var triangles=[],edges=this.edges;this.cells.forEach(function(cell,i){if(!(m=(halfedges=cell.halfedges).length))return;var site=cell.site,halfedges,j=-1,m,s0,e1=edges[halfedges[m-1]],s1=e1.left===site?e1.right:e1.left;while(++j<m){s0=s1;e1=edges[halfedges[j]];s1=e1.left===site?e1.right:e1.left;if(s0&&s1&&i<s0.index&&i<s1.index&&triangleArea(site,s0,s1)<0){triangles.push([site.data,s0.data,s1.data]);}}});return triangles;},links:function(){return this.edges.filter(function(edge){return edge.right;}).map(function(edge){return{source:edge.left.data,target:edge.right.data};});},find:function(x,y,radius){var that=this,i0,i1=that._found||0,n=that.cells.length,cell;while(!(cell=that.cells[i1]))if(++i1>=n)return null;var dx=x-cell.site[0],dy=y-cell.site[1],d2=dx*dx+dy*dy;do{(cell=that.cells[(i0=i1)]),(i1=null);cell.halfedges.forEach(function(e){var edge=that.edges[e],v=edge.left;if((v===cell.site||!v)&&!(v=edge.right))return;var vx=x-v[0],vy=y-v[1],v2=vx*vx+vy*vy;if(v2<d2)(d2=v2),(i1=v.index);});}while(i1!==null);that._found=i0;return radius==null||d2<=radius*radius?cell.site:null;}};function voronoi(){var x$$1=x$4,y$$1=y$4,extent=null;function voronoi(data){return new Diagram(data.map(function(d,i){var s=[Math.round(x$$1(d,i,data)/epsilon$4)*epsilon$4,Math.round(y$$1(d,i,data)/epsilon$4)*epsilon$4];s.index=i;s.data=d;return s;}),extent);}
voronoi.polygons=function(data){return voronoi(data).polygons();};voronoi.links=function(data){return voronoi(data).links();};voronoi.triangles=function(data){return voronoi(data).triangles();};voronoi.x=function(_){return arguments.length?((x$$1=typeof _==="function"?_:constant$12(+_)),voronoi):x$$1;};voronoi.y=function(_){return arguments.length?((y$$1=typeof _==="function"?_:constant$12(+_)),voronoi):y$$1;};voronoi.extent=function(_){return arguments.length?((extent=_==null?null:[[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),voronoi):extent&&[[extent[0][0],extent[0][1]],[extent[1][0],extent[1][1]]];};voronoi.size=function(_){return arguments.length?((extent=_==null?null:[[0,0],[+_[0],+_[1]]]),voronoi):extent&&[extent[1][0]-extent[0][0],extent[1][1]-extent[0][1]];};return voronoi;}
function constant$13(x){return function(){return x;};}
function ZoomEvent(target,type,transform){this.target=target;this.type=type;this.transform=transform;}
function Transform(k,x,y){this.k=k;this.x=x;this.y=y;}
Transform.prototype={constructor:Transform,scale:function(k){return k===1?this:new Transform(this.k*k,this.x,this.y);},translate:function(x,y){return(x===0)&(y===0)?this:new Transform(this.k,this.x+this.k*x,this.y+this.k*y);},apply:function(point){return[point[0]*this.k+this.x,point[1]*this.k+this.y];},applyX:function(x){return x*this.k+this.x;},applyY:function(y){return y*this.k+this.y;},invert:function(location){return[(location[0]-this.x)/this.k,(location[1]-this.y)/this.k];},invertX:function(x){return(x-this.x)/this.k;},invertY:function(y){return(y-this.y)/this.k;},rescaleX:function(x){return x.copy().domain(x.range().map(this.invertX,this).map(x.invert,x));},rescaleY:function(y){return y.copy().domain(y.range().map(this.invertY,this).map(y.invert,y));},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")";}};var identity$8=new Transform(1,0,0);transform$1.prototype=Transform.prototype;function transform$1(node){return node.__zoom||identity$8;}
function nopropagation$2(){exports.event.stopImmediatePropagation();}
function noevent$2(){exports.event.preventDefault();exports.event.stopImmediatePropagation();}
function defaultFilter$2(){return!exports.event.button;}
function defaultExtent$1(){var e=this,w,h;if(e instanceof SVGElement){e=e.ownerSVGElement||e;w=e.width.baseVal.value;h=e.height.baseVal.value;}else{w=e.clientWidth;h=e.clientHeight;}
return[[0,0],[w,h]];}
function defaultTransform(){return this.__zoom||identity$8;}
function defaultWheelDelta(){return-exports.event.deltaY*(exports.event.deltaMode?120:1)/500;}
function defaultTouchable$1(){return"ontouchstart"in this;}
function defaultConstrain(transform,extent,translateExtent){var dx0=transform.invertX(extent[0][0])-translateExtent[0][0],dx1=transform.invertX(extent[1][0])-translateExtent[1][0],dy0=transform.invertY(extent[0][1])-translateExtent[0][1],dy1=transform.invertY(extent[1][1])-translateExtent[1][1];return transform.translate(dx1>dx0?(dx0+dx1)/2:Math.min(0,dx0)||Math.max(0,dx1),dy1>dy0?(dy0+dy1)/2:Math.min(0,dy0)||Math.max(0,dy1));}
function zoom(){var filter=defaultFilter$2,extent=defaultExtent$1,constrain=defaultConstrain,wheelDelta=defaultWheelDelta,touchable=defaultTouchable$1,scaleExtent=[0,Infinity],translateExtent=[[-Infinity,-Infinity],[Infinity,Infinity]],duration=250,interpolate=interpolateZoom,gestures=[],listeners=dispatch("start","zoom","end"),touchstarting,touchending,touchDelay=500,wheelDelay=150,clickDistance2=0;function zoom(selection$$1){selection$$1.property("__zoom",defaultTransform).on("wheel.zoom",wheeled).on("mousedown.zoom",mousedowned).on("dblclick.zoom",dblclicked).filter(touchable).on("touchstart.zoom",touchstarted).on("touchmove.zoom",touchmoved).on("touchend.zoom touchcancel.zoom",touchended).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)");}
zoom.transform=function(collection,transform){var selection$$1=collection.selection?collection.selection():collection;selection$$1.property("__zoom",defaultTransform);if(collection!==selection$$1){schedule(collection,transform);}else{selection$$1.interrupt().each(function(){gesture(this,arguments).start().zoom(null,typeof transform==="function"?transform.apply(this,arguments):transform).end();});}};zoom.scaleBy=function(selection$$1,k){zoom.scaleTo(selection$$1,function(){var k0=this.__zoom.k,k1=typeof k==="function"?k.apply(this,arguments):k;return k0*k1;});};zoom.scaleTo=function(selection$$1,k){zoom.transform(selection$$1,function(){var e=extent.apply(this,arguments),t0=this.__zoom,p0=centroid(e),p1=t0.invert(p0),k1=typeof k==="function"?k.apply(this,arguments):k;return constrain(translate(scale(t0,k1),p0,p1),e,translateExtent);});};zoom.translateBy=function(selection$$1,x,y){zoom.transform(selection$$1,function(){return constrain(this.__zoom.translate(typeof x==="function"?x.apply(this,arguments):x,typeof y==="function"?y.apply(this,arguments):y),extent.apply(this,arguments),translateExtent);});};zoom.translateTo=function(selection$$1,x,y){zoom.transform(selection$$1,function(){var e=extent.apply(this,arguments),t=this.__zoom,p=centroid(e);return constrain(identity$8.translate(p[0],p[1]).scale(t.k).translate(typeof x==="function"?-x.apply(this,arguments):-x,typeof y==="function"?-y.apply(this,arguments):-y),e,translateExtent);});};function scale(transform,k){k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],k));return k===transform.k?transform:new Transform(k,transform.x,transform.y);}
function translate(transform,p0,p1){var x=p0[0]-p1[0]*transform.k,y=p0[1]-p1[1]*transform.k;return x===transform.x&&y===transform.y?transform:new Transform(transform.k,x,y);}
function centroid(extent){return[(+extent[0][0]+ +extent[1][0])/2,(+extent[0][1]+ +extent[1][1])/2];}
function schedule(transition$$1,transform,center){transition$$1.on("start.zoom",function(){gesture(this,arguments).start();}).on("interrupt.zoom end.zoom",function(){gesture(this,arguments).end();}).tween("zoom",function(){var that=this,args=arguments,g=gesture(that,args),e=extent.apply(that,args),p=center||centroid(e),w=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),a=that.__zoom,b=typeof transform==="function"?transform.apply(that,args):transform,i=interpolate(a.invert(p).concat(w/a.k),b.invert(p).concat(w/b.k));return function(t){if(t===1)t=b;else{var l=i(t),k=w/l[2];t=new Transform(k,p[0]-l[0]*k,p[1]-l[1]*k);}
g.zoom(null,t);};});}
function gesture(that,args){for(var i=0,n=gestures.length,g;i<n;++i){if((g=gestures[i]).that===that){return g;}}
return new Gesture(that,args);}
function Gesture(that,args){this.that=that;this.args=args;this.index=-1;this.active=0;this.extent=extent.apply(that,args);}
Gesture.prototype={start:function(){if(++this.active===1){this.index=gestures.push(this)-1;this.emit("start");}
return this;},zoom:function(key,transform){if(this.mouse&&key!=="mouse")
this.mouse[1]=transform.invert(this.mouse[0]);if(this.touch0&&key!=="touch")
this.touch0[1]=transform.invert(this.touch0[0]);if(this.touch1&&key!=="touch")
this.touch1[1]=transform.invert(this.touch1[0]);this.that.__zoom=transform;this.emit("zoom");return this;},end:function(){if(--this.active===0){gestures.splice(this.index,1);this.index=-1;this.emit("end");}
return this;},emit:function(type){customEvent(new ZoomEvent(zoom,type,this.that.__zoom),listeners.apply,listeners,[type,this.that,this.args]);}};function wheeled(){if(!filter.apply(this,arguments))return;var g=gesture(this,arguments),t=this.__zoom,k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],t.k*Math.pow(2,wheelDelta.apply(this,arguments)))),p=mouse(this);if(g.wheel){if(g.mouse[0][0]!==p[0]||g.mouse[0][1]!==p[1]){g.mouse[1]=t.invert((g.mouse[0]=p));}
clearTimeout(g.wheel);}
else if(t.k===k)return;else{g.mouse=[p,t.invert(p)];interrupt(this);g.start();}
noevent$2();g.wheel=setTimeout(wheelidled,wheelDelay);g.zoom("mouse",constrain(translate(scale(t,k),g.mouse[0],g.mouse[1]),g.extent,translateExtent));function wheelidled(){g.wheel=null;g.end();}}
function mousedowned(){if(touchending||!filter.apply(this,arguments))return;var g=gesture(this,arguments),v=select(exports.event.view).on("mousemove.zoom",mousemoved,true).on("mouseup.zoom",mouseupped,true),p=mouse(this),x0=exports.event.clientX,y0=exports.event.clientY;dragDisable(exports.event.view);nopropagation$2();g.mouse=[p,this.__zoom.invert(p)];interrupt(this);g.start();function mousemoved(){noevent$2();if(!g.moved){var dx=exports.event.clientX-x0,dy=exports.event.clientY-y0;g.moved=dx*dx+dy*dy>clickDistance2;}
g.zoom("mouse",constrain(translate(g.that.__zoom,(g.mouse[0]=mouse(g.that)),g.mouse[1]),g.extent,translateExtent));}
function mouseupped(){v.on("mousemove.zoom mouseup.zoom",null);yesdrag(exports.event.view,g.moved);noevent$2();g.end();}}
function dblclicked(){if(!filter.apply(this,arguments))return;var t0=this.__zoom,p0=mouse(this),p1=t0.invert(p0),k1=t0.k*(exports.event.shiftKey?0.5:2),t1=constrain(translate(scale(t0,k1),p0,p1),extent.apply(this,arguments),translateExtent);noevent$2();if(duration>0)
select(this).transition().duration(duration).call(schedule,t1,p0);else select(this).call(zoom.transform,t1);}
function touchstarted(){if(!filter.apply(this,arguments))return;var g=gesture(this,arguments),touches$$1=exports.event.changedTouches,started,n=touches$$1.length,i,t,p;nopropagation$2();for(i=0;i<n;++i){(t=touches$$1[i]),(p=touch(this,touches$$1,t.identifier));p=[p,this.__zoom.invert(p),t.identifier];if(!g.touch0)(g.touch0=p),(started=true);else if(!g.touch1)g.touch1=p;}
if(touchstarting){touchstarting=clearTimeout(touchstarting);if(!g.touch1){g.end();p=select(this).on("dblclick.zoom");if(p)p.apply(this,arguments);return;}}
if(started){touchstarting=setTimeout(function(){touchstarting=null;},touchDelay);interrupt(this);g.start();}}
function touchmoved(){var g=gesture(this,arguments),touches$$1=exports.event.changedTouches,n=touches$$1.length,i,t,p,l;noevent$2();if(touchstarting)touchstarting=clearTimeout(touchstarting);for(i=0;i<n;++i){(t=touches$$1[i]),(p=touch(this,touches$$1,t.identifier));if(g.touch0&&g.touch0[2]===t.identifier)g.touch0[0]=p;else if(g.touch1&&g.touch1[2]===t.identifier)g.touch1[0]=p;}
t=g.that.__zoom;if(g.touch1){var p0=g.touch0[0],l0=g.touch0[1],p1=g.touch1[0],l1=g.touch1[1],dp=(dp=p1[0]-p0[0])*dp+(dp=p1[1]-p0[1])*dp,dl=(dl=l1[0]-l0[0])*dl+(dl=l1[1]-l0[1])*dl;t=scale(t,Math.sqrt(dp/dl));p=[(p0[0]+p1[0])/2,(p0[1]+p1[1])/2];l=[(l0[0]+l1[0])/2,(l0[1]+l1[1])/2];}else if(g.touch0)(p=g.touch0[0]),(l=g.touch0[1]);else return;g.zoom("touch",constrain(translate(t,p,l),g.extent,translateExtent));}
function touchended(){var g=gesture(this,arguments),touches$$1=exports.event.changedTouches,n=touches$$1.length,i,t;nopropagation$2();if(touchending)clearTimeout(touchending);touchending=setTimeout(function(){touchending=null;},touchDelay);for(i=0;i<n;++i){t=touches$$1[i];if(g.touch0&&g.touch0[2]===t.identifier)delete g.touch0;else if(g.touch1&&g.touch1[2]===t.identifier)delete g.touch1;}
if(g.touch1&&!g.touch0)(g.touch0=g.touch1),delete g.touch1;if(g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else g.end();}
zoom.wheelDelta=function(_){return arguments.length?((wheelDelta=typeof _==="function"?_:constant$13(+_)),zoom):wheelDelta;};zoom.filter=function(_){return arguments.length?((filter=typeof _==="function"?_:constant$13(!!_)),zoom):filter;};zoom.touchable=function(_){return arguments.length?((touchable=typeof _==="function"?_:constant$13(!!_)),zoom):touchable;};zoom.extent=function(_){return arguments.length?((extent=typeof _==="function"?_:constant$13([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]])),zoom):extent;};zoom.scaleExtent=function(_){return arguments.length?((scaleExtent[0]=+_[0]),(scaleExtent[1]=+_[1]),zoom):[scaleExtent[0],scaleExtent[1]];};zoom.translateExtent=function(_){return arguments.length?((translateExtent[0][0]=+_[0][0]),(translateExtent[1][0]=+_[1][0]),(translateExtent[0][1]=+_[0][1]),(translateExtent[1][1]=+_[1][1]),zoom):[[translateExtent[0][0],translateExtent[0][1]],[translateExtent[1][0],translateExtent[1][1]]];};zoom.constrain=function(_){return arguments.length?((constrain=_),zoom):constrain;};zoom.duration=function(_){return arguments.length?((duration=+_),zoom):duration;};zoom.interpolate=function(_){return arguments.length?((interpolate=_),zoom):interpolate;};zoom.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?zoom:value;};zoom.clickDistance=function(_){return arguments.length?((clickDistance2=(_=+_)*_),zoom):Math.sqrt(clickDistance2);};return zoom;}
exports.version=version;exports.bisect=bisectRight;exports.bisectRight=bisectRight;exports.bisectLeft=bisectLeft;exports.ascending=ascending;exports.bisector=bisector;exports.cross=cross;exports.descending=descending;exports.deviation=deviation;exports.extent=extent;exports.histogram=histogram;exports.thresholdFreedmanDiaconis=freedmanDiaconis;exports.thresholdScott=scott;exports.thresholdSturges=thresholdSturges;exports.max=max;exports.mean=mean;exports.median=median;exports.merge=merge;exports.min=min;exports.pairs=pairs;exports.permute=permute;exports.quantile=threshold;exports.range=sequence;exports.scan=scan;exports.shuffle=shuffle;exports.sum=sum;exports.ticks=ticks;exports.tickIncrement=tickIncrement;exports.tickStep=tickStep;exports.transpose=transpose;exports.variance=variance;exports.zip=zip;exports.axisTop=axisTop;exports.axisRight=axisRight;exports.axisBottom=axisBottom;exports.axisLeft=axisLeft;exports.brush=brush;exports.brushX=brushX;exports.brushY=brushY;exports.brushSelection=brushSelection;exports.chord=chord;exports.ribbon=ribbon;exports.nest=nest;exports.set=set$2;exports.map=map$1;exports.keys=keys;exports.values=values;exports.entries=entries;exports.color=color;exports.rgb=rgb;exports.hsl=hsl;exports.lab=lab;exports.hcl=hcl;exports.lch=lch;exports.gray=gray;exports.cubehelix=cubehelix;exports.contours=contours;exports.contourDensity=density;exports.dispatch=dispatch;exports.drag=drag;exports.dragDisable=dragDisable;exports.dragEnable=yesdrag;exports.dsvFormat=dsvFormat;exports.csvParse=csvParse;exports.csvParseRows=csvParseRows;exports.csvFormat=csvFormat;exports.csvFormatRows=csvFormatRows;exports.tsvParse=tsvParse;exports.tsvParseRows=tsvParseRows;exports.tsvFormat=tsvFormat;exports.tsvFormatRows=tsvFormatRows;exports.easeLinear=linear$1;exports.easeQuad=quadInOut;exports.easeQuadIn=quadIn;exports.easeQuadOut=quadOut;exports.easeQuadInOut=quadInOut;exports.easeCubic=cubicInOut;exports.easeCubicIn=cubicIn;exports.easeCubicOut=cubicOut;exports.easeCubicInOut=cubicInOut;exports.easePoly=polyInOut;exports.easePolyIn=polyIn;exports.easePolyOut=polyOut;exports.easePolyInOut=polyInOut;exports.easeSin=sinInOut;exports.easeSinIn=sinIn;exports.easeSinOut=sinOut;exports.easeSinInOut=sinInOut;exports.easeExp=expInOut;exports.easeExpIn=expIn;exports.easeExpOut=expOut;exports.easeExpInOut=expInOut;exports.easeCircle=circleInOut;exports.easeCircleIn=circleIn;exports.easeCircleOut=circleOut;exports.easeCircleInOut=circleInOut;exports.easeBounce=bounceOut;exports.easeBounceIn=bounceIn;exports.easeBounceOut=bounceOut;exports.easeBounceInOut=bounceInOut;exports.easeBack=backInOut;exports.easeBackIn=backIn;exports.easeBackOut=backOut;exports.easeBackInOut=backInOut;exports.easeElastic=elasticOut;exports.easeElasticIn=elasticIn;exports.easeElasticOut=elasticOut;exports.easeElasticInOut=elasticInOut;exports.blob=blob;exports.buffer=buffer;exports.dsv=dsv;exports.csv=csv$1;exports.tsv=tsv$1;exports.image=image;exports.json=json;exports.text=text;exports.xml=xml;exports.html=html;exports.svg=svg;exports.forceCenter=center$1;exports.forceCollide=collide;exports.forceLink=link;exports.forceManyBody=manyBody;exports.forceRadial=radial;exports.forceSimulation=simulation;exports.forceX=x$2;exports.forceY=y$2;exports.formatDefaultLocale=defaultLocale;exports.formatLocale=formatLocale;exports.formatSpecifier=formatSpecifier;exports.precisionFixed=precisionFixed;exports.precisionPrefix=precisionPrefix;exports.precisionRound=precisionRound;exports.geoArea=area$1;exports.geoBounds=bounds;exports.geoCentroid=centroid;exports.geoCircle=circle;exports.geoClipAntimeridian=clipAntimeridian;exports.geoClipCircle=clipCircle;exports.geoClipExtent=extent$1;exports.geoClipRectangle=clipRectangle;exports.geoContains=contains$1;exports.geoDistance=distance;exports.geoGraticule=graticule;exports.geoGraticule10=graticule10;exports.geoInterpolate=interpolate$1;exports.geoLength=length$1;exports.geoPath=index$1;exports.geoAlbers=albers;exports.geoAlbersUsa=albersUsa;exports.geoAzimuthalEqualArea=azimuthalEqualArea;exports.geoAzimuthalEqualAreaRaw=azimuthalEqualAreaRaw;exports.geoAzimuthalEquidistant=azimuthalEquidistant;exports.geoAzimuthalEquidistantRaw=azimuthalEquidistantRaw;exports.geoConicConformal=conicConformal;exports.geoConicConformalRaw=conicConformalRaw;exports.geoConicEqualArea=conicEqualArea;exports.geoConicEqualAreaRaw=conicEqualAreaRaw;exports.geoConicEquidistant=conicEquidistant;exports.geoConicEquidistantRaw=conicEquidistantRaw;exports.geoEquirectangular=equirectangular;exports.geoEquirectangularRaw=equirectangularRaw;exports.geoGnomonic=gnomonic;exports.geoGnomonicRaw=gnomonicRaw;exports.geoIdentity=identity$5;exports.geoProjection=projection;exports.geoProjectionMutator=projectionMutator;exports.geoMercator=mercator;exports.geoMercatorRaw=mercatorRaw;exports.geoNaturalEarth1=naturalEarth1;exports.geoNaturalEarth1Raw=naturalEarth1Raw;exports.geoOrthographic=orthographic;exports.geoOrthographicRaw=orthographicRaw;exports.geoStereographic=stereographic;exports.geoStereographicRaw=stereographicRaw;exports.geoTransverseMercator=transverseMercator;exports.geoTransverseMercatorRaw=transverseMercatorRaw;exports.geoRotation=rotation;exports.geoStream=geoStream;exports.geoTransform=transform;exports.cluster=cluster;exports.hierarchy=hierarchy;exports.pack=index$2;exports.packSiblings=siblings;exports.packEnclose=enclose;exports.partition=partition;exports.stratify=stratify;exports.tree=tree;exports.treemap=index$3;exports.treemapBinary=binary;exports.treemapDice=treemapDice;exports.treemapSlice=treemapSlice;exports.treemapSliceDice=sliceDice;exports.treemapSquarify=squarify;exports.treemapResquarify=resquarify;exports.interpolate=interpolateValue;exports.interpolateArray=array$1;exports.interpolateBasis=basis$1;exports.interpolateBasisClosed=basisClosed;exports.interpolateDate=date;exports.interpolateNumber=reinterpolate;exports.interpolateObject=object;exports.interpolateRound=interpolateRound;exports.interpolateString=interpolateString;exports.interpolateTransformCss=interpolateTransformCss;exports.interpolateTransformSvg=interpolateTransformSvg;exports.interpolateZoom=interpolateZoom;exports.interpolateRgb=interpolateRgb;exports.interpolateRgbBasis=rgbBasis;exports.interpolateRgbBasisClosed=rgbBasisClosed;exports.interpolateHsl=hsl$2;exports.interpolateHslLong=hslLong;exports.interpolateLab=lab$1;exports.interpolateHcl=hcl$2;exports.interpolateHclLong=hclLong;exports.interpolateCubehelix=cubehelix$2;exports.interpolateCubehelixLong=cubehelixLong;exports.piecewise=piecewise;exports.quantize=quantize;exports.path=path;exports.polygonArea=area$2;exports.polygonCentroid=centroid$1;exports.polygonHull=hull;exports.polygonContains=contains$2;exports.polygonLength=length$2;exports.quadtree=quadtree;exports.randomUniform=uniform;exports.randomNormal=normal;exports.randomLogNormal=logNormal;exports.randomBates=bates;exports.randomIrwinHall=irwinHall;exports.randomExponential=exponential$1;exports.scaleBand=band;exports.scalePoint=point$1;exports.scaleIdentity=identity$6;exports.scaleLinear=linear$2;exports.scaleLog=log$1;exports.scaleOrdinal=ordinal;exports.scaleImplicit=implicit;exports.scalePow=pow$1;exports.scaleSqrt=sqrt$1;exports.scaleQuantile=quantile$$1;exports.scaleQuantize=quantize$1;exports.scaleThreshold=threshold$1;exports.scaleTime=time;exports.scaleUtc=utcTime;exports.scaleSequential=sequential;exports.schemeCategory10=category10;exports.schemeAccent=Accent;exports.schemeDark2=Dark2;exports.schemePaired=Paired;exports.schemePastel1=Pastel1;exports.schemePastel2=Pastel2;exports.schemeSet1=Set1;exports.schemeSet2=Set2;exports.schemeSet3=Set3;exports.interpolateBrBG=BrBG;exports.schemeBrBG=scheme;exports.interpolatePRGn=PRGn;exports.schemePRGn=scheme$1;exports.interpolatePiYG=PiYG;exports.schemePiYG=scheme$2;exports.interpolatePuOr=PuOr;exports.schemePuOr=scheme$3;exports.interpolateRdBu=RdBu;exports.schemeRdBu=scheme$4;exports.interpolateRdGy=RdGy;exports.schemeRdGy=scheme$5;exports.interpolateRdYlBu=RdYlBu;exports.schemeRdYlBu=scheme$6;exports.interpolateRdYlGn=RdYlGn;exports.schemeRdYlGn=scheme$7;exports.interpolateSpectral=Spectral;exports.schemeSpectral=scheme$8;exports.interpolateBuGn=BuGn;exports.schemeBuGn=scheme$9;exports.interpolateBuPu=BuPu;exports.schemeBuPu=scheme$10;exports.interpolateGnBu=GnBu;exports.schemeGnBu=scheme$11;exports.interpolateOrRd=OrRd;exports.schemeOrRd=scheme$12;exports.interpolatePuBuGn=PuBuGn;exports.schemePuBuGn=scheme$13;exports.interpolatePuBu=PuBu;exports.schemePuBu=scheme$14;exports.interpolatePuRd=PuRd;exports.schemePuRd=scheme$15;exports.interpolateRdPu=RdPu;exports.schemeRdPu=scheme$16;exports.interpolateYlGnBu=YlGnBu;exports.schemeYlGnBu=scheme$17;exports.interpolateYlGn=YlGn;exports.schemeYlGn=scheme$18;exports.interpolateYlOrBr=YlOrBr;exports.schemeYlOrBr=scheme$19;exports.interpolateYlOrRd=YlOrRd;exports.schemeYlOrRd=scheme$20;exports.interpolateBlues=Blues;exports.schemeBlues=scheme$21;exports.interpolateGreens=Greens;exports.schemeGreens=scheme$22;exports.interpolateGreys=Greys;exports.schemeGreys=scheme$23;exports.interpolatePurples=Purples;exports.schemePurples=scheme$24;exports.interpolateReds=Reds;exports.schemeReds=scheme$25;exports.interpolateOranges=Oranges;exports.schemeOranges=scheme$26;exports.interpolateCubehelixDefault=cubehelix$3;exports.interpolateRainbow=rainbow;exports.interpolateWarm=warm;exports.interpolateCool=cool;exports.interpolateSinebow=sinebow;exports.interpolateViridis=viridis;exports.interpolateMagma=magma;exports.interpolateInferno=inferno;exports.interpolatePlasma=plasma;exports.create=create;exports.creator=creator;exports.local=local;exports.matcher=matcher$1;exports.mouse=mouse;exports.namespace=namespace;exports.namespaces=namespaces;exports.clientPoint=point;exports.select=select;exports.selectAll=selectAll;exports.selection=selection;exports.selector=selector;exports.selectorAll=selectorAll;exports.style=styleValue;exports.touch=touch;exports.touches=touches;exports.window=defaultView;exports.customEvent=customEvent;exports.arc=arc;exports.area=area$3;exports.line=line;exports.pie=pie;exports.areaRadial=areaRadial;exports.radialArea=areaRadial;exports.lineRadial=lineRadial$1;exports.radialLine=lineRadial$1;exports.pointRadial=pointRadial;exports.linkHorizontal=linkHorizontal;exports.linkVertical=linkVertical;exports.linkRadial=linkRadial;exports.symbol=symbol;exports.symbols=symbols;exports.symbolCircle=circle$2;exports.symbolCross=cross$2;exports.symbolDiamond=diamond;exports.symbolSquare=square;exports.symbolStar=star;exports.symbolTriangle=triangle;exports.symbolWye=wye;exports.curveBasisClosed=basisClosed$1;exports.curveBasisOpen=basisOpen;exports.curveBasis=basis$2;exports.curveBundle=bundle;exports.curveCardinalClosed=cardinalClosed;exports.curveCardinalOpen=cardinalOpen;exports.curveCardinal=cardinal;exports.curveCatmullRomClosed=catmullRomClosed;exports.curveCatmullRomOpen=catmullRomOpen;exports.curveCatmullRom=catmullRom;exports.curveLinearClosed=linearClosed;exports.curveLinear=curveLinear;exports.curveMonotoneX=monotoneX;exports.curveMonotoneY=monotoneY;exports.curveNatural=natural;exports.curveStep=step;exports.curveStepAfter=stepAfter;exports.curveStepBefore=stepBefore;exports.stack=stack;exports.stackOffsetExpand=expand;exports.stackOffsetDiverging=diverging;exports.stackOffsetNone=none$1;exports.stackOffsetSilhouette=silhouette;exports.stackOffsetWiggle=wiggle;exports.stackOrderAscending=ascending$3;exports.stackOrderDescending=descending$2;exports.stackOrderInsideOut=insideOut;exports.stackOrderNone=none$2;exports.stackOrderReverse=reverse;exports.timeInterval=newInterval;exports.timeMillisecond=millisecond;exports.timeMilliseconds=milliseconds;exports.utcMillisecond=millisecond;exports.utcMilliseconds=milliseconds;exports.timeSecond=second;exports.timeSeconds=seconds;exports.utcSecond=second;exports.utcSeconds=seconds;exports.timeMinute=minute;exports.timeMinutes=minutes;exports.timeHour=hour;exports.timeHours=hours;exports.timeDay=day;exports.timeDays=days;exports.timeWeek=sunday;exports.timeWeeks=sundays;exports.timeSunday=sunday;exports.timeSundays=sundays;exports.timeMonday=monday;exports.timeMondays=mondays;exports.timeTuesday=tuesday;exports.timeTuesdays=tuesdays;exports.timeWednesday=wednesday;exports.timeWednesdays=wednesdays;exports.timeThursday=thursday;exports.timeThursdays=thursdays;exports.timeFriday=friday;exports.timeFridays=fridays;exports.timeSaturday=saturday;exports.timeSaturdays=saturdays;exports.timeMonth=month;exports.timeMonths=months;exports.timeYear=year;exports.timeYears=years;exports.utcMinute=utcMinute;exports.utcMinutes=utcMinutes;exports.utcHour=utcHour;exports.utcHours=utcHours;exports.utcDay=utcDay;exports.utcDays=utcDays;exports.utcWeek=utcSunday;exports.utcWeeks=utcSundays;exports.utcSunday=utcSunday;exports.utcSundays=utcSundays;exports.utcMonday=utcMonday;exports.utcMondays=utcMondays;exports.utcTuesday=utcTuesday;exports.utcTuesdays=utcTuesdays;exports.utcWednesday=utcWednesday;exports.utcWednesdays=utcWednesdays;exports.utcThursday=utcThursday;exports.utcThursdays=utcThursdays;exports.utcFriday=utcFriday;exports.utcFridays=utcFridays;exports.utcSaturday=utcSaturday;exports.utcSaturdays=utcSaturdays;exports.utcMonth=utcMonth;exports.utcMonths=utcMonths;exports.utcYear=utcYear;exports.utcYears=utcYears;exports.timeFormatDefaultLocale=defaultLocale$1;exports.timeFormatLocale=formatLocale$1;exports.isoFormat=formatIso;exports.isoParse=parseIso;exports.now=now;exports.timer=timer;exports.timerFlush=timerFlush;exports.timeout=timeout$1;exports.interval=interval$1;exports.transition=transition;exports.active=active;exports.interrupt=interrupt;exports.voronoi=voronoi;exports.zoom=zoom;exports.zoomTransform=transform$1;exports.zoomIdentity=identity$8;Object.defineProperty(exports,"__esModule",{value:true});});
(function(root,factory){if(typeof define==="function"&&define.amd){define(["d3"],factory);}else if(typeof module==="object"&&module.exports){var d3=require("d3");module.exports=factory(d3);}else{root.d3.tip=factory(root.d3);}})(this,function(d3){return function(){var direction=d3_tip_direction,offset=d3_tip_offset,html=d3_tip_html,node=initNode(),svg=null,point=null,target=null;function tip(vis){svg=getSVGNode(vis);point=svg.createSVGPoint();document.body.appendChild(node);}
tip.show=function(){var args=Array.prototype.slice.call(arguments);if(args[args.length-1]instanceof SVGElement)target=args.pop();var content=html.apply(this,args),poffset=offset.apply(this,args),dir=direction.apply(this,args),nodel=getNodeEl(),i=directions.length,coords,scrollTop=document.documentElement.scrollTop||document.body.scrollTop,scrollLeft=document.documentElement.scrollLeft||document.body.scrollLeft;nodel.html(content).style("opacity",1).style("pointer-events","all");while(i--)nodel.classed(directions[i],false);coords=direction_callbacks.get(dir).apply(this);nodel.classed(dir,true).style("top",coords.top+poffset[0]+scrollTop+"px").style("left",coords.left+poffset[1]+scrollLeft+"px");return tip;};tip.hide=function(){var nodel=getNodeEl();nodel.style("opacity",0).style("pointer-events","none");return tip;};tip.attr=function(n,v){if(arguments.length<2&&typeof n==="string"){return getNodeEl().attr(n);}else{var args=Array.prototype.slice.call(arguments);d3.selection.prototype.attr.apply(getNodeEl(),args);}
return tip;};tip.style=function(n,v){if(arguments.length<2&&typeof n==="string"){return getNodeEl().style(n);}else{var args=Array.prototype.slice.call(arguments);d3.selection.prototype.style.apply(getNodeEl(),args);}
return tip;};tip.direction=function(v){if(!arguments.length)return direction;direction=v==null?v:functor(v);return tip;};tip.offset=function(v){if(!arguments.length)return offset;offset=v==null?v:functor(v);return tip;};tip.html=function(v){if(!arguments.length)return html;html=v==null?v:functor(v);return tip;};tip.destroy=function(){if(node){getNodeEl().remove();node=null;}
return tip;};function d3_tip_direction(){return"n";}
function d3_tip_offset(){return[0,0];}
function d3_tip_html(){return" ";}
var direction_callbacks=d3.map({n:direction_n,s:direction_s,e:direction_e,w:direction_w,nw:direction_nw,ne:direction_ne,sw:direction_sw,se:direction_se}),directions=direction_callbacks.keys();function direction_n(){var bbox=getScreenBBox();return{top:bbox.n.y-node.offsetHeight,left:bbox.n.x-node.offsetWidth/2};}
function direction_s(){var bbox=getScreenBBox();return{top:bbox.s.y,left:bbox.s.x-node.offsetWidth/2};}
function direction_e(){var bbox=getScreenBBox();return{top:bbox.e.y-node.offsetHeight/2,left:bbox.e.x};}
function direction_w(){var bbox=getScreenBBox();return{top:bbox.w.y-node.offsetHeight/2,left:bbox.w.x-node.offsetWidth};}
function direction_nw(){var bbox=getScreenBBox();return{top:bbox.nw.y-node.offsetHeight,left:bbox.nw.x-node.offsetWidth};}
function direction_ne(){var bbox=getScreenBBox();return{top:bbox.ne.y-node.offsetHeight,left:bbox.ne.x};}
function direction_sw(){var bbox=getScreenBBox();return{top:bbox.sw.y,left:bbox.sw.x-node.offsetWidth};}
function direction_se(){var bbox=getScreenBBox();return{top:bbox.se.y,left:bbox.e.x};}
function initNode(){var node=d3.select(document.createElement("div"));node.style("position","absolute").style("top",0).style("opacity",0).style("pointer-events","none").style("box-sizing","border-box");return node.node();}
function getSVGNode(el){el=el.node();if(el.tagName.toLowerCase()==="svg")return el;return el.ownerSVGElement;}
function getNodeEl(){if(node===null){node=initNode();document.body.appendChild(node);}
return d3.select(node);}
function getScreenBBox(){var targetel=target||d3.event.target;while("undefined"===typeof targetel.getScreenCTM&&"undefined"===targetel.parentNode){targetel=targetel.parentNode;}
var bbox={},matrix=targetel.getScreenCTM(),tbbox=targetel.getBBox(),width=tbbox.width,height=tbbox.height,x=tbbox.x,y=tbbox.y;point.x=x;point.y=y;bbox.nw=point.matrixTransform(matrix);point.x+=width;bbox.ne=point.matrixTransform(matrix);point.y+=height;bbox.se=point.matrixTransform(matrix);point.x-=width;bbox.sw=point.matrixTransform(matrix);point.y-=height/2;bbox.w=point.matrixTransform(matrix);point.x+=width;bbox.e=point.matrixTransform(matrix);point.x-=width/2;point.y-=height/2;bbox.n=point.matrixTransform(matrix);point.y+=height;bbox.s=point.matrixTransform(matrix);return bbox;}
function functor(v){return typeof v==="function"?v:function(){return v;};}
return tip;};});
(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")
module.exports=factory(require("d3-axis"),require("d3-brush"),require("d3-color"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom"));else if(typeof define==="function"&&define.amd)
define(["d3-axis","d3-brush","d3-color","d3-drag","d3-dsv","d3-ease","d3-interpolate","d3-scale","d3-selection","d3-shape","d3-time-format","d3-transition","d3-zoom"],factory);else{var a=typeof exports==="object"?factory(require("d3-axis"),require("d3-brush"),require("d3-color"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom")):factory(root["d3"],root["d3"],root["d3"],root["d3"],root["d3"],root["d3"],root["d3"],root["d3"],root["d3"],root["d3"],root["d3"],root["d3"],root["d3"]);for(var i in a)(typeof exports==="object"?exports:root)[i]=a[i];}})(this,function(__WEBPACK_EXTERNAL_MODULE__10__,__WEBPACK_EXTERNAL_MODULE__3__,__WEBPACK_EXTERNAL_MODULE__13__,__WEBPACK_EXTERNAL_MODULE__7__,__WEBPACK_EXTERNAL_MODULE__5__,__WEBPACK_EXTERNAL_MODULE__11__,__WEBPACK_EXTERNAL_MODULE__12__,__WEBPACK_EXTERNAL_MODULE__6__,__WEBPACK_EXTERNAL_MODULE__2__,__WEBPACK_EXTERNAL_MODULE__9__,__WEBPACK_EXTERNAL_MODULE__4__,__WEBPACK_EXTERNAL_MODULE__8__,__WEBPACK_EXTERNAL_MODULE__14__){return(()=>{"use strict";var __webpack_modules__=[()=>{},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{bb:()=>bb,default:()=>bb});var resolver_shape_namespaceObject={};__webpack_require__.r(resolver_shape_namespaceObject);__webpack_require__.d(resolver_shape_namespaceObject,{area:()=>_area,areaLineRange:()=>areaLineRange,areaSpline:()=>areaSpline,areaSplineRange:()=>areaSplineRange,areaStep:()=>areaStep,bar:()=>resolver_shape_bar,bubble:()=>resolver_shape_bubble,donut:()=>shape_donut,gauge:()=>resolver_shape_gauge,line:()=>resolver_shape_line,pie:()=>shape_pie,radar:()=>resolver_shape_radar,scatter:()=>shape_scatter,spline:()=>shape_spline,step:()=>step});var resolver_interaction_namespaceObject={};__webpack_require__.r(resolver_interaction_namespaceObject);__webpack_require__.d(resolver_interaction_namespaceObject,{selection:()=>_selectionModule,subchart:()=>subchartModule,zoom:()=>zoomModule});var external_commonjs_d3_time_format_commonjs2_d3_time_format_amd_d3_time_format_root_d3_=__webpack_require__(4);var external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_=__webpack_require__(2);const config_classes={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcs:"bb-arcs",area:"bb-area",areas:"bb-areas",axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",bar:"bb-bar",bars:"bb-bars",brush:"bb-brush",button:"bb-button",buttonZoomReset:"bb-zoom-reset",chart:"bb-chart",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsTitle:"bb-chart-arcs-title",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars",chartCircles:"bb-chart-circles",chartLine:"bb-chart-line",chartLines:"bb-chart-lines",chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars",chartText:"bb-chart-text",chartTexts:"bb-chart-texts",circle:"bb-circle",circles:"bb-circles",colorPattern:"bb-color-pattern",colorScale:"bb-colorscale",defocused:"bb-defocused",dragarea:"bb-dragarea",empty:"bb-empty",eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single",focused:"bb-focused",gaugeValue:"bb-gauge-value",grid:"bb-grid",gridLines:"bb-grid-lines",legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemFocused:"bb-legend-item-focused",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile",level:"bb-level",levels:"bb-levels",line:"bb-line",lines:"bb-lines",main:"bb-main",region:"bb-region",regions:"bb-regions",selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",shape:"bb-shape",shapes:"bb-shapes",stanfordElements:"bb-stanford-elements",stanfordLine:"bb-stanford-line",stanfordLines:"bb-stanford-lines",stanfordRegion:"bb-stanford-region",stanfordRegions:"bb-stanford-regions",subchart:"bb-subchart",target:"bb-target",text:"bb-text",texts:"bb-texts",title:"bb-title",tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name",xgrid:"bb-xgrid",xgridFocus:"bb-xgrid-focus",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridFocus:"bb-ygrid-focus",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids",zoomBrush:"bb-zoom-brush",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_",TextOverlapping:"text-overlapping"};var Element=function(){return{chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null};};var State=function(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasRadar:!1,current:{width:0,height:0,dataMax:0,maxTickWidths:{x:{size:0,ticks:[],clipPath:0,domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},types:[]},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,eventReceiver:{currentIdx:-1,rect:{},data:[],coords:[]},axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,redrawing:!1,resizing:!1,toggling:!1,zooming:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,outerRadius:undefined,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null}};};var classes={element:Element,state:State};var Store=(function(){function Store(){var _this=this;Object.keys(classes).forEach(function(v){_this[v]=new classes[v]();});}
var _proto=Store.prototype;return((_proto.getStore=function getStore(name){return this[name];}),Store);})();function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}
return obj;}
const main={bindto:"#chart",background:{},clipPath:!0,svg_classname:undefined,size_width:undefined,size_height:undefined,padding_left:undefined,padding_right:undefined,padding_top:undefined,padding_bottom:undefined,resize_auto:!0,onover:undefined,onout:undefined,onresize:undefined,onresized:undefined,onbeforeinit:undefined,oninit:undefined,onafterinit:undefined,onrendered:undefined,transition_duration:350,plugins:[],render:{},regions:[]};const data={data_x:undefined,data_idConverter:function data_idConverter(id){return id;},data_names:{},data_classes:{},data_type:undefined,data_types:{},data_order:"desc",data_groups:[],data_color:undefined,data_colors:{},data_labels:{},data_labels_colors:undefined,data_labels_position:{},data_hide:!1,data_filter:undefined,data_onclick:function data_onclick(){},data_onover:function data_onover(){},data_onout:function data_onout(){},data_onmin:undefined,data_onmax:undefined,data_url:undefined,data_headers:undefined,data_json:undefined,data_rows:undefined,data_columns:undefined,data_mimeType:"csv",data_keys:undefined,data_empty_label_text:""};const color={color_pattern:[],color_tiles:undefined,color_threshold:{},color_onover:undefined};const interaction={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{}};const legend={legend_show:!0,legend_hide:!1,legend_contents_bindto:undefined,legend_contents_template:undefined,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:undefined,legend_item_onclick:undefined,legend_item_onover:undefined,legend_item_onout:undefined,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,legend_usePoint:!1};const title={title_text:undefined,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"};const tooltip={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:undefined,tooltip_format_name:undefined,tooltip_format_value:undefined,tooltip_position:undefined,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function tooltip_onshow(){},tooltip_onhide:function tooltip_onhide(){},tooltip_onshown:function tooltip_onshown(){},tooltip_onhidden:function tooltip_onhidden(){},tooltip_order:null};var external_commonjs_d3_brush_commonjs2_d3_brush_amd_d3_brush_root_d3_=__webpack_require__(3);var win=(function(){var root=(typeof globalThis==="object"&&globalThis!==null&&globalThis.Object===Object&&globalThis)||(typeof global==="object"&&global!==null&&global.Object===Object&&global)||(typeof self==="object"&&self!==null&&self.Object===Object&&self);return root||Function("return this")();})(),browser_doc=win&&win.document;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}
return keys;}
function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)
(source=arguments[i]==null?{}:arguments[i]),i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});return target;}
var isValue=function(v){return v||v===0;},isFunction=function(v){return typeof v==="function";},isString=function(v){return typeof v==="string";},isNumber=function(v){return typeof v==="number";},isUndefined=function(v){return typeof v==="undefined";},isDefined=function(v){return typeof v!=="undefined";},isboolean=function(v){return typeof v==="boolean";},ceil10=function(v){return Math.ceil(v/10)*10;},asHalfPixel=function(n){return Math.ceil(n)+0.5;},diffDomain=function(d){return d[1]-d[0];},isObjectType=function(v){return typeof v==="object";},isEmpty=function(o){return(isUndefined(o)||o===null||(isString(o)&&o.length===0)||(isObjectType(o)&&!(o instanceof Date)&&Object.keys(o).length===0)||(isNumber(o)&&isNaN(o)));},notEmpty=function(o){return!isEmpty(o);},isArray=function(arr){return Array.isArray(arr);},isObject=function(obj){return obj&&!obj.nodeType&&isObjectType(obj)&&!isArray(obj);};function getOption(options,key,defaultValue){return isDefined(options[key])?options[key]:defaultValue;}
function hasValue(dict,value){var found=!1;return(Object.keys(dict).forEach(function(key){return dict[key]===value&&(found=!0);}),found);}
function callFn(fn){for(var isFn=isFunction(fn),_len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)
args[_key-1]=arguments[_key];return isFn&&fn.call.apply(fn,args),isFn;}
function endall(transition,cb){var n=0;transition.each(function(){return++n;}).on("end",function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)
args[_key2]=arguments[_key2];--n||cb.apply.apply(cb,[this].concat(args));});}
function sanitise(str){return isString(str)?str.replace(/</g,"&lt;").replace(/>/g,"&gt;"):str;}
function setTextValue(node,text,dy,toMiddle){if((dy===void 0&&(dy=[-1,1]),toMiddle===void 0&&(toMiddle=!1),node&&isString(text)))
if(text.indexOf("\n")===-1)node.text(text);else{var diff=[node.text(),text].map(function(v){return v.replace(/[\s\n]/g,"");});if(diff[0]!==diff[1]){var multiline=text.split("\n"),len=toMiddle?multiline.length-1:1;node.html(""),multiline.forEach(function(v,i){node.append("tspan").attr("x",0).attr("dy",(i===0?dy[0]*len:dy[1])+"em").text(v);});}}}
function getRectSegList(path){var _path$getBBox=path.getBBox(),x=_path$getBBox.x,y=_path$getBBox.y,width=_path$getBBox.width,height=_path$getBBox.height;return[{x:x,y:y+height},{x:x,y:y},{x:x+width,y:y},{x:x+width,y:y+height}];}
function getPathBox(path){var _path$getBoundingClie=path.getBoundingClientRect(),width=_path$getBoundingClie.width,height=_path$getBoundingClie.height,items=getRectSegList(path),x=items[0].x,y=Math.min(items[0].y,items[1].y);return{x:x,y:y,width:width,height:height};}
function getBrushSelection(_ref){var selection,$el=_ref.$el,event=external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event,main=$el.subchart.main||$el.main;return(event&&event.type==="brush"?(selection=event.selection):main&&(selection=main.select("."+config_classes.brush).node())&&(selection=(0,external_commonjs_d3_brush_commonjs2_d3_brush_amd_d3_brush_root_d3_.brushSelection)(selection)),selection);}
function getBoundingRect(node){var needEvaluate=!("rect"in node)||("rect"in node&&node.hasAttribute("width")&&node.rect.width!==+node.getAttribute("width"));return needEvaluate?(node.rect=node.getBoundingClientRect()):node.rect;}
function getRandom(asStr){asStr===void 0&&(asStr=!0);var rand=Math.random();return asStr?rand+"":rand;}
function findIndex(arr,v,start,end,isRotated){if(start>end)return-1;var mid=Math.floor((start+end)/2),_arr$mid=arr[mid],x=_arr$mid.x,_arr$mid$w=_arr$mid.w,w=_arr$mid$w===void 0?0:_arr$mid$w;return(isRotated&&((x=arr[mid].y),(w=arr[mid].h)),v>=x&&v<=x+w?mid:v<x?findIndex(arr,v,start,mid-1,isRotated):findIndex(arr,v,mid+1,end,isRotated));}
function brushEmpty(ctx){var selection=getBrushSelection(ctx);return!selection||selection[0]===selection[1];}
function deepClone(){for(var clone=(function(_clone){function clone(){return _clone.apply(this,arguments);}
return((clone.toString=function(){return _clone.toString();}),clone);})(function(v){if(isObject(v)&&v.constructor){var r=new v.constructor();for(var k in v)r[k]=clone(v[k]);return r;}
return v;}),_len3=arguments.length,objectN=Array(_len3),_key3=0;_key3<_len3;_key3++)
objectN[_key3]=arguments[_key3];return objectN.map(function(v){return clone(v);}).reduce(function(a,c){return _objectSpread(_objectSpread({},a),c);});}
function extend(target,source){for(var p in(target===void 0&&(target={}),isArray(source)&&source.forEach(function(v){return extend(target,v);}),source))/^\d+$/.test(p)||p in target||(target[p]=source[p]);return target;}
var capitalize=function(str){return str.charAt(0).toUpperCase()+str.slice(1);},toArray=function(v){return[].slice.call(v);};function getCssRules(styleSheets){var rules=[];return(styleSheets.forEach(function(sheet){try{sheet.cssRules&&sheet.cssRules.length&&(rules=rules.concat(toArray(sheet.cssRules)));}catch(e){console.error("Error while reading rules from "+
sheet.href+": "+
e.toString());}}),rules);}
var getTranslation=function(node){var transform=node?node.transform:null,baseVal=transform&&transform.baseVal;return baseVal&&baseVal.numberOfItems?baseVal.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0};};function getUnique(data){var isDate=data[0]instanceof Date,d=(isDate?data.map(Number):data).filter(function(v,i,self){return self.indexOf(v)===i;});return isDate?d.map(function(v){return new Date(v);}):d;}
function mergeArray(arr){return arr&&arr.length?arr.reduce(function(p,c){return p.concat(c);}):[];}
function mergeObj(target){for(var _len4=arguments.length,objectN=Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)
objectN[_key4-1]=arguments[_key4];if(!objectN.length||(objectN.length===1&&!objectN[0]))
return target;var source=objectN.shift();return(isObject(target)&&isObject(source)&&Object.keys(source).forEach(function(key){var value=source[key];isObject(value)?(!target[key]&&(target[key]={}),(target[key]=mergeObj(target[key],value))):(target[key]=isArray(value)?value.concat():value);}),mergeObj.apply(void 0,[target].concat(objectN)));}
function sortValue(data,isAsc){isAsc===void 0&&(isAsc=!0);var fn;return(data[0]instanceof Date?(fn=isAsc?function(a,b){return a-b;}:function(a,b){return b-a;}):isAsc&&!data.every(isNaN)?(fn=function(a,b){return a-b;}):!isAsc&&(fn=function(a,b){return(a>b&&-1)||(a<b&&1)||(a===b&&0);}),data.concat().sort(fn));}
function getMinMax(type,data){var res=data.filter(function(v){return notEmpty(v);});return(res.length?isNumber(res[0])?(res=Math[type].apply(Math,res)):res[0]instanceof Date&&(res=sortValue(res,type==="min")[0]):(res=undefined),res);}
var getRange=function(start,end,step){step===void 0&&(step=1);var res=[],n=Math.max(0,Math.ceil((end-start)/step))|0;for(var i=start;i<n;i++)res.push(start+i*step);return res;},emulateEvent={mouse:(function(){var getParams=function(){return{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0};};try{return(new MouseEvent("t"),function(el,eventType,params){params===void 0&&(params=getParams()),el.dispatchEvent(new MouseEvent(eventType,params));});}catch(e){return function(el,eventType,params){params===void 0&&(params=getParams());var mouseEvent=browser_doc.createEvent("MouseEvent");mouseEvent.initMouseEvent(eventType,params.bubbles,params.cancelable,win,0,params.screenX,params.screenY,params.clientX,params.clientY,!1,!1,!1,!1,0,null),el.dispatchEvent(mouseEvent);};}})(),touch:function touch(el,eventType,params){var touchObj=new Touch(mergeObj({identifier:Date.now(),target:el,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:0.5},params));el.dispatchEvent(new TouchEvent(eventType,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[touchObj],targetTouches:[],changedTouches:[touchObj]}));}};function tplProcess(tpl,data){var res=tpl;for(var x in data)
res=res.replace(new RegExp("{="+x+"}","g"),data[x]);return res;}
function parseDate(date){var parsedDate;if(date instanceof Date)parsedDate=date;else if(isString(date)){var config=this.config,format=this.format;parsedDate=format.dataTime(config.data_xFormat)(date);}else
isNumber(date)&&!isNaN(date)&&(parsedDate=new Date(+date));return((!parsedDate||isNaN(+parsedDate))&&console&&console.error&&console.error("Failed to parse x '"+date+"' to Date object"),parsedDate);}
function isTabVisible(){return!browser_doc.hidden;}
function convertInputType(mouse,touch){var isMobile=!1;if(/Mobi/.test(win.navigator.userAgent)&&touch){var hasTouchPoints=win.navigator&&"maxTouchPoints"in win.navigator&&win.navigator.maxTouchPoints>0,hasTouch="ontouchmove"in win||(win.DocumentTouch&&browser_doc instanceof win.DocumentTouch);isMobile=hasTouchPoints||hasTouch;}
var hasMouse=!(!mouse||isMobile)&&"onmouseover"in win;return(hasMouse&&"mouse")||(isMobile&&"touch")||null;}
function Options_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}
return keys;}
function Options_objectSpread(target){for(var source,i=1;i<arguments.length;i++)
(source=arguments[i]==null?{}:arguments[i]),i%2?Options_ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):Options_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});return target;}
var Options=(function(){function Options(){return deepClone(main,data,color,interaction,legend,title,tooltip,Options.data);}
return((Options.setOptions=function setOptions(options){this.data=options.reduce(function(a,c){return Options_objectSpread(Options_objectSpread({},a),c);},this.data);}),Options);})();Options.data={};var KEY={bubbleBaseLength:"$baseLength",colorPattern:"__colorPattern__",dataMinMax:"$dataMinMax",dataTotalSum:"$dataTotalSum",dataTotalPerIndex:"$totalPerIndex",legendItemTextBox:"legendItemTextBox",radarPoints:"$radarPoints",setOverOut:"setOverOut",callOverOutForTouch:"callOverOutForTouch",textRect:"textRect"};var Cache=(function(){function Cache(){this.cache={};}
var _proto=Cache.prototype;return((_proto.add=function add(key,value,isDataType){return(isDataType===void 0&&(isDataType=!1),(this.cache[key]=isDataType?this.cloneTarget(value):value),this.cache[key]);}),(_proto.remove=function remove(key){var _this=this;toArray(key).forEach(function(v){return delete _this.cache[v];});}),(_proto.get=function get(key,isDataType){if((isDataType===void 0&&(isDataType=!1),isDataType)){for(var id,targets=[],i=0;(id=key[i]);i++)
id in this.cache&&targets.push(this.cloneTarget(this.cache[id]));return targets;}
var value=this.cache[key];return isValue(value)?value:null;}),(_proto.reset=function reset(all){var $$=this;for(var x in $$.cache)
(all||/^\$/.test(x))&&($$.cache[x]=null);}),(_proto.cloneTarget=function cloneTarget(target){return{id:target.id,id_org:target.id_org,values:target.values.map(function(d){return{x:d.x,value:d.value,id:d.id};})};}),Cache);})();var generator_setTimeout=win.setTimeout,generator_clearTimeout=win.clearTimeout;function generateResize(){var timeout,fn=[],callResizeFn=function(){callResizeFn.clear(),(timeout=generator_setTimeout(function(){fn.forEach(function(f){return f();});},200));};return((callResizeFn.clear=function(){timeout&&(generator_clearTimeout(timeout),(timeout=null));}),(callResizeFn.add=function(f){return fn.push(f);}),(callResizeFn.remove=function(f){return fn.splice(fn.indexOf(f),1);}),callResizeFn);}
function generateWait(){var transitionsToWait=[],f=function(t,callback){function loop(){for(var _t,done=0,i=0;(_t=transitionsToWait[i]);i++){if(_t===!0||(_t.empty&&_t.empty())){done++;continue;}
try{_t.transition();}catch(e){done++;}}
timer&&generator_clearTimeout(timer),done===transitionsToWait.length?callback&&callback():(timer=generator_setTimeout(loop,50));}
var timer;loop();};return((f.add=function(t){isArray(t)?(transitionsToWait=transitionsToWait.concat(t)):transitionsToWait.push(t);}),f);}
var external_commonjs_d3_dsv_commonjs2_d3_dsv_amd_d3_dsv_root_d3_=__webpack_require__(5);const convert={convertData:function convertData(args,callback){var data;if((args.bindto?((data={}),["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(v){var key="data_"+v;key in args&&(data[v]=args[key]);})):(data=args),data.url&&callback))
this.convertUrlToData(data.url,data.mimeType,data.headers,data.keys,callback);else if(data.json)
data=this.convertJsonToData(data.json,data.keys);else if(data.rows)data=this.convertRowsToData(data.rows);else if(data.columns)
data=this.convertColumnsToData(data.columns);else if(args.bindto)
throw Error("url or json or rows or columns is required.");return isArray(data)&&data;},convertUrlToData:function convertUrlToData(url,mimeType,headers,keys,done){var _this=this;mimeType===void 0&&(mimeType="csv");var req=new XMLHttpRequest();req.open("GET",url),headers&&Object.keys(headers).forEach(function(key){req.setRequestHeader(key,headers[key]);}),(req.onreadystatechange=function(){if(req.readyState===4)
if(req.status===200){var response=req.responseText;response&&done.call(_this,_this["convert"+capitalize(mimeType)+"ToData"](mimeType==="json"?JSON.parse(response):response,keys));}else
throw new Error(url+": Something went wrong loading!");}),req.send();},convertCsvTsvToData:function convertCsvTsvToData(parser,xsv){var d,rows=parser.rows(xsv);return(rows.length===1?((d=[{}]),rows[0].forEach(function(id){d[0][id]=null;})):(d=parser.parse(xsv)),d);},convertCsvToData:function convertCsvToData(xsv){return this.convertCsvTsvToData({rows:external_commonjs_d3_dsv_commonjs2_d3_dsv_amd_d3_dsv_root_d3_.csvParseRows,parse:external_commonjs_d3_dsv_commonjs2_d3_dsv_amd_d3_dsv_root_d3_.csvParse},xsv);},convertTsvToData:function convertTsvToData(tsv){return this.convertCsvTsvToData({rows:external_commonjs_d3_dsv_commonjs2_d3_dsv_amd_d3_dsv_root_d3_.tsvParseRows,parse:external_commonjs_d3_dsv_commonjs2_d3_dsv_amd_d3_dsv_root_d3_.tsvParse},tsv);},convertJsonToData:function convertJsonToData(json,keysParam){var targetKeys,data,_this2=this,config=this.config,newRows=[];if(isArray(json)){var keys=keysParam||config.data_keys;keys.x?((targetKeys=keys.value.concat(keys.x)),(config.data_x=keys.x)):(targetKeys=keys.value),newRows.push(targetKeys),json.forEach(function(o){var newRow=targetKeys.map(function(key){var v=_this2.findValueInJson(o,key);return isUndefined(v)&&(v=null),v;});newRows.push(newRow);}),(data=this.convertRowsToData(newRows));}else
Object.keys(json).forEach(function(key){var tmp=json[key].concat();tmp.unshift(key),newRows.push(tmp);}),(data=this.convertColumnsToData(newRows));return data;},findValueInJson:function findValueInJson(object,path){if(object[path]!==undefined)return object[path];var convertedPath=path.replace(/\[(\w+)\]/g,".$1"),pathArray=convertedPath.replace(/^\./,"").split("."),target=object;return(pathArray.some(function(k){return!(target=target&&k in target?target[k]:undefined);}),target);},convertRowsToData:function convertRowsToData(rows){var keys=rows[0],newRows=[];return(rows.forEach(function(row,i){if(i>0){var newRow={};row.forEach(function(v,j){if(isUndefined(v))
throw new Error("Source data is missing a component at ("+
i+", "+
j+")!");newRow[keys[j]]=v;}),newRows.push(newRow);}}),newRows);},convertColumnsToData:function convertColumnsToData(columns){var newRows=[];return(columns.forEach(function(col,i){var key=col[0];col.forEach(function(v,j){if(j>0){if((isUndefined(newRows[j-1])&&(newRows[j-1]={}),isUndefined(v)))
throw new Error("Source data is missing a component at ("+
i+", "+
j+")!");newRows[j-1][key]=v;}});}),newRows);},convertDataToTargets:function convertDataToTargets(data,appendXs){var _this3=this,$$=this,axis=$$.axis,config=$$.config,state=$$.state,isCategorized=!1,isTimeSeries=!1,isCustomX=!1;axis&&((isCategorized=axis.isCategorized()),(isTimeSeries=axis.isTimeSeries()),(isCustomX=axis.isCustomX()));var xsData,dataKeys=Object.keys(data[0]||{}),ids=dataKeys.length?dataKeys.filter($$.isNotX,$$):[],xs=dataKeys.length?dataKeys.filter($$.isX,$$):[];ids.forEach(function(id){var xKey=_this3.getXKey(id);isCustomX||isTimeSeries?xs.indexOf(xKey)>=0?(xsData=((appendXs&&$$.data.xs[id])||[]).concat(data.map(function(d){return d[xKey];}).filter(isValue).map(function(rawX,i){return $$.generateTargetX(rawX,id,i);}))):config.data_x?(xsData=_this3.getOtherTargetXs()):notEmpty(config.data_xs)&&(xsData=$$.getXValuesOfXKey(xKey,$$.data.targets)):(xsData=data.map(function(d,i){return i;})),xsData&&(_this3.data.xs[id]=xsData);}),ids.forEach(function(id){if(!_this3.data.xs[id])
throw new Error('x is not defined for id = "'+id+'".');});var targets=ids.map(function(id,index){var convertedId=config.data_idConverter.bind($$.api)(id),xKey=$$.getXKey(id),isCategory=isCustomX&&isCategorized,hasCategory=isCategory&&data.map(function(v){return v.x;}).every(function(v){return config.axis_x_categories.indexOf(v)>-1;});return{id:convertedId,id_org:id,values:data.map(function(d,i){var x,rawX=d[xKey],value=d[id];return((value=value===null||isNaN(value)||isObject(value)?isArray(value)||isObject(value)?value:null:+value),(isCategory||state.hasRadar)&&index===0&&!isUndefined(rawX)?(!hasCategory&&index===0&&i===0&&(config.axis_x_categories=[]),(x=config.axis_x_categories.indexOf(rawX)),x===-1&&((x=config.axis_x_categories.length),config.axis_x_categories.push(rawX))):(x=$$.generateTargetX(rawX,id,i)),(isUndefined(value)||$$.data.xs[id].length<=i)&&(x=undefined),{x:x,value:value,id:convertedId});}).filter(function(v){return isDefined(v.x);})};});return(targets.forEach(function(t){config.data_xSort&&(t.values=t.values.sort(function(v1,v2){var x1=v1.x||v1.x===0?v1.x:Infinity,x2=v2.x||v2.x===0?v2.x:Infinity;return x1-x2;})),t.values.forEach(function(v,i){return(v.index=i);}),$$.data.xs[t.id].sort(function(v1,v2){return v1-v2;});}),(state.hasNegativeValue=$$.hasNegativeValueInTargets(targets)),(state.hasPositiveValue=$$.hasPositiveValueInTargets(targets)),config.data_type&&$$.setTargetType($$.mapToIds(targets).filter(function(id){return!(id in config.data_types);}),config.data_type),targets.forEach(function(d){return $$.cache.add(d.id_org,d,!0);}),targets);}};const data_data={isX:function isX(key){var $$=this,config=$$.config,dataKey=config.data_x&&key===config.data_x,existValue=notEmpty(config.data_xs)&&hasValue(config.data_xs,key);return dataKey||existValue;},isNotX:function isNotX(key){return!this.isX(key);},isStackNormalized:function isStackNormalized(){var config=this.config;return!!(config.data_stack_normalize&&config.data_groups.length);},isGrouped:function isGrouped(id){var groups=this.config.data_groups;return id?groups.some(function(v){return v.indexOf(id)>=0&&v.length>1;}):groups.length>0;},getXKey:function getXKey(id){var $$=this,config=$$.config;return config.data_x?config.data_x:notEmpty(config.data_xs)?config.data_xs[id]:null;},getXValuesOfXKey:function getXValuesOfXKey(key,targets){var xValues,$$=this,ids=targets&&notEmpty(targets)?$$.mapToIds(targets):[];return(ids.forEach(function(id){$$.getXKey(id)===key&&(xValues=$$.data.xs[id]);}),xValues);},getIndexByX:function getIndexByX(x,basedX){var $$=this;return basedX?basedX.indexOf(isString(x)?x:+x):($$.filterByX($$.data.targets,x)[0]||{index:null}).index;},getXValue:function getXValue(id,i){var $$=this;return id in $$.data.xs&&$$.data.xs[id]&&isValue($$.data.xs[id][i])?$$.data.xs[id][i]:i;},getOtherTargetXs:function getOtherTargetXs(){var $$=this,idsForX=Object.keys($$.data.xs);return idsForX.length?$$.data.xs[idsForX[0]]:null;},getOtherTargetX:function getOtherTargetX(index){var xs=this.getOtherTargetXs();return xs&&index<xs.length?xs[index]:null;},addXs:function addXs(xs){var $$=this,config=$$.config;Object.keys(xs).forEach(function(id){config.data_xs[id]=xs[id];});},isMultipleX:function isMultipleX(){return(notEmpty(this.config.data_xs)||!this.config.data_xSort||this.hasType("bubble")||this.hasType("scatter"));},addName:function addName(data){var name,$$=this,config=$$.config;return(data&&((name=config.data_names[data.id]),(data.name=name===undefined?data.id:name)),data);},getAllValuesOnIndex:function getAllValuesOnIndex(index,filterNull){filterNull===void 0&&(filterNull=!1);var $$=this,value=$$.filterTargetsToShow($$.data.targets).map(function(t){return $$.addName($$.getValueOnIndex(t.values,index));});return(filterNull&&(value=value.filter(function(v){return isValue(v.value);})),value);},getValueOnIndex:function getValueOnIndex(values,index){var valueOnIndex=values.filter(function(v){return v.index===index;});return valueOnIndex.length?valueOnIndex[0]:null;},updateTargetX:function updateTargetX(targets,x){var $$=this;targets.forEach(function(t){t.values.forEach(function(v,i){v.x=$$.generateTargetX(x[i],t.id,i);}),($$.data.xs[t.id]=x);});},updateTargetXs:function updateTargetXs(targets,xs){var $$=this;targets.forEach(function(t){xs[t.id]&&$$.updateTargetX([t],xs[t.id]);});},generateTargetX:function generateTargetX(rawX,id,index){var $$=this,axis=$$.axis,x=axis&&axis.isCategorized()?index:rawX||index;if(axis&&axis.isTimeSeries()){var fn=parseDate.bind($$);x=rawX?fn(rawX):fn($$.getXValue(id,index));}else
axis&&axis.isCustomX()&&!axis.isCategorized()&&(x=isValue(rawX)?+rawX:$$.getXValue(id,index));return x;},updateXs:function updateXs(values){values.length&&(this.axis.xs=values.map(function(v){return v.x;}));},getPrevX:function getPrevX(i){var x=this.axis.xs[i-1];return isDefined(x)?x:null;},getNextX:function getNextX(i){var x=this.axis.xs[i+1];return isDefined(x)?x:null;},getBaseValue:function getBaseValue(data){var $$=this,hasAxis=$$.state.hasAxis,value=data.value;return(value&&hasAxis&&($$.isAreaRangeType(data)?(value=$$.getAreaRangeData(data,"mid")):$$.isBubbleZType(data)&&(value=$$.getBubbleZData(value,"y"))),value);},getMinMaxValue:function getMinMaxValue(data){var min,max,getBaseValue=this.getBaseValue.bind(this);return((data||this.data.targets.map(function(t){return t.values;})).forEach(function(v,i){var value=v.map(getBaseValue).filter(isNumber);(min=Math.min.apply(Math,[i?min:Infinity].concat(value))),(max=Math.max.apply(Math,[i?max:-Infinity].concat(value)));}),{min:min,max:max});},getMinMaxData:function getMinMaxData(){var $$=this,cacheKey=KEY.dataMinMax,minMaxData=$$.cache.get(cacheKey);if(!minMaxData){var data=$$.data.targets.map(function(t){return t.values;}),minMax=$$.getMinMaxValue(data),min=[],max=[];data.forEach(function(v){var minData=$$.getFilteredDataByValue(v,minMax.min),maxData=$$.getFilteredDataByValue(v,minMax.max);minData.length&&(min=min.concat(minData)),maxData.length&&(max=max.concat(maxData));}),$$.cache.add(cacheKey,(minMaxData={min:min,max:max}));}
return minMaxData;},getTotalPerIndex:function getTotalPerIndex(){var $$=this,cacheKey=KEY.dataTotalPerIndex,sum=$$.cache.get(cacheKey);return($$.isStackNormalized()&&!sum&&((sum=[]),$$.data.targets.forEach(function(row){row.values.forEach(function(v,i){sum[i]||(sum[i]=0),(sum[i]+=isNumber(v.value)?v.value:0);});})),sum);},getTotalDataSum:function getTotalDataSum(subtractHidden){var $$=this,cacheKey=KEY.dataTotalSum,total=$$.cache.get(cacheKey);if(!isNumber(total)){var sum=mergeArray($$.data.targets.map(function(t){return t.values;})).map(function(v){return v.value;}).reduce(function(p,c){return p+c;});$$.cache.add(cacheKey,(total=sum));}
return(subtractHidden&&(total-=$$.getHiddenTotalDataSum()),total);},getHiddenTotalDataSum:function getHiddenTotalDataSum(){var $$=this,api=$$.api,hiddenTargetIds=$$.state.hiddenTargetIds,total=0;return(hiddenTargetIds.length&&(total=api.data.values.bind(api)(hiddenTargetIds).reduce(function(p,c){return p+c;})),total);},getFilteredDataByValue:function getFilteredDataByValue(data,value){var _this=this;return data.filter(function(t){return _this.getBaseValue(t)===value;});},getMaxDataCount:function getMaxDataCount(){return Math.max.apply(Math,this.data.targets.map(function(t){return t.values.length;}));},getMaxDataCountTarget:function getMaxDataCountTarget(){var target=this.filterTargetsToShow()||[],length=target.length;return(length>1?((target=target.map(function(t){return t.values;}).reduce(function(a,b){return a.concat(b);}).map(function(v){return v.x;})),(target=sortValue(getUnique(target)).map(function(x,index){return{x:x,index:index};}))):length&&(target=target[0].values),target);},mapToIds:function mapToIds(targets){return targets.map(function(d){return d.id;});},mapToTargetIds:function mapToTargetIds(ids){var $$=this;return ids?isArray(ids)?ids.concat():[ids]:$$.mapToIds($$.data.targets);},hasTarget:function hasTarget(targets,id){var ids=this.mapToIds(targets);for(var val,i=0;(val=ids[i]);i++)if(val===id)return!0;return!1;},isTargetToShow:function isTargetToShow(targetId){return this.state.hiddenTargetIds.indexOf(targetId)<0;},isLegendToShow:function isLegendToShow(targetId){return this.state.hiddenLegendIds.indexOf(targetId)<0;},filterTargetsToShow:function filterTargetsToShow(targets){var $$=this;return(targets||$$.data.targets).filter(function(t){return $$.isTargetToShow(t.id);});},mapTargetsToUniqueXs:function mapTargetsToUniqueXs(targets){var $$=this,axis=$$.axis,xs=[];return(targets&&targets.length&&((xs=getUnique(mergeArray(targets.map(function(t){return t.values.map(function(v){return+v.x;});})))),(xs=axis&&axis.isTimeSeries()?xs.map(function(x){return new Date(+x);}):xs.map(function(x){return+x;}))),sortValue(xs));},addHiddenTargetIds:function addHiddenTargetIds(targetIds){this.state.hiddenTargetIds=this.state.hiddenTargetIds.concat(targetIds);},removeHiddenTargetIds:function removeHiddenTargetIds(targetIds){this.state.hiddenTargetIds=this.state.hiddenTargetIds.filter(function(id){return targetIds.indexOf(id)<0;});},addHiddenLegendIds:function addHiddenLegendIds(targetIds){this.state.hiddenLegendIds=this.state.hiddenLegendIds.concat(targetIds);},removeHiddenLegendIds:function removeHiddenLegendIds(targetIds){this.state.hiddenLegendIds=this.state.hiddenLegendIds.filter(function(id){return targetIds.indexOf(id)<0;});},getValuesAsIdKeyed:function getValuesAsIdKeyed(targets){var $$=this,hasAxis=$$.state.hasAxis,ys={},isMultipleX=$$.isMultipleX(),xs=isMultipleX?$$.mapTargetsToUniqueXs(targets).map(function(v){return isString(v)?v:+v;}):null;return(targets.forEach(function(t){var data=[];t.values.forEach(function(v){var value=v.value;isArray(value)?data.push.apply(data,value):isObject(value)&&"high"in value?data.push.apply(data,Object.values(value)):$$.isBubbleZType(v)?data.push(hasAxis&&$$.getBubbleZData(value,"y")):isMultipleX?(data[$$.getIndexByX(v.x,xs)]=value):data.push(value);}),(ys[t.id]=data);}),ys);},checkValueInTargets:function checkValueInTargets(targets,checker){var values,ids=Object.keys(targets);for(var i=0;i<ids.length;i++){values=targets[ids[i]].values;for(var j=0;j<values.length;j++)
if(checker(values[j].value))return!0;}
return!1;},hasMultiTargets:function hasMultiTargets(){return this.filterTargetsToShow().length>1;},hasNegativeValueInTargets:function hasNegativeValueInTargets(targets){return this.checkValueInTargets(targets,function(v){return v<0;});},hasPositiveValueInTargets:function hasPositiveValueInTargets(targets){return this.checkValueInTargets(targets,function(v){return v>0;});},_checkOrder:function _checkOrder(type){var config=this.config,order=config.data_order;return isString(order)&&order.toLowerCase()===type;},isOrderDesc:function isOrderDesc(){return this._checkOrder("desc");},isOrderAsc:function isOrderAsc(){return this._checkOrder("asc");},orderTargets:function orderTargets(targetsValue){var $$=this,targets=[].concat(targetsValue),fn=$$.getSortCompareFn();return fn&&targets.sort(fn),targets;},getSortCompareFn:function getSortCompareFn(isArc){isArc===void 0&&(isArc=!1);var fn,$$=this,config=$$.config,orderAsc=$$.isOrderAsc(),orderDesc=$$.isOrderDesc();return(orderAsc||orderDesc?(fn=function(t1,t2){var reducer=function(p,c){return p+Math.abs(c.value);},t1Sum=t1.values.reduce(reducer,0),t2Sum=t2.values.reduce(reducer,0);return isArc?orderAsc?t1Sum-t2Sum:t2Sum-t1Sum:orderAsc?t2Sum-t1Sum:t1Sum-t2Sum;}):isFunction(config.data_order)&&(fn=config.data_order.bind($$.api)),fn||null);},filterByX:function filterByX(targets,x){return mergeArray(targets.map(function(t){return t.values;})).filter(function(v){return v.x-x===0;});},filterRemoveNull:function filterRemoveNull(data){var _this2=this;return data.filter(function(d){return isValue(_this2.getBaseValue(d));});},filterByXDomain:function filterByXDomain(targets,xDomain){return targets.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(v){return xDomain[0]<=v.x&&v.x<=xDomain[1];})};});},hasDataLabel:function hasDataLabel(){var dataLabels=this.config.data_labels;return((isboolean(dataLabels)&&dataLabels)||(isObjectType(dataLabels)&&notEmpty(dataLabels)));},getDataIndexFromEvent:function getDataIndexFromEvent(event){var $$=this,config=$$.config,_$$$state=$$.state,inputType=_$$$state.inputType,_$$$state$eventReceiv=_$$$state.eventReceiver,coords=_$$$state$eventReceiv.coords,rect=_$$$state$eventReceiv.rect,isRotated=config.axis_rotated,e=inputType==="touch"&&event.changedTouches?event.changedTouches[0]:event,index=findIndex(coords,isRotated?e.clientY-rect.top:e.clientX-rect.left,0,coords.length-1,isRotated);return index;},getDataLabelLength:function getDataLabelLength(min,max,key){var $$=this,lengths=[0,0];return($$.$el.chart.select("svg").selectAll(".dummy").data([min,max]).enter().append("text").text(function(d){return $$.dataLabelFormat(d.id)(d);}).each(function(d,i){lengths[i]=this.getBoundingClientRect()[key]*1.3;}).remove(),lengths);},isNoneArc:function isNoneArc(d){return this.hasTarget(this.data.targets,d.id);},isArc:function isArc(d){return"data"in d&&this.hasTarget(this.data.targets,d.data.id);},findSameXOfValues:function findSameXOfValues(values,index){var i,targetX=values[index].x,sames=[];for(i=index-1;i>=0&&!(targetX!==values[i].x);i--)
sames.push(values[i]);for(i=index;i<values.length&&!(targetX!==values[i].x);i++)
sames.push(values[i]);return sames;},findClosestFromTargets:function findClosestFromTargets(targets,pos){var $$=this,candidates=targets.map(function(target){return $$.findClosest(target.values,pos);});return $$.findClosest(candidates,pos);},findClosest:function findClosest(values,pos){var closest,$$=this,config=$$.config,main=$$.$el.main,data=values.filter(function(v){return v&&isValue(v.value);}),minDist=config.point_sensitivity;return(data.filter(function(v){return $$.isBarType(v.id);}).forEach(function(v){var shape=main.select("."+
config_classes.bars+
$$.getTargetSelectorSuffix(v.id)+" ."+
config_classes.bar+"-"+
v.index).node();!closest&&$$.isWithinBar(shape)&&(closest=v);}),data.filter(function(v){return!$$.isBarType(v.id);}).forEach(function(v){var d=$$.dist(v,pos);d<minDist&&((minDist=d),(closest=v));}),closest);},dist:function dist(data,pos){var $$=this,isRotated=$$.config.axis_rotated,scale=$$.scale,xIndex=isRotated?1:0,yIndex=isRotated?0:1,y=$$.circleY(data,data.index),x=(scale.zoom||scale.x)(data.x);return Math.sqrt(Math.pow(x-pos[xIndex],2)+Math.pow(y-pos[yIndex],2));},convertValuesToStep:function convertValuesToStep(values){var $$=this,axis=$$.axis,config=$$.config,stepType=config.line_step_type,isCategorized=!!axis&&axis.isCategorized(),converted=isArray(values)?values.concat():[values];if(!(isCategorized||/step\-(after|before)/.test(stepType)))
return values;var head=converted[0],tail=converted[converted.length-1],id=head.id,x=head.x;return(converted.unshift({x:--x,value:head.value,id:id}),isCategorized&&stepType==="step-after"&&converted.unshift({x:--x,value:head.value,id:id}),(x=tail.x),converted.push({x:++x,value:tail.value,id:id}),isCategorized&&stepType==="step-before"&&converted.push({x:++x,value:tail.value,id:id}),converted);},convertValuesToRange:function convertValuesToRange(values){var converted=isArray(values)?values.concat():[values],ranges=[];return(converted.forEach(function(range){var x=range.x,id=range.id;ranges.push({x:x,id:id,value:range.value[0]}),ranges.push({x:x,id:id,value:range.value[2]});}),ranges);},updateDataAttributes:function updateDataAttributes(name,attrs){var $$=this,config=$$.config,current=config["data_"+name];return isUndefined(attrs)?current:(Object.keys(attrs).forEach(function(id){current[id]=attrs[id];}),$$.redraw({withLegend:!0}),current);},getAreaRangeData:function getAreaRangeData(d,type){var value=d.value;if(isArray(value)){var index=["high","mid","low"].indexOf(type);return index===-1?null:value[index];}
return value[type];},getRatio:function getRatio(type,d,asPercent){var $$=this,config=$$.config,state=$$.state,api=$$.api,ratio=0;if(d&&api.data.shown().length)
if(((ratio=d.ratio||d.value),type==="arc")){if($$.pie.padAngle()())
ratio=d.value/$$.getTotalDataSum(!0);else{var gaugeArcLength=config.gauge_fullCircle?$$.getArcLength():$$.getStartAngle()*-2,arcLength=$$.hasType("gauge")?gaugeArcLength:Math.PI*2;ratio=(d.endAngle-d.startAngle)/arcLength;}}else if(type==="index"){var dataValues=api.data.values.bind(api),total=this.getTotalPerIndex();if(state.hiddenTargetIds.length){var hiddenSum=dataValues(state.hiddenTargetIds,!1);hiddenSum.length&&((hiddenSum=hiddenSum.reduce(function(acc,curr){return acc.map(function(v,i){return(isNumber(v)?v:0)+curr[i];});})),(total=total.map(function(v,i){return v-hiddenSum[i];})));}
(d.ratio=isNumber(d.value)&&total&&total[d.index]>0?d.value/total[d.index]:0),(ratio=d.ratio);}else if(type==="radar")
ratio=parseFloat(Math.max(d.value,0)+"")/state.current.dataMax*config.radar_size_ratio;else if(type==="bar"){var yScale=$$.getYScaleById.bind($$)(d.id),max=yScale.domain().reduce(function(a,c){return c-a;});ratio=Math.abs(d.value)/max;}
return asPercent&&ratio?ratio*100:ratio;},updateDataIndexByX:function updateDataIndexByX(tickValues){var $$=this,tickValueMap=tickValues.reduce(function(out,tick,index){return(out[+tick.x]=index),out;},{});$$.data.targets.forEach(function(t){t.values.forEach(function(value,valueIndex){var index=tickValueMap[+value.x];index===undefined&&(index=valueIndex),(value.index=index);});});},isBubbleZType:function isBubbleZType(d){var $$=this;return($$.isBubbleType(d)&&((isObject(d.value)&&("z"in d.value||"y"in d.value))||(isArray(d.value)&&d.value.length===2)));},getDataById:function getDataById(id){var d=this.cache.get(id)||this.api.data(id);return isArray(d)?d[0]:d;}};const load={load:function load(rawTargets,args){var $$=this,targets=rawTargets;targets&&(args.filter&&(targets=targets.filter(args.filter)),(args.type||args.types)&&targets.forEach(function(t){var type=(args.types&&args.types[t.id])||args.type;$$.setTargetType(t.id,type);}),$$.data.targets.forEach(function(d){for(var i=0;i<targets.length;i++)
if(d.id===targets[i].id){(d.values=targets[i].values),targets.splice(i,1);break;}}),($$.data.targets=$$.data.targets.concat(targets))),$$.updateTargets($$.data.targets),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),$$.updateTypesElements(),args.done&&args.done.call($$.api);},loadFromArgs:function loadFromArgs(args){var $$=this;if($$.config){$$.cache.reset();var data=args.data||$$.convertData(args,function(d){return $$.load($$.convertDataToTargets(d),args);});data&&$$.load($$.convertDataToTargets(data),args);}},unload:function unload(rawTargetIds,customDoneCb){var $$=this,state=$$.state,$el=$$.$el,done=customDoneCb,targetIds=rawTargetIds;return($$.cache.reset(),done||(done=function(){}),(targetIds=targetIds.filter(function(id){return $$.hasTarget($$.data.targets,id);})),targetIds&&targetIds.length!==0?void
($el.svg.selectAll(targetIds.map(function(id){return $$.selectorTarget(id);})).transition().style("opacity","0").remove().call(endall,done),targetIds.forEach(function(id){(state.withoutFadeIn[id]=!1),$el.legend&&$el.legend.selectAll("."+
config_classes.legendItem+
$$.getTargetSelectorSuffix(id)).remove(),($$.data.targets=$$.data.targets.filter(function(t){return t.id!==id;}));}),$$.updateTypesElements()):void done());}};var external_commonjs_d3_drag_commonjs2_d3_drag_amd_d3_drag_root_d3_=__webpack_require__(7);const interactions_interaction={selectRectForSingle:function selectRectForSingle(context,eventRect,index){var $$=this,config=$$.config,main=$$.$el.main,isSelectionEnabled=config.data_selection_enabled,isSelectionGrouped=config.data_selection_grouped,isSelectable=config.data_selection_isselectable,isTooltipGrouped=config.tooltip_grouped,selectedData=$$.getAllValuesOnIndex(index);(isTooltipGrouped&&($$.showTooltip(selectedData,context),$$.showGridFocus&&$$.showGridFocus(selectedData),!isSelectionEnabled||isSelectionGrouped))||main.selectAll("."+config_classes.shape+"-"+index).each(function(){(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this).classed(config_classes.EXPANDED,!0),isSelectionEnabled&&eventRect.style("cursor",isSelectionGrouped?"pointer":null),isTooltipGrouped||($$.hideGridFocus&&$$.hideGridFocus(),$$.hideTooltip(),!isSelectionGrouped&&$$.expandCirclesBars(index));}).filter(function(d){return $$.isWithinShape(this,d);}).call(function(selected){var d=selected.data();isSelectionEnabled&&(isSelectionGrouped||(isSelectable&&isSelectable.bind($$.api)(d)))&&eventRect.style("cursor","pointer"),isTooltipGrouped||($$.showTooltip(d,context),$$.showGridFocus&&$$.showGridFocus(d),$$.unexpandCircles&&$$.unexpandCircles(),selected.each(function(d){return $$.expandCirclesBars(index,d.id);}));});},expandCirclesBars:function expandCirclesBars(index,id,reset){var $$=this,config=$$.config,_$$$$el=$$.$el,bar=_$$$$el.bar,circle=_$$$$el.circle;circle&&config.point_focus_expand_enabled&&$$.expandCircles(index,id,reset),bar&&$$.expandBars(index,id,reset);},setOverOut:function setOverOut(isOver,d){var $$=this,config=$$.config,hasRadar=$$.state.hasRadar,main=$$.$el.main,isArc=isObject(d);if(isArc||d!==-1){var callback=config[isOver?"data_onover":"data_onout"].bind($$.api);if((config.color_onover&&$$.setOverColor(isOver,d,isArc),isArc))
callback(d,main.select("."+
config_classes.arc+
$$.getTargetSelectorSuffix(d.id)).node());else if(!config.tooltip_grouped){var last=$$.cache.get(KEY.setOverOut)||[],shape=main.selectAll("."+config_classes.shape+"-"+d).filter(function(d){return $$.isWithinShape(this,d);});shape.each(function(d){var _this=this;(last.length===0||last.every(function(v){return v!==_this;}))&&(callback(d,this),last.push(this));}),last.length>0&&shape.empty()&&((callback=config.data_onout.bind($$.api)),last.forEach(function(v){return callback((0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(v).datum(),v);}),(last=[])),$$.cache.add(KEY.setOverOut,last);}else
isOver&&(config.point_focus_only&&hasRadar?$$.showCircleFocus($$.getAllValuesOnIndex(d,!0)):$$.expandCirclesBars(d,null,!0)),$$.isMultipleX()||main.selectAll("."+config_classes.shape+"-"+d).each(function(d){callback(d,this);});}},callOverOutForTouch:function callOverOutForTouch(d){var $$=this,last=$$.cache.get(KEY.callOverOutForTouch);(isObject(d)&&last?d.id!==last.id:d!==last)&&((last||isNumber(last))&&$$.setOverOut(!1,last),(d||isNumber(d))&&$$.setOverOut(!0,d),$$.cache.add(KEY.callOverOutForTouch,d));},getDraggableSelection:function getDraggableSelection(){var $$=this,config=$$.config;return config.interaction_enabled&&config.data_selection_draggable&&$$.drag?(0,external_commonjs_d3_drag_commonjs2_d3_drag_amd_d3_drag_root_d3_.drag)().on("drag",function(){$$.drag((0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.mouse)(this));}).on("start",function(){$$.dragstart((0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.mouse)(this));}).on("end",function(){$$.dragend();}):function(){};},dispatchEvent:function dispatchEvent(type,index,mouse){var $$=this,config=$$.config,_$$$state=$$.state,eventReceiver=_$$$state.eventReceiver,hasAxis=_$$$state.hasAxis,hasRadar=_$$$state.hasRadar,_$$$$el2=$$.$el,eventRect=_$$$$el2.eventRect,arcs=_$$$$el2.arcs,radar=_$$$$el2.radar,isMultipleX=$$.isMultipleX(),element=(hasRadar?radar.axes.select("."+config_classes.axis+"-"+index+" text"):eventRect||arcs.selectAll("."+config_classes.target+" path").filter(function(d,i){return i===index;})).node(),_element$getBoundingC=element.getBoundingClientRect(),width=_element$getBoundingC.width,left=_element$getBoundingC.left,top=_element$getBoundingC.top;if(hasAxis&&!hasRadar&&!isMultipleX){var coords=eventReceiver.coords[index];(width=coords.w),(left+=coords.x),(top+=coords.y);}
var x=left+
(mouse?mouse[0]:0)+
(isMultipleX||config.axis_rotated?0:width/2),y=top+(mouse?mouse[1]:0);emulateEvent[/^(mouse|click)/.test(type)?"mouse":"touch"](element,type,{screenX:x,screenY:y,clientX:x,clientY:y});},setDragStatus:function setDragStatus(isDragging){this.state.dragging=isDragging;}};const internals_class={generateClass:function generateClass(prefix,targetId){return(" "+
prefix+" "+
(prefix+this.getTargetSelectorSuffix(targetId)));},classText:function classText(d){return this.generateClass(config_classes.text,d.index);},classTexts:function classTexts(d){return this.generateClass(config_classes.texts,d.id);},classShape:function classShape(d){return this.generateClass(config_classes.shape,d.index);},classShapes:function classShapes(d){return this.generateClass(config_classes.shapes,d.id);},generateExtraLineClass:function generateExtraLineClass(){var $$=this,classes=$$.config.line_classes||[],ids=[];return function(d){var id=d.id||(d.data&&d.data.id)||d;return(ids.indexOf(id)<0&&ids.push(id),classes[ids.indexOf(id)%classes.length]);};},classLine:function classLine(d){return(this.classShape(d)+this.generateClass(config_classes.line,d.id));},classLines:function classLines(d){return(this.classShapes(d)+
this.generateClass(config_classes.lines,d.id));},classCircle:function classCircle(d){return(this.classShape(d)+
this.generateClass(config_classes.circle,d.index));},classCircles:function classCircles(d){return(this.classShapes(d)+
this.generateClass(config_classes.circles,d.id));},classBar:function classBar(d){return(this.classShape(d)+
this.generateClass(config_classes.bar,d.index));},classBars:function classBars(d){return(this.classShapes(d)+
this.generateClass(config_classes.bars,d.id));},classArc:function classArc(d){return(this.classShape(d.data)+
this.generateClass(config_classes.arc,d.data.id));},classArcs:function classArcs(d){return(this.classShapes(d.data)+
this.generateClass(config_classes.arcs,d.data.id));},classArea:function classArea(d){return(this.classShape(d)+this.generateClass(config_classes.area,d.id));},classAreas:function classAreas(d){return(this.classShapes(d)+
this.generateClass(config_classes.areas,d.id));},classRegion:function classRegion(d,i){return(this.generateClass(config_classes.region,i)+" "+
("class"in d?d.class:""));},classTarget:function classTarget(id){var additionalClassSuffix=this.config.data_classes[id],additionalClass="";return(additionalClassSuffix&&(additionalClass=" "+config_classes.target+"-"+additionalClassSuffix),this.generateClass(config_classes.target,id)+additionalClass);},classFocus:function classFocus(d){return this.classFocused(d)+this.classDefocused(d);},classFocused:function classFocused(d){return(" "+
(this.state.focusedTargetIds.indexOf(d.id)>=0?config_classes.focused:""));},classDefocused:function classDefocused(d){return(" "+
(this.state.defocusedTargetIds.indexOf(d.id)>=0?config_classes.defocused:""));},classChartText:function classChartText(d){return config_classes.chartText+this.classTarget(d.id);},classChartLine:function classChartLine(d){return config_classes.chartLine+this.classTarget(d.id);},classChartBar:function classChartBar(d){return config_classes.chartBar+this.classTarget(d.id);},classChartArc:function classChartArc(d){return config_classes.chartArc+this.classTarget(d.data.id);},classChartRadar:function classChartRadar(d){return config_classes.chartRadar+this.classTarget(d.id);},getTargetSelectorSuffix:function getTargetSelectorSuffix(targetId){return targetId||targetId===0?("-"+targetId).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):"";},selectorTarget:function selectorTarget(id,prefix){var pfx=prefix||"",target=this.getTargetSelectorSuffix(id);return(pfx+"."+
(config_classes.target+target)+", "+
pfx+"."+
(config_classes.circles+target));},selectorTargets:function selectorTargets(idsValue,prefix){var _this=this,ids=idsValue||[];return ids.length?ids.map(function(id){return _this.selectorTarget(id,prefix);}):null;},selectorLegend:function selectorLegend(id){return("."+
(config_classes.legendItem+this.getTargetSelectorSuffix(id)));},selectorLegends:function selectorLegends(ids){var _this2=this;return ids&&ids.length?ids.map(function(id){return _this2.selectorLegend(id);}):null;}};const category={categoryName:function categoryName(i){var categories=this.config.axis_x_categories;return categories&&i<categories.length?categories[i]:i;}};var external_commonjs_d3_scale_commonjs2_d3_scale_amd_d3_scale_root_d3_=__webpack_require__(6);var colorizePattern=function(pattern,color,id){var node=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(pattern.cloneNode(!0));return(node.attr("id",id).insert("rect",":first-child").attr("width",node.attr("width")).attr("height",node.attr("height")).style("fill",color),{id:id,node:node.node()});},schemeCategory10=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];const internals_color={getColorFromCss:function getColorFromCss(){var cacheKey=KEY.colorPattern,body=browser_doc.body,pattern=body[cacheKey];if(!pattern){var span=browser_doc.createElement("span");(span.className=config_classes.colorPattern),(span.style.display="none"),body.appendChild(span);var content=win.getComputedStyle(span).backgroundImage;span.parentNode.removeChild(span),content.indexOf(";")>-1&&((pattern=content.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map(function(v){return v.trim().replace(/[\"'\s]/g,"");}).filter(Boolean)),(body[cacheKey]=pattern));}
return pattern;},generateColor:function generateColor(){var $$=this,config=$$.config,colors=config.data_colors,callback=config.data_color,ids=[],pattern=notEmpty(config.color_pattern)?config.color_pattern:(0,external_commonjs_d3_scale_commonjs2_d3_scale_amd_d3_scale_root_d3_.scaleOrdinal)($$.getColorFromCss()||schemeCategory10).range(),originalColorPattern=pattern;if(isFunction(config.color_tiles)){var tiles=config.color_tiles.bind($$.api)(),colorizedPatterns=pattern.map(function(p,index){var color=p.replace(/[#\(\)\s,]/g,""),id=$$.state.datetimeId+"-pattern-"+color+"-"+index;return colorizePattern(tiles[index%tiles.length],p,id);});(pattern=colorizedPatterns.map(function(p){return"url(#"+p.id+")";})),($$.patterns=colorizedPatterns);}
return function(d){var color,id=d.id||(d.data&&d.data.id)||d,isLine=$$.isTypeOf(id,["line","spline","step"])||!config.data_types[id];return(isFunction(colors[id])?(color=colors[id].bind($$.api)(d)):colors[id]?(color=colors[id]):(ids.indexOf(id)<0&&ids.push(id),(color=isLine?originalColorPattern[ids.indexOf(id)%originalColorPattern.length]:pattern[ids.indexOf(id)%pattern.length]),(colors[id]=color)),isFunction(callback)?callback.bind($$.api)(color,d):color);};},generateLevelColor:function generateLevelColor(){var $$=this,config=$$.config,colors=config.color_pattern,threshold=config.color_threshold,asValue=threshold.unit==="value",max=threshold.max||100,values=threshold.values&&threshold.values.length?threshold.values:[];return notEmpty(threshold)?function(value){var v=asValue?value:value*100/max,color=colors[colors.length-1];for(var i=0,l=values.length;i<l;i++)
if(v<=values[i]){color=colors[i];break;}
return color;}:null;},setOverColor:function setOverColor(isOver,d){var $$=this,config=$$.config,main=$$.$el.main,onover=config.color_onover,color=isOver?onover:$$.color;isObject(color)?(color=function(_ref){var id=_ref.id;return id in onover?onover[id]:$$.color(id);}):isString(color)?(color=function(){return onover;}):isFunction(onover)&&(color=color.bind($$.api)),main.selectAll(isObject(d)?"."+
config_classes.arc+
$$.getTargetSelectorSuffix(d.id):"."+config_classes.shape+"-"+d).style("fill",color);}};var TYPE={AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",BAR:"bar",BUBBLE:"bubble",DONUT:"donut",GAUGE:"gauge",LINE:"line",PIE:"pie",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step"};var TYPE_BY_CATEGORY={Area:[TYPE.AREA,TYPE.AREA_SPLINE,TYPE.AREA_SPLINE_RANGE,TYPE.AREA_LINE_RANGE,TYPE.AREA_STEP],AreaRange:[TYPE.AREA_SPLINE_RANGE,TYPE.AREA_LINE_RANGE],Arc:[TYPE.PIE,TYPE.DONUT,TYPE.GAUGE,TYPE.RADAR],Line:[TYPE.LINE,TYPE.SPLINE,TYPE.AREA,TYPE.AREA_SPLINE,TYPE.AREA_SPLINE_RANGE,TYPE.AREA_LINE_RANGE,TYPE.STEP,TYPE.AREA_STEP],Step:[TYPE.STEP,TYPE.AREA_STEP],Spline:[TYPE.SPLINE,TYPE.AREA_SPLINE,TYPE.AREA_SPLINE_RANGE]};const domain={getYDomainMinMax:function getYDomainMinMax(targets,type){var $$=this,axis=$$.axis,config=$$.config,isMin=type==="min",dataGroups=config.data_groups,ids=$$.mapToIds(targets),ys=$$.getValuesAsIdKeyed(targets);return(dataGroups.length>0&&(function(){for(var idsInGroup,_ret,hasValue=$$["has"+
(isMin?"Negative":"Positive")+"ValueInTargets"](targets),_loop=function(j,_idsInGroup){if(((_idsInGroup=_idsInGroup.filter(function(v){return ids.indexOf(v)>=0;})),_idsInGroup.length===0))
return(idsInGroup=_idsInGroup),"continue";var baseId=_idsInGroup[0],baseAxisId=axis.getId(baseId);hasValue&&ys[baseId]&&(ys[baseId]=ys[baseId].map(function(v){return(isMin?v<0:v>0)?v:0;}));for(var id,_ret2,_loop2=function(k,id){if(!ys[id])return"continue";var axisId=axis.getId(id);ys[id].forEach(function(v,i){var val=+v,meetCondition=isMin?val>0:val<0;axisId!==baseAxisId||(hasValue&&meetCondition)||(ys[baseId][i]+=val);});},k=1;(id=_idsInGroup[k]);k++)
(_ret2=_loop2(k,id)),_ret2==="continue";idsInGroup=_idsInGroup;},j=0;(idsInGroup=dataGroups[j]);j++)
(_ret=_loop(j,idsInGroup)),_ret==="continue";})(),getMinMax(type,Object.keys(ys).map(function(key){return getMinMax(type,ys[key]);})));},getYDomainMin:function getYDomainMin(targets){return this.getYDomainMinMax(targets,"min");},getYDomainMax:function getYDomainMax(targets){return this.getYDomainMinMax(targets,"max");},isHiddenTargetWithYDomain:function isHiddenTargetWithYDomain(id){var $$=this;return $$.state.hiddenTargetIds.some(function(v){return $$.axis.getId(v)===id;});},getYDomain:function getYDomain(targets,axisId,xDomain){var $$=this,axis=$$.axis,config=$$.config,scale=$$.scale,pfx="axis_"+axisId;if($$.isStackNormalized())return[0,100];var isLog=scale&&scale[axisId]&&scale[axisId].type==="log",targetsByAxisId=targets.filter(function(t){return axis.getId(t.id)===axisId;}),yTargets=xDomain?$$.filterByXDomain(targetsByAxisId,xDomain):targetsByAxisId;if(yTargets.length===0)
return $$.isHiddenTargetWithYDomain(axisId)?scale[axisId].domain():axisId==="y2"?scale.y.domain():$$.getYDomain(targets,"y2",xDomain);var yMin=config[pfx+"_min"],yMax=config[pfx+"_max"],yDomainMin=$$.getYDomainMin(yTargets),yDomainMax=$$.getYDomainMax(yTargets),center=config[pfx+"_center"],isZeroBased=[TYPE.BAR,TYPE.BUBBLE,TYPE.SCATTER].concat(TYPE_BY_CATEGORY.Line).some(function(v){var type=v.indexOf("area")>-1?"area":v;return $$.hasType(v,yTargets)&&config[type+"_zerobased"];}),isInverted=config[pfx+"_inverted"],showHorizontalDataLabel=$$.hasDataLabel()&&config.axis_rotated,showVerticalDataLabel=$$.hasDataLabel()&&!config.axis_rotated;(yDomainMin=isValue(yMin)?yMin:isValue(yMax)?yDomainMin<yMax?yDomainMin:yMax-10:yDomainMin),(yDomainMax=isValue(yMax)?yMax:isValue(yMin)?yMin<yDomainMax?yDomainMax:yMin+10:yDomainMax),isNaN(yDomainMin)&&(yDomainMin=0),isNaN(yDomainMax)&&(yDomainMax=yDomainMin),yDomainMin===yDomainMax&&(yDomainMin<0?(yDomainMax=0):(yDomainMin=0));var isAllPositive=yDomainMin>=0&&yDomainMax>=0,isAllNegative=yDomainMin<=0&&yDomainMax<=0;((isValue(yMin)&&isAllPositive)||(isValue(yMax)&&isAllNegative))&&(isZeroBased=!1),isZeroBased&&(isAllPositive&&(yDomainMin=0),isAllNegative&&(yDomainMax=0));var domainLength=Math.abs(yDomainMax-yDomainMin),padding={top:domainLength*0.1,bottom:domainLength*0.1};if(isDefined(center)){var yDomainAbs=Math.max(Math.abs(yDomainMin),Math.abs(yDomainMax));(yDomainMax=center+yDomainAbs),(yDomainMin=center-yDomainAbs);}
if(showHorizontalDataLabel){var diff=diffDomain(scale.y.range()),ratio=$$.getDataLabelLength(yDomainMin,yDomainMax,"width").map(function(v){return v/diff;});["bottom","top"].forEach(function(v,i){padding[v]+=domainLength*(ratio[i]/(1-ratio[0]-ratio[1]));});}else if(showVerticalDataLabel){var lengths=$$.getDataLabelLength(yDomainMin,yDomainMax,"height");["bottom","top"].forEach(function(v,i){padding[v]+=axis.convertPixelsToAxisPadding(lengths[i],domainLength);});}
var p=config[pfx+"_padding"];notEmpty(p)&&["bottom","top"].forEach(function(v){padding[v]=axis.getPadding(p,v,padding[v],domainLength);}),isZeroBased&&(isAllPositive&&(padding.bottom=yDomainMin),isAllNegative&&(padding.top=-yDomainMax));var domain=isLog?[yDomainMin,yDomainMax].map(function(v){return v<0?0:v;}):[yDomainMin-padding.bottom,yDomainMax+padding.top];return isInverted?domain.reverse():domain;},getXDomainMinMax:function getXDomainMinMax(targets,type){var $$=this,configValue=$$.config["axis_x_"+type],dataValue=getMinMax(type,targets.map(function(t){return getMinMax(type,t.values.map(function(v){return v.x;}));})),value=isObject(configValue)?configValue.value:configValue;return((value=isDefined(value)&&$$.axis.isTimeSeries()?parseDate(value):value),isObject(configValue)&&configValue.fit&&((type==="min"&&value<dataValue)||(type==="max"&&value>dataValue))&&(value=undefined),isDefined(value)?value:dataValue);},getXDomainMin:function getXDomainMin(targets){return this.getXDomainMinMax(targets,"min");},getXDomainMax:function getXDomainMax(targets){return this.getXDomainMinMax(targets,"max");},getXDomainPadding:function getXDomainPadding(domain){var maxDataCount,padding,$$=this,axis=$$.axis,config=$$.config,diff=domain[1]-domain[0],xPadding=config.axis_x_padding;axis.isCategorized()?(padding=0):$$.hasType("bar")?((maxDataCount=$$.getMaxDataCount()),(padding=maxDataCount>1?diff/(maxDataCount-1)/2:0.5)):(padding=diff*0.01);var left=padding,right=padding;return(isObject(xPadding)&&notEmpty(xPadding)?((left=isValue(xPadding.left)?xPadding.left:padding),(right=isValue(xPadding.right)?xPadding.right:padding)):isNumber(config.axis_x_padding)&&((left=xPadding),(right=xPadding)),{left:left,right:right});},getXDomain:function getXDomain(targets){var $$=this,isLog=$$.scale.x.type==="log",xDomain=[$$.getXDomainMin(targets),$$.getXDomainMax(targets)],min=0,max=0;if(isLog)(min=xDomain[0]),(max=xDomain[1]);else{var isCategorized=$$.axis.isCategorized(),isTimeSeries=$$.axis.isTimeSeries(),padding=$$.getXDomainPadding(xDomain),_xDomain=xDomain,firstX=_xDomain[0],lastX=_xDomain[1];firstX-lastX!==0||isCategorized||(isTimeSeries?((firstX=new Date(firstX.getTime()*0.5)),(lastX=new Date(lastX.getTime()*1.5))):((firstX=firstX===0?1:firstX*0.5),(lastX=lastX===0?-1:lastX*1.5))),(firstX||firstX===0)&&(min=isTimeSeries?new Date(firstX.getTime()-padding.left):firstX-padding.left),(lastX||lastX===0)&&(max=isTimeSeries?new Date(lastX.getTime()+padding.right):lastX+padding.right);}
return[min,max];},updateXDomain:function updateXDomain(targets,withUpdateXDomain,withUpdateOrgXDomain,withTrim,domain){var $$=this,config=$$.config,org=$$.org,_$$$scale=$$.scale,x=_$$$scale.x,subX=_$$$scale.subX,zoomEnabled=config.zoom_enabled;if((withUpdateOrgXDomain&&(x.domain(domain||sortValue($$.getXDomain(targets))),(org.xDomain=x.domain()),zoomEnabled&&$$.zoom.updateScaleExtent(),subX.domain(x.domain()),$$.brush&&$$.brush.scale(subX)),withUpdateXDomain)){var domainValue=domain||!$$.brush||brushEmpty($$)?org.xDomain:getBrushSelection($$).map(subX.invert);x.domain(domainValue),zoomEnabled&&$$.zoom.updateScaleExtent();}
return(withTrim&&x.domain($$.trimXDomain(x.orgDomain())),x.domain());},trimXDomain:function trimXDomain(domain){var zoomDomain=this.getZoomDomain(),min=zoomDomain[0],max=zoomDomain[1];return(domain[0]<=min&&((domain[1]=+domain[1]+(min-domain[0])),(domain[0]=min)),max<=domain[1]&&((domain[0]=+domain[0]-(domain[1]-max)),(domain[1]=max)),domain);},getZoomDomain:function getZoomDomain(){var $$=this,config=$$.config,org=$$.org,_org$xDomain=org.xDomain,min=_org$xDomain[0],max=_org$xDomain[1];return(isDefined(config.zoom_x_min)&&(min=getMinMax("min",[min,config.zoom_x_min])),isDefined(config.zoom_x_max)&&(max=getMinMax("max",[max,config.zoom_x_max])),[min,max]);}};function getFormat($$,typeValue,v){var config=$$.config,type="axis_"+typeValue+"_tick_format",format=config[type]?config[type]:$$.defaultValueFormat;return format(v);}
const format={getYFormat:function getYFormat(forArc){var $$=this,yFormat=$$.yFormat,y2Format=$$.y2Format;return(forArc&&!$$.hasType("gauge")&&((yFormat=$$.defaultArcValueFormat),(y2Format=$$.defaultArcValueFormat)),function(v,ratio,id){var format=$$.axis&&$$.axis.getId(id)==="y2"?y2Format:yFormat;return format.call($$,v,ratio);});},yFormat:function yFormat(v){return getFormat(this,"y",v);},y2Format:function y2Format(v){return getFormat(this,"y2",v);},defaultValueFormat:function defaultValueFormat(v){return isValue(v)?+v:"";},defaultArcValueFormat:function defaultArcValueFormat(v,ratio){return(ratio*100).toFixed(1)+"%";},dataLabelFormat:function dataLabelFormat(targetId){var $$=this,dataLabels=$$.config.data_labels,defaultFormat=function(v){return isValue(v)?+v:"";},format=defaultFormat;return(isFunction(dataLabels.format)?(format=dataLabels.format):isObjectType(dataLabels.format)&&(dataLabels.format[targetId]?(format=dataLabels.format[targetId]===!0?defaultFormat:dataLabels.format[targetId]):(format=function(){return"";})),format.bind($$.api));}};const internals_legend={initLegend:function initLegend(){var $$=this,config=$$.config,$el=$$.$el;($$.legendItemTextBox={}),($$.state.legendHasRendered=!1),config.legend_show?(!config.legend_contents_bindto&&($el.legend=$$.$el.svg.append("g").classed(config_classes.legend,!0).attr("transform",$$.getTranslate("legend"))),$$.updateLegend()):($$.state.hiddenLegendIds=$$.mapToIds($$.data.targets));},updateLegend:function updateLegend(targetIds,options,transitions){var $$=this,config=$$.config,state=$$.state,scale=$$.scale,$el=$$.$el,optionz=options||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};(optionz.withTransition=getOption(optionz,"withTransition",!0)),(optionz.withTransitionForTransform=getOption(optionz,"withTransitionForTransform",!0)),config.legend_contents_bindto&&config.legend_contents_template?$$.updateLegendTemplate():$$.updateLegendElement(targetIds||$$.mapToIds($$.data.targets),optionz,transitions),$el.legend.selectAll("."+config_classes.legendItem).classed(config_classes.legendItemHidden,function(id){return!$$.isTargetToShow(id);}),$$.updateScales(!1,!scale.zoom),$$.updateSvgSize(),$$.transformAll(optionz.withTransitionForTransform,transitions),(state.legendHasRendered=!0);},updateLegendTemplate:function updateLegendTemplate(){var $$=this,config=$$.config,$el=$$.$el,wrapper=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(config.legend_contents_bindto),template=config.legend_contents_template;if(!wrapper.empty()){var targets=$$.mapToIds($$.data.targets),ids=[],html="";targets.forEach(function(v){var content=isFunction(template)?template.bind($$.api)(v,$$.color(v),$$.api.data(v)[0].values):tplProcess(template,{COLOR:$$.color(v),TITLE:v});content&&(ids.push(v),(html+=content));});var legendItem=wrapper.html(html).selectAll(function(){return this.childNodes;}).data(ids);$$.setLegendItem(legendItem),($el.legend=wrapper);}},updateSizeForLegend:function updateSizeForLegend(size){var $$=this,config=$$.config,_$$$state=$$.state,isLegendTop=_$$$state.isLegendTop,isLegendLeft=_$$$state.isLegendLeft,isLegendRight=_$$$state.isLegendRight,isLegendInset=_$$$state.isLegendInset,current=_$$$state.current,width=size.width,height=size.height,insetLegendPosition={top:isLegendTop?$$.getCurrentPaddingTop()+config.legend_inset_y+5.5:current.height-
height-
$$.getCurrentPaddingBottom()-
config.legend_inset_y,left:isLegendLeft?$$.getCurrentPaddingLeft()+config.legend_inset_x+0.5:current.width-
width-
$$.getCurrentPaddingRight()-
config.legend_inset_x+
0.5};$$.state.margin3={top:isLegendRight?0:isLegendInset?insetLegendPosition.top:current.height-height,right:NaN,bottom:0,left:isLegendRight?current.width-width:isLegendInset?insetLegendPosition.left:0};},transformLegend:function transformLegend(withTransition){var $$=this,legend=$$.$el.legend;(withTransition?legend.transition():legend).attr("transform",$$.getTranslate("legend"));},updateLegendStep:function updateLegendStep(step){this.state.legendStep=step;},updateLegendItemWidth:function updateLegendItemWidth(width){this.state.legendItemWidth=width;},updateLegendItemHeight:function updateLegendItemHeight(height){this.state.legendItemHeight=height;},updateLegendItemColor:function updateLegendItemColor(id,color){var legend=this.$el.legend;legend&&legend.select("."+config_classes.legendItem+"-"+id+" line").style("stroke",color);},getLegendWidth:function getLegendWidth(){var $$=this,_$$$state2=$$.state,width=_$$$state2.current.width,isLegendRight=_$$$state2.isLegendRight,isLegendInset=_$$$state2.isLegendInset,legendItemWidth=_$$$state2.legendItemWidth,legendStep=_$$$state2.legendStep;return $$.config.legend_show?isLegendRight||isLegendInset?legendItemWidth*(legendStep+1):width:0;},getLegendHeight:function getLegendHeight(){var $$=this,_$$$state3=$$.state,current=_$$$state3.current,isLegendRight=_$$$state3.isLegendRight,legendItemHeight=_$$$state3.legendItemHeight,legendStep=_$$$state3.legendStep;return $$.config.legend_show?isLegendRight?current.height:Math.max(20,legendItemHeight)*(legendStep+1):0;},opacityForLegend:function opacityForLegend(legendItem){return legendItem.classed(config_classes.legendItemHidden)?null:"1";},opacityForUnfocusedLegend:function opacityForUnfocusedLegend(legendItem){return legendItem.classed(config_classes.legendItemHidden)?null:"0.3";},toggleFocusLegend:function toggleFocusLegend(targetIds,focus){var $$=this,legend=$$.$el.legend,targetIdz=$$.mapToTargetIds(targetIds);legend&&legend.selectAll("."+config_classes.legendItem).filter(function(id){return targetIdz.indexOf(id)>=0;}).classed(config_classes.legendItemFocused,focus).transition().duration(100).style("opacity",function(){return(focus?$$.opacityForLegend:$$.opacityForUnfocusedLegend).call($$,(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this));});},revertLegend:function revertLegend(){var $$=this,legend=$$.$el.legend;legend&&legend.selectAll("."+config_classes.legendItem).classed(config_classes.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return $$.opacityForLegend((0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this));});},showLegend:function showLegend(targetIds){var $$=this,config=$$.config,$el=$$.$el;config.legend_show||((config.legend_show=!0),$el.legend?$el.legend.style("visibility","visible"):$$.initLegend(),!$$.state.legendHasRendered&&$$.updateLegend()),$$.removeHiddenLegendIds(targetIds),$el.legend.selectAll($$.selectorLegends(targetIds)).style("visibility","visible").transition().style("opacity",function(){return $$.opacityForLegend((0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this));});},hideLegend:function hideLegend(targetIds){var $$=this,config=$$.config,legend=$$.$el.legend;config.legend_show&&isEmpty(targetIds)&&((config.legend_show=!1),legend.style("visibility","hidden")),$$.addHiddenLegendIds(targetIds),legend.selectAll($$.selectorLegends(targetIds)).style("opacity","0").style("visibility","hidden");},getLegendItemTextBox:function getLegendItemTextBox(id,textElement){var data,$$=this,cache=$$.cache,state=$$.state,cacheKey=KEY.legendItemTextBox;return(id&&((data=(!state.redrawing&&cache.get(cacheKey))||{}),!data[id]&&((data[id]=$$.getTextRect(textElement,config_classes.legendItem)),cache.add(cacheKey,data)),(data=data[id])),data);},setLegendItem:function setLegendItem(item){var $$=this,api=$$.api,config=$$.config,state=$$.state,isTouch=state.inputType==="touch",hasGauge=$$.hasType("gauge");item.attr("class",function(id){var node=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this),itemClass=(!node.empty()&&node.attr("class"))||"";return(itemClass+$$.generateClass(config_classes.legendItem,id));}).style("visibility",function(id){return $$.isLegendToShow(id)?"visible":"hidden";}),config.interaction_enabled&&(item.style("cursor","pointer").on("click",function(id){callFn(config.legend_item_onclick,api,id)||(external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event.altKey?(api.hide(),api.show(id)):(api.toggle(id),(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this).classed(config_classes.legendItemFocused,!1).style("opacity",null))),isTouch&&$$.hideTooltip();}),!isTouch&&item.on("mouseout",function(id){callFn(config.legend_item_onout,api,id)||((0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this).classed(config_classes.legendItemFocused,!1),hasGauge&&$$.undoMarkOverlapped($$,"."+config_classes.gaugeValue),$$.api.revert());}).on("mouseover",function(id){callFn(config.legend_item_onover,api,id)||((0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this).classed(config_classes.legendItemFocused,!0),hasGauge&&$$.markOverlapped(id,$$,"."+config_classes.gaugeValue),!state.transiting&&$$.isTargetToShow(id)&&api.focus(id));}));},updateLegendElement:function updateLegendElement(targetIds,options){var xForLegend,yForLegend,background,$$=this,config=$$.config,state=$$.state,legend=$$.$el.legend,posMin=10,tileWidth=config.legend_item_tile_width+5,maxWidth=0,maxHeight=0,totalLength=0,offsets={},widths={},heights={},margins=[0],steps={},step=0,isLegendRightOrInset=state.isLegendRight||state.isLegendInset,targetIdz=targetIds.filter(function(id){return(!isDefined(config.data_names[id])||config.data_names[id]!==null);}),withTransition=options.withTransition,updatePositions=function(textElement,id,index){var margin,isLast=index===targetIdz.length-1,box=$$.getLegendItemTextBox(id,textElement),itemWidth=box.width+
tileWidth+
(isLast&&!isLegendRightOrInset?0:10)+
config.legend_padding,itemHeight=box.height+4,itemLength=isLegendRightOrInset?itemHeight:itemWidth,areaLength=isLegendRightOrInset?$$.getLegendHeight():$$.getLegendWidth(),updateValues=function(id2,withoutStep){withoutStep||((margin=(areaLength-totalLength-itemLength)/2),margin<posMin&&((margin=(areaLength-itemLength)/2),(totalLength=0),step++)),(steps[id2]=step),(margins[step]=state.isLegendInset?10:margin),(offsets[id2]=totalLength),(totalLength+=itemLength);};if((index===0&&((totalLength=0),(step=0),(maxWidth=0),(maxHeight=0)),config.legend_show&&!$$.isLegendToShow(id)))
return((widths[id]=0),(heights[id]=0),(steps[id]=0),void(offsets[id]=0));(widths[id]=itemWidth),(heights[id]=itemHeight),(!maxWidth||itemWidth>=maxWidth)&&(maxWidth=itemWidth),(!maxHeight||itemHeight>=maxHeight)&&(maxHeight=itemHeight);var maxLength=isLegendRightOrInset?maxHeight:maxWidth;config.legend_equally?(Object.keys(widths).forEach(function(id2){return(widths[id2]=maxWidth);}),Object.keys(heights).forEach(function(id2){return(heights[id2]=maxHeight);}),(margin=(areaLength-maxLength*targetIdz.length)/2),margin<posMin?((totalLength=0),(step=0),targetIdz.forEach(function(id2){return updateValues(id2);})):updateValues(id,!0)):updateValues(id);};state.isLegendInset&&((step=config.legend_inset_step?config.legend_inset_step:targetIdz.length),$$.updateLegendStep(step)),state.isLegendRight?((xForLegend=function(id){return maxWidth*steps[id];}),(yForLegend=function(id){return margins[steps[id]]+offsets[id];})):state.isLegendInset?((xForLegend=function(id){return maxWidth*steps[id]+10;}),(yForLegend=function(id){return margins[steps[id]]+offsets[id];})):((xForLegend=function(id){return margins[steps[id]]+offsets[id];}),(yForLegend=function(id){return maxHeight*steps[id];}));var xForLegendText=function(id,i){return xForLegend(id,i)+4+config.legend_item_tile_width;},xForLegendRect=function(id,i){return xForLegend(id,i);},x1ForLegendTile=function(id,i){return xForLegend(id,i)-2;},x2ForLegendTile=function(id,i){return xForLegend(id,i)-2+config.legend_item_tile_width;},yForLegendText=function(id,i){return yForLegend(id,i)+9;},yForLegendRect=function(id,i){return yForLegend(id,i)-5;},yForLegendTile=function(id,i){return yForLegend(id,i)+4;},pos=-200,l=legend.selectAll("."+config_classes.legendItem).data(targetIdz).enter().append("g");$$.setLegendItem(l),l.append("text").text(function(id){return isDefined(config.data_names[id])?config.data_names[id]:id;}).each(function(id,i){updatePositions(this,id,i);}).style("pointer-events","none").attr("x",isLegendRightOrInset?xForLegendText:pos).attr("y",isLegendRightOrInset?pos:yForLegendText),l.append("rect").attr("class",config_classes.legendItemEvent).style("fill-opacity","0").attr("x",isLegendRightOrInset?xForLegendRect:pos).attr("y",isLegendRightOrInset?pos:yForLegendRect);var getColor=function(id){var data=$$.getDataById(id);return $$.levelColor?$$.levelColor(data.values[0].value):$$.color(data);},usePoint=config.legend_usePoint;if(usePoint){var ids=[];l.append(function(d){var pattern=notEmpty(config.point_pattern)?config.point_pattern:[config.point_type];ids.indexOf(d)===-1&&ids.push(d);var point=pattern[ids.indexOf(d)%pattern.length];return(point==="rectangle"&&(point="rect"),browser_doc.createElementNS(external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.namespaces.svg,"hasValidPointType"in $$&&$$.hasValidPointType(point)?point:"use"));}).attr("class",config_classes.legendItemPoint).style("fill",getColor).style("pointer-events","none").attr("href",function(data,idx,selection){var node=selection[idx],nodeName=node.nodeName.toLowerCase();return nodeName==="use"?"#"+state.datetimeId+"-point-"+data:undefined;});}else
l.append("line").attr("class",config_classes.legendItemTile).style("stroke",getColor).style("pointer-events","none").attr("x1",isLegendRightOrInset?x1ForLegendTile:pos).attr("y1",isLegendRightOrInset?pos:yForLegendTile).attr("x2",isLegendRightOrInset?x2ForLegendTile:pos).attr("y2",isLegendRightOrInset?pos:yForLegendTile).attr("stroke-width",config.legend_item_tile_height);(background=legend.select("."+config_classes.legendBackground+" rect")),state.isLegendInset&&maxWidth>0&&background.size()===0&&(background=legend.insert("g","."+config_classes.legendItem).attr("class",config_classes.legendBackground).append("rect"));var texts=legend.selectAll("text").data(targetIdz).text(function(id){return isDefined(config.data_names[id])?config.data_names[id]:id;}).each(function(id,i){updatePositions(this,id,i);});(withTransition?texts.transition():texts).attr("x",xForLegendText).attr("y",yForLegendText);var rects=legend.selectAll("rect."+config_classes.legendItemEvent).data(targetIdz);if(((withTransition?rects.transition():rects).attr("width",function(id){return widths[id];}).attr("height",function(id){return heights[id];}).attr("x",xForLegendRect).attr("y",yForLegendRect),usePoint)){var tiles=legend.selectAll("."+config_classes.legendItemPoint).data(targetIdz);(withTransition?tiles.transition():tiles).each(function(){var radius,width,height,nodeName=this.nodeName.toLowerCase(),pointR=config.point_r,x="x",y="y",xOffset=2,yOffset=2.5;if(nodeName==="circle"){var size=pointR*0.2;(x="cx"),(y="cy"),(radius=pointR+size),(xOffset=pointR*2),(yOffset=-size);}else if(nodeName==="rect"){var _size=pointR*2.5;(width=_size),(height=_size),(yOffset=3);}
(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this).attr(x,function(d){return x1ForLegendTile(d)+xOffset;}).attr(y,function(d){return yForLegendTile(d)-yOffset;}).attr("r",radius).attr("width",width).attr("height",height);});}else{var _tiles=legend.selectAll("line."+config_classes.legendItemTile).data(targetIdz);(withTransition?_tiles.transition():_tiles).style("stroke",getColor).attr("x1",x1ForLegendTile).attr("y1",yForLegendTile).attr("x2",x2ForLegendTile).attr("y2",yForLegendTile);}
background&&(withTransition?background.transition():background).attr("height",$$.getLegendHeight()-12).attr("width",maxWidth*(step+1)+10),$$.updateLegendItemWidth(maxWidth),$$.updateLegendItemHeight(maxHeight),$$.updateLegendStep(step);}};var external_commonjs_d3_transition_commonjs2_d3_transition_amd_d3_transition_root_d3_=__webpack_require__(8);const redraw={redraw:function redraw(options,transitionsValue){options===void 0&&(options={});var $$=this,config=$$.config,state=$$.state,$el=$$.$el,main=$el.main;state.redrawing=!0;var targetsToShow=$$.filterTargetsToShow($$.data.targets),initializing=options.initializing,flow=options.flow,wth=$$.getWithOption(options),duration=wth.Transition?config.transition_duration:0,durationForExit=wth.TransitionForExit?duration:0,durationForAxis=wth.TransitionForAxis?duration:0,transitions=transitionsValue||($$.axis&&$$.axis.generateTransitions(durationForAxis));$$.updateSizes(initializing),wth.Legend&&config.legend_show?$$.updateLegend($$.mapToIds($$.data.targets),options,transitions):wth.Dimension&&$$.updateDimension(!0),(!$$.hasArcType()||state.hasRadar)&&$$.updateCircleY&&$$.updateCircleY(),state.hasAxis?($$.axis.redrawAxis(targetsToShow,wth,transitions,flow,initializing),config.data_empty_label_text&&main.select("text."+
config_classes.text+"."+
config_classes.empty).attr("x",state.width/2).attr("y",state.height/2).text(config.data_empty_label_text).style("display",targetsToShow.length?"none":null),$$.hasGrid()&&$$.updateGrid(duration),config.regions.length&&$$.updateRegion(duration),$$.hasType("bar")&&$$.updateBar(durationForExit),$$.hasTypeOf("Line")&&$$.updateLine(durationForExit),$$.hasTypeOf("Area")&&$$.updateArea(durationForExit),$el.text&&main.selectAll("."+config_classes.selectedCircles).filter($$.isBarType.bind($$)).selectAll("circle").remove(),config.interaction_enabled&&!flow&&wth.EventRect&&($$.redrawEventRect(),$$.bindZoomEvent&&$$.bindZoomEvent())):($el.arcs&&$$.redrawArc(duration,durationForExit,wth.Transform),$el.radar&&$$.redrawRadar(durationForExit)),!state.resizing&&($$.hasPointType()||state.hasRadar)&&$$.updateCircle(),$$.hasDataLabel()&&!$$.hasArcType(null,["radar"])&&$$.updateText(durationForExit),$$.redrawTitle&&$$.redrawTitle(),initializing&&$$.updateTypesElements(),$$.generateRedrawList(targetsToShow,flow,duration,wth.Subchart),$$.callPluginHook("$redraw",options,duration);},generateRedrawList:function generateRedrawList(targets,flow,duration,withSubchart){var $$=this,config=$$.config,state=$$.state,shape=$$.getDrawShape();state.hasAxis&&config.subchart_show&&$$.redrawSubchart(withSubchart,duration,shape);var flowFn=flow&&$$.generateFlow({targets:targets,flow:flow,duration:flow.duration,shape:shape,xv:$$.xv.bind($$)}),isTransition=(duration||flowFn)&&isTabVisible(),redrawList=$$.getRedrawList(shape,flow,flowFn,isTransition),afterRedraw=flow||config.onrendered?function(){flowFn&&flowFn(),(state.redrawing=!1),callFn(config.onrendered,$$.api);}:null;if(afterRedraw)
if(isTransition&&redrawList.length){var waitForDraw=generateWait();(0,external_commonjs_d3_transition_commonjs2_d3_transition_amd_d3_transition_root_d3_.transition)().duration(duration).each(function(){redrawList.reduce(function(acc,t1){return acc.concat(t1);},[]).forEach(function(t){return waitForDraw.add(t);});}).call(waitForDraw,afterRedraw);}else state.transiting||afterRedraw();$$.mapToIds($$.data.targets).forEach(function(id){state.withoutFadeIn[id]=!0;});},getRedrawList:function getRedrawList(shape,flow,flowFn,isTransition){var $$=this,config=$$.config,_$$$state=$$.state,hasAxis=_$$$state.hasAxis,hasRadar=_$$$state.hasRadar,grid=$$.$el.grid,_shape$pos=shape.pos,cx=_shape$pos.cx,cy=_shape$pos.cy,xForText=_shape$pos.xForText,yForText=_shape$pos.yForText,list=[];if(hasAxis){var _shape$type=shape.type,area=_shape$type.area,bar=_shape$type.bar,line=_shape$type.line;(config.grid_x_lines.length||config.grid_y_lines.length)&&list.push($$.redrawGrid(isTransition)),config.regions.length&&list.push($$.redrawRegion(isTransition)),$$.hasTypeOf("Line")&&list.push($$.redrawLine(line,isTransition)),$$.hasTypeOf("Area")&&list.push($$.redrawArea(area,isTransition)),$$.hasType("bar")&&list.push($$.redrawBar(bar,isTransition)),!flow&&grid.main&&list.push($$.updateGridFocus());}
return((!$$.hasArcType()||hasRadar)&&notEmpty(config.data_labels)&&config.data_labels!==!1&&list.push($$.redrawText(xForText,yForText,flow,isTransition)),($$.hasPointType()||hasRadar)&&!config.point_focus_only&&$$.redrawCircle&&list.push($$.redrawCircle(cx,cy,isTransition,flowFn)),list);},updateAndRedraw:function updateAndRedraw(options){options===void 0&&(options={});var transitions,$$=this,config=$$.config,state=$$.state;(options.withTransition=getOption(options,"withTransition",!0)),(options.withTransform=getOption(options,"withTransform",!1)),(options.withLegend=getOption(options,"withLegend",!1)),(options.withUpdateXDomain=!0),(options.withUpdateOrgXDomain=!0),(options.withTransitionForExit=!1),(options.withTransitionForTransform=getOption(options,"withTransitionForTransform",options.withTransition)),(options.withLegend&&config.legend_show)||(state.hasAxis&&(transitions=$$.axis.generateTransitions(options.withTransitionForAxis?config.transition_duration:0)),$$.updateScales(),$$.updateSvgSize(),$$.transformAll(options.withTransitionForTransform,transitions)),$$.redraw(options,transitions);},redrawWithoutRescale:function redrawWithoutRescale(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1});}};function getScale(type,min,max){type===void 0&&(type="linear"),min===void 0&&(min=0),max===void 0&&(max=1);var scale={linear:external_commonjs_d3_scale_commonjs2_d3_scale_amd_d3_scale_root_d3_.scaleLinear,log:external_commonjs_d3_scale_commonjs2_d3_scale_amd_d3_scale_root_d3_.scaleSymlog,_log:external_commonjs_d3_scale_commonjs2_d3_scale_amd_d3_scale_root_d3_.scaleLog,time:external_commonjs_d3_scale_commonjs2_d3_scale_amd_d3_scale_root_d3_.scaleTime}[type]();return((scale.type=type),/_?log/.test(type)&&scale.clamp(!0),scale.range([min,max]));}
const scale={getXScale:function getXScale(min,max,domain,offset){var $$=this,scale=$$.scale.zoom||getScale($$.axis.getAxisType("x"),min,max);return $$.getCustomizedScale(domain?scale.domain(domain):scale,offset);},getYScale:function getYScale(id,min,max,domain){var $$=this,scale=getScale($$.axis.getAxisType(id),min,max);return domain&&scale.domain(domain),scale;},getYScaleById:function getYScaleById(id,isSub){isSub===void 0&&(isSub=!1);var isY2=this.axis.getId(id)==="y2",key=isSub?(isY2?"subY2":"subY"):isY2?"y2":"y";return this.scale[key];},getCustomizedScale:function getCustomizedScale(scaleValue,offsetValue){var $$=this,offset=offsetValue||function(){return $$.axis.x.tickOffset();},scale=function(d,raw){var v=scaleValue(d)+offset();return raw?v:Math.ceil(v);};for(var key in scaleValue)scale[key]=scaleValue[key];return((scale.orgDomain=function(){return scaleValue.domain();}),(scale.orgScale=function(){return scaleValue;}),$$.axis.isCategorized()&&(scale.domain=function(domainValue){var domain=domainValue;return arguments.length?(scaleValue.domain(domain),scale):((domain=this.orgDomain()),[domain[0],domain[1]+1]);}),scale);},updateScales:function updateScales(isInit,updateXDomain){updateXDomain===void 0&&(updateXDomain=!0);var $$=this,axis=$$.axis,config=$$.config,format=$$.format,org=$$.org,scale=$$.scale,_$$$state=$$.state,width=_$$$state.width,height=_$$$state.height,width2=_$$$state.width2,height2=_$$$state.height2,hasAxis=_$$$state.hasAxis;if(hasAxis){var isRotated=config.axis_rotated,min={x:isRotated?1:0,y:isRotated?0:height,subX:isRotated?1:0,subY:isRotated?0:height2},max={x:isRotated?height:width,y:isRotated?width:1,subX:isRotated?height:width,subY:isRotated?width2:1},xDomain=updateXDomain&&scale.x&&scale.x.orgDomain(),xSubDomain=updateXDomain&&org.xDomain;(scale.x=$$.getXScale(min.x,max.x,xDomain,function(){return axis.x.tickOffset();})),(scale.subX=$$.getXScale(min.x,max.x,xSubDomain,function(d){return d%1?0:axis.subX.tickOffset();})),(format.xAxisTick=axis.getXAxisTickFormat()),axis.setAxis("x",scale.x,config.axis_x_tick_outer,isInit),config.subchart_show&&axis.setAxis("subX",scale.subX,config.axis_x_tick_outer,isInit),(scale.y=$$.getYScale("y",min.y,max.y,scale.y?scale.y.domain():config.axis_y_default)),(scale.subY=$$.getYScale("y",min.subY,max.subY,scale.subY?scale.subY.domain():config.axis_y_default)),axis.setAxis("y",scale.y,config.axis_y_tick_outer,isInit),config.axis_y2_show&&((scale.y2=$$.getYScale("y2",min.y,max.y,scale.y2?scale.y2.domain():config.axis_y2_default)),(scale.subY2=$$.getYScale("y2",min.subY,max.subY,scale.subY2?scale.subY2.domain():config.axis_y2_default)),axis.setAxis("y2",scale.y2,config.axis_y2_tick_outer,isInit));}
else $$.updateArc&&$$.updateArc();},xx:function xx(d){var $$=this,config=$$.config,_$$$scale=$$.scale,x=_$$$scale.x,zoom=_$$$scale.zoom,fn=config.zoom_enabled&&zoom?zoom:x;return d?fn(isValue(d.x)?d.x:d):null;},xv:function xv(d){var $$=this,axis=$$.axis,config=$$.config,x=$$.scale.x,value=$$.getBaseValue(d);return(axis.isTimeSeries()?(value=parseDate.call($$,value)):axis.isCategorized()&&isString(value)&&(value=config.axis_x_categories.indexOf(value)),Math.ceil(x(value)));},yv:function yv(d){var $$=this,_$$$scale2=$$.scale,y=_$$$scale2.y,y2=_$$$scale2.y2,yScale=d.axis&&d.axis==="y2"?y2:y;return Math.ceil(yScale($$.getBaseValue(d)));},subxx:function subxx(d){return d?this.scale.subX(d.x):null;}};var external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_=__webpack_require__(9);const shape={getDrawShape:function getDrawShape(){var $$=this,isRotated=$$.config.axis_rotated,hasRadar=$$.state.hasRadar,shape={type:{},indices:{},pos:{}};if($$.hasTypeOf("Line")||$$.hasType("bubble")||$$.hasType("scatter")){var indices=$$.getShapeIndices($$.isLineType);if(((shape.indices.line=indices),(shape.type.line=$$.generateDrawLine?$$.generateDrawLine(indices,!1):undefined),$$.hasTypeOf("Area"))){var _indices=$$.getShapeIndices($$.isAreaType);(shape.indices.area=_indices),(shape.type.area=$$.generateDrawArea?$$.generateDrawArea(_indices,!1):undefined);}}
if($$.hasType("bar")){var _indices2=$$.getShapeIndices($$.isBarType);(shape.indices.bar=_indices2),(shape.type.bar=$$.generateDrawBar?$$.generateDrawBar(_indices2):undefined);}
if(!$$.hasArcType()||hasRadar){var cx=hasRadar?$$.radarCircleX:isRotated?$$.circleY:$$.circleX,cy=hasRadar?$$.radarCircleY:isRotated?$$.circleX:$$.circleY;shape.pos={xForText:$$.generateXYForText(shape.indices,!0),yForText:$$.generateXYForText(shape.indices,!1),cx:(cx||function(){}).bind($$),cy:(cy||function(){}).bind($$)};}
return shape;},getShapeIndices:function getShapeIndices(typeFilter){var $$=this,config=$$.config,xs=config.data_xs,hasXs=notEmpty(xs),indices={},i=hasXs?{}:0;return(hasXs&&getUnique(Object.keys(xs).map(function(v){return xs[v];})).forEach(function(v){(i[v]=0),(indices[v]={});}),$$.filterTargetsToShow($$.data.targets.filter(typeFilter,$$)).forEach(function(d){for(var groups,xKey=(d.id in xs)?xs[d.id]:"",ind=xKey?indices[xKey]:indices,j=0;(groups=config.data_groups[j]);j++)
if(!(groups.indexOf(d.id)<0))
for(var _row4,_k4=0;(_row4=groups[_k4]);_k4++)
if(_row4 in ind){ind[d.id]=ind[_row4];break;}
isUndefined(ind[d.id])&&((ind[d.id]=xKey?i[xKey]++:i++),(ind.__max__=(xKey?i[xKey]:i)-1));}),indices);},getIndices:function getIndices(indices,id){var xs=this.config.data_xs;return notEmpty(xs)?indices[xs[id]]:indices;},getIndicesMax:function getIndicesMax(indices){return notEmpty(this.config.data_xs)?Object.keys(indices).map(function(v){return indices[v].__max__||0;}).reduce(function(acc,curr){return acc+curr;}):indices.__max__;},getShapeX:function getShapeX(offset,indices,isSub){var $$=this,config=$$.config,scale=$$.scale,currScale=isSub?scale.subX:scale.zoom||scale.x,barPadding=config.bar_padding,sum=function(p,c){return p+c;},halfWidth=isObjectType(offset)&&(offset._$total.length?offset._$total.reduce(sum)/2:0);return function(d){var ind=$$.getIndices(indices,d.id),index=d.id in ind?ind[d.id]:0,targetsNum=(ind.__max__||0)+1,x=0;if(notEmpty(d.x)){var xPos=currScale(d.x);x=halfWidth?xPos-
(offset[d.id]||offset._$width)+
offset._$total.slice(0,index+1).reduce(sum)-
halfWidth:xPos-
(isNumber(offset)?offset:offset._$width)*(targetsNum/2-index);}
return(offset&&x&&targetsNum>1&&barPadding&&(index&&(x+=barPadding*index),targetsNum>2?(x-=(targetsNum-1)*barPadding/2):targetsNum===2&&(x-=barPadding/2)),x);};},getShapeY:function getShapeY(isSub){var $$=this,isStackNormalized=$$.isStackNormalized();return function(d){var value=isStackNormalized?$$.getRatio("index",d,!0):$$.isBubbleZType(d)?$$.getBubbleZData(d.value,"y"):d.value;return $$.getYScaleById(d.id,isSub)(value);};},getShapeYMin:function getShapeYMin(id){var $$=this,scale=$$.scale[$$.axis.getId(id)],_scale$domain=scale.domain(),yMin=_scale$domain[0];return!$$.isGrouped(id)&&yMin>0?yMin:0;},getShapeOffsetData:function getShapeOffsetData(typeFilter){var $$=this,targets=$$.orderTargets($$.filterTargetsToShow($$.data.targets.filter(typeFilter,$$))),isStackNormalized=$$.isStackNormalized(),shapeOffsetTargets=targets.map(function(target){var rowValues=target.values,values={};$$.isStepType(target)&&(rowValues=$$.convertValuesToStep(rowValues));var rowValueMapByXValue=rowValues.reduce(function(out,d){var key=+d.x;return((out[key]=d),(values[key]=isStackNormalized?$$.getRatio("index",d,!0):d.value),out);},{});return{id:target.id,rowValues:rowValues,rowValueMapByXValue:rowValueMapByXValue,values:values};}),indexMapByTargetId=targets.reduce(function(out,_ref,index){var id=_ref.id;return(out[id]=index),out;},{});return{indexMapByTargetId:indexMapByTargetId,shapeOffsetTargets:shapeOffsetTargets};},getShapeOffset:function getShapeOffset(typeFilter,indices,isSub){var $$=this,_$$$getShapeOffsetDat=$$.getShapeOffsetData(typeFilter),shapeOffsetTargets=_$$$getShapeOffsetDat.shapeOffsetTargets,indexMapByTargetId=_$$$getShapeOffsetDat.indexMapByTargetId;return function(d,idx){var ind=$$.getIndices(indices,d.id),scale=$$.getYScaleById(d.id,isSub),y0=scale($$.getShapeYMin(d.id)),dataXAsNumber=+d.x,offset=y0;return(shapeOffsetTargets.filter(function(t){return t.id!==d.id;}).forEach(function(t){if(ind[t.id]===ind[d.id]&&indexMapByTargetId[t.id]<indexMapByTargetId[d.id]){var row=t.rowValues[idx];(row&&+row.x===dataXAsNumber)||(row=t.rowValueMapByXValue[dataXAsNumber]),row&&row.value*d.value>=0&&(offset+=scale(t.values[dataXAsNumber])-y0);}}),offset);};},isWithinShape:function isWithinShape(that,d){var isWithin,$$=this,shape=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(that);return($$.isTargetToShow(d.id)?"hasValidPointType"in $$&&$$.hasValidPointType(that.nodeName)?(isWithin=$$.isStepType(d)?$$.isWithinStep(that,$$.getYScaleById(d.id)(d.value)):$$.isWithinCircle(that,$$.isBubbleType(d)?$$.pointSelectR(d)*1.5:0)):that.nodeName==="path"&&(isWithin=!shape.classed(config_classes.bar)||$$.isWithinBar(that)):(isWithin=!1),isWithin);},getInterpolate:function getInterpolate(d){var $$=this,interpolation=$$.getInterpolateType(d);return{basis:external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveBasis,"basis-closed":external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveBasisClosed,"basis-open":external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveBasisOpen,bundle:external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveBundle,cardinal:external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveCardinal,"cardinal-closed":external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveCardinalClosed,"cardinal-open":external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveCardinalOpen,"catmull-rom":external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveCatmullRom,"catmull-rom-closed":external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveCatmullRomClosed,"catmull-rom-open":external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveCatmullRomOpen,"monotone-x":external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveMonotoneX,"monotone-y":external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveMonotoneY,natural:external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveNatural,"linear-closed":external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveLinearClosed,linear:external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveLinear,step:external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveStep,"step-after":external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveStepAfter,"step-before":external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.curveStepBefore}[interpolation];},getInterpolateType:function getInterpolateType(d){var $$=this,config=$$.config,type=config.spline_interpolation_type,interpolation=$$.isInterpolationType(type)?type:"cardinal";return $$.isSplineType(d)?interpolation:$$.isStepType(d)?config.line_step_type:"linear";}};const size={setContainerSize:function setContainerSize(){var $$=this,state=$$.state;(state.current.width=$$.getCurrentWidth()),(state.current.height=$$.getCurrentHeight());},getCurrentWidth:function getCurrentWidth(){var $$=this;return $$.config.size_width||$$.getParentWidth();},getCurrentHeight:function getCurrentHeight(){var $$=this,config=$$.config,h=config.size_height||$$.getParentHeight();return h>0?h:320/($$.hasType("gauge")&&!config.gauge_fullCircle?2:1);},getCurrentPaddingTop:function getCurrentPaddingTop(){var $$=this,config=$$.config,hasAxis=$$.state.hasAxis,$el=$$.$el,axesLen=hasAxis?config.axis_y2_axes.length:0,padding=isValue(config.padding_top)?config.padding_top:0;return($el.title&&$el.title.node()&&(padding+=$$.getTitlePadding()),axesLen&&config.axis_rotated&&(padding+=$$.getHorizontalAxisHeight("y2")*axesLen),padding);},getCurrentPaddingBottom:function getCurrentPaddingBottom(){var $$=this,config=$$.config,hasAxis=$$.state.hasAxis,axisId=config.axis_rotated?"y":"x",axesLen=hasAxis?config["axis_"+axisId+"_axes"].length:0,padding=isValue(config.padding_bottom)?config.padding_bottom:0;return(padding+
(axesLen?$$.getHorizontalAxisHeight(axisId)*axesLen:0));},getCurrentPaddingLeft:function getCurrentPaddingLeft(withoutRecompute){var padding,$$=this,config=$$.config,hasAxis=$$.state.hasAxis,isRotated=config.axis_rotated,axisId=isRotated?"x":"y",axesLen=hasAxis?config["axis_"+axisId+"_axes"].length:0,axisWidth=hasAxis?$$.getAxisWidthByAxisId(axisId,withoutRecompute):0;return((padding=isValue(config.padding_left)?config.padding_left:hasAxis&&isRotated?config.axis_x_show?Math.max(ceil10(axisWidth),40):1:hasAxis&&(!config.axis_y_show||config.axis_y_inner)?$$.axis.getAxisLabelPosition("y").isOuter?30:1:ceil10(axisWidth)),padding+axisWidth*axesLen);},getCurrentPaddingRight:function getCurrentPaddingRight(withoutTickTextOverflow){withoutTickTextOverflow===void 0&&(withoutTickTextOverflow=!1);var padding,$$=this,config=$$.config,hasAxis=$$.state.hasAxis,defaultPadding=10,legendWidthOnRight=$$.state.isLegendRight?$$.getLegendWidth()+20:0,axesLen=hasAxis?config.axis_y2_axes.length:0,axisWidth=hasAxis?$$.getAxisWidthByAxisId("y2"):0,xAxisTickTextOverflow=withoutTickTextOverflow?0:$$.axis.getXAxisTickTextY2Overflow(defaultPadding);return((padding=isValue(config.padding_right)?config.padding_right+1:$$.axis&&config.axis_rotated?defaultPadding+legendWidthOnRight:$$.axis&&(!config.axis_y2_show||config.axis_y2_inner)?Math.max(2+
legendWidthOnRight+
($$.axis.getAxisLabelPosition("y2").isOuter?20:0),xAxisTickTextOverflow):Math.max(ceil10(axisWidth)+legendWidthOnRight,xAxisTickTextOverflow)),padding+axisWidth*axesLen);},getParentRectValue:function getParentRectValue(key){for(var v,offsetName="offset"+capitalize(key),parent=this.$el.chart.node();!v&&parent&&parent.tagName!=="BODY";){try{v=parent.getBoundingClientRect()[key];}catch(e){offsetName in parent&&(v=parent[offsetName]);}
parent=parent.parentNode;}
if(key==="width"){var bodyWidth=browser_doc.body.offsetWidth;v>bodyWidth&&(v=bodyWidth);}
return v;},getParentWidth:function getParentWidth(){return this.getParentRectValue("width");},getParentHeight:function getParentHeight(){var h=this.$el.chart.style("height");return h.indexOf("px")>0?parseInt(h,10):0;},getSvgLeft:function getSvgLeft(withoutRecompute){var $$=this,config=$$.config,$el=$$.$el,hasLeftAxisRect=config.axis_rotated||(!config.axis_rotated&&!config.axis_y_inner),leftAxisClass=config.axis_rotated?config_classes.axisX:config_classes.axisY,leftAxis=$el.main.select("."+leftAxisClass).node(),svgRect=leftAxis&&hasLeftAxisRect?leftAxis.getBoundingClientRect():{right:0},chartRect=$el.chart.node().getBoundingClientRect(),hasArc=$$.hasArcType(),svgLeft=svgRect.right-
chartRect.left-
(hasArc?0:$$.getCurrentPaddingLeft(withoutRecompute));return svgLeft>0?svgLeft:0;},updateDimension:function updateDimension(withoutAxis){var $$=this,config=$$.config,hasAxis=$$.state.hasAxis,$el=$$.$el;hasAxis&&!withoutAxis&&($$.axis.x&&config.axis_rotated?($$.axis.x.create($el.axis.x),$$.axis.subX&&$$.axis.subX.create($el.axis.subX)):($$.axis.y&&$$.axis.y.create($el.axis.y),$$.axis.y2&&$$.axis.y2.create($el.axis.y2))),$$.updateScales(withoutAxis),$$.updateSvgSize(),$$.transformAll(!1);},updateSvgSize:function updateSvgSize(){var $$=this,_$$$state=$$.state,clip=_$$$state.clip,current=_$$$state.current,hasAxis=_$$$state.hasAxis,width=_$$$state.width,height=_$$$state.height,svg=$$.$el.svg;if((svg.attr("width",current.width).attr("height",current.height),hasAxis)){var brush=svg.select("."+config_classes.brush+" .overlay"),brushSize={width:0,height:0};brush.size()&&((brushSize.width=+brush.attr("width")),(brushSize.height=+brush.attr("height"))),svg.selectAll(["#"+clip.id,"#"+clip.idGrid]).select("rect").attr("width",width).attr("height",height),svg.select("#"+clip.idXAxis).select("rect").call($$.setXAxisClipPath.bind($$)),svg.select("#"+clip.idYAxis).select("rect").call($$.setYAxisClipPath.bind($$)),clip.idSubchart&&svg.select("#"+clip.idSubchart).select("rect").attr("width",width).attr("height",brushSize.height);}},updateSizes:function updateSizes(isInit){var $$=this,config=$$.config,state=$$.state,legend=$$.$el.legend,isRotated=config.axis_rotated,hasArc=$$.hasArcType();isInit||$$.setContainerSize();var currLegend={width:legend?$$.getLegendWidth():0,height:legend?$$.getLegendHeight():0};!hasArc&&config.axis_x_show&&config.axis_x_tick_autorotate&&$$.updateXAxisTickClip();var legendHeightForBottom=state.isLegendRight||state.isLegendInset?0:currLegend.height,xAxisHeight=isRotated||hasArc?0:$$.getHorizontalAxisHeight("x"),subchartXAxisHeight=config.subchart_axis_x_show&&config.subchart_axis_x_tick_text_show?xAxisHeight:30,subchartHeight=config.subchart_show&&!hasArc?config.subchart_size_height+subchartXAxisHeight:0;(state.margin=!hasArc&&isRotated?{top:$$.getHorizontalAxisHeight("y2")+
$$.getCurrentPaddingTop(),right:hasArc?0:$$.getCurrentPaddingRight(),bottom:$$.getHorizontalAxisHeight("y")+
legendHeightForBottom+
$$.getCurrentPaddingBottom(),left:subchartHeight+(hasArc?0:$$.getCurrentPaddingLeft())}:{top:4+$$.getCurrentPaddingTop(),right:hasArc?0:$$.getCurrentPaddingRight(),bottom:xAxisHeight+
subchartHeight+
legendHeightForBottom+
$$.getCurrentPaddingBottom(),left:hasArc?0:$$.getCurrentPaddingLeft()}),(state.margin2=isRotated?{top:state.margin.top,right:NaN,bottom:20+legendHeightForBottom,left:$$.state.rotatedPadding.left}:{top:state.current.height-
subchartHeight-
legendHeightForBottom,right:NaN,bottom:subchartXAxisHeight+legendHeightForBottom,left:state.margin.left}),(state.margin3={top:0,right:NaN,bottom:0,left:0}),$$.updateSizeForLegend&&$$.updateSizeForLegend(currLegend),(state.width=state.current.width-state.margin.left-state.margin.right),(state.height=state.current.height-state.margin.top-state.margin.bottom),state.width<0&&(state.width=0),state.height<0&&(state.height=0),(state.width2=isRotated?state.margin.left-
state.rotatedPadding.left-
state.rotatedPadding.right:state.width),(state.height2=isRotated?state.height:state.current.height-
state.margin2.top-
state.margin2.bottom),state.width2<0&&(state.width2=0),state.height2<0&&(state.height2=0);var hasGauge=$$.hasType("gauge"),isLegendRight=config.legend_show&&state.isLegendRight;(state.arcWidth=state.width-(isLegendRight?currLegend.width+10:0)),(state.arcHeight=state.height-(isLegendRight&&!hasGauge?0:10)),hasGauge&&!config.gauge_fullCircle&&(state.arcHeight+=state.height-$$.getPaddingBottomForGauge()),$$.updateRadius&&$$.updateRadius(),state.isLegendRight&&hasArc&&(state.margin3.left=state.arcWidth/2+state.radiusExpanded*1.1);}};const internals_text={opacityForText:function opacityForText(d){var $$=this;return $$.isBarType(d)&&!$$.meetsLabelThreshold(Math.abs($$.getRatio("bar",d)),"bar")?"0":$$.hasDataLabel?"1":"0";},initText:function initText(){var $el=this.$el;$el.main.select("."+config_classes.chart).append("g").attr("class",config_classes.chartTexts);},updateTargetsForText:function updateTargetsForText(targets){var $$=this,classChartText=$$.classChartText.bind($$),classTexts=$$.classTexts.bind($$),classFocus=$$.classFocus.bind($$),mainTextUpdate=$$.$el.main.select("."+config_classes.chartTexts).selectAll("."+config_classes.chartText).data(targets).attr("class",function(d){return classChartText(d)+classFocus(d);}),mainTextEnter=mainTextUpdate.enter().append("g").style("opacity","0").attr("class",classChartText).style("pointer-events","none");mainTextEnter.append("g").attr("class",classTexts);},updateText:function updateText(durationForExit){var $$=this,config=$$.config,$el=$$.$el,dataFn=$$.labelishData.bind($$),classText=$$.classText.bind($$);($el.text=$el.main.selectAll("."+config_classes.texts).selectAll("."+config_classes.text).data(function(d){return $$.isRadarType(d)?d.values:dataFn(d);})),$el.text.exit().transition().duration(durationForExit).style("fill-opacity","0").remove(),($el.text=$el.text.enter().append("text").merge($$.$el.text).attr("class",classText).attr("text-anchor",function(d){return config.axis_rotated?d.value<0?"end":"start":"middle";}).style("fill",$$.updateTextColor.bind($$)).style("fill-opacity","0").call(function(selection){selection.each(function(d,i,j){var value=$$.isBubbleZType(d)?$$.getBubbleZData(d.value,"z"):d.value;(value=$$.dataLabelFormat(d.id)(value,d.id,i,j)),isNumber(value)?(this.textContent=value):setTextValue((0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this),value);});}));},updateTextColor:function updateTextColor(d){var color,$$=this,labelColors=$$.config.data_labels_colors,defaultColor=$$.isArcType(d)&&!$$.isRadarType(d)?null:$$.color(d);if(isString(labelColors))color=labelColors;else if(isObject(labelColors)){var _ref=d.data||d,id=_ref.id;color=labelColors[id];}else
isFunction(labelColors)&&(color=labelColors.bind($$.api)(defaultColor,d));return color||defaultColor;},redrawText:function redrawText(x,y,forFlow,withTransition){var $$=this,t=getRandom(),opacityForText=forFlow?0:$$.opacityForText.bind($$);return($$.$el.text.each(function(d,index){var text=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this);(withTransition&&text.attr("x")?text.transition(t):text).call(function(selection){selection.each(function(d){(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this).style("fill",$$.updateTextColor.bind($$)).style("fill-opacity",opacityForText);var posX=x.bind(this)(d,index),posY=y.bind(this)(d,index);this.childElementCount?this.setAttribute("transform","translate("+posX+" "+posY+")"):(this.setAttribute("x",posX),this.setAttribute("y",posY));});});}),!0);},getTextRect:function getTextRect(element,className){var $$=this,base=element.node?element.node():element;/text/i.test(base.tagName)||(base=base.querySelector("text"));var text=base.textContent,cacheKey=KEY.textRect+"-"+text.replace(/\W/g,"_"),rect=$$.cache.get(cacheKey);return(rect||($$.$el.svg.append("text").style("visibility","hidden").style("font",(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(base).style("font")).classed(className,!0).text(text).call(function(v){rect=getBoundingRect(v.node());}).remove(),$$.cache.add(cacheKey,rect)),rect);},generateXYForText:function generateXYForText(indices,forX){var $$=this,types=Object.keys(indices),points={},getter=forX?$$.getXForText:$$.getYForText;return($$.hasType("radar")&&types.push("radar"),types.forEach(function(v){points[v]=$$["generateGet"+capitalize(v)+"Points"](indices[v],!1);}),function(d,i){var type=($$.isAreaType(d)&&"area")||($$.isBarType(d)&&"bar")||($$.isRadarType(d)&&"radar")||"line";return getter.call($$,points[type](d,i),d,this);});},getCenteredTextPos:function getCenteredTextPos(d,points,textElement){var $$=this,config=$$.config,isRotated=config.axis_rotated;if(config.data_labels.centered&&$$.isBarType(d)){var rect=getBoundingRect(textElement),isPositive=d.value>=0;if(isRotated){var w=(isPositive?points[1][1]-points[0][1]:points[0][1]-points[1][1])/2+
rect.width/2;return isPositive?-w-3:w+2;}
var h=(isPositive?points[0][1]-points[1][1]:points[1][1]-points[0][1])/2+
rect.height/2;return isPositive?h:-h-2;}
return 0;},getTextPos:function getTextPos(id,type){var pos=this.config.data_labels_position;return(id in pos?pos[id]:pos)[type]||0;},getXForText:function getXForText(points,d,textElement){var xPos,padding,$$=this,config=$$.config,state=$$.state,isRotated=config.axis_rotated;if((isRotated?((padding=$$.isBarType(d)?4:6),(xPos=points[2][1]+padding*(d.value<0?-1:1))):(xPos=$$.hasType("bar")?(points[2][0]+points[0][0])/2:points[0][0]),d.value===null))
if(xPos>state.width){var _getBoundingRect=getBoundingRect(textElement),width=_getBoundingRect.width;xPos=state.width-width;}else xPos<0&&(xPos=4);return(isRotated&&(xPos+=$$.getCenteredTextPos(d,points,textElement)),xPos+$$.getTextPos(d.id,"x"));},getYForText:function getYForText(points,d,textElement){var yPos,$$=this,config=$$.config,state=$$.state,isRotated=config.axis_rotated,r=config.point_r,rect=getBoundingRect(textElement),baseY=3;if(isRotated)
yPos=(points[0][0]+points[2][0]+rect.height*0.6)/2;else if(((yPos=points[2][1]),isNumber(r)&&r>5&&($$.isLineType(d)||$$.isScatterType(d))&&(baseY+=config.point_r/2.3),d.value<0||(d.value===0&&!state.hasPositiveValue&&state.hasNegativeValue)))
yPos+=rect.height+($$.isBarType(d)?-baseY:baseY);else{var diff=-baseY*2;$$.isBarType(d)?(diff=-baseY):$$.isBubbleType(d)&&(diff=baseY),(yPos+=diff);}
if(d.value===null&&!isRotated){var boxHeight=rect.height;yPos<boxHeight?(yPos=boxHeight):yPos>state.height&&(yPos=state.height-4);}
return(isRotated||(yPos+=$$.getCenteredTextPos(d,points,textElement)),yPos+$$.getTextPos(d.id,"y"));},markOverlapped:function markOverlapped(id,$$,selector){var textNodes=$$.$el.arcs.selectAll(selector),filteredTextNodes=textNodes.filter(function(node){return node.data.id!==id;}),textNode=textNodes.filter(function(node){return node.data.id===id;}),translate=getTranslation(textNode.node()),calcHypo=function(x,y){return Math.sqrt(Math.pow(x,2)+Math.pow(y,2));};textNode.node()&&filteredTextNodes.each(function(){var coordinate=getTranslation(this),filteredTextNode=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this),nodeForWidth=calcHypo(translate.e,translate.f)>calcHypo(coordinate.e,coordinate.f)?textNode:filteredTextNode,overlapsX=Math.ceil(Math.abs(translate.e-coordinate.e))<Math.ceil(nodeForWidth.node().getComputedTextLength()),overlapsY=Math.ceil(Math.abs(translate.f-coordinate.f))<parseInt(textNode.style("font-size"),10);filteredTextNode.classed(config_classes.TextOverlapping,overlapsX&&overlapsY);});},undoMarkOverlapped:function undoMarkOverlapped($$,selector){$$.$el.arcs.selectAll(selector).each(function(){(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.selectAll)([this,this.previousSibling]).classed(config_classes.TextOverlapping,!1);});},meetsLabelThreshold:function meetsLabelThreshold(ratio,type){ratio===void 0&&(ratio=0);var $$=this,config=$$.config,threshold=config[type+"_label_threshold"]||0;return ratio>=threshold;}};function getTextPos(pos,width){pos===void 0&&(pos="left");var position,isNum=isNumber(width);return((position=pos.indexOf("center")>-1?isNum?width/2:"middle":pos.indexOf("right")>-1?isNum?width:"end":isNum?0:"start"),position);}
const internals_title={initTitle:function initTitle(){var $$=this,config=$$.config,$el=$$.$el;if(config.title_text){$el.title=$el.svg.append("g");var text=$el.title.append("text").style("text-anchor",getTextPos(config.title_position)).attr("class",config_classes.title);setTextValue(text,config.title_text,[0.3,1.5]);}},redrawTitle:function redrawTitle(){var $$=this,config=$$.config,current=$$.state.current,title=$$.$el.title;if(title){var y=$$.yForTitle.call($$);/g/i.test(title.node().tagName)?title.attr("transform","translate("+
getTextPos(config.title_position,current.width)+", "+
y+")"):title.attr("x",$$.xForTitle.call($$)).attr("y",y);}},xForTitle:function xForTitle(){var x,$$=this,config=$$.config,current=$$.state.current,position=config.title_position||"left",textRectWidth=$$.getTextRect($$.$el.title,config_classes.title).width;return(/(right|center)/.test(position)?((x=current.width-textRectWidth),position.indexOf("right")>=0?(x=current.width-
textRectWidth-
config.title_padding.right):position.indexOf("center")>=0&&(x=(current.width-textRectWidth)/2)):(x=config.title_padding.left||0),x);},yForTitle:function yForTitle(){var $$=this;return(($$.config.title_padding.top||0)+
$$.getTextRect($$.$el.title,config_classes.title).height);},getTitlePadding:function getTitlePadding(){var $$=this;return $$.yForTitle()+($$.config.title_padding.bottom||0);}};const internals_tooltip={initTooltip:function initTooltip(){var $$=this,config=$$.config,$el=$$.$el;($el.tooltip=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(config.tooltip_contents.bindto)),$el.tooltip.empty()&&($el.tooltip=$el.chart.style("position","relative").append("div").attr("class",config_classes.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),$$.bindTooltipResizePos();},initShowTooltip:function initShowTooltip(){var $$=this,config=$$.config,$el=$$.$el,_$$$state=$$.state,hasAxis=_$$$state.hasAxis,hasRadar=_$$$state.hasRadar;if(config.tooltip_init_show){var isArc=!(hasAxis&&hasRadar);if($$.axis&&$$.axis.isTimeSeries()&&isString(config.tooltip_init_x)){var i,val,targets=$$.data.targets[0];for(config.tooltip_init_x=parseDate.call($$,config.tooltip_init_x),i=0;(val=targets.values[i])&&!(val.x-config.tooltip_init_x===0);i++);config.tooltip_init_x=i;}
var data=$$.data.targets.map(function(d){var x=isArc?0:config.tooltip_init_x;return $$.addName(d.values[x]);});isArc&&(data=[data[config.tooltip_init_x]]),$el.tooltip.html($$.getTooltipHTML(data,$$.axis&&$$.axis.getXAxisTickFormat(),$$.getYFormat($$.hasArcType(null,["radar"])),$$.color)),config.tooltip_contents.bindto||$el.tooltip.style("top",config.tooltip_init_position.top).style("left",config.tooltip_init_position.left).style("display","block");}},getTooltipHTML:function getTooltipHTML(){var $$=this,api=$$.api,config=$$.config;return isFunction(config.tooltip_contents)?config.tooltip_contents.bind(api).apply(void 0,arguments):$$.getTooltipContent.apply($$,arguments);},getTooltipContent:function getTooltipContent(d,defaultTitleFormat,defaultValueFormat,color){var $$=this,api=$$.api,config=$$.config,state=$$.state,_map=["title","name","value"].map(function(v){var fn=config["tooltip_format_"+v];return isFunction(fn)?fn.bind(api):fn;}),titleFormat=_map[0],nameFormat=_map[1],valueFormat=_map[2];(titleFormat=titleFormat||defaultTitleFormat),(nameFormat=nameFormat||function(name){return name;}),(valueFormat=valueFormat||($$.isStackNormalized()?function(v,ratio){return(ratio*100).toFixed(2)+"%";}:defaultValueFormat));var order=config.tooltip_order,getRowValue=function(row){return $$.axis&&$$.isBubbleZType(row)?$$.getBubbleZData(row.value,"z"):$$.getBaseValue(row);},getBgColor=$$.levelColor?function(row){return $$.levelColor(row.value);}:function(row){return color(row);},contents=config.tooltip_contents,tplStr=contents.template,targetIds=$$.mapToTargetIds();if(order===null&&config.data_groups.length){var ids=$$.orderTargets($$.data.targets).map(function(i2){return i2.id;}).reverse();d.sort(function(a,b){var v1=a?a.value:null,v2=b?b.value:null;return(v1>0&&v2>0&&((v1=a.id?ids.indexOf(a.id):null),(v2=b.id?ids.indexOf(b.id):null)),v1-v2);});}else if(/^(asc|desc)$/.test(order)){d.sort(function(a,b){var v1=a?getRowValue(a):null,v2=b?getRowValue(b):null;return order==="asc"?v1-v2:v2-v1;});}else isFunction(order)&&d.sort(order.bind(api));var text,row,param,value,i,tpl=$$.getTooltipContentTemplate(tplStr),len=d.length;for(i=0;i<len;i++)
if(((row=d[i]),row&&(getRowValue(row)||getRowValue(row)===0))){if(isUndefined(text)){var title=(state.hasAxis||state.hasRadar)&&sanitise(titleFormat?titleFormat(row.x):row.x);text=tplProcess(tpl[0],{CLASS_TOOLTIP:config_classes.tooltip,TITLE:isValue(title)?tplStr?title:'<tr><th colspan="2">'+title+"</th></tr>":""});}
if((!row.ratio&&$$.$el.arcs&&(row.ratio=$$.getRatio("arc",$$.$el.arcs.select("path."+config_classes.arc+"-"+row.id).data()[0])),(param=[row.ratio,row.id,row.index,d]),(value=sanitise(valueFormat.apply(void 0,[getRowValue(row)].concat(param)))),$$.isAreaRangeType(row))){var _map2=["high","low"].map(function(v){return sanitise(valueFormat.apply(void 0,[$$.getAreaRangeData(row,v)].concat(param)));}),high=_map2[0],low=_map2[1];value="<b>Mid:</b> "+
value+" <b>High:</b> "+
high+" <b>Low:</b> "+
low;}
if(value!==undefined){var _ret=(function(){if(row.name===null)return"continue";var name=sanitise(nameFormat.apply(void 0,[row.name].concat(param))),color=getBgColor(row),contentValue={CLASS_TOOLTIP_NAME:config_classes.tooltipName+
$$.getTargetSelectorSuffix(row.id),COLOR:tplStr||!$$.patterns?color:'<svg><rect style="fill:'+
color+'" width="10" height="10"></rect></svg>',NAME:name,VALUE:value};if(tplStr&&isObject(contents.text)){var index=targetIds.indexOf(row.id);Object.keys(contents.text).forEach(function(key){contentValue[key]=contents.text[key][index];});}
text+=tplProcess(tpl[1],contentValue);})();if(_ret==="continue")continue;}}
return text+"</table>";},getTooltipContentTemplate:function getTooltipContentTemplate(tplStr){return(tplStr||'<table class="{=CLASS_TOOLTIP}"><tbody>\n\t\t\t\t{=TITLE}\n\t\t\t\t{{<tr class="{=CLASS_TOOLTIP_NAME}">\n\t\t\t\t\t<td class="name">'+
(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>')+'{=NAME}</td>\n\t\t\t\t\t<td class="value">{=VALUE}</td>\n\t\t\t\t</tr>}}\n\t\t\t</tbody></table>').replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/);},tooltipPosition:function tooltipPosition(dataToShow,tWidth,tHeight,element){var $$=this,config=$$.config,scale=$$.scale,state=$$.state,_state=state,width=_state.width,height=_state.height,current=_state.current,isLegendRight=_state.isLegendRight,inputType=_state.inputType,hasGauge=$$.hasType("gauge")&&!config.gauge_fullCircle,svgLeft=$$.getSvgLeft(!0),_d3Mouse=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.mouse)(element),x=_d3Mouse[0],y=_d3Mouse[1],chartRight=svgLeft+current.width-$$.getCurrentPaddingRight(!0),chartLeft=$$.getCurrentPaddingLeft(!0),size=20;if($$.hasArcType()){var raw=inputType==="touch"||$$.hasType("radar");raw||((y+=hasGauge?height:height/2),(x+=(width-(isLegendRight?$$.getLegendWidth():0))/2));}else{var dataScale=scale.x(dataToShow[0].x);config.axis_rotated?((y=dataScale+size),(x+=svgLeft+100),(chartRight-=svgLeft)):((y-=5),(x=svgLeft+
chartLeft+
size+
($$.zoomScale?x:dataScale)));}
x+tWidth+15>chartRight&&(x-=tWidth+chartLeft),y+tHeight>current.height&&(y-=hasGauge?tHeight*3:tHeight+30);var pos={top:y,left:x};return(Object.keys(pos).forEach(function(v){pos[v]<0&&(pos[v]=0);}),pos);},showTooltip:function showTooltip(selectedData,element){var $$=this,config=$$.config,state=$$.state,tooltip=$$.$el.tooltip,bindto=config.tooltip_contents.bindto,forArc=$$.hasArcType(null,["radar"]),dataToShow=selectedData.filter(function(d){return d&&isValue($$.getBaseValue(d));});if(tooltip&&dataToShow.length!==0&&config.tooltip_show){var datum=tooltip.datum(),_ref=datum||{},_ref$width=_ref.width,width=_ref$width===void 0?0:_ref$width,_ref$height=_ref.height,height=_ref$height===void 0?0:_ref$height,dataStr=JSON.stringify(selectedData);if(!datum||datum.current!==dataStr){var index=selectedData.concat().sort()[0].index;callFn(config.tooltip_onshow,$$.api,selectedData),tooltip.html($$.getTooltipHTML(selectedData,$$.axis?$$.axis.getXAxisTickFormat():$$.categoryName.bind($$),$$.getYFormat(forArc),$$.color)).style("display",null).style("visibility",null).datum((datum={index:index,current:dataStr,width:(width=tooltip.property("offsetWidth")),height:(height=tooltip.property("offsetHeight"))})),callFn(config.tooltip_onshown,$$.api,selectedData),$$._handleLinkedCharts(!0,index);}
if(!bindto){var fnPos=config.tooltip_position||$$.tooltipPosition,pos=fnPos.call(this,dataToShow,width,height,element);["top","left"].forEach(function(v){var value=pos[v];tooltip.style(v,value+"px"),v!=="left"||datum.xPosInPercent||(datum.xPosInPercent=value/state.current.width*100);});}}},bindTooltipResizePos:function bindTooltipResizePos(){var $$=this,resizeFunction=$$.resizeFunction,state=$$.state,tooltip=$$.$el.tooltip;resizeFunction.add(function(){if(tooltip.style("display")==="block"){var current=state.current,_tooltip$datum=tooltip.datum(),width=_tooltip$datum.width,xPosInPercent=_tooltip$datum.xPosInPercent,_value=current.width/100*xPosInPercent,diff=current.width-(_value+width);diff<0&&(_value+=diff),tooltip.style("left",_value+"px");}});},hideTooltip:function hideTooltip(force){var $$=this,api=$$.api,config=$$.config,tooltip=$$.$el.tooltip;if(tooltip&&tooltip.style("display")!=="none"&&(!config.tooltip_doNotHide||force)){var selectedData=JSON.parse(tooltip.datum().current);callFn(config.tooltip_onhide,api,selectedData),tooltip.style("display","none").style("visibility","hidden").datum(null),callFn(config.tooltip_onhidden,api,selectedData);}},_handleLinkedCharts:function _handleLinkedCharts(show,index){var $$=this,charts=$$.charts,config=$$.config;if(config.tooltip_linked&&charts.length>1){var linkedName=config.tooltip_linked_name;charts.filter(function(v){return v!==$$.api;}).forEach(function(c){var _c$internal=c.internal,config=_c$internal.config,$el=_c$internal.$el,isLinked=config.tooltip_linked,name=config.tooltip_linked_name,isInDom=browser_doc.body.contains($el.chart.node());if(isLinked&&linkedName===name&&isInDom){var data=$el.tooltip.data()[0],isNotSameIndex=index!==(data&&data.index);try{show&&isNotSameIndex?c.tooltip.show({index:index}):!show&&c.tooltip.hide();}catch(e){}}});}}};const transform={getTranslate:function getTranslate(target,index){index===void 0&&(index=0);var x,y,$$=this,config=$$.config,state=$$.state,isRotated=config.axis_rotated,padding=0;if((index&&/^(x|y2?)$/.test(target)&&(padding=$$.getAxisSize(target)*index),target==="main"))
(x=asHalfPixel(state.margin.left)),(y=asHalfPixel(state.margin.top));else if(target==="context")
(x=asHalfPixel(state.margin2.left)),(y=asHalfPixel(state.margin2.top));else if(target==="legend")
(x=state.margin3.left),(y=state.margin3.top);else if(target==="x")
(x=isRotated?-padding:0),(y=isRotated?0:state.height+padding);else if(target==="y")
(x=isRotated?0:-padding),(y=isRotated?state.height+padding:0);else if(target==="y2")
(x=isRotated?0:state.width+padding),(y=isRotated?1-padding:0);else if(target==="subX")
(x=0),(y=isRotated?0:state.height2);else if(target==="arc")
(x=state.arcWidth/2),(y=state.arcHeight/2);else if(target==="radar"){var _$$$getRadarSize=$$.getRadarSize(),width=_$$$getRadarSize[0];(x=state.width/2-width),(y=asHalfPixel(state.margin.top));}
return"translate("+x+", "+y+")";},transformMain:function transformMain(withTransition,transitions){var xAxis,yAxis,y2Axis,$$=this,main=$$.$el.main;transitions&&transitions.axisX?(xAxis=transitions.axisX):((xAxis=main.select("."+config_classes.axisX)),withTransition&&(xAxis=xAxis.transition())),transitions&&transitions.axisY?(yAxis=transitions.axisY):((yAxis=main.select("."+config_classes.axisY)),withTransition&&(yAxis=yAxis.transition())),transitions&&transitions.axisY2?(y2Axis=transitions.axisY2):((y2Axis=main.select("."+config_classes.axisY2)),withTransition&&(y2Axis=y2Axis.transition())),(withTransition?main.transition():main).attr("transform",$$.getTranslate("main")),xAxis.attr("transform",$$.getTranslate("x")),yAxis.attr("transform",$$.getTranslate("y")),y2Axis.attr("transform",$$.getTranslate("y2")),main.select("."+config_classes.chartArcs).attr("transform",$$.getTranslate("arc"));},transformAll:function transformAll(withTransition,transitions){var $$=this,config=$$.config,hasAxis=$$.state.hasAxis,$el=$$.$el;$$.transformMain(withTransition,transitions),hasAxis&&config.subchart_show&&$$.transformContext(withTransition,transitions),$el.legend&&$$.transformLegend(withTransition);}};const type={setTargetType:function setTargetType(targetIds,type){var $$=this,config=$$.config,withoutFadeIn=$$.state.withoutFadeIn;$$.mapToTargetIds(targetIds).forEach(function(id){(withoutFadeIn[id]=type===config.data_types[id]),(config.data_types[id]=type);}),targetIds||(config.data_type=type);},updateTypesElements:function updateTypesElements(){var $$=this,current=$$.state.current;Object.keys(TYPE).forEach(function(v){var t=TYPE[v],has=$$.hasType(t,null,!0),idx=current.types.indexOf(t);idx===-1&&has?current.types.push(t):idx>-1&&!has&&current.types.splice(idx,1);}),$$.setChartElements();},hasType:function hasType(type,targetsValue,checkFromData){checkFromData===void 0&&(checkFromData=!1);var $$=this,config=$$.config,current=$$.state.current,types=config.data_types,targets=targetsValue||$$.data.targets,has=!1;return(!checkFromData&&current.types.length&&current.types.indexOf(type)>-1?(has=!0):targets&&targets.length?targets.forEach(function(target){var t=types[target.id];(t!==type&&(t||type!=="line"))||(has=!0);}):Object.keys(types).length?Object.keys(types).forEach(function(id){types[id]===type&&(has=!0);}):(has=config.data_type===type),has);},hasTypeOf:function hasTypeOf(type,targets,exclude){var _this=this;return(exclude===void 0&&(exclude=[]),!TYPE_BY_CATEGORY[type].filter(function(v){return exclude.indexOf(v)===-1;}).every(function(v){return!_this.hasType(v,targets);}));},isTypeOf:function isTypeOf(d,type){var id=isString(d)?d:d.id,dataType=this.config.data_types[id]||this.config.data_type;return isArray(type)?type.indexOf(dataType)>=0:dataType===type;},hasPointType:function hasPointType(){var $$=this;return($$.hasTypeOf("Line")||$$.hasType("bubble")||$$.hasType("scatter"));},hasArcType:function hasArcType(targets,exclude){return this.hasTypeOf("Arc",targets,exclude);},hasMultiArcGauge:function hasMultiArcGauge(){return this.hasType("gauge")&&this.config.gauge_type==="multi";},isLineType:function isLineType(d){var id=isString(d)?d:d.id;return(!this.config.data_types[id]||this.isTypeOf(id,TYPE_BY_CATEGORY.Line));},isStepType:function isStepType(d){return this.isTypeOf(d,TYPE_BY_CATEGORY.Step);},isSplineType:function isSplineType(d){return this.isTypeOf(d,TYPE_BY_CATEGORY.Spline);},isAreaType:function isAreaType(d){return this.isTypeOf(d,TYPE_BY_CATEGORY.Area);},isAreaRangeType:function isAreaRangeType(d){return this.isTypeOf(d,TYPE_BY_CATEGORY.AreaRange);},isBarType:function isBarType(d){return this.isTypeOf(d,"bar");},isBubbleType:function isBubbleType(d){return this.isTypeOf(d,"bubble");},isScatterType:function isScatterType(d){return this.isTypeOf(d,"scatter");},isPieType:function isPieType(d){return this.isTypeOf(d,"pie");},isGaugeType:function isGaugeType(d){return this.isTypeOf(d,"gauge");},isDonutType:function isDonutType(d){return this.isTypeOf(d,"donut");},isRadarType:function isRadarType(d){return this.isTypeOf(d,"radar");},isArcType:function isArcType(d){return(this.isPieType(d)||this.isDonutType(d)||this.isGaugeType(d)||this.isRadarType(d));},isCirclePoint:function isCirclePoint(node){var config=this.config,pattern=config.point_pattern,isCircle=!1;return((isCircle=!!(node&&node.tagName==="circle")||(config.point_type==="circle"&&(!pattern||(isArray(pattern)&&pattern.length===0)))),isCircle);},lineData:function lineData(d){return this.isLineType(d)?[d]:[];},arcData:function arcData(d){return this.isArcType(d.data)?[d]:[];},barData:function barData(d){return this.isBarType(d)?d.values:[];},labelishData:function labelishData(d){return this.isBarType(d)||this.isLineType(d)||this.isScatterType(d)||this.isBubbleType(d)||this.isRadarType(d)?d.values:[];},barLineBubbleData:function barLineBubbleData(d){return this.isBarType(d)||this.isLineType(d)||this.isBubbleType(d)?d.values:[];},isInterpolationType:function isInterpolationType(type){return(["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(type)>=0);}};var ChartInternal=(function(){function ChartInternal(api){(this.api=void 0),(this.config=void 0),(this.cache=void 0),(this.$el=void 0),(this.state=void 0),(this.charts=void 0),(this.data={xs:{},targets:[]}),(this.axis=void 0),(this.scale={x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null}),(this.org={xScale:null,xDomain:null}),(this.color=void 0),(this.patterns=void 0),(this.levelColor=void 0),(this.point=void 0),(this.brush=void 0),(this.format={extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null});var $$=this;($$.api=api),($$.config=new Options()),($$.cache=new Cache());var store=new Store();($$.$el=store.getStore("element")),($$.state=store.getStore("state"));}
var _proto=ChartInternal.prototype;return((_proto.beforeInit=function beforeInit(){var $$=this;$$.callPluginHook("$beforeInit"),callFn($$.config.onbeforeinit,$$.api);}),(_proto.afterInit=function afterInit(){var $$=this;$$.callPluginHook("$afterInit"),callFn($$.config.onafterinit,$$.api);}),(_proto.init=function init(){var $$=this,config=$$.config,state=$$.state,$el=$$.$el;(state.hasAxis=!$$.hasArcType()),(state.hasRadar=!state.hasAxis&&$$.hasType("radar")),$$.initParams();var bindto={element:config.bindto,classname:"bb"};isObject(config.bindto)&&((bindto.element=config.bindto.element||"#chart"),(bindto.classname=config.bindto.classname||bindto.classname)),($el.chart=isFunction(bindto.element.node)?config.bindto.element:(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(bindto.element||[])),$el.chart.empty()&&($el.chart=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(browser_doc.body.appendChild(browser_doc.createElement("div")))),$el.chart.html("").classed(bindto.classname,!0),$$.initToRender();}),(_proto.initToRender=function initToRender(forced){var $$=this,config=$$.config,state=$$.state,chart=$$.$el.chart,isHidden=function(){return(chart.style("display")==="none"||chart.style("visibility")==="hidden");},isLazy=config.render.lazy||isHidden(),MutationObserver=win.MutationObserver;if((isLazy&&MutationObserver&&config.render.observe!==!1&&!forced&&new MutationObserver(function(mutation,observer){isHidden()||(observer.disconnect(),!state.rendered&&$$.initToRender(!0));}).observe(chart.node(),{attributes:!0,attributeFilter:["class","style"]}),!isLazy||forced)){var convertedData=$$.convertData(config,$$.initWithData);convertedData&&$$.initWithData(convertedData),$$.afterInit();}}),(_proto.initParams=function initParams(){var $$=this,_ref=$$,config=_ref.config,format=_ref.format,state=_ref.state,isRotated=config.axis_rotated;if(((state.datetimeId="bb-"+ +new Date()),($$.color=$$.generateColor()),($$.levelColor=$$.generateLevelColor()),$$.hasPointType()&&($$.point=$$.generatePoint()),state.hasAxis)){$$.initClip(),(format.extraLineClasses=$$.generateExtraLineClass()),(format.dataTime=config.data_xLocaltime?external_commonjs_d3_time_format_commonjs2_d3_time_format_amd_d3_time_format_root_d3_.timeParse:external_commonjs_d3_time_format_commonjs2_d3_time_format_amd_d3_time_format_root_d3_.utcParse),(format.axisTime=config.axis_x_localtime?external_commonjs_d3_time_format_commonjs2_d3_time_format_amd_d3_time_format_root_d3_.timeFormat:external_commonjs_d3_time_format_commonjs2_d3_time_format_amd_d3_time_format_root_d3_.utcFormat);var isDragZoom=$$.config.zoom_enabled&&$$.config.zoom_type==="drag";format.defaultAxisTime=function(d){var _$$$scale=$$.scale,x=_$$$scale.x,zoom=_$$$scale.zoom,isZoomed=isDragZoom?zoom:zoom&&x.orgDomain().toString()!==zoom.domain().toString(),specifier=(d.getMilliseconds()&&".%L")||(d.getSeconds()&&".:%S")||(d.getMinutes()&&"%I:%M")||(d.getHours()&&"%I %p")||(d.getDate()!==1&&"%b %d")||(isZoomed&&d.getDate()===1&&"%b'%y")||(d.getMonth()&&"%-m/%-d")||"%Y";return format.axisTime(specifier)(d);};}
(state.isLegendRight=config.legend_position==="right"),(state.isLegendInset=config.legend_position==="inset"),(state.isLegendTop=config.legend_inset_anchor==="top-left"||config.legend_inset_anchor==="top-right"),(state.isLegendLeft=config.legend_inset_anchor==="top-left"||config.legend_inset_anchor==="bottom-left"),(state.rotatedPaddingRight=isRotated&&!config.axis_x_show?0:30),(state.inputType=convertInputType(config.interaction_inputType_mouse,config.interaction_inputType_touch));}),(_proto.initWithData=function initWithData(data){var $$=this,config=$$.config,scale=$$.scale,state=$$.state,$el=$$.$el,org=$$.org,hasAxis=state.hasAxis,hasInteraction=config.interaction_enabled;hasAxis&&(($$.axis=$$.getAxisInstance()),config.zoom_enabled&&$$.initZoom()),($$.data.xs={}),($$.data.targets=$$.convertDataToTargets(data)),config.data_filter&&($$.data.targets=$$.data.targets.filter(config.data_filter.bind($$.api))),config.data_hide&&$$.addHiddenTargetIds(config.data_hide===!0?$$.mapToIds($$.data.targets):config.data_hide),config.legend_hide&&$$.addHiddenLegendIds(config.legend_hide===!0?$$.mapToIds($$.data.targets):config.legend_hide),$$.updateSizes(),$$.updateScales(!0);var x=scale.x,y=scale.y,y2=scale.y2,subX=scale.subX,subY=scale.subY,subY2=scale.subY2;if((x&&(x.domain(sortValue($$.getXDomain($$.data.targets))),subX.domain(x.domain()),(org.xDomain=x.domain())),y&&(y.domain($$.getYDomain($$.data.targets,"y")),subY.domain(y.domain())),y2&&(y2.domain($$.getYDomain($$.data.targets,"y2")),subY2&&subY2.domain(y2.domain())),($el.svg=$el.chart.append("svg").style("overflow","hidden").style("display","block")),hasInteraction&&state.inputType)){var isTouch=state.inputType==="touch";$el.svg.on(isTouch?"touchstart":"mouseenter",function(){return callFn(config.onover,$$.api);}).on(isTouch?"touchend":"mouseleave",function(){return callFn(config.onout,$$.api);});}
config.svg_classname&&$el.svg.attr("class",config.svg_classname);var hasColorPatterns=isFunction(config.color_tiles)&&$$.patterns;(hasAxis||hasColorPatterns)&&(($el.defs=$el.svg.append("defs")),hasAxis&&["id","idXAxis","idYAxis","idGrid"].forEach(function(v){$$.appendClip($el.defs,state.clip[v]);}),hasColorPatterns&&$$.patterns.forEach(function(p){return $el.defs.append(function(){return p.node;});})),$$.updateSvgSize(),$$.bindResize();var main=$el.svg.append("g").classed(config_classes.main,!0).attr("transform",$$.getTranslate("main"));if((($el.main=main),config.subchart_show&&$$.initSubchart(),config.tooltip_show&&$$.initTooltip(),config.title_text&&$$.initTitle(),config.legend_show&&$$.initLegend(),config.data_empty_label_text&&main.append("text").attr("class",config_classes.text+" "+config_classes.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),hasAxis&&(config.regions.length&&$$.initRegion(),!config.clipPath&&$$.axis.init()),main.append("g").attr("class",config_classes.chart).attr("clip-path",state.clip.path),$$.callPluginHook("$init"),hasAxis&&(hasInteraction&&$$.initEventRect&&$$.initEventRect(),$$.initGrid(),config.clipPath&&$$.axis&&$$.axis.init()),$$.initChartElements(),$$.updateTargets($$.data.targets),$$.updateDimension(),callFn(config.oninit,$$.api),$$.setBackground(),$$.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),config.data_onmin||config.data_onmax)){var minMax=$$.getMinMaxData();callFn(config.data_onmin,$$.api,minMax.min),callFn(config.data_onmax,$$.api,minMax.max);}
config.tooltip_show&&$$.initShowTooltip(),(state.rendered=!0);}),(_proto.initChartElements=function initChartElements(){var $$=this,_$$$state=$$.state,hasAxis=_$$$state.hasAxis,hasRadar=_$$$state.hasRadar,types=[];hasAxis?($$.hasType("bar")&&types.push("Bar"),$$.hasType("bubble")&&types.push("Bubble"),$$.hasTypeOf("Line")&&types.push("Line")):(!hasRadar&&types.push("Arc","Pie"),$$.hasType("gauge")?types.push("Gauge"):hasRadar&&types.push("Radar")),types.forEach(function(v){$$["init"+v]();}),notEmpty($$.config.data_labels)&&!$$.hasArcType(null,["radar"])&&$$.initText();}),(_proto.setChartElements=function setChartElements(){var $$=this,_$$$$el=$$.$el,chart=_$$$$el.chart,svg=_$$$$el.svg,defs=_$$$$el.defs,main=_$$$$el.main,tooltip=_$$$$el.tooltip,legend=_$$$$el.legend,title=_$$$$el.title,grid=_$$$$el.grid,arc=_$$$$el.arcs,circles=_$$$$el.circle,bars=_$$$$el.bar,lines=_$$$$el.line,areas=_$$$$el.area,texts=_$$$$el.text;$$.api.$={chart:chart,svg:svg,defs:defs,main:main,tooltip:tooltip,legend:legend,title:title,grid:grid,arc:arc,circles:circles,bar:{bars:bars},line:{lines:lines,areas:areas},text:{texts:texts}};}),(_proto.setBackground=function setBackground(){var $$=this,bg=$$.config.background,state=$$.state,svg=$$.$el.svg;if(notEmpty(bg)){var element=svg.select("g").insert(bg.imgUrl?"image":"rect",":first-child");bg.imgUrl?element.attr("href",bg.imgUrl):bg.color&&element.style("fill",bg.color).attr("clip-path",state.clip.path),element.attr("class",bg.class||null).attr("width","100%").attr("height","100%");}}),(_proto.updateTargets=function updateTargets(targets){var $$=this,_$$$state2=$$.state,hasAxis=_$$$state2.hasAxis,hasRadar=_$$$state2.hasRadar;$$.updateTargetsForText(targets),hasAxis?($$.hasType("bar")&&$$.updateTargetsForBar(targets),$$.hasTypeOf("Line")&&$$.updateTargetsForLine(targets),$$.updateTargetsForSubchart&&$$.updateTargetsForSubchart(targets)):$$.hasArcType(targets)&&(hasRadar?$$.updateTargetsForRadar(targets):$$.updateTargetsForArc(targets)),($$.hasType("bubble")||$$.hasType("scatter"))&&$$.updateTargetForCircle&&$$.updateTargetForCircle(),$$.showTargets();}),(_proto.showTargets=function showTargets(){var $$=this,config=$$.config,svg=$$.$el.svg;svg.selectAll("."+config_classes.target).filter(function(d){return $$.isTargetToShow(d.id);}).transition().duration(config.transition_duration).style("opacity","1");}),(_proto.getWithOption=function getWithOption(options){var withOptions={Y:!0,Subchart:!0,Transition:!0,EventRect:!0,Dimension:!0,TrimXDomain:!0,Transform:!1,UpdateXDomain:!1,UpdateOrgXDomain:!1,Legend:!1,UpdateXAxis:"UpdateXDomain",TransitionForExit:"Transition",TransitionForAxis:"Transition"};return(Object.keys(withOptions).forEach(function(key){var defVal=withOptions[key];isString(defVal)&&(defVal=withOptions[defVal]),(withOptions[key]=getOption(options,"with"+key,defVal));}),withOptions);}),(_proto.initialOpacity=function initialOpacity(d){var $$=this,withoutFadeIn=$$.state.withoutFadeIn;return $$.getBaseValue(d)!==null&&withoutFadeIn[d.id]?"1":"0";}),(_proto.bindResize=function bindResize(){var $$=this,config=$$.config,state=$$.state,resizeFunction=generateResize(),list=[];list.push(function(){return callFn(config.onresize,$$,$$.api);}),config.resize_auto&&list.push(function(){(state.resizing=!0),$$.api.flush(!1);}),list.push(function(){callFn(config.onresized,$$,$$.api),(state.resizing=!1);}),list.forEach(function(v){return resizeFunction.add(v);}),($$.resizeFunction=resizeFunction),win.addEventListener("resize",($$.resizeFunction=resizeFunction));}),(_proto.callPluginHook=function callPluginHook(phase){for(var _this=this,_len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)
args[_key-1]=arguments[_key];this.config.plugins.forEach(function(v){phase==="$beforeInit"&&((v.$$=_this),_this.api.plugins.push(v)),v[phase].apply(v,args);});}),ChartInternal);})();extend(ChartInternal.prototype,[convert,data_data,load,category,internals_class,internals_color,domain,interactions_interaction,format,internals_legend,redraw,scale,shape,size,internals_text,internals_title,internals_tooltip,transform,type]);function loadConfig(config){var target,keys,read,thisConfig=this.config,find=function(){var key=keys.shift();return key&&target&&isObjectType(target)&&key in target?((target=target[key]),find()):key?undefined:target;};Object.keys(thisConfig).forEach(function(key){(target=config),(keys=key.split("_")),(read=find()),isDefined(read)&&(thisConfig[key]=read);});}
const chart={resize:function resize(size){var $$=this.internal,config=$$.config,state=$$.state;state.rendered&&((config.size_width=size?size.width:null),(config.size_height=size?size.height:null),(state.resizing=!0),this.flush(!1,!0),$$.resizeFunction());},flush:function flush(soft){var $$=this.internal,state=$$.state;state.rendered?(state.resizing?$$.brush&&$$.brush.updateResize():$$.axis&&$$.axis.setOrient(),($$.scale.zoom=null),soft?$$.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):$$.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1}),!state.resizing&&$$.brush&&($$.brush.getSelection().call($$.brush.move),$$.unselectRect())):$$.initToRender(!0);},destroy:function destroy(){var _this=this,$$=this.internal,_$$$$el=$$.$el,chart=_$$$$el.chart,svg=_$$$$el.svg;if(notEmpty($$))
for(var _key in($$.callPluginHook("$willDestroy"),$$.charts.splice($$.charts.indexOf(this),1),svg.select("*").interrupt(),$$.resizeFunction.clear(),win.removeEventListener("resize",$$.resizeFunction),chart.classed("bb",!1).html(""),Object.keys(this).forEach(function(key){key==="internal"&&Object.keys($$).forEach(function(k){$$[k]=null;}),(_this[key]=null),delete _this[key];}),this))
this[_key]=function(){};return null;},config:function(name,value,redraw){var res,$$=this.internal,config=$$.config,key=name&&name.replace(/\./g,"_");return(key in config&&(isDefined(value)?((config[key]=value),(res=value),redraw&&this.flush()):(res=config[key])),res);}};const api_color={color:function color(id){return this.internal.color(id);}};function api_data_data(targetIds){var targets=this.internal.data.targets;if(!isUndefined(targetIds)){var ids=isArray(targetIds)?targetIds:[targetIds];return targets.filter(function(t){return ids.some(function(v){return v===t.id;});});}
return targets;}
extend(api_data_data,{shown:function shown(targetIds){return this.internal.filterTargetsToShow(this.data(targetIds));},values:function(targetIds,flat){flat===void 0&&(flat=!0);var values=null;if(targetIds){var targets=this.data(targetIds);targets&&isArray(targets)&&((values=[]),targets.forEach(function(v){var dataValue=v.values.map(function(d){return d.value;});flat?(values=values.concat(dataValue)):values.push(dataValue);}));}
return values;},names:function names(_names){var $$=this.internal;return $$.updateDataAttributes("names",_names);},colors:function colors(_colors){return this.internal.updateDataAttributes("colors",_colors);},axes:function axes(_axes){return this.internal.updateDataAttributes("axes",_axes);},min:function min(){return this.internal.getMinMaxData().min;},max:function max(){return this.internal.getMinMaxData().max;}});const api_data={data:api_data_data};var b64EncodeUnicode=function(str){return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,function(match,p){return String.fromCharCode(+("0x"+p));}));};function nodeToSvgDataUrl(node,size){var serializer=new XMLSerializer(),clone=node.cloneNode(!0),cssText=getCssRules(toArray(browser_doc.styleSheets)).filter(function(r){return r.cssText;}).map(function(r){return r.cssText;});clone.setAttribute("xmlns",external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.namespaces.xhtml);var nodeXml=serializer.serializeToString(clone),style=browser_doc.createElement("style");style.appendChild(browser_doc.createTextNode(cssText.join("\n")));var styleXml=serializer.serializeToString(style),dataStr=('<svg xmlns="'+
external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.namespaces.svg+'" width="'+
size.width+'" height="'+
size.height+'">\n\t\t\t<foreignObject width="100%" height="100%">\n\t\t\t\t'+
styleXml+"\n\t\t\t\t"+
nodeXml.replace(/(url\()[^#]+/g,"$1")+"\n\t\t\t</foreignObject></svg>").replace("/\n/g","%0A");return"data:image/svg+xml;base64,"+b64EncodeUnicode(dataStr);}
const api_export={export:function _export(mimeType,callback){var _this=this,$$=this.internal,state=$$.state,chart=$$.$el.chart,_state$current=state.current,width=_state$current.width,height=_state$current.height,svgDataUrl=nodeToSvgDataUrl(chart.node(),{width:width,height:height});if(callback&&isFunction(callback)){var img=new Image();(img.crossOrigin="Anonymous"),(img.onload=function(){var canvas=browser_doc.createElement("canvas"),ctx=canvas.getContext("2d");(canvas.width=width),(canvas.height=height),ctx.drawImage(img,0,0),callback.bind(_this)(canvas.toDataURL(mimeType));}),(img.src=svgDataUrl);}
return svgDataUrl;}};const api_focus={focus:function focus(targetIdsValue){var $$=this.internal,state=$$.state,targetIds=$$.mapToTargetIds(targetIdsValue),candidates=$$.$el.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow,$$)));this.revert(),this.defocus(),candidates.classed(config_classes.focused,!0).classed(config_classes.defocused,!1),$$.hasArcType()&&!state.hasRadar&&($$.expandArc(targetIds),$$.hasType("gauge")&&$$.markOverlapped(targetIdsValue,$$,"."+config_classes.gaugeValue)),$$.toggleFocusLegend(targetIds,!0),(state.focusedTargetIds=targetIds),(state.defocusedTargetIds=state.defocusedTargetIds.filter(function(id){return targetIds.indexOf(id)<0;}));},defocus:function defocus(targetIdsValue){var $$=this.internal,state=$$.state,targetIds=$$.mapToTargetIds(targetIdsValue),candidates=$$.$el.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow,$$)));candidates.classed(config_classes.focused,!1).classed(config_classes.defocused,!0),$$.hasArcType()&&($$.unexpandArc(targetIds),$$.hasType("gauge")&&$$.undoMarkOverlapped($$,"."+config_classes.gaugeValue)),$$.toggleFocusLegend(targetIds,!1),(state.focusedTargetIds=state.focusedTargetIds.filter(function(id){return targetIds.indexOf(id)<0;})),(state.defocusedTargetIds=targetIds);},revert:function revert(targetIdsValue){var $$=this.internal,config=$$.config,state=$$.state,$el=$$.$el,targetIds=$$.mapToTargetIds(targetIdsValue),candidates=$el.svg.selectAll($$.selectorTargets(targetIds));candidates.classed(config_classes.focused,!1).classed(config_classes.defocused,!1),$$.hasArcType()&&$$.unexpandArc(targetIds),config.legend_show&&($$.showLegend(targetIds.filter($$.isLegendToShow.bind($$))),$el.legend.selectAll($$.selectorLegends(targetIds)).filter(function(){return(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this).classed(config_classes.legendItemFocused);}).classed(config_classes.legendItemFocused,!1)),(state.focusedTargetIds=[]),(state.defocusedTargetIds=[]);}};var legend_legend={show:function show(targetIds){var $$=this.internal;$$.showLegend($$.mapToTargetIds(targetIds)),$$.updateAndRedraw({withLegend:!0});},hide:function hide(targetIds){var $$=this.internal;$$.hideLegend($$.mapToTargetIds(targetIds)),$$.updateAndRedraw({withLegend:!0});}};const api_legend={legend:legend_legend};const api_load={load:function load(args){var $$=this.internal,config=$$.config;args.xs&&$$.addXs(args.xs),"names"in args&&this.data.names(args.names),"classes"in args&&Object.keys(args.classes).forEach(function(id){config.data_classes[id]=args.classes[id];}),"categories"in args&&$$.axis.isCategorized()&&(config.axis_x_categories=args.categories),"axes"in args&&Object.keys(args.axes).forEach(function(id){config.data_axes[id]=args.axes[id];}),"colors"in args&&Object.keys(args.colors).forEach(function(id){config.data_colors[id]=args.colors[id];}),"unload"in args&&args.unload!==!1?$$.unload($$.mapToTargetIds(args.unload===!0?null:args.unload),function(){return $$.loadFromArgs(args);}):$$.loadFromArgs(args);},unload:function unload(argsValue){var _this=this,$$=this.internal,args=argsValue||{};isArray(args)?(args={ids:args}):isString(args)&&(args={ids:[args]});var ids=$$.mapToTargetIds(args.ids);$$.unload(ids,function(){$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),$$.cache.remove(ids),args.done&&args.done.call(_this);});}};function showHide(show,targetIdsValue,options){var $$=this.internal,targetIds=$$.mapToTargetIds(targetIdsValue);($$.state.toggling=!0),$$[(show?"remove":"add")+"HiddenTargetIds"](targetIds);var targets=$$.$el.svg.selectAll($$.selectorTargets(targetIds)),opacity=show?"1":"0";show&&targets.style("display",null),targets.transition().style("opacity",opacity,"important").call(endall,function(){show||targets.style("display","none"),targets.style("opacity",opacity);}),options.withLegend&&$$[(show?"show":"hide")+"Legend"](targetIds),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),($$.state.toggling=!1);}
const show={show:function show(targetIdsValue,options){options===void 0&&(options={}),showHide.call(this,!0,targetIdsValue,options);},hide:function hide(targetIdsValue,options){options===void 0&&(options={}),showHide.call(this,!1,targetIdsValue,options);},toggle:function toggle(targetIds,options){var _this=this;options===void 0&&(options={});var $$=this.internal,targets={show:[],hide:[]};$$.mapToTargetIds(targetIds).forEach(function(id){return targets[$$.isTargetToShow(id)?"hide":"show"].push(id);}),targets.show.length&&this.show(targets.show,options),targets.hide.length&&setTimeout(function(){return _this.hide(targets.hide,options);},0);}};var tooltip_tooltip={show:function show(args){var index,mouse,$$=this.internal,config=$$.config,inputType=$$.state.inputType;if((args.mouse&&(mouse=args.mouse),args.data)){var data=args.data,y=$$.getYScaleById(data.id)(data.value);$$.isMultipleX()?(mouse=[$$.scale.x(data.x),y]):(!config.tooltip_grouped&&(mouse=[0,y]),(index=isValue(data.index)?data.index:$$.getIndexByX(data.x)));}else
isDefined(args.x)?(index=$$.getIndexByX(args.x)):isDefined(args.index)&&(index=args.index);(inputType==="mouse"?["mouseover","mousemove"]:["touchstart"]).forEach(function(eventName){$$.dispatchEvent(eventName,index,mouse);});},hide:function hide(){var $$=this.internal,inputType=$$.state.inputType,tooltip=$$.$el.tooltip,data=tooltip&&tooltip.datum();if(data){var index=JSON.parse(data.current)[0].index;(inputType==="mouse"?["mouseout"]:["touchend"]).forEach(function(eventName){$$.dispatchEvent(eventName,index);});}
inputType==="touch"&&$$.callOverOutForTouch(),$$.hideTooltip(!0),$$.hideGridFocus(),$$.unexpandCircles&&$$.unexpandCircles(),$$.unexpandBars&&$$.unexpandBars();}};const api_tooltip={tooltip:tooltip_tooltip};var Chart=function Chart(options){(this.plugins=[]),(this.internal=void 0);var $$=new ChartInternal(this);(this.internal=$$),(function bindThis(fn,target,argThis){Object.keys(fn).forEach(function(key){var isFunc=isFunction(fn[key]),isChild=target!==argThis,hasChild=Object.keys(fn[key]).length>0;isFunc&&((!isChild&&hasChild)||isChild)?(target[key]=fn[key].bind(argThis)):!isFunc&&(target[key]={}),hasChild&&bindThis(fn[key],target[key],argThis);});})(Chart.prototype,this,this),loadConfig.call($$,options),$$.beforeInit(),$$.init();};extend(Chart.prototype,[chart,api_color,api_data,api_export,api_focus,api_legend,api_load,show,api_tooltip]);function setMinMax($$,type,value){var config=$$.config,axisY="axis_y_"+type,axisY2="axis_y2_"+type;isDefined(value)&&(isObjectType(value)?(isValue(value.x)&&(config["axis_x_"+type]=value.x),isValue(value.y)&&(config[axisY]=value.y),isValue(value.y2)&&(config[axisY2]=value.y2)):((config[axisY]=value),(config[axisY2]=value)),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}));}
function axis_getMinMax($$,type){var config=$$.config;return{x:config["axis_x_"+type],y:config["axis_y_"+type],y2:config["axis_y2_"+type]};}
var axis={labels:function labels(_labels){var labelText,$$=this.internal;return(_labels&&(Object.keys(_labels).forEach(function(axisId){$$.axis.setLabelText(axisId,_labels[axisId]);}),$$.axis.updateLabels()),["x","y","y2"].forEach(function(v){var text=$$.axis.getLabelText(v);text&&(!labelText&&(labelText={}),(labelText[v]=text));}),labelText);},min:function min(_min){var $$=this.internal;return isValue(_min)?setMinMax($$,"min",_min):axis_getMinMax($$,"min");},max:function max(_max){var $$=this.internal;return arguments.length?setMinMax($$,"max",_max):axis_getMinMax($$,"max");},range:function range(_range){var axis=this.axis;if(arguments.length)
isDefined(_range.max)&&axis.max(_range.max),isDefined(_range.min)&&axis.min(_range.min);else
return{max:axis.max(),min:axis.min()};return undefined;}};const api_axis={axis:axis};const api_category={category:function category(i,_category){var $$=this.internal,config=$$.config;return(arguments.length>1&&((config.axis_x_categories[i]=_category),$$.redraw()),config.axis_x_categories[i]);},categories:function categories(_categories){var $$=this.internal,config=$$.config;return arguments.length?((config.axis_x_categories=_categories),$$.redraw(),config.axis_x_categories):config.axis_x_categories;}};function xgrids(grids){var $$=this.internal,config=$$.config;return grids?((config.grid_x_lines=grids),$$.redrawWithoutRescale(),config.grid_x_lines):config.grid_x_lines;}
extend(xgrids,{add:function add(grids){return this.xgrids(this.internal.config.grid_x_lines.concat(grids||[]));},remove:function remove(params){this.internal.removeGridLines(params,!0);}});const grid_x={xgrids:xgrids};function ygrids(grids){var $$=this.internal,config=$$.config;return grids?((config.grid_y_lines=grids),$$.redrawWithoutRescale(),config.grid_y_lines):config.grid_y_lines;}
extend(ygrids,{add:function add(grids){return this.ygrids(this.internal.config.grid_y_lines.concat(grids||[]));},remove:function remove(params){this.internal.removeGridLines(params,!1);}});const grid_y={ygrids:ygrids};const group={groups:function groups(_groups){var $$=this.internal,config=$$.config;return isUndefined(_groups)?config.data_groups:((config.data_groups=_groups),$$.redraw(),config.data_groups);}};function regions(regions){var $$=this.internal,config=$$.config;return regions?((config.regions=regions),$$.redrawWithoutRescale(),regions):config.regions;}
extend(regions,{add:function add(regions){var $$=this.internal,config=$$.config;return regions?((config.regions=config.regions.concat(regions)),$$.redrawWithoutRescale(),config.regions):config.regions;},remove:function remove(optionsValue){var $$=this.internal,config=$$.config,options=optionsValue||{},duration=getOption(options,"duration",config.transition_duration),classes=getOption(options,"classes",[config_classes.region]),regions=$$.$el.main.select("."+config_classes.regions).selectAll(classes.map(function(c){return"."+c;}));return((duration?regions.transition().duration(duration):regions).style("opacity","0").remove(),(regions=config.regions),Object.keys(options).length?((regions=regions.filter(function(region){var found=!1;return(!region.class||(region.class.split(" ").forEach(function(c){classes.indexOf(c)>=0&&(found=!0);}),!found));})),(config.regions=regions)):(config.regions=[]),regions);}});const api_regions={regions:regions};const x={x:function x(_x){var $$=this.internal,axis=$$.axis,data=$$.data,isCategorized=axis.isCustomX()&&axis.isCategorized();return(isArray(_x)&&(isCategorized?this.categories(_x):($$.updateTargetX(data.targets,_x),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),isCategorized?this.categories():data.xs);},xs:function xs(_xs){var $$=this.internal;return(isObject(_xs)&&($$.updateTargetXs($$.data.targets,_xs),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),$$.data.xs);}};const flow={flow:function flow(args){var data,domain,diff,to,$$=this.internal,length=0,tail=0;if(((args.json||args.rows||args.columns)&&(data=$$.convertData(args)),data&&isTabVisible())){var notfoundIds=[],orgDataCount=$$.getMaxDataCount(),targets=$$.convertDataToTargets(data,!0),isTimeSeries=$$.axis.isTimeSeries();$$.data.targets.forEach(function(t){for(var found=!1,i=0;i<targets.length;i++)
if(t.id===targets[i].id){(found=!0),t.values[t.values.length-1]&&(tail=t.values[t.values.length-1].index+1),(length=targets[i].values.length);for(var _j3=0;_j3<length;_j3++)
(targets[i].values[_j3].index=tail+_j3),isTimeSeries||(targets[i].values[_j3].x=tail+_j3);(t.values=t.values.concat(targets[i].values)),targets.splice(i,1);break;}
found||notfoundIds.push(t.id);}),$$.data.targets.forEach(function(t){for(var _i=0;_i<notfoundIds.length;_i++)
if(t.id===notfoundIds[_i]){tail=t.values[t.values.length-1].index+1;for(var _j4=0;_j4<length;_j4++)
t.values.push({id:t.id,index:tail+_j4,x:isTimeSeries?$$.getOtherTargetX(tail+_j4):tail+_j4,value:null});}}),$$.data.targets.length&&targets.forEach(function(t){for(var missing=[],i=$$.data.targets[0].values[0].index;i<tail;i++)
missing.push({id:t.id,index:i,x:isTimeSeries?$$.getOtherTargetX(i):i,value:null});t.values.forEach(function(v){(v.index+=tail),isTimeSeries||(v.x+=tail);}),(t.values=missing.concat(t.values));}),($$.data.targets=$$.data.targets.concat(targets));var baseTarget=$$.data.targets[0],baseValue=baseTarget.values[0];isDefined(args.to)?((length=0),(to=isTimeSeries?parseDate.call($$,args.to):args.to),baseTarget.values.forEach(function(v){v.x<to&&length++;})):isDefined(args.length)&&(length=args.length),orgDataCount?orgDataCount===1&&isTimeSeries&&((diff=(baseTarget.values[baseTarget.values.length-1].x-
baseValue.x)/2),(domain=[new Date(+baseValue.x-diff),new Date(+baseValue.x+diff)])):((diff=isTimeSeries?baseTarget.values.length>1?baseTarget.values[baseTarget.values.length-1].x-
baseValue.x:baseValue.x-$$.getXDomain($$.data.targets)[0]:1),(domain=[baseValue.x-diff,baseValue.x])),domain&&$$.updateXDomain(null,!0,!0,!1,domain),$$.updateTargets($$.data.targets),$$.redraw({flow:{index:baseValue.index,length:length,duration:isValue(args.duration)?args.duration:$$.config.transition_duration,done:args.done,orgDataCount:orgDataCount},withLegend:!0,withTransition:orgDataCount>1,withTrimXDomain:!1,withUpdateXAxis:!0});}}};var external_commonjs_d3_axis_commonjs2_d3_axis_amd_d3_axis_root_d3_=__webpack_require__(10);var AxisRendererHelper=(function(){function AxisRendererHelper(owner){(this.owner=void 0),(this.config=void 0),(this.scale=void 0);var scale=getScale(),config=owner.config,params=owner.params;(this.owner=owner),(this.config=config),(this.scale=scale),(config.noTransition||!params.config.transition_duration)&&(config.withoutTransition=!0),(config.range=this.scaleExtent((params.orgXScale||scale).range()));}
AxisRendererHelper.getSizeFor1Char=function getSizeFor1Char(node){var size={w:5.5,h:11.5};return(node.empty()||node.select("text").text("0").call(function(el){try{var _el$node$getBBox=el.node().getBBox(),width=_el$node$getBBox.width,height=_el$node$getBBox.height;width&&height&&((size.w=width),(size.h=height));}catch(e){}finally{el.text("");}}),(this.getSizeFor1Char=function(){return size;}),size);};var _proto=AxisRendererHelper.prototype;return((_proto.getTickTransformSetter=function getTickTransformSetter(id){var config=this.config,fn=id==="x"?function(value){return("translate("+(value+config.tickOffset)+",0)");}:function(value){return"translate(0,"+value+")";};return function(selection,scale){selection.attr("transform",function(d){return fn(Math.ceil(scale(d)));});};}),(_proto.scaleExtent=function scaleExtent(domain){var start=domain[0],stop=domain[domain.length-1];return start<stop?[start,stop]:[stop,start];}),(_proto.generateTicks=function generateTicks(scale,isYAxes){var tickStepSize=this.owner.params.tickStepSize,_scale$domain=scale.domain(),start=_scale$domain[0],end=_scale$domain[1],ticks=[];if(isYAxes&&tickStepSize)
for(var interval=start;interval<=end;)
ticks.push(interval),(interval+=tickStepSize);else if(scale.ticks){var tickArguments=this.config.tickArguments;if(scale.type==="log"&&!tickArguments){var s=getScale("_log").domain([start>0?start:1,end]).range(scale.range());ticks=s.ticks();for(var cnt=end.toFixed().length;ticks.length>15;cnt--)
ticks=s.ticks(cnt);ticks.splice(0,1,start),ticks.splice(ticks.length-1,1,end);}else
ticks=scale.ticks.apply(scale,this.config.tickArguments||[]);ticks=ticks.map(function(v){var r=(isString(v)&&isNumber(v)&&!isNaN(v)&&Math.round(v*10)/10)||v;return r;});}else{for(var i=Math.ceil(start);i<end;i++)ticks.push(i);ticks.length>0&&ticks[0]>0&&ticks.unshift(ticks[0]-(ticks[1]-ticks[0]));}
return ticks;}),(_proto.copyScale=function copyScale(){var newScale=this.scale.copy();return(newScale.domain().length||newScale.domain(this.scale.domain()),(newScale.type=this.scale.type),newScale);}),(_proto.textFormatted=function textFormatted(v){var tickFormat=this.config.tickFormat,value=/\d+\.\d+0{5,}\d$/.test(v)?+(v+"").replace(/0+\d$/,""):v,formatted=tickFormat?tickFormat(value):value;return isDefined(formatted)?formatted:"";}),(_proto.transitionise=function transitionise(selection){var config=this.config;return config.withoutTransition?selection.interrupt():selection.transition(config.transition);}),AxisRendererHelper);})();var AxisRenderer=(function(){function AxisRenderer(params){params===void 0&&(params={}),(this.helper=void 0),(this.config=void 0),(this.params=void 0),(this.g=void 0);var config={innerTickSize:6,outerTickSize:params.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:params.noTransition};(config.tickLength=Math.max(config.innerTickSize,0)+config.tickPadding),(this.config=config),(this.params=params),(this.helper=new AxisRendererHelper(this));}
var _proto=AxisRenderer.prototype;return((_proto.create=function create(g){var ctx=this,config=this.config,helper=this.helper,params=this.params,scale=helper.scale,orient=config.orient,splitTickText=this.splitTickText.bind(this),isLeftRight=/^(left|right)$/.test(orient),isTopBottom=/^(top|bottom)$/.test(orient),tickTransform=helper.getTickTransformSetter(isTopBottom?"x":"y"),axisPx=tickTransform===helper.axisX?"y":"x",sign=/^(top|left)$/.test(orient)?-1:1,rotate=params.tickTextRotate;this.config.range=scale.rangeExtent?scale.rangeExtent():helper.scaleExtent((params.orgXScale||scale).range());var $g,_config2=config,innerTickSize=_config2.innerTickSize,tickLength=_config2.tickLength,range=_config2.range,id=params.id,tickTextPos=id&&/^(x|y|y2)$/.test(id)?params.config["axis_"+id+"_tick_text_position"]:{x:0,y:0},prefix=id==="subX"?"subchart_axis_x":"axis_"+id,axisShow=params.config[prefix+"_show"],tickShow={tick:!!axisShow&&params.config[prefix+"_tick_show"],text:!!axisShow&&params.config[prefix+"_tick_text_show"]};g.each(function(){var g=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this),scale0=this.__chart__||scale,scale1=helper.copyScale();($g=g),(this.__chart__=scale1),(config.tickOffset=params.isCategory?Math.ceil((scale1(1)-scale1(0))/2):0);var path=g.selectAll(".domain").data([0]);if((path.enter().append("path").attr("class","domain").merge(helper.transitionise(path)).attr("d",function(){var outerTickSized=config.outerTickSize*sign;return isTopBottom?"M"+
range[0]+","+
outerTickSized+"V0H"+
range[1]+"V"+
outerTickSized:"M"+
outerTickSized+","+
range[0]+"H0V"+
range[1]+"H"+
outerTickSized;}),tickShow.tick||tickShow.text)){var ticks=config.tickValues||helper.generateTicks(scale1,isLeftRight),tick=g.selectAll(".tick").data(ticks,scale1),tickEnter=tick.enter().insert("g",".domain").attr("class","tick").style("opacity","1"),tickExit=tick.exit().remove();(tick=tickEnter.merge(tick)),tickShow.tick&&tickEnter.append("line"),tickShow.text&&tickEnter.append("text");var sizeFor1Char=AxisRendererHelper.getSizeFor1Char(tick),counts=[],tspan=tick.select("text").selectAll("tspan").data(function(d,index){var split=params.tickMultiline?splitTickText(d,scale1,ticks,isLeftRight,sizeFor1Char.w):isArray(helper.textFormatted(d))?helper.textFormatted(d).concat():[helper.textFormatted(d)];return((counts[index]=split.length),split.map(function(splitted){return{index:index,splitted:splitted};}));});tspan.exit().remove(),(tspan=tspan.enter().append("tspan").merge(tspan).text(function(d){return d.splitted;})),tspan.attr("x",isTopBottom?0:tickLength*sign).attr("dx",(function(){var dx=0;return(/(top|bottom)/.test(orient)&&rotate&&(dx=8*Math.sin(Math.PI*(rotate/180))*(orient==="top"?-1:1)),dx+(tickTextPos.x||0));})()).attr("dy",function(d,i){var dy=0;return(orient!=="top"&&((dy=sizeFor1Char.h),i===0&&(dy=isLeftRight?-((counts[d.index]-1)*(sizeFor1Char.h/2)-
3):tickTextPos.y===0?".71em":0)),isNumber(dy)&&tickTextPos.y?dy+tickTextPos.y:dy||".71em");});var lineUpdate=tick.select("line"),textUpdate=tick.select("text");if((tickEnter.select("line").attr(axisPx+"2",innerTickSize*sign),tickEnter.select("text").attr(axisPx,tickLength*sign),ctx.setTickLineTextPosition(lineUpdate,textUpdate),params.tickTitle)){var title=textUpdate.select("title");(title.empty()?textUpdate.append("title"):title).text(function(index){return params.tickTitle[index];});}
if(scale1.bandwidth){var x=scale1,dx=x.bandwidth()/2;(scale0=function(d){return x(d)+dx;}),(scale1=scale0);}else
scale0.bandwidth?(scale0=scale1):tickTransform(tickExit,scale1);tickTransform(tickEnter,scale0),tickTransform(helper.transitionise(tick).style("opacity","1"),scale1);}}),(this.g=$g);}),(_proto.getTickXY=function getTickXY(){var config=this.config,pos={x:0,y:0};return(this.params.isCategory&&((pos.x=config.tickCentered?0:config.tickOffset),(pos.y=config.tickCentered?config.tickOffset:0)),pos);}),(_proto.getTickSize=function getTickSize(d){var scale=this.helper.scale,config=this.config,_config3=config,innerTickSize=_config3.innerTickSize,range=_config3.range,tickPosition=scale(d)+(config.tickCentered?0:config.tickOffset);return range[0]<tickPosition&&tickPosition<range[1]?innerTickSize:0;}),(_proto.setTickLineTextPosition=function setTickLineTextPosition(lineUpdate,textUpdate){var tickPos=this.getTickXY(),_this$config=this.config,innerTickSize=_this$config.innerTickSize,orient=_this$config.orient,tickLength=_this$config.tickLength,tickOffset=_this$config.tickOffset,rotate=this.params.tickTextRotate,textAnchorForText=function(r){var value=["start","end"];return(orient==="top"&&value.reverse(),r?(r>0?value[0]:value[1]):"middle");},textTransform=function(r){return r?"rotate("+r+")":null;},yForText=function(r){var r2=r/(orient==="bottom"?15:23);return r?11.5-2.5*r2*(r>0?1:-1):tickLength;};orient==="bottom"?(lineUpdate.attr("x1",tickPos.x).attr("x2",tickPos.x).attr("y2",this.getTickSize.bind(this)),textUpdate.attr("x",0).attr("y",yForText(rotate)).style("text-anchor",textAnchorForText(rotate)).attr("transform",textTransform(rotate))):orient==="top"?(lineUpdate.attr("x2",0).attr("y2",-innerTickSize),textUpdate.attr("x",0).attr("y",-yForText(rotate)*2).style("text-anchor",textAnchorForText(rotate)).attr("transform",textTransform(rotate))):orient==="left"?(lineUpdate.attr("x2",-innerTickSize).attr("y1",tickPos.y).attr("y2",tickPos.y),textUpdate.attr("x",-tickLength).attr("y",tickOffset).style("text-anchor","end")):orient==="right"?(lineUpdate.attr("x2",innerTickSize).attr("y2",0),textUpdate.attr("x",tickLength).attr("y",0).style("text-anchor","start")):void 0;}),(_proto.splitTickText=function splitTickText(d,scale,ticks,isLeftRight,charWidth){function split(splitted,text){for(var subtext,spaceIndex,textWidth,i=1;i<text.length;i++)
if((text.charAt(i)===" "&&(spaceIndex=i),(subtext=text.substr(0,i+1)),(textWidth=charWidth*subtext.length),tickWidth<textWidth))
return split(splitted.concat(text.substr(0,spaceIndex||i)),text.slice(spaceIndex?spaceIndex+1:i));return splitted.concat(text);}
var params=this.params,tickText=this.helper.textFormatted(d),splitted=isString(tickText)&&tickText.indexOf("\n")>-1?tickText.split("\n"):[];if(splitted.length)return splitted;if(isArray(tickText))return tickText;var tickWidth=params.tickWidth;return((!tickWidth||tickWidth<=0)&&(tickWidth=isLeftRight?95:params.isCategory?Math.ceil(scale(ticks[1])-scale(ticks[0]))-12:110),split(splitted,tickText+""));}),(_proto.scale=function scale(x){return arguments.length?((this.helper.scale=x),this):this.helper.scale;}),(_proto.orient=function orient(x){return arguments.length?((this.config.orient=x in
{top:1,right:1,bottom:1,left:1}?x+"":"bottom"),this):this.config.orient;}),(_proto.tickFormat=function tickFormat(format){var config=this.config;return arguments.length?((config.tickFormat=format),this):config.tickFormat;}),(_proto.tickCentered=function tickCentered(isCentered){var config=this.config;return arguments.length?((config.tickCentered=isCentered),this):config.tickCentered;}),(_proto.tickOffset=function tickOffset(){return this.config.tickOffset;}),(_proto.tickInterval=function tickInterval(size){var interval,_this=this;if(this.params.isCategory)interval=this.config.tickOffset*2;else{var length=this.g.select("path.domain").node().getTotalLength()-
this.config.outerTickSize*2;interval=length/(size||this.g.selectAll("line").size());var intervalByValue=this.config.tickValues.map(function(v,i,arr){var next=i+1;return next<arr.length?_this.helper.scale(arr[next])-_this.helper.scale(v):null;}).filter(Boolean);interval=Math.min.apply(Math,intervalByValue.concat([interval]));}
return interval===Infinity?0:interval;}),(_proto.ticks=function ticks(){for(var config=this.config,_len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)
args[_key]=arguments[_key];return args.length?((config.tickArguments=toArray(args)),this):config.tickArguments;}),(_proto.tickCulling=function tickCulling(culling){var config=this.config;return arguments.length?((config.tickCulling=culling),this):config.tickCulling;}),(_proto.tickValues=function tickValues(x){var _this2=this,config=this.config;if(isFunction(x))
config.tickValues=function(){return x(_this2.helper.scale.domain());};else{if(!arguments.length)return config.tickValues;config.tickValues=x;}
return this;}),(_proto.setTransition=function setTransition(t){return(this.config.transition=t),this;}),AxisRenderer);})();const Axis={getAxisInstance:function getAxisInstance(){return this.axis||new Axis_Axis(this);}};var Axis_Axis=(function(){function Axis(owner){(this.owner=void 0),(this.x=void 0),(this.subX=void 0),(this.y=void 0),(this.y2=void 0),(this.axesList={}),(this.tick={x:null,y:null,y2:null}),(this.xs=[]),(this.orient={x:"bottom",y:"left",y2:"right",subX:"bottom"}),(this.owner=owner),this.setOrient();}
var _proto=Axis.prototype;return((_proto.getAxisClassName=function getAxisClassName(id){return(config_classes.axis+" "+
config_classes["axis"+capitalize(id)]);}),(_proto.isHorizontal=function isHorizontal($$,forHorizontal){var isRotated=$$.config.axis_rotated;return forHorizontal?isRotated:!isRotated;}),(_proto.isCategorized=function isCategorized(){var _this$owner=this.owner,config=_this$owner.config,state=_this$owner.state;return(config.axis_x_type.indexOf("category")>=0||state.hasRadar);}),(_proto.isCustomX=function isCustomX(){var config=this.owner.config;return(!this.isTimeSeries()&&(config.data_x||notEmpty(config.data_xs)));}),(_proto.isTimeSeries=function isTimeSeries(id){return(id===void 0&&(id="x"),this.owner.config["axis_"+id+"_type"]==="timeseries");}),(_proto.isLog=function isLog(id){return(id===void 0&&(id="x"),this.owner.config["axis_"+id+"_type"]==="log");}),(_proto.isTimeSeriesY=function isTimeSeriesY(){return this.isTimeSeries("y");}),(_proto.getAxisType=function getAxisType(id){id===void 0&&(id="x");var type="linear";return(this.isTimeSeries(id)?(type="time"):this.isLog(id)&&(type="log"),type);}),(_proto.init=function init(){var _this=this,$$=this.owner,config=$$.config,_$$$$el=$$.$el,main=_$$$$el.main,axis=_$$$$el.axis,clip=$$.state.clip,isRotated=config.axis_rotated,target=["x","y"];config.axis_y2_show&&target.push("y2"),target.forEach(function(v){var classAxis=_this.getAxisClassName(v),classLabel=config_classes["axis"+v.toUpperCase()+"Label"];(axis[v]=main.append("g").attr("class",classAxis).attr("clip-path",function(){var res=null;return(v==="x"?(res=clip.pathXAxis):v==="y"&&(res=clip.pathYAxis),res);}).attr("transform",$$.getTranslate(v)).style("visibility",config["axis_"+v+"_show"]?"visible":"hidden")),axis[v].append("text").attr("class",classLabel).attr("transform",["rotate(-90)",null][v==="x"?+!isRotated:+isRotated]).style("text-anchor",function(){return _this.textAnchorForAxisLabel(v);}),_this.generateAxes(v);});}),(_proto.setOrient=function setOrient(){var $$=this.owner,_$$$config=$$.config,isRotated=_$$$config.axis_rotated,yInner=_$$$config.axis_y_inner,y2Inner=_$$$config.axis_y2_inner;this.orient={x:isRotated?"left":"bottom",y:isRotated?yInner?"top":"bottom":yInner?"right":"left",y2:isRotated?y2Inner?"bottom":"top":y2Inner?"left":"right",subX:isRotated?"left":"bottom"};}),(_proto.generateAxes=function generateAxes(id){var d3Axis,$$=this.owner,config=$$.config,axes=[],axesConfig=config["axis_"+id+"_axes"],isRotated=config.axis_rotated;id==="x"?(d3Axis=isRotated?external_commonjs_d3_axis_commonjs2_d3_axis_amd_d3_axis_root_d3_.axisLeft:external_commonjs_d3_axis_commonjs2_d3_axis_amd_d3_axis_root_d3_.axisBottom):id==="y"?(d3Axis=isRotated?external_commonjs_d3_axis_commonjs2_d3_axis_amd_d3_axis_root_d3_.axisBottom:external_commonjs_d3_axis_commonjs2_d3_axis_amd_d3_axis_root_d3_.axisLeft):id==="y2"&&(d3Axis=isRotated?external_commonjs_d3_axis_commonjs2_d3_axis_amd_d3_axis_root_d3_.axisTop:external_commonjs_d3_axis_commonjs2_d3_axis_amd_d3_axis_root_d3_.axisRight),axesConfig.length&&axesConfig.forEach(function(v){var tick=v.tick||{},scale=$$.scale[id].copy();v.domain&&scale.domain(v.domain),axes.push(d3Axis(scale).ticks(tick.count).tickFormat(isFunction(tick.format)?tick.format.bind($$.api):function(x){return x;}).tickValues(tick.values).tickSizeOuter(tick.outer===!1?0:6));}),(this.axesList[id]=axes);}),(_proto.updateAxes=function updateAxes(){var _this2=this,$$=this.owner,config=$$.config,main=$$.$el.main;Object.keys(this.axesList).forEach(function(id){var axesConfig=config["axis_"+id+"_axes"],scale=$$.scale[id].copy(),range=scale.range();_this2.axesList[id].forEach(function(v,i){var axisRange=v.scale().range();range.every(function(v,i){return v===axisRange[i];})||v.scale().range(range);var className=_this2.getAxisClassName(id)+"-"+(i+1),g=main.select("."+className.replace(/\s/,"."));g.empty()?(g=main.append("g").attr("class",className).style("visibility",config["axis_"+id+"_show"]?"visible":"hidden").call(v)):(axesConfig[i].domain&&scale.domain(axesConfig[i].domain),_this2.x.helper.transitionise(g).call(v.scale(scale))),g.attr("transform",$$.getTranslate(id,i+1));});});}),(_proto.setAxis=function setAxis(id){id!=="subX"&&(this.tick[id]=this.getTickValues(id));for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)
args[_key-1]=arguments[_key];this[id]=this.getAxis.apply(this,[id].concat(args));}),(_proto.getAxis=function getAxis(id,scale,outerTick,noTransition,noTickTextRotate){var tickFormat,$$=this.owner,config=$$.config,isX=/^(x|subX)$/.test(id),type=isX?"x":id,isCategory=isX&&this.isCategorized(),orient=this.orient[id],tickTextRotate=noTickTextRotate?0:$$.getAxisTickRotate(type);if(isX)tickFormat=$$.format.xAxisTick;else{var fn=config["axis_"+id+"_tick_format"];isFunction(fn)&&(tickFormat=fn.bind($$.api));}
var tickValues=this.tick[type],axisParams=mergeObj({outerTick:outerTick,noTransition:noTransition,config:config,id:id,tickTextRotate:tickTextRotate},isX&&{isCategory:isCategory,tickMultiline:config.axis_x_tick_multiline,tickWidth:config.axis_x_tick_width,tickTitle:isCategory&&config.axis_x_tick_tooltip&&$$.api.categories(),orgXScale:$$.scale.x});isX||(axisParams.tickStepSize=config["axis_"+type+"_tick_stepSize"]);var axis=new AxisRenderer(axisParams).scale((isX&&$$.scale.zoom)||scale).orient(orient);if(isX&&this.isTimeSeries()&&tickValues&&!isFunction(tickValues)){var _fn=parseDate.bind($$);tickValues=tickValues.map(function(v){return _fn(v);});}else
!isX&&this.isTimeSeriesY()&&(axis.ticks(config.axis_y_tick_time_value),(tickValues=null));tickValues&&axis.tickValues(tickValues),axis.tickFormat(tickFormat||(!isX&&$$.isStackNormalized()&&function(x){return x+"%";})),isCategory&&(axis.tickCentered(config.axis_x_tick_centered),isEmpty(config.axis_x_tick_culling)&&(config.axis_x_tick_culling=!1));var tickCount=config["axis_"+type+"_tick_count"];return tickCount&&axis.ticks(tickCount),axis;}),(_proto.updateXAxisTickValues=function updateXAxisTickValues(targets,axis){var values,$$=this.owner,config=$$.config,fit=config.axis_x_tick_fit,count=config.axis_x_tick_count;return((fit||(count&&fit))&&((values=$$.mapTargetsToUniqueXs(targets)),this.isCategorized()&&count>values.length&&(count=values.length),(values=this.generateTickValues(values,count,this.isTimeSeries()))),axis?axis.tickValues(values):this.x&&(this.x.tickValues(values),this.subX&&this.subX.tickValues(values)),values);}),(_proto.getId=function getId(id){var _this$owner2=this.owner,config=_this$owner2.config,scale=_this$owner2.scale,axis=config.data_axes[id];return(axis&&scale[axis])||(axis="y"),axis;}),(_proto.getXAxisTickFormat=function getXAxisTickFormat(){var currFormat,$$=this.owner,config=$$.config,format=$$.format,tickFormat=config.axis_x_tick_format,isTimeSeries=this.isTimeSeries(),isCategorized=this.isCategorized();return(tickFormat?isFunction(tickFormat)?(currFormat=tickFormat.bind($$.api)):isTimeSeries&&(currFormat=function(date){return date?format.axisTime(tickFormat)(date):"";}):(currFormat=isTimeSeries?format.defaultAxisTime:isCategorized?$$.categoryName:function(v){return v<0?v.toFixed(0):v;}),isFunction(currFormat)?function(v){return currFormat.apply($$,isCategorized?[v,$$.categoryName(v)]:[v]);}:currFormat);}),(_proto.getTickValues=function getTickValues(id){var $$=this.owner,tickValues=$$.config["axis_"+id+"_tick_values"],axis=$$[id+"Axis"];return((isFunction(tickValues)?tickValues.call($$.api):tickValues)||(axis?axis.tickValues():undefined));}),(_proto.getLabelOptionByAxisId=function getLabelOptionByAxisId(id){return this.owner.config["axis_"+id+"_label"];}),(_proto.getLabelText=function getLabelText(id){var option=this.getLabelOptionByAxisId(id);return isString(option)?option:option?option.text:null;}),(_proto.setLabelText=function setLabelText(id,text){var $$=this.owner,config=$$.config,option=this.getLabelOptionByAxisId(id);isString(option)?(config["axis_"+id+"_label"]=text):option&&(option.text=text);}),(_proto.getLabelPosition=function getLabelPosition(id,defaultPosition){var isRotated=this.owner.config.axis_rotated,option=this.getLabelOptionByAxisId(id),position=isObjectType(option)&&option.position?option.position:defaultPosition[+!isRotated],has=function(v){return!!~position.indexOf(v);};return{isInner:has("inner"),isOuter:has("outer"),isLeft:has("left"),isCenter:has("center"),isRight:has("right"),isTop:has("top"),isMiddle:has("middle"),isBottom:has("bottom")};}),(_proto.getAxisLabelPosition=function getAxisLabelPosition(id){return this.getLabelPosition(id,id==="x"?["inner-top","inner-right"]:["inner-right","inner-top"]);}),(_proto.getLabelPositionById=function getLabelPositionById(id){return this.getAxisLabelPosition(id);}),(_proto.xForAxisLabel=function xForAxisLabel(id){var $$=this.owner,_$$$state=$$.state,width=_$$$state.width,height=_$$$state.height,position=this.getAxisLabelPosition(id),x=position.isMiddle?-height/2:0;return(this.isHorizontal($$,id!=="x")?(x=position.isLeft?0:position.isCenter?width/2:width):position.isBottom&&(x=-height),x);}),(_proto.dxForAxisLabel=function dxForAxisLabel(id){var $$=this.owner,position=this.getAxisLabelPosition(id),dx=position.isBottom?"0.5em":"0";return(this.isHorizontal($$,id!=="x")?(dx=position.isLeft?"0.5em":position.isRight?"-0.5em":"0"):position.isTop&&(dx="-0.5em"),dx);}),(_proto.textAnchorForAxisLabel=function textAnchorForAxisLabel(id){var $$=this.owner,position=this.getAxisLabelPosition(id),anchor=position.isMiddle?"middle":"end";return(this.isHorizontal($$,id!=="x")?(anchor=position.isLeft?"start":position.isCenter?"middle":"end"):position.isBottom&&(anchor="start"),anchor);}),(_proto.dyForAxisLabel=function dyForAxisLabel(id){var dy,$$=this.owner,config=$$.config,isRotated=config.axis_rotated,isInner=this.getAxisLabelPosition(id).isInner,tickRotate=config["axis_"+id+"_tick_rotate"]?$$.getHorizontalAxisHeight(id):0,maxTickWidth=this.getMaxTickWidth(id);if(id==="x"){var xHeight=config.axis_x_height;dy=isRotated?isInner?"1.2em":-25-maxTickWidth:isInner?"-0.5em":xHeight?xHeight-10:tickRotate?tickRotate-10:"3em";}else
(dy={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[id]),(dy=isRotated?isInner?dy[0]:tickRotate?tickRotate*(id==="y2"?-1:1)-dy[1]:dy[2]:isInner?dy[3]:(dy[4]+
(config["axis_"+id+"_inner"]?0:maxTickWidth+dy[4]))*(id==="y"?-1:1));return dy;}),(_proto.getMaxTickWidth=function getMaxTickWidth(id,withoutRecompute){var $$=this.owner,config=$$.config,current=$$.state.current,_$$$$el2=$$.$el,svg=_$$$$el2.svg,chart=_$$$$el2.chart,currentTickMax=current.maxTickWidths[id],maxWidth=0;if(withoutRecompute||!config["axis_"+id+"_show"]||$$.filterTargetsToShow().length===0)
return currentTickMax.size;if(svg){var isYAxis=/^y2?$/.test(id),targetsToShow=$$.filterTargetsToShow($$.data.targets),scale=$$.scale[id].copy().domain($$["get"+(isYAxis?"Y":"X")+"Domain"](targetsToShow,id)),domain=scale.domain(),isDomainSame=domain[0]===domain[1]&&domain.every(function(v){return v>0;}),isCurrentMaxTickDomainSame=isArray(currentTickMax.domain)&&currentTickMax.domain[0]===currentTickMax.domain[1]&&currentTickMax.domain.every(function(v){return v>0;});if(isDomainSame||isCurrentMaxTickDomainSame)
return currentTickMax.size;(currentTickMax.domain=domain),isYAxis||currentTickMax.ticks.splice(0);var axis=this.getAxis(id,scale,!1,!1,!0),tickCount=config["axis_"+id+"_tick_count"],tickValues=config["axis_"+id+"_tick_values"];!tickValues&&tickCount&&axis.tickValues(this.generateTickValues(domain,tickCount,isYAxis?this.isTimeSeriesY():this.isTimeSeries())),isYAxis||this.updateXAxisTickValues(targetsToShow,axis);var dummy=chart.append("svg").style("visibility","hidden").style("position","fixed").style("top","0px").style("left","0px");axis.create(dummy),dummy.selectAll("text").each(function(d,i){var currentTextWidth=this.getBoundingClientRect().width;(maxWidth=Math.max(maxWidth,currentTextWidth)),isYAxis||(currentTickMax.ticks[i]=currentTextWidth);}),dummy.remove();}
return(maxWidth>0&&(currentTickMax.size=maxWidth),currentTickMax.size);}),(_proto.getXAxisTickTextY2Overflow=function getXAxisTickTextY2Overflow(defaultPadding){var $$=this.owner,axis=$$.axis,config=$$.config,state=$$.state,xAxisTickRotate=$$.getAxisTickRotate("x");if((axis.isCategorized()||axis.isTimeSeries())&&config.axis_x_tick_fit&&!config.axis_x_tick_culling&&!config.axis_x_tick_multiline&&xAxisTickRotate>0&&xAxisTickRotate<90){var widthWithoutCurrentPaddingLeft=state.current.width-$$.getCurrentPaddingLeft(),maxOverflow=this.getXAxisTickMaxOverflow(xAxisTickRotate,widthWithoutCurrentPaddingLeft-defaultPadding),xAxisTickTextY2Overflow=Math.max(0,maxOverflow)+defaultPadding;return Math.min(xAxisTickTextY2Overflow,widthWithoutCurrentPaddingLeft/2);}
return 0;}),(_proto.getXAxisTickMaxOverflow=function getXAxisTickMaxOverflow(xAxisTickRotate,widthWithoutCurrentPaddingLeft){for(var $$=this.owner,axis=$$.axis,config=$$.config,state=$$.state,isTimeSeries=axis.isTimeSeries(),tickTextWidths=state.current.maxTickWidths.x.ticks,tickCount=tickTextWidths.length,_state$axis$x$padding=state.axis.x.padding,left=_state$axis$x$padding.left,right=_state$axis$x$padding.right,maxOverflow=0,remaining=tickCount-
(isTimeSeries&&config.axis_x_tick_fit?0.5:0),i=0;i<tickCount;i++){var tickIndex=i+1,rotatedTickTextWidth=Math.cos(Math.PI*xAxisTickRotate/180)*tickTextWidths[i],ticksBeforeTickText=tickIndex-(isTimeSeries?1:0.5)+left;if(!(ticksBeforeTickText<=0)){var tickLength=(widthWithoutCurrentPaddingLeft-rotatedTickTextWidth)/ticksBeforeTickText;maxOverflow=Math.max(maxOverflow,rotatedTickTextWidth-
tickLength/2-
((remaining-tickIndex)*tickLength+
right*tickLength));}}
var filteredTargets=$$.filterTargetsToShow($$.data.targets),tickOffset=0;if(!isTimeSeries&&config.axis_x_tick_count<=filteredTargets.length&&filteredTargets[0].values.length){var scale=getScale($$.axis.getAxisType("x"),0,widthWithoutCurrentPaddingLeft-maxOverflow).domain([left*-1,$$.getXDomainMax($$.data.targets)+1+right]);tickOffset=Math.ceil((scale(1)-scale(0))/2);}
return maxOverflow+tickOffset;}),(_proto.getXAxisPadding=function getXAxisPadding(tickCount){var $$=this.owner,padding=$$.config.axis_x_padding;if((isEmpty(padding)?(padding={left:0,right:0}):((padding.left=padding.left||0),(padding.right=padding.right||0)),$$.axis.isTimeSeries())){var firstX=+$$.getXDomainMin($$.data.targets),lastX=+$$.getXDomainMax($$.data.targets),timeDiff=lastX-firstX,range=timeDiff+padding.left+padding.right,left=0,_right=0;if(tickCount&&range){var relativeTickWidth=timeDiff/tickCount/range;(left=padding.left/range/relativeTickWidth),(_right=padding.right/range/relativeTickWidth);}
padding={left:left,right:_right};}
return padding;}),(_proto.updateLabels=function updateLabels(withTransition){var _this3=this,$$=this.owner,main=$$.$el.main,labels={x:main.select("."+
config_classes.axisX+" ."+
config_classes.axisXLabel),y:main.select("."+
config_classes.axisY+" ."+
config_classes.axisYLabel),y2:main.select("."+
config_classes.axisY2+" ."+
config_classes.axisY2Label)};Object.keys(labels).filter(function(id){return!labels[id].empty();}).forEach(function(v){var node=labels[v];(withTransition?node.transition():node).attr("x",function(){return _this3.xForAxisLabel(v);}).attr("dx",function(){return _this3.dxForAxisLabel(v);}).attr("dy",function(){return _this3.dyForAxisLabel(v);}).text(function(){return _this3.getLabelText(v);});});}),(_proto.getPadding=function getPadding(padding,key,defaultValue,domainLength){var p=isNumber(padding)?padding:padding[key];return isValue(p)?this.convertPixelsToAxisPadding(p,domainLength):defaultValue;}),(_proto.convertPixelsToAxisPadding=function convertPixelsToAxisPadding(pixels,domainLength){var $$=this.owner,config=$$.config,_$$$state2=$$.state,width=_$$$state2.width,height=_$$$state2.height,length=config.axis_rotated?width:height;return domainLength*(pixels/length);}),(_proto.generateTickValues=function generateTickValues(values,tickCount,forTimeSeries){var tickValues=values;if(tickCount){var targetCount=isFunction(tickCount)?tickCount():tickCount;if(targetCount===1)tickValues=[values[0]];else if(targetCount===2)
tickValues=[values[0],values[values.length-1]];else if(targetCount>2){var tickValue,isCategorized=this.isCategorized(),count=targetCount-2,start=values[0],end=values[values.length-1];tickValues=[start];for(var i=0;i<count;i++)
(tickValue=+start+(end-start)/(count+1)*(i+1)),tickValues.push(forTimeSeries?new Date(tickValue):isCategorized?Math.round(tickValue):tickValue);tickValues.push(end);}}
return(forTimeSeries||(tickValues=tickValues.sort(function(a,b){return a-b;})),tickValues);}),(_proto.generateTransitions=function generateTransitions(duration){var $$=this.owner,axis=$$.$el.axis,_map=["x","y","y2","subX"].map(function(v){var ax=axis[v];return(ax&&duration&&(ax=ax.transition().duration(duration)),ax);}),axisX=_map[0],axisY=_map[1],axisY2=_map[2],axisSubX=_map[3];return{axisX:axisX,axisY:axisY,axisY2:axisY2,axisSubX:axisSubX};}),(_proto.redraw=function redraw(transitions,isHidden,isInit){var _this4=this,$$=this.owner,config=$$.config,$el=$$.$el,opacity=isHidden?"0":"1";["x","y","y2","subX"].forEach(function(id){var axis=_this4[id],$axis=$el.axis[id];axis&&$axis&&(!isInit&&(axis.config.withoutTransition=!config.transition_duration),$axis.style("opacity",opacity),axis.create(transitions["axis"+capitalize(id)]));}),this.updateAxes();}),(_proto.redrawAxis=function redrawAxis(targetsToShow,wth,transitions,flow,isInit){var xDomainForZoom,_this5=this,$$=this.owner,config=$$.config,scale=$$.scale,$el=$$.$el,hasZoom=!!scale.zoom;!hasZoom&&this.isCategorized()&&targetsToShow.length===0&&scale.x.domain([0,$el.axis.x.selectAll(".tick").size()]),scale.x&&targetsToShow.length?(!hasZoom&&$$.updateXDomain(targetsToShow,wth.UpdateXDomain,wth.UpdateOrgXDomain,wth.TrimXDomain),!config.axis_x_tick_values&&this.updateXAxisTickValues(targetsToShow)):this.x&&(this.x.tickValues([]),this.subX&&this.subX.tickValues([])),config.zoom_rescale&&!flow&&(xDomainForZoom=scale.x.orgDomain()),["y","y2"].forEach(function(key){var axisScale=scale[key];if(axisScale){var tickValues=config["axis_"+key+"_tick_values"],tickCount=config["axis_"+key+"_tick_count"];if((axisScale.domain($$.getYDomain(targetsToShow,key,xDomainForZoom)),!tickValues&&tickCount)){var _axis=$$.axis[key],domain=axisScale.domain();_axis.tickValues(_this5.generateTickValues(domain,domain.every(function(v){return v===0;})?1:tickCount,_this5.isTimeSeriesY()));}}}),this.redraw(transitions,$$.hasArcType(),isInit),this.updateLabels(wth.Transition),(wth.UpdateXDomain||wth.UpdateXAxis||wth.Y)&&targetsToShow.length&&this.setCulling(),wth.Y&&(scale.subY&&scale.subY.domain($$.getYDomain(targetsToShow,"y")),scale.subY2&&scale.subY2.domain($$.getYDomain(targetsToShow,"y2")));}),(_proto.setCulling=function setCulling(){var $$=this.owner,config=$$.config,_$$$state3=$$.state,clip=_$$$state3.clip,current=_$$$state3.current,$el=$$.$el;["subX","x","y","y2"].forEach(function(type){var axis=$el.axis[type],id=type==="subX"?"x":type,toCull=config["axis_"+id+"_tick_culling"];if(axis&&toCull){var intervalForCulling,tickText=axis.selectAll(".tick text"),tickValues=sortValue(tickText.data()),tickSize=tickValues.length,cullingMax=config["axis_"+id+"_tick_culling_max"];if(tickSize){for(var i=1;i<tickSize;i++)
if(tickSize/i<cullingMax){intervalForCulling=i;break;}
tickText.each(function(d){this.style.display=tickValues.indexOf(d)%intervalForCulling?"none":"block";});}else tickText.style("display","block");if(type==="x"){var clipPath=current.maxTickWidths.x.clipPath?clip.pathXAxisTickTexts:null;$el.svg.selectAll("."+config_classes.axisX+" .tick text").attr("clip-path",clipPath);}}});}),Axis);})();const eventrect={initEventRect:function initEventRect(){var $$=this;$$.$el.main.select("."+config_classes.chart).append("g").attr("class",config_classes.eventRects).style("fill-opacity","0");},redrawEventRect:function redrawEventRect(){var $$=this,config=$$.config,state=$$.state,$el=$$.$el,isMultipleX=$$.isMultipleX();if($el.eventRect)$$.updateEventRect($el.eventRect,!0);else{var eventRects=$$.$el.main.select("."+config_classes.eventRects).style("cursor",config.zoom_enabled&&config.zoom_type!=="drag"?config.axis_rotated?"ns-resize":"ew-resize":null).classed(config_classes.eventRectsMultiple,isMultipleX).classed(config_classes.eventRectsSingle,!isMultipleX),eventRectUpdate=eventRects.selectAll("."+config_classes.eventRect).data([0]).enter().append("rect");$$.updateEventRect(eventRectUpdate),isMultipleX?$$.generateEventRectsForMultipleXs(eventRectUpdate):$$.generateEventRectsForSingleX(eventRectUpdate),eventRectUpdate.call($$.getDraggableSelection()),($el.eventRect=eventRectUpdate),$$.state.inputType!=="touch"||$el.svg.on("touchstart.eventRect")||$$.hasArcType()||$$.bindTouchOnEventRect(isMultipleX);}
if(!isMultipleX){var xAxisTickValues=$$.getMaxDataCountTarget();$$.updateDataIndexByX(xAxisTickValues),$$.updateXs(xAxisTickValues),$$.updatePointClass&&$$.updatePointClass(!0),(state.eventReceiver.data=xAxisTickValues);}
$$.updateEventRectData();},bindTouchOnEventRect:function bindTouchOnEventRect(isMultipleX){var startPx,$$=this,config=$$.config,state=$$.state,_$$$$el=$$.$el,eventRect=_$$$$el.eventRect,svg=_$$$$el.svg,selectRect=function(context){if(isMultipleX)$$.selectRectForMultipleXs(context);else{var index=$$.getDataIndexFromEvent(external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event);$$.callOverOutForTouch(index),index===-1?$$.unselectRect():$$.selectRectForSingle(context,eventRect,index);}},unselectRect=function(){$$.unselectRect(),$$.callOverOutForTouch();},preventDefault=config.interaction_inputType_touch.preventDefault,isPrevented=(isboolean(preventDefault)&&preventDefault)||!1,preventThreshold=(!isNaN(preventDefault)&&preventDefault)||null,preventEvent=function(event){var eventType=event.type,touch=event.changedTouches[0],currentXY=touch["client"+(config.axis_rotated?"Y":"X")];eventType==="touchstart"?isPrevented?event.preventDefault():preventThreshold!==null&&(startPx=currentXY):eventType==="touchmove"&&(isPrevented||startPx===!0||(preventThreshold!==null&&Math.abs(startPx-currentXY)>=preventThreshold))&&((startPx=!0),event.preventDefault());};eventRect.on("touchstart",function(){return $$.updateEventRect();}).on("touchstart.eventRect touchmove.eventRect",function(){var event=external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event;if(!eventRect.empty()&&eventRect.classed(config_classes.eventRect)){if(state.dragging||state.flowing||$$.hasArcType()||event.touches.length>1)
return;preventEvent(event),selectRect(eventRect.node());}else unselectRect();},!0).on("touchend.eventRect",function(){!eventRect.empty()&&eventRect.classed(config_classes.eventRect)&&($$.hasArcType()||!$$.toggleShape||state.cancelClick)&&state.cancelClick&&(state.cancelClick=!1);},!0),svg.on("touchstart",function(){var target=external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event.target;target&&target!==eventRect.node()&&unselectRect();});},updateEventRect:function updateEventRect(eventRect,force){force===void 0&&(force=!1);var $$=this,state=$$.state,$el=$$.$el,_state=state,eventReceiver=_state.eventReceiver,width=_state.width,height=_state.height,rendered=_state.rendered,resizing=_state.resizing,rectElement=eventRect||$el.eventRect;(!rendered||resizing||force)&&(rectElement.attr("x",0).attr("y",0).attr("width",width).attr("height",height),!rendered&&rectElement.attr("class",config_classes.eventRect)),(function updateClientRect(){eventReceiver&&(eventReceiver.rect=rectElement.node().getBoundingClientRect());})();},updateEventRectData:function updateEventRectData(){var x,y,w,h,$$=this,config=$$.config,scale=$$.scale,state=$$.state,xScale=scale.zoom||scale.x,isRotated=config.axis_rotated;if($$.isMultipleX())
(x=0),(y=0),(w=state.width),(h=state.height);else{var rectW,rectX;if($$.axis.isCategorized())
(rectW=$$.getEventRectWidth()),(rectX=function(d){return xScale(d.x)-rectW/2;});else{var getPrevNextX=function(_ref){var index=_ref.index;return{prev:$$.getPrevX(index),next:$$.getNextX(index)};};(rectW=function(d){var x=getPrevNextX(d);return x.prev===null&&x.next===null?isRotated?state.height:state.width:(x.prev===null&&(x.prev=xScale.domain()[0]),x.next===null&&(x.next=xScale.domain()[1]),Math.max(0,(xScale(x.next)-xScale(x.prev))/2));}),(rectX=function(d){var x=getPrevNextX(d),thisX=d.x;return x.prev===null&&x.next===null?0:(x.prev===null&&(x.prev=xScale.domain()[0]),(xScale(thisX)+xScale(x.prev))/2);});}
(x=isRotated?0:rectX),(y=isRotated?rectX:0),(w=isRotated?state.width:rectW),(h=isRotated?rectW:state.height);}
var eventReceiver=state.eventReceiver,call=function(fn,v){return isFunction(fn)?fn(v):fn;};eventReceiver.coords.splice(eventReceiver.data.length),eventReceiver.data.forEach(function(d,i){eventReceiver.coords[i]={x:call(x,d),y:call(y,d),w:call(w,d),h:call(h,d)};});},selectRectForMultipleXs:function selectRectForMultipleXs(context){var $$=this,config=$$.config,state=$$.state,targetsToShow=$$.filterTargetsToShow($$.data.targets);if(!(state.dragging||$$.hasArcType(targetsToShow))){var mouse=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.mouse)(context),closest=$$.findClosestFromTargets(targetsToShow,mouse);if((state.mouseover&&(!closest||closest.id!==state.mouseover.id)&&(config.data_onout.call($$.api,state.mouseover),(state.mouseover=undefined)),!closest))
return void $$.unselectRect();var sameXData=$$.isBubbleType(closest)||$$.isScatterType(closest)||!config.tooltip_grouped?[closest]:$$.filterByX(targetsToShow,closest.x),selectedData=sameXData.map(function(d){return $$.addName(d);});$$.showTooltip(selectedData,context),$$.expandCirclesBars(closest.index,closest.id,!0),$$.showGridFocus(selectedData),($$.isBarType(closest.id)||$$.dist(closest,mouse)<config.point_sensitivity)&&($$.$el.svg.select("."+config_classes.eventRect).style("cursor","pointer"),!state.mouseover&&(config.data_onover.call($$.api,closest),(state.mouseover=closest)));}},unselectRect:function unselectRect(){var $$=this,config=$$.config,_$$$$el2=$$.$el,bar=_$$$$el2.bar,circle=_$$$$el2.circle,tooltip=_$$$$el2.tooltip;$$.$el.svg.select("."+config_classes.eventRect).style("cursor",null),$$.hideGridFocus(),tooltip&&($$.hideTooltip(),$$._handleLinkedCharts(!1)),circle&&!config.point_focus_only&&$$.unexpandCircles(),bar&&$$.unexpandBars();},generateEventRectsForSingleX:function generateEventRectsForSingleX(eventRectEnter){var $$=this,config=$$.config,state=$$.state,eventReceiver=state.eventReceiver,rect=eventRectEnter.style("cursor",config.data_selection_enabled&&config.data_selection_grouped?"pointer":null).on("click",function(){var _eventReceiver=eventReceiver,currentIdx=_eventReceiver.currentIdx,data=_eventReceiver.data,d=data[currentIdx===-1?$$.getDataIndexFromEvent(external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event):currentIdx];$$.clickHandlerForSingleX.bind(this)(d,$$);});if(state.inputType==="mouse"){var getData=function(){var index=external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event?$$.getDataIndexFromEvent(external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event):eventReceiver.currentIdx;return index>-1?eventReceiver.data[index]:null;};rect.on("mouseover",function(){return $$.updateEventRect();}).on("mousemove",function(){var d=getData();if(!(state.dragging||state.flowing||$$.hasArcType()||!d||(config.tooltip_grouped&&d&&d.index===eventReceiver.currentIdx))){var index=d.index;$$.isStepType(d)&&config.line_step_type==="step-after"&&(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.mouse)(this)[0]<$$.scale.x($$.getXValue(d.id,index))&&(index-=1),index!==eventReceiver.currentIdx&&($$.setOverOut(!1,eventReceiver.currentIdx),(eventReceiver.currentIdx=index)),index===-1?$$.unselectRect():$$.selectRectForSingle(this,rect,index),$$.setOverOut(index!==-1,index);}}).on("mouseout",function(){!config||$$.hasArcType()||eventReceiver.currentIdx===-1||($$.unselectRect(),$$.setOverOut(!1,eventReceiver.currentIdx),(eventReceiver.currentIdx=-1));});}
return rect;},clickHandlerForSingleX:function clickHandlerForSingleX(d,ctx){var $$=ctx,config=$$.config,state=$$.state,main=$$.$el.main;if(!d||$$.hasArcType()||state.cancelClick)
return void(state.cancelClick&&(state.cancelClick=!1));var index=d.index;main.selectAll("."+config_classes.shape+"-"+index).each(function(d2){(config.data_selection_grouped||$$.isWithinShape(this,d2))&&($$.toggleShape&&$$.toggleShape(this,d2,index),config.data_onclick.bind($$.api)(d2,this));});},generateEventRectsForMultipleXs:function generateEventRectsForMultipleXs(eventRectEnter){var $$=this,inputType=$$.state.inputType;eventRectEnter.on("click",function(){$$.clickHandlerForMultipleXS.bind(this)($$);}),inputType==="mouse"&&eventRectEnter.on("mouseover mousemove",function(){$$.selectRectForMultipleXs(this);}).on("mouseout",function(){!$$.config||$$.hasArcType()||$$.unselectRect();});},clickHandlerForMultipleXS:function clickHandlerForMultipleXS(ctx){var $$=ctx,config=$$.config,targetsToShow=$$.filterTargetsToShow($$.data.targets);if(!$$.hasArcType(targetsToShow)){var mouse=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.mouse)(this),closest=$$.findClosestFromTargets(targetsToShow,mouse);!closest||(($$.isBarType(closest.id)||$$.dist(closest,mouse)<config.point_sensitivity)&&$$.$el.main.selectAll("."+
config_classes.shapes+
$$.getTargetSelectorSuffix(closest.id)).selectAll("."+config_classes.shape+"-"+closest.index).each(function(){(config.data_selection_grouped||$$.isWithinShape(this,closest))&&($$.toggleShape&&$$.toggleShape(this,closest,closest.index),config.data_onclick.bind($$.api)(closest,this));}));}}};var external_commonjs_d3_ease_commonjs2_d3_ease_amd_d3_ease_root_d3_=__webpack_require__(11);const interactions_flow={generateFlow:function generateFlow(args){var $$=this,data=$$.data,state=$$.state,$el=$$.$el;return function(){var flowLength=args.flow.length;(state.flowing=!0),data.targets.forEach(function(d){d.values.splice(0,flowLength);}),$$.updateXGrid&&$$.updateXGrid(!0);var elements={};["axis.x","grid.x","gridLines.x","region.list","text","bar","line","area","circle"].forEach(function(v){var name=v.split("."),node=$el[name[0]];node&&name.length>1&&(node=node[name[1]]),node&&node.size()&&(elements[v]=node);}),$$.hideGridFocus(),$$.setFlowList(elements,args);};},setFlowList:function setFlowList(elements,args){var $$=this,flow=args.flow,targets=args.targets,_flow=flow,_flow$duration=_flow.duration,duration=_flow$duration===void 0?args.duration:_flow$duration,flowIndex=_flow.index,flowLength=_flow.length,orgDataCount=_flow.orgDataCount,transform=$$.getFlowTransform(targets,orgDataCount,flowIndex,flowLength),wait=generateWait(),gt=(0,external_commonjs_d3_transition_commonjs2_d3_transition_amd_d3_transition_root_d3_.transition)().ease(external_commonjs_d3_ease_commonjs2_d3_ease_amd_d3_ease_root_d3_.easeLinear).duration(duration);wait.add(Object.keys(elements).map(function(v){var n=elements[v];return((n=v==="axis.x"?n.transition(gt).call(function(g){return $$.axis.x.setTransition(gt).create(g);}):v==="region.list"?n.filter($$.isRegionOnX).transition(gt).attr("transform",transform):n.transition(gt).attr("transform",transform)),n);})),gt.call(wait,function(){$$.cleanUpFlow(elements,args);});},cleanUpFlow:function cleanUpFlow(elements,args){var $$=this,config=$$.config,state=$$.state,svg=$$.$el.svg,isRotated=config.axis_rotated,flow=args.flow,shape=args.shape,xv=args.xv,_shape$pos=shape.pos,cx=_shape$pos.cx,cy=_shape$pos.cy,xForText=_shape$pos.xForText,yForText=_shape$pos.yForText,_flow2=flow,_flow2$done=_flow2.done,done=_flow2$done===void 0?function(){}:_flow2$done,flowLength=_flow2.length;flowLength&&(["circle","text","shape","eventRect"].forEach(function(v){var target=[];for(var i=0;i<flowLength;i++)
target.push("."+config_classes[v]+"-"+i);svg.selectAll("."+config_classes[v+"s"]).selectAll(target).remove();}),svg.select("."+config_classes.xgrid).remove()),Object.keys(elements).forEach(function(v){var n=elements[v];if((v!=="axis.x"&&n.attr("transform",null),v==="grid.x"))
n.attr(state.xgridAttr);else if(v==="gridLines.x")
n.attr("x1",isRotated?0:xv).attr("x2",isRotated?state.width:xv);else if(v==="gridLines.x")
n.select("line").attr("x1",isRotated?0:xv).attr("x2",isRotated?state.width:xv),n.select("text").attr("x",isRotated?state.width:0).attr("y",xv);else if(/^(area|bar|line)$/.test(v))
n.attr("d",shape.type[v]);else if(v==="text")
n.attr("x",xForText).attr("y",yForText).style("fill-opacity",$$.opacityForText.bind($$));else if(v!=="circle")
v==="region.list"&&n.select("rect").filter($$.isRegionOnX).attr("x",$$.regionX.bind($$)).attr("width",$$.regionWidth.bind($$));else if($$.isCirclePoint())n.attr("cx",cx).attr("cy",cy);else{var xFunc=function(d){return cx(d)-config.point_r;},yFunc=function(d){return cy(d)-config.point_r;};n.attr("x",xFunc).attr("y",yFunc).attr("cx",cx).attr("cy",cy);}}),config.interaction_enabled&&$$.redrawEventRect(),done.call($$.api),(state.flowing=!1);},getFlowTransform:function getFlowTransform(targets,orgDataCount,flowIndex,flowLength){var translateX,$$=this,data=$$.data,x=$$.scale.x,dataValues=data.targets[0].values,flowStart=$$.getValueOnIndex(dataValues,flowIndex),flowEnd=$$.getValueOnIndex(dataValues,flowIndex+flowLength),orgDomain=x.domain(),domain=$$.updateXDomain(targets,!0,!0);orgDataCount?orgDataCount===1||(flowStart&&flowStart.x)===(flowEnd&&flowEnd.x)?(translateX=x(orgDomain[0])-x(domain[0])):(translateX=$$.axis.isTimeSeries()?x(orgDomain[0])-x(domain[0]):x(flowStart.x)-x(flowEnd.x)):dataValues.length===1?$$.axis.isTimeSeries()?((flowStart=$$.getValueOnIndex(dataValues,0)),(flowEnd=$$.getValueOnIndex(dataValues,dataValues.length-1)),(translateX=x(flowStart.x)-x(flowEnd.x))):(translateX=diffDomain(domain)/2):(translateX=x(orgDomain[0])-x(domain[0]));var scaleX=diffDomain(orgDomain)/diffDomain(domain);return"translate("+translateX+",0) scale("+scaleX+",1)";}};const clip={initClip:function initClip(){var $$=this,clip=$$.state.clip;(clip.id=$$.state.datetimeId+"-clip"),(clip.idXAxis=clip.id+"-xaxis"),(clip.idYAxis=clip.id+"-yaxis"),(clip.idGrid=clip.id+"-grid"),(clip.path=$$.getClipPath(clip.id)),(clip.pathXAxis=$$.getClipPath(clip.idXAxis)),(clip.pathYAxis=$$.getClipPath(clip.idYAxis)),(clip.pathGrid=$$.getClipPath(clip.idGrid));},getClipPath:function getClipPath(id){var $$=this,config=$$.config;if((!config.clipPath&&/-clip$/.test(id))||(!config.axis_x_clipPath&&/-clip-xaxis$/.test(id))||(!config.axis_y_clipPath&&/-clip-yaxis$/.test(id)))
return null;var isIE9=!!win.navigator&&win.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return("url("+
(isIE9?"":browser_doc.URL.split("#")[0])+"#"+
id+")");},appendClip:function appendClip(parent,id){id&&parent.append("clipPath").attr("id",id).append("rect");},setXAxisClipPath:function setXAxisClipPath(node){var $$=this,config=$$.config,_$$$state=$$.state,margin=_$$$state.margin,width=_$$$state.width,height=_$$$state.height,isRotated=config.axis_rotated,left=Math.max(30,margin.left)-(isRotated?0:20),x=isRotated?-(1+left):-(left-1),y=-Math.max(15,margin.top),w=isRotated?margin.left+20:width+10+left,h=(isRotated?margin.top+height+10:margin.bottom)+20;node.attr("x",x).attr("y",y).attr("width",w).attr("height",h);},setYAxisClipPath:function setYAxisClipPath(node){var $$=this,config=$$.config,_$$$state2=$$.state,margin=_$$$state2.margin,width=_$$$state2.width,height=_$$$state2.height,isRotated=config.axis_rotated,left=Math.max(30,margin.left)-(isRotated?20:0),isInner=config.axis_y_inner,x=isInner?-1:isRotated?-(1+left):-(left-1),y=-(isRotated?20:margin.top),w=(isRotated?width+15+left:margin.left+20)+
(isInner?20:0),h=(isRotated?margin.bottom:margin.top+height)+10;node.attr("x",x).attr("y",y).attr("width",w).attr("height",h);},updateXAxisTickClip:function updateXAxisTickClip(){var $$=this,config=$$.config,_$$$state3=$$.state,clip=_$$$state3.clip,xAxisHeight=_$$$state3.xAxisHeight,defs=$$.$el.defs,newXAxisHeight=$$.getHorizontalAxisHeight("x");if(defs&&!clip.idXAxisTickTexts){var clipId=clip.id+"-xaxisticktexts";$$.appendClip(defs,clipId),(clip.pathXAxisTickTexts=$$.getClipPath(clip.idXAxisTickTexts)),(clip.idXAxisTickTexts=clipId);}
!config.axis_x_tick_multiline&&$$.getAxisTickRotate("x")&&newXAxisHeight!==xAxisHeight&&($$.setXAxisTickClipWidth(),$$.setXAxisTickTextClipPathWidth()),($$.state.xAxisHeight=newXAxisHeight);},setXAxisTickClipWidth:function setXAxisTickClipWidth(){var $$=this,config=$$.config,maxTickWidths=$$.state.current.maxTickWidths,xAxisTickRotate=$$.getAxisTickRotate("x");if(!config.axis_x_tick_multiline&&xAxisTickRotate){var sinRotation=Math.sin(Math.PI/180*Math.abs(xAxisTickRotate));maxTickWidths.x.clipPath=($$.getHorizontalAxisHeight("x")-20)/sinRotation;}else maxTickWidths.x.clipPath=null;},setXAxisTickTextClipPathWidth:function setXAxisTickTextClipPathWidth(){var $$=this,_$$$state4=$$.state,clip=_$$$state4.clip,current=_$$$state4.current,svg=$$.$el.svg;svg&&svg.select("#"+clip.idXAxisTickTexts+" rect").attr("width",current.maxTickWidths.x.clipPath).attr("height",30);}};var getGridTextAnchor=function(d){return isValue(d.position)||"end";},getGridTextDx=function(d){return d.position==="start"?4:d.position==="middle"?0:-4;};function getGridTextX(isX,width,height){return function(d){var x=isX?0:width;return(d.position==="start"?(x=isX?-height:0):d.position==="middle"&&(x=(isX?-height:width)/2),x);};}
function smoothLines(el,type){type==="grid"&&el.each(function(){var g=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this);["x1","x2","y1","y2"].forEach(function(v){return g.attr(v,Math.ceil(+g.attr(v)));});});}
const grid={hasGrid:function hasGrid(){var config=this.config;return["x","y"].some(function(v){return(config["grid_"+v+"_show"]||config["grid_"+v+"_lines"].length);});},initGrid:function initGrid(){var $$=this;$$.hasGrid()&&$$.initGridLines(),$$.config.interaction_enabled&&$$.initFocusGrid();},initGridLines:function initGridLines(){var $$=this,config=$$.config,clip=$$.state.clip,$el=$$.$el;(config.grid_x_lines.length||config.grid_y_lines.length)&&(($el.gridLines.main=$el.main.insert("g","."+
config_classes.chart+
(config.grid_lines_front?" + *":"")).attr("clip-path",clip.pathGrid).attr("class",config_classes.grid+" "+config_classes.gridLines)),$el.gridLines.main.append("g").attr("class",config_classes.xgridLines),$el.gridLines.main.append("g").attr("class",config_classes.ygridLines),($el.gridLines.x=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.selectAll)([])));},updateXGrid:function updateXGrid(withoutUpdate){var $$=this,config=$$.config,scale=$$.scale,state=$$.state,_$$$$el=$$.$el,main=_$$$$el.main,grid=_$$$$el.grid,isRotated=config.axis_rotated,xgridData=$$.generateGridData(config.grid_x_type,scale.x),tickOffset=$$.axis.isCategorized()?$$.axis.x.tickOffset():0,pos=function(d){return((scale.zoom||scale.x)(d)+tickOffset*(isRotated?-1:1));};(state.xgridAttr=isRotated?{x1:0,x2:state.width,y1:pos,y2:pos}:{x1:pos,x2:pos,y1:0,y2:state.height}),(grid.x=main.select("."+config_classes.xgrids).selectAll("."+config_classes.xgrid).data(xgridData)),grid.x.exit().remove(),(grid.x=grid.x.enter().append("line").attr("class",config_classes.xgrid).merge(grid.x)),withoutUpdate||grid.x.each(function(){var grid=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this);Object.keys(state.xgridAttr).forEach(function(id){grid.attr(id,state.xgridAttr[id]).style("opacity",function(){return grid.attr(isRotated?"y1":"x1")===(isRotated?state.height:0)?"0":"1";});});});},updateYGrid:function updateYGrid(){var $$=this,config=$$.config,state=$$.state,_$$$$el2=$$.$el,grid=_$$$$el2.grid,main=_$$$$el2.main,isRotated=config.axis_rotated,gridValues=$$.axis.y.tickValues()||$$.scale.y.ticks(config.grid_y_ticks),pos=function(d){return Math.ceil($$.scale.y(d));};(grid.y=main.select("."+config_classes.ygrids).selectAll("."+config_classes.ygrid).data(gridValues)),grid.y.exit().remove(),(grid.y=grid.y.enter().append("line").attr("class",config_classes.ygrid).merge(grid.y)),grid.y.attr("x1",isRotated?pos:0).attr("x2",isRotated?pos:state.width).attr("y1",isRotated?0:pos).attr("y2",isRotated?state.height:pos),smoothLines(grid.y,"grid");},updateGrid:function updateGrid(duration){var $$=this,_$$$$el3=$$.$el,grid=_$$$$el3.grid,gridLines=_$$$$el3.gridLines;gridLines.main||$$.initGridLines(),grid.main.style("visibility",$$.hasArcType()?"hidden":"visible"),$$.hideGridFocus(),$$.updateXGridLines(duration),$$.updateYGridLines(duration);},updateXGridLines:function updateXGridLines(duration){var $$=this,config=$$.config,_$$$$el4=$$.$el,gridLines=_$$$$el4.gridLines,main=_$$$$el4.main,isRotated=config.axis_rotated;config.grid_x_show&&$$.updateXGrid();var xLines=main.select("."+config_classes.xgridLines).selectAll("."+config_classes.xgridLine).data(config.grid_x_lines);xLines.exit().transition().duration(duration).style("opacity","0").remove();var xgridLine=xLines.enter().append("g");xgridLine.append("line").style("opacity","0"),xgridLine.append("text").attr("transform",isRotated?"":"rotate(-90)").attr("dy",-5).style("opacity","0"),(xLines=xgridLine.merge(xLines)),xLines.attr("class",function(d){return(config_classes.xgridLine+" "+
(d.class||"")).trim();}).select("text").attr("text-anchor",getGridTextAnchor).attr("dx",getGridTextDx).transition().duration(duration).text(function(d){return d.text;}).transition().style("opacity","1"),(gridLines.x=xLines);},updateYGridLines:function updateYGridLines(duration){var $$=this,config=$$.config,_$$$state=$$.state,width=_$$$state.width,height=_$$$state.height,$el=$$.$el,isRotated=config.axis_rotated;config.grid_y_show&&$$.updateYGrid();var ygridLines=$el.main.select("."+config_classes.ygridLines).selectAll("."+config_classes.ygridLine).data(config.grid_y_lines);ygridLines.exit().transition().duration(duration).style("opacity","0").remove();var ygridLine=ygridLines.enter().append("g");ygridLine.append("line").style("opacity","0"),ygridLine.append("text").attr("transform",isRotated?"rotate(-90)":"").style("opacity","0"),(ygridLines=ygridLine.merge(ygridLines));var yv=$$.yv.bind($$);ygridLines.attr("class",function(d){return(config_classes.ygridLine+" "+
(d.class||"")).trim();}).select("line").transition().duration(duration).attr("x1",isRotated?yv:0).attr("x2",isRotated?yv:width).attr("y1",isRotated?0:yv).attr("y2",isRotated?height:yv).transition().style("opacity","1"),ygridLines.select("text").attr("text-anchor",getGridTextAnchor).attr("dx",getGridTextDx).transition().duration(duration).attr("dy",-5).attr("x",getGridTextX(isRotated,width,height)).attr("y",yv).text(function(d){return d.text;}).transition().style("opacity","1"),($el.gridLines.y=ygridLines);},redrawGrid:function redrawGrid(withTransition){var $$=this,isRotated=$$.config.axis_rotated,_$$$state2=$$.state,width=_$$$state2.width,height=_$$$state2.height,gridLines=$$.$el.gridLines,xv=$$.xv.bind($$),lines=gridLines.x.select("line"),texts=gridLines.x.select("text");return((lines=(withTransition?lines.transition():lines).attr("x1",isRotated?0:xv).attr("x2",isRotated?width:xv).attr("y1",isRotated?xv:0).attr("y2",isRotated?xv:height)),(texts=(withTransition?texts.transition():texts).attr("x",getGridTextX(!isRotated,width,height)).attr("y",xv).text(function(d){return d.text;})),[lines.style("opacity","1"),texts.style("opacity","1")]);},initFocusGrid:function initFocusGrid(){var $$=this,config=$$.config,clip=$$.state.clip,$el=$$.$el,isFront=config.grid_front,className="."+
config_classes[isFront&&$el.gridLines.main?"gridLines":"chart"]+
(isFront?" + *":""),grid=$el.main.insert("g",className).attr("clip-path",clip.pathGrid).attr("class",config_classes.grid);($el.grid.main=grid),config.grid_x_show&&grid.append("g").attr("class",config_classes.xgrids),config.grid_y_show&&grid.append("g").attr("class",config_classes.ygrids),config.grid_focus_show&&(grid.append("g").attr("class",config_classes.xgridFocus).append("line").attr("class",config_classes.xgridFocus),config.grid_focus_y&&!config.tooltip_grouped&&grid.append("g").attr("class",config_classes.ygridFocus).append("line").attr("class",config_classes.ygridFocus));},showGridFocus:function showGridFocus(data){var $$=this,config=$$.config,_$$$state3=$$.state,width=_$$$state3.width,height=_$$$state3.height,isRotated=config.axis_rotated,focusEl=$$.$el.main.selectAll("line."+
config_classes.xgridFocus+", line."+
config_classes.ygridFocus),dataToShow=(data||[focusEl.datum()]).filter(function(d){return d&&isValue($$.getBaseValue(d));});if(!(!config.tooltip_show||dataToShow.length===0||$$.hasType("bubble")||$$.hasArcType())){var isEdge=config.grid_focus_edge&&!config.tooltip_grouped,xx=$$.xx.bind($$);focusEl.style("visibility","visible").data(dataToShow.concat(dataToShow)).each(function(d){var xy,el=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this),pos={x:xx(d),y:$$.getYScaleById(d.id)(d.value)};if(el.classed(config_classes.xgridFocus))
xy=isRotated?[null,pos.x,isEdge?pos.y:width,pos.x]:[pos.x,isEdge?pos.y:null,pos.x,height];else{var isY2=$$.axis.getId(d.id)==="y2";xy=isRotated?[pos.y,isEdge&&!isY2?pos.x:null,pos.y,isEdge&&isY2?pos.x:height]:[isEdge&&isY2?pos.x:null,pos.y,isEdge&&!isY2?pos.x:width,pos.y];}
["x1","y1","x2","y2"].forEach(function(v,i){return el.attr(v,xy[i]);});}),smoothLines(focusEl,"grid"),$$.showCircleFocus&&$$.showCircleFocus(data);}},hideGridFocus:function hideGridFocus(){var $$=this,_$$$state4=$$.state,inputType=_$$$state4.inputType,resizing=_$$$state4.resizing,main=$$.$el.main;(inputType!=="mouse"&&resizing)||(main.selectAll("line."+
config_classes.xgridFocus+", line."+
config_classes.ygridFocus).style("visibility","hidden"),$$.hideCircleFocus&&$$.hideCircleFocus());},updateGridFocus:function updateGridFocus(){var $$=this,_$$$state5=$$.state,inputType=_$$$state5.inputType,width=_$$$state5.width,height=_$$$state5.height,resizing=_$$$state5.resizing,grid=$$.$el.grid,xgridFocus=grid.main.select("line."+config_classes.xgridFocus);if(inputType==="touch")
xgridFocus.empty()?resizing&&$$.showCircleFocus():$$.showGridFocus();else{var _isRotated=$$.config.axis_rotated;xgridFocus.attr("x1",_isRotated?0:-10).attr("x2",_isRotated?width:-10).attr("y1",_isRotated?-10:0).attr("y2",_isRotated?-10:height);}
return!0;},generateGridData:function generateGridData(type,scale){var $$=this,tickNum=$$.$el.main.select("."+config_classes.axisX).selectAll(".tick").size(),gridData=[];if(type==="year"){var xDomain=$$.getXDomain(),firstYear=xDomain[0].getFullYear(),lastYear=xDomain[1].getFullYear();for(var i=firstYear;i<=lastYear;i++)
gridData.push(new Date(i+"-01-01 00:00:00"));}else
(gridData=scale.ticks(10)),gridData.length>tickNum&&(gridData=gridData.filter(function(d){return(d+"").indexOf(".")<0;}));return gridData;},getGridFilterToRemove:function getGridFilterToRemove(params){return params?function(line){var found=!1;return((isArray(params)?params.concat():[params]).forEach(function(param){(("value"in param&&line.value===param.value)||("class"in param&&line.class===param.class))&&(found=!0);}),found);}:function(){return!0;};},removeGridLines:function removeGridLines(params,forX){var $$=this,config=$$.config,toRemove=$$.getGridFilterToRemove(params),classLines=forX?config_classes.xgridLines:config_classes.ygridLines,classLine=forX?config_classes.xgridLine:config_classes.ygridLine;$$.$el.main.select("."+classLines).selectAll("."+classLine).filter(toRemove).transition().duration(config.transition_duration).style("opacity","0").remove();var gridLines="grid_"+(forX?"x":"y")+"_lines";config[gridLines]=config[gridLines].filter(function toShow(line){return!toRemove(line);});}};const region={initRegion:function initRegion(){var $$=this,$el=$$.$el;$el.region.main=$el.main.append("g").attr("clip-path",$$.state.clip.path).attr("class",config_classes.regions);},updateRegion:function updateRegion(duration){var $$=this,config=$$.config,$el=$$.$el;$el.region.main||$$.initRegion(),$el.region.main.style("visibility",$$.hasArcType()?"hidden":"visible");var list=$el.main.select("."+config_classes.regions).selectAll("."+config_classes.region).data(config.regions);list.exit().transition().duration(duration).style("opacity","0").remove(),(list=list.enter().append("g").merge(list).attr("class",$$.classRegion.bind($$))),list.append("rect").style("fill-opacity","0"),($el.region.list=list);},redrawRegion:function redrawRegion(withTransition){var $$=this,regions=$$.$el.region.list.select("rect");return((regions=(withTransition?regions.transition():regions).attr("x",$$.regionX.bind($$)).attr("y",$$.regionY.bind($$)).attr("width",$$.regionWidth.bind($$)).attr("height",$$.regionHeight.bind($$))),[(withTransition?regions.transition():regions).style("fill-opacity",function(d){return isValue(d.opacity)?d.opacity:"0.1";}).on("end",function(){(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this.parentNode).selectAll("rect:not([x])").remove();})]);},getRegionXY:function getRegionXY(type,d){var currScale,$$=this,config=$$.config,scale=$$.scale,isRotated=config.axis_rotated,isX=type==="x",key="start",pos=0;return(d.axis==="y"||d.axis==="y2"?(!isX&&(key="end"),(isX?isRotated:!isRotated)&&key in d&&((currScale=scale[d.axis]),(pos=currScale(d[key])))):(isX?!isRotated:isRotated)&&key in d&&((currScale=scale.zoom||scale.x),(pos=currScale($$.axis.isTimeSeries()?parseDate.call($$,d[key]):d[key]))),pos);},regionX:function regionX(d){return this.getRegionXY("x",d);},regionY:function regionY(d){return this.getRegionXY("y",d);},getRegionSize:function getRegionSize(type,d){var currScale,$$=this,config=$$.config,scale=$$.scale,state=$$.state,isRotated=config.axis_rotated,isWidth=type==="width",start=$$[isWidth?"regionX":"regionY"](d),key="end",end=state[type];return(d.axis==="y"||d.axis==="y2"?(!isWidth&&(key="start"),(isWidth?isRotated:!isRotated)&&key in d&&((currScale=scale[d.axis]),(end=currScale(d[key])))):(isWidth?!isRotated:isRotated)&&key in d&&((currScale=scale.zoom||scale.x),(end=currScale($$.axis.isTimeSeries()?parseDate.call($$,d[key]):d[key]))),end<start?0:end-start);},regionWidth:function regionWidth(d){return this.getRegionSize("width",d);},regionHeight:function regionHeight(d){return this.getRegionSize("height",d);},isRegionOnX:function isRegionOnX(d){return!d.axis||d.axis==="x";}};const size_axis={getAxisSize:function getAxisSize(id){var $$=this,isRotated=$$.config.axis_rotated;return(isRotated&&id==="x")||(!isRotated&&/y2?/.test(id))?$$.getAxisWidthByAxisId(id,!0):$$.getHorizontalAxisHeight(id);},getAxisWidthByAxisId:function getAxisWidthByAxisId(id,withoutRecompute){var $$=this;if($$.axis){var position=$$.axis&&$$.axis.getLabelPositionById(id);return($$.axis.getMaxTickWidth(id,withoutRecompute)+
(position.isInner?20:40));}
return 40;},getHorizontalAxisHeight:function getHorizontalAxisHeight(id){var $$=this,config=$$.config,state=$$.state,_state=state,current=_state.current,rotatedPadding=_state.rotatedPadding,isLegendRight=_state.isLegendRight,isLegendInset=_state.isLegendInset,isRotated=config.axis_rotated,h=30;if(id==="x"&&!config.axis_x_show)return 8;if(id==="x"&&config.axis_x_height)return config.axis_x_height;if(id==="y"&&!config.axis_y_show)
return!config.legend_show||isLegendRight||isLegendInset?1:10;if(id==="y2"&&!config.axis_y2_show)return rotatedPadding.top;var rotate=$$.getAxisTickRotate(id);return(((id==="x"&&!isRotated)||(/y2?/.test(id)&&isRotated))&&rotate&&((h=30+
$$.axis.getMaxTickWidth(id)*Math.cos(Math.PI*(90-rotate)/180)),!config.axis_x_tick_multiline&&current.height&&h>current.height/2&&(h=current.height/2)),h+
($$.axis.getLabelPositionById(id).isInner?0:10)+
(id!=="y2"||isRotated?0:-10));},getEventRectWidth:function getEventRectWidth(){return Math.max(0,this.axis.x.tickInterval());},getAxisTickRotate:function getAxisTickRotate(id){var $$=this,axis=$$.axis,config=$$.config,state=$$.state,$el=$$.$el,rotate=config["axis_"+id+"_tick_rotate"];if(id==="x"){var allowedXAxisTypes=axis.isCategorized()||axis.isTimeSeries();if(config.axis_x_tick_fit&&allowedXAxisTypes){var xTickCount=config.axis_x_tick_count,currentXTicksLength=state.current.maxTickWidths.x.ticks.length,tickCount=0;xTickCount?(tickCount=xTickCount>currentXTicksLength?currentXTicksLength:xTickCount):currentXTicksLength&&(tickCount=currentXTicksLength),tickCount!==state.axis.x.tickCount&&(state.axis.x.padding=$$.axis.getXAxisPadding(tickCount)),(state.axis.x.tickCount=tickCount);}
$el.svg&&config.axis_x_tick_fit&&!config.axis_x_tick_multiline&&!config.axis_x_tick_culling&&config.axis_x_tick_autorotate&&allowedXAxisTypes&&(rotate=$$.needToRotateXAxisTickTexts()?config.axis_x_tick_rotate:0);}
return rotate;},needToRotateXAxisTickTexts:function needToRotateXAxisTickTexts(){var $$=this,_$$$state=$$.state,axis=_$$$state.axis,current=_$$$state.current,xAxisLength=current.width-
$$.getCurrentPaddingLeft(!1)-
$$.getCurrentPaddingRight(!0),tickCountWithPadding=axis.x.tickCount+axis.x.padding.left+axis.x.padding.right,maxTickWidth=$$.axis.getMaxTickWidth("x"),tickLength=tickCountWithPadding?xAxisLength/tickCountWithPadding:0;return maxTickWidth>tickLength;}};const data_axis={data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_axes:{},data_regions:{},data_stack_normalize:!1};const axis_x={axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:undefined,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:undefined,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:undefined,axis_x_min:undefined,axis_x_padding:{},axis_x_height:undefined,axis_x_extent:undefined,axis_x_label:{},axis_x_axes:[]};const y={axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:"indexed",axis_y_max:undefined,axis_y_min:undefined,axis_y_inverted:!1,axis_y_center:undefined,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:undefined,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:undefined,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:undefined,axis_y_padding:{},axis_y_default:undefined,axis_y_axes:[]};const y2={axis_y2_show:!1,axis_y2_type:"indexed",axis_y2_max:undefined,axis_y2_min:undefined,axis_y2_inverted:!1,axis_y2_center:undefined,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:undefined,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:undefined,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:undefined,axis_y2_axes:[]};function axis_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}
return keys;}
function axis_objectSpread(target){for(var source,i=1;i<arguments.length;i++)
(source=arguments[i]==null?{}:arguments[i]),i%2?axis_ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):axis_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});return target;}
const axis_axis=axis_objectSpread(axis_objectSpread(axis_objectSpread({axis_rotated:!1},axis_x),y),y2);const common_grid={grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0};var api=[api_axis,api_category,grid_x,grid_y,flow,group,api_regions,x];var internal=[Axis,clip,eventrect,interactions_flow,grid,region,size_axis];var options=[data_axis,axis_axis,common_grid];var external_commonjs_d3_interpolate_commonjs2_d3_interpolate_amd_d3_interpolate_root_d3_=__webpack_require__(12);const arc={initPie:function initPie(){var $$=this,config=$$.config,dataType=config.data_type,padding=config.pie_padding,startingAngle=config[dataType+"_startingAngle"]||0,padAngle=($$.hasType("pie")&&padding?padding*0.01:config[dataType+"_padAngle"])||0;$$.pie=(0,external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.pie)().startAngle(startingAngle).endAngle(startingAngle+2*Math.PI).padAngle(padAngle).value(function(d){return d.values.reduce(function(a,b){return a+b.value;},0);}).sort($$.getSortCompareFn.bind($$)(!0));},updateRadius:function updateRadius(){var $$=this,config=$$.config,state=$$.state,padding=config.pie_padding,w=config.gauge_width||config.donut_width,gaugeArcWidth=$$.filterTargetsToShow($$.data.targets).length*config.gauge_arcs_minWidth;(state.radiusExpanded=Math.min(state.arcWidth,state.arcHeight)/2*($$.hasMultiArcGauge()?0.85:1)),(state.radius=state.radiusExpanded*0.95),(state.innerRadiusRatio=w?(state.radius-w)/state.radius:0.6),(state.gaugeArcWidth=w||(gaugeArcWidth<=state.radius-state.innerRadius?state.radius-state.innerRadius:gaugeArcWidth<=state.radius?gaugeArcWidth:state.radius));var innerRadius=config.pie_innerRadius||(padding?padding*(state.innerRadiusRatio+0.1):0);(state.outerRadius=config.pie_outerRadius),(state.innerRadius=$$.hasType("donut")||$$.hasType("gauge")?state.radius*state.innerRadiusRatio:innerRadius);},getRadius:function getRadius(d){var $$=this,data=d&&d.data,_$$$state=$$.state,innerRadius=_$$$state.innerRadius,outerRadius=_$$$state.outerRadius;return(!isNumber(innerRadius)&&data&&(innerRadius=innerRadius[data.id]||0),isObject(outerRadius)&&data&&data.id in outerRadius?(outerRadius=outerRadius[data.id]):!isNumber(outerRadius)&&(outerRadius=$$.state.radius),{innerRadius:innerRadius,outerRadius:outerRadius});},updateArc:function updateArc(){var $$=this;$$.updateRadius(),($$.svgArc=$$.getSvgArc()),($$.svgArcExpanded=$$.getSvgArcExpanded());},getArcLength:function getArcLength(){var $$=this,config=$$.config,arcLengthInPercent=config.gauge_arcLength*3.6,len=2*(arcLengthInPercent/360);return(arcLengthInPercent<-360?(len=-2):arcLengthInPercent>360&&(len=2),len*Math.PI);},getStartAngle:function getStartAngle(){var $$=this,config=$$.config,isFullCircle=config.gauge_fullCircle,defaultStartAngle=-1*Math.PI/2,defaultEndAngle=Math.PI/2,startAngle=config.gauge_startingAngle;return(!isFullCircle&&startAngle<=defaultStartAngle?(startAngle=defaultStartAngle):!isFullCircle&&startAngle>=defaultEndAngle?(startAngle=defaultEndAngle):(startAngle>Math.PI||startAngle<-1*Math.PI)&&(startAngle=Math.PI),startAngle);},updateAngle:function updateAngle(dValue){var $$=this,config=$$.config,state=$$.state,pie=$$.pie,d=dValue,found=!1;if(!config)return null;var gStart=$$.getStartAngle(),radius=config.gauge_fullCircle?$$.getArcLength():gStart*-2;if(d.data&&$$.isGaugeType(d.data)&&!$$.hasMultiArcGauge()){var totalSum=$$.getTotalDataSum(state.rendered),gEnd=radius*(totalSum/(config.gauge_max-config.gauge_min));pie=pie.startAngle(gStart).endAngle(gEnd+gStart);}
if((pie($$.filterTargetsToShow()).forEach(function(t,i){found||t.data.id!==d.data.id||((found=!0),(d=t),(d.index=i));}),isNaN(d.startAngle)&&(d.startAngle=0),isNaN(d.endAngle)&&(d.endAngle=d.startAngle),d.data&&$$.hasMultiArcGauge())){var gMin=config.gauge_min,gMax=config.gauge_max,gValue=d.value<gMin?0:d.value<gMax?d.value-gMin:gMax-gMin;(d.startAngle=gStart),(d.endAngle=gStart+radius/(gMax-gMin)*gValue);}
return found?d:null;},getSvgArc:function getSvgArc(){var $$=this,state=$$.state,singleArcWidth=state.gaugeArcWidth/$$.filterTargetsToShow($$.data.targets).length,hasMultiArcGauge=$$.hasMultiArcGauge(),arc=(0,external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.arc)().innerRadius(function(d){var _$$$getRadius=$$.getRadius(d),innerRadius=_$$$getRadius.innerRadius;return hasMultiArcGauge?state.radius-singleArcWidth*(d.index+1):isNumber(innerRadius)?innerRadius:0;}).outerRadius(function(d){var _$$$getRadius2=$$.getRadius(d),outerRadius=_$$$getRadius2.outerRadius;return hasMultiArcGauge?state.radius-singleArcWidth*d.index:outerRadius;}),newArc=function(d,withoutUpdate){var path="M 0 0";if(d.value||d.data){var updated=!withoutUpdate&&$$.updateAngle(d);withoutUpdate?(path=arc(d)):updated&&(path=arc(updated));}
return path;};return(newArc.centroid=arc.centroid),newArc;},getSvgArcExpanded:function getSvgArcExpanded(rate){var $$=this,state=$$.state,newRate=rate||1,singleArcWidth=state.gaugeArcWidth/$$.filterTargetsToShow($$.data.targets).length,hasMultiArcGauge=$$.hasMultiArcGauge(),expandWidth=Math.min(state.radiusExpanded*newRate-state.radius,singleArcWidth*0.8-(1-newRate)*100),arc=(0,external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.arc)().innerRadius(function(d){return hasMultiArcGauge?state.radius-singleArcWidth*(d.index+1):$$.getRadius(d).innerRadius;}).outerRadius(function(d){var radius;if(hasMultiArcGauge)
radius=state.radius-singleArcWidth*d.index+expandWidth;else{var _$$$getRadius3=$$.getRadius(d),outerRadius=_$$$getRadius3.outerRadius,radiusExpanded=state.radiusExpanded;state.radius!==outerRadius&&(radiusExpanded-=Math.abs(state.radius-outerRadius)),(radius=radiusExpanded*newRate);}
return radius;});return function(d){var updated=$$.updateAngle(d);return updated?arc(updated):"M 0 0";};},getArc:function getArc(d,withoutUpdate,force){return force||this.isArcType(d.data)?this.svgArc(d,withoutUpdate):"M 0 0";},transformForArcLabel:function transformForArcLabel(d){var $$=this,config=$$.config,radiusExpanded=$$.state.radiusExpanded,updated=$$.updateAngle(d),translate="";if(updated)
if($$.hasMultiArcGauge()){var y1=Math.sin(updated.endAngle-Math.PI/2),x=Math.cos(updated.endAngle-Math.PI/2)*(radiusExpanded+25),y=y1*(radiusExpanded+15-Math.abs(y1*10))+3;translate="translate("+x+","+y+")";}else if(!$$.hasType("gauge")||$$.data.targets.length>1){var _$$$getRadius4=$$.getRadius(d),outerRadius=_$$$getRadius4.outerRadius,c=this.svgArc.centroid(updated),x=isNaN(c[0])?0:c[0],y=isNaN(c[1])?0:c[1],h=Math.sqrt(x*x+y*y),ratio=($$.hasType("donut")&&config.donut_label_ratio)||($$.hasType("pie")&&config.pie_label_ratio);(ratio=ratio?isFunction(ratio)?ratio.bind($$.api)(d,outerRadius,h):ratio:outerRadius&&(h?(36/outerRadius>0.375?1.175-36/outerRadius:0.8)*outerRadius/h:0)),(translate="translate("+x*ratio+","+y*ratio+")");}
return translate;},convertToArcData:function convertToArcData(d){return this.addName({id:d.data?d.data.id:d.id,value:d.value,ratio:this.getRatio("arc",d),index:d.index});},textForArcLabel:function textForArcLabel(selection){var $$=this,hasGauge=$$.hasType("gauge");$$.shouldShowArcLabel()&&selection.style("fill",$$.updateTextColor.bind($$)).each(function(d){var node=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this),updated=$$.updateAngle(d),ratio=$$.getRatio("arc",updated),isUnderThreshold=$$.meetsLabelThreshold(ratio,($$.hasType("donut")&&"donut")||($$.hasType("gauge")&&"gauge")||($$.hasType("pie")&&"pie"));if(isUnderThreshold){var value=(updated||d).value,text=($$.getArcLabelFormat()||$$.defaultArcValueFormat)(value,ratio,d.data.id).toString();setTextValue(node,text,[-1,1],hasGauge);}else node.text("");});},expandArc:function expandArc(targetIds){var $$=this,transiting=$$.state.transiting,$el=$$.$el;if(transiting){var interval=setInterval(function(){transiting||(clearInterval(interval),$el.legend.selectAll("."+config_classes.legendItemFocused).size()>0&&$$.expandArc(targetIds));},10);return;}
var newTargetIds=$$.mapToTargetIds(targetIds);$el.svg.selectAll($$.selectorTargets(newTargetIds,"."+config_classes.chartArc)).each(function(d){if($$.shouldExpand(d.data.id)){var expandDuration=$$.getExpandConfig(d.data.id,"duration"),svgArcExpandedSub=$$.getSvgArcExpanded($$.getExpandConfig(d.data.id,"rate"));(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this).selectAll("path").transition().duration(expandDuration).attr("d",$$.svgArcExpanded).transition().duration(expandDuration*2).attr("d",svgArcExpandedSub);}});},unexpandArc:function unexpandArc(targetIds){var $$=this,transiting=$$.state.transiting,svg=$$.$el.svg;if(!transiting){var newTargetIds=$$.mapToTargetIds(targetIds);svg.selectAll($$.selectorTargets(newTargetIds,"."+config_classes.chartArc)).selectAll("path").transition().duration(function(d){return $$.getExpandConfig(d.data.id,"duration");}).attr("d",$$.svgArc),svg.selectAll(""+config_classes.arc).style("opacity","1");}},getExpandConfig:function getExpandConfig(id,key){var type,$$=this,config=$$.config;return($$.isDonutType(id)?(type="donut"):$$.isGaugeType(id)?(type="gauge"):$$.isPieType(id)&&(type="pie"),type?config[type+"_expand_"+key]:{duration:50,rate:0.98}[key]);},shouldExpand:function shouldExpand(id){var $$=this,config=$$.config;return(($$.isDonutType(id)&&config.donut_expand)||($$.isGaugeType(id)&&config.gauge_expand)||($$.isPieType(id)&&config.pie_expand));},shouldShowArcLabel:function shouldShowArcLabel(){var $$=this,config=$$.config;return["pie","donut","gauge"].some(function(v){return $$.hasType(v)&&config[v+"_label_show"];});},getArcLabelFormat:function getArcLabelFormat(){var $$=this,config=$$.config,format=config.pie_label_format;return($$.hasType("gauge")?(format=config.gauge_label_format):$$.hasType("donut")&&(format=config.donut_label_format),isFunction(format)?format.bind($$.api):format);},getArcTitle:function getArcTitle(){var $$=this,type=($$.hasType("donut")&&"donut")||($$.hasType("gauge")&&"gauge");return type?$$.config[type+"_title"]:"";},updateTargetsForArc:function updateTargetsForArc(targets){var $$=this,$el=$$.$el,hasGauge=$$.hasType("gauge"),classChartArc=$$.classChartArc.bind($$),classArcs=$$.classArcs.bind($$),classFocus=$$.classFocus.bind($$),chartArcs=$el.main.select("."+config_classes.chartArcs),mainPieUpdate=chartArcs.selectAll("."+config_classes.chartArc).data($$.pie(targets)).attr("class",function(d){return classChartArc(d)+classFocus(d.data);}),mainPieEnter=mainPieUpdate.enter().append("g").attr("class",classChartArc);mainPieEnter.append("g").attr("class",classArcs).merge(mainPieUpdate),mainPieEnter.append("text").attr("dy",hasGauge&&!$$.hasMultiTargets()?"-.1em":".35em").style("opacity","0").style("text-anchor","middle").style("pointer-events","none"),($el.text=chartArcs.selectAll("."+config_classes.target+" text"));},initArc:function initArc(){var $$=this,$el=$$.$el;($el.arcs=$el.main.select("."+config_classes.chart).append("g").attr("class",config_classes.chartArcs).attr("transform",$$.getTranslate("arc"))),$$.setArcTitle();},setArcTitle:function setArcTitle(){var $$=this,title=$$.getArcTitle(),hasGauge=$$.hasType("gauge");if(title){var text=$$.$el.arcs.append("text").attr("class",config_classes[hasGauge?"chartArcsGaugeTitle":"chartArcsTitle"]).style("text-anchor","middle");hasGauge&&text.attr("dy","-0.3em").style("font-size","27px"),setTextValue(text,title,hasGauge?undefined:[-0.6,1.35],!0);}},redrawArc:function redrawArc(duration,durationForExit,withTransform){var $$=this,config=$$.config,state=$$.state,main=$$.$el.main,hasInteraction=config.interaction_enabled,isSelectable=hasInteraction&&config.data_selection_isselectable,mainArc=main.selectAll("."+config_classes.arcs).selectAll("."+config_classes.arc).data($$.arcData.bind($$));mainArc.exit().transition().duration(durationForExit).style("opacity","0").remove(),(mainArc=mainArc.enter().append("path").attr("class",$$.classArc.bind($$)).style("fill",function(d){return $$.color(d.data);}).style("cursor",function(d){return isSelectable&&isSelectable.bind($$.api)(d)?"pointer":null;}).style("opacity","0").each(function(d){$$.isGaugeType(d.data)&&((d.startAngle=config.gauge_startingAngle),(d.endAngle=config.gauge_startingAngle)),(this._current=d);}).merge(mainArc)),$$.hasType("gauge")&&($$.updateGaugeMax(),$$.hasMultiArcGauge()&&$$.redrawMultiArcGauge()),mainArc.attr("transform",function(d){return!$$.isGaugeType(d.data)&&withTransform?"scale(0)":"";}).style("opacity",function(d){return d===this._current?"0":"1";}).each(function(){state.transiting=!0;}).transition().duration(duration).attrTween("d",function(d){var updated=$$.updateAngle(d);if(!updated)
return function(){return"M 0 0";};isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);var interpolate=(0,external_commonjs_d3_interpolate_commonjs2_d3_interpolate_amd_d3_interpolate_root_d3_.interpolate)(this._current,updated);return((this._current=interpolate(0)),function(t){var interpolated=interpolate(t);return((interpolated.data=d.data),$$.getArc(interpolated,!0));});}).attr("transform",withTransform?"scale(1)":"").style("fill",function(d){var color;return($$.levelColor?((color=$$.levelColor(d.data.values[0].value)),(config.data_colors[d.data.id]=color)):(color=$$.color(d.data)),color);}).style("opacity","1").call(endall,function(){if($$.levelColor){var path=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this),d=path.datum();$$.updateLegendItemColor(d.data.id,path.style("fill"));}
(state.transiting=!1),callFn(config.onrendered,$$.api);}),hasInteraction&&$$.bindArcEvent(mainArc),$$.hasType("gauge")&&$$.redrawBackgroundArcs(),$$.redrawArcText(duration);},redrawBackgroundArcs:function redrawBackgroundArcs(){var $$=this,config=$$.config,state=$$.state,hasMultiArcGauge=$$.hasMultiArcGauge(),isFullCircle=config.gauge_fullCircle,startAngle=$$.getStartAngle(),endAngle=isFullCircle?startAngle+$$.getArcLength():startAngle*-1,backgroundArc=$$.$el.arcs.select((hasMultiArcGauge?"g":"")+"."+
config_classes.chartArcsBackground);if(hasMultiArcGauge){var index=0;(backgroundArc=backgroundArc.selectAll("path."+config_classes.chartArcsBackground).data($$.data.targets)),backgroundArc.enter().append("path").attr("class",function(d,i){return(config_classes.chartArcsBackground+" "+
config_classes.chartArcsBackground+"-"+
i);}).merge(backgroundArc).style("fill",config.gauge_background||null).attr("d",function(_ref2){var id=_ref2.id;if(state.hiddenTargetIds.indexOf(id)>=0)return"M 0 0";var d={data:[{value:config.gauge_max}],startAngle:startAngle,endAngle:endAngle,index:index++};return $$.getArc(d,!0,!0);}),backgroundArc.exit().remove();}else
backgroundArc.attr("d",function(){var d={data:[{value:config.gauge_max}],startAngle:startAngle,endAngle:endAngle};return $$.getArc(d,!0,!0);});},bindArcEvent:function bindArcEvent(arc){function selectArc(_this,arcData,id){$$.expandArc(id),$$.api.focus(id),$$.toggleFocusLegend(id,!0),$$.showTooltip([arcData],_this);}
function unselectArc(arcData){var id=(arcData&&arcData.id)||undefined;$$.unexpandArc(id),$$.api.revert(),$$.revertLegend(),$$.hideTooltip();}
var $$=this,config=$$.config,state=$$.state,isTouch=state.inputType==="touch",isMouse=state.inputType==="mouse";if((arc.on("click",function(d,i){var arcData,updated=$$.updateAngle(d);updated&&((arcData=$$.convertToArcData(updated)),$$.toggleShape&&$$.toggleShape(this,arcData,i),config.data_onclick.bind($$.api)(arcData,this));}),isMouse&&arc.on("mouseover",function(d){if(!state.transiting){var updated=$$.updateAngle(d),arcData=updated?$$.convertToArcData(updated):null,id=(arcData&&arcData.id)||undefined;selectArc(this,arcData,id),$$.setOverOut(!0,arcData);}}).on("mouseout",function(d){if(!state.transiting){var updated=$$.updateAngle(d),arcData=updated?$$.convertToArcData(updated):null;unselectArc(),$$.setOverOut(!1,arcData);}}).on("mousemove",function(d){var updated=$$.updateAngle(d),arcData=updated?$$.convertToArcData(updated):null;$$.showTooltip([arcData],this);}),isTouch&&$$.hasArcType()&&!$$.radars)){var getEventArc=function(){var touch=external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event.changedTouches[0],eventArc=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(browser_doc.elementFromPoint(touch.clientX,touch.clientY));return eventArc;},handler=function(){if(!state.transiting){var eventArc=getEventArc(),datum=eventArc.datum(),updated=datum&&datum.data&&datum.data.id?$$.updateAngle(datum):null,arcData=updated?$$.convertToArcData(updated):null,id=(arcData&&arcData.id)||undefined;$$.callOverOutForTouch(arcData),isUndefined(id)?unselectArc():selectArc(this,arcData,id);}};$$.$el.svg.on("touchstart",handler).on("touchmove",handler);}},redrawArcText:function redrawArcText(duration){var text,$$=this,config=$$.config,state=$$.state,_$$$$el=$$.$el,main=_$$$$el.main,arcs=_$$$$el.arcs,hasGauge=$$.hasType("gauge"),hasMultiArcGauge=$$.hasMultiArcGauge();if(((hasGauge&&$$.data.targets.length===1&&config.gauge_title)||((text=main.selectAll("."+config_classes.chartArc).select("text").style("opacity","0").attr("class",function(d){return $$.isGaugeType(d.data)?config_classes.gaugeValue:null;}).call($$.textForArcLabel.bind($$)).attr("transform",$$.transformForArcLabel.bind($$)).style("font-size",function(d){return $$.isGaugeType(d.data)&&$$.data.targets.length===1&&!hasMultiArcGauge?Math.round(state.radius/5)+"px":null;}).transition().duration(duration).style("opacity",function(d){return $$.isTargetToShow(d.data.id)&&$$.isArcType(d.data)?"1":"0";})),hasMultiArcGauge&&text.attr("dy","-.1em")),main.select("."+config_classes.chartArcsTitle).style("opacity",$$.hasType("donut")||hasGauge?"1":"0"),hasGauge)){var isFullCircle=config.gauge_fullCircle;isFullCircle&&text&&text.attr("dy",""+(hasMultiArcGauge?0:Math.round(state.radius/14))),arcs.select("."+config_classes.chartArcsGaugeUnit).attr("dy",".75em").text(config.gauge_label_show?config.gauge_units:""),config.gauge_label_show&&(arcs.select("."+config_classes.chartArcsGaugeMin).attr("dx",-1*(state.innerRadius+
(state.radius-state.innerRadius)/(isFullCircle?1:2))+"px").attr("dy","1.2em").text($$.textForGaugeMinMax(config.gauge_min,!1)),!isFullCircle&&arcs.select("."+config_classes.chartArcsGaugeMax).attr("dx",state.innerRadius+
(state.radius-state.innerRadius)/2+"px").attr("dy","1.2em").text($$.textForGaugeMinMax(config.gauge_max,!0)));}}};const shape_area={initArea:function initArea(mainLine){var $$=this,config=$$.config;mainLine.insert("g","."+config_classes[config.area_front?"circles":"lines"]).attr("class",$$.classAreas.bind($$));},updateAreaGradient:function updateAreaGradient(){var $$=this,config=$$.config,datetimeId=$$.state.datetimeId,defs=$$.$el.defs;$$.data.targets.forEach(function(d){var id=datetimeId+"-areaGradient"+$$.getTargetSelectorSuffix(d.id);if($$.isAreaType(d)&&defs.select("#"+id).empty()){var color=$$.color(d),_config$area_linearGr=config.area_linearGradient,_config$area_linearGr2=_config$area_linearGr.x,x=_config$area_linearGr2===void 0?[0,0]:_config$area_linearGr2,_config$area_linearGr3=_config$area_linearGr.y,y=_config$area_linearGr3===void 0?[0,1]:_config$area_linearGr3,_config$area_linearGr4=_config$area_linearGr.stops,stops=_config$area_linearGr4===void 0?[[0,color,1],[1,color,0]]:_config$area_linearGr4,linearGradient=defs.append("linearGradient").attr("id",""+id).attr("x1",x[0]).attr("x2",x[1]).attr("y1",y[0]).attr("y2",y[1]);stops.forEach(function(v){var stopColor=isFunction(v[1])?v[1].bind($$.api)(d.id):v[1];linearGradient.append("stop").attr("offset",v[0]).attr("stop-color",stopColor||color).attr("stop-opacity",v[2]);});}});},updateAreaColor:function updateAreaColor(d){var $$=this;return $$.config.area_linearGradient?"url(#"+
$$.state.datetimeId+"-areaGradient"+
$$.getTargetSelectorSuffix(d.id)+")":$$.color(d);},updateArea:function updateArea(durationForExit){var $$=this,config=$$.config,state=$$.state,$el=$$.$el;config.area_linearGradient&&$$.updateAreaGradient(),($el.area=$el.main.selectAll("."+config_classes.areas).selectAll("."+config_classes.area).data($$.lineData.bind($$))),$el.area.exit().transition().duration(durationForExit).style("opacity","0").remove(),($el.area=$el.area.enter().append("path").attr("class",$$.classArea.bind($$)).style("fill",$$.updateAreaColor.bind($$)).style("opacity",function(){return((state.orgAreaOpacity=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this).style("opacity")),"0");}).merge($el.area)),$el.area.style("opacity",state.orgAreaOpacity);},redrawArea:function redrawArea(drawArea,withTransition){var $$=this,orgAreaOpacity=$$.state.orgAreaOpacity;return[(withTransition?$$.$el.area.transition(getRandom()):$$.$el.area).attr("d",drawArea).style("fill",$$.updateAreaColor.bind($$)).style("opacity",function(d){return(($$.isAreaRangeType(d)?orgAreaOpacity/1.75:orgAreaOpacity)+"");})];},generateDrawArea:function generateDrawArea(areaIndices,isSub){var $$=this,config=$$.config,lineConnectNull=config.line_connectNull,isRotated=config.axis_rotated,getPoints=$$.generateGetAreaPoints(areaIndices,isSub),yScale=$$.getYScaleById.bind($$),xValue=function(d){return(isSub?$$.subxx:$$.xx).call($$,d);},value0=function(d,i){return $$.isGrouped(d.id)?getPoints(d,i)[0][1]:yScale(d.id,isSub)($$.isAreaRangeType(d)?$$.getAreaRangeData(d,"high"):$$.getShapeYMin(d.id));},value1=function(d,i){return $$.isGrouped(d.id)?getPoints(d,i)[1][1]:yScale(d.id,isSub)($$.isAreaRangeType(d)?$$.getAreaRangeData(d,"low"):d.value);};return function(d){var path,values=lineConnectNull?$$.filterRemoveNull(d.values):d.values,x0=0,y0=0;if($$.isAreaType(d)){var area=(0,external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.area)();(area=isRotated?area.y(xValue).x0(value0).x1(value1):area.x(xValue).y0(config.area_above?0:value0).y1(value1)),lineConnectNull||(area=area.defined(function(d){return $$.getBaseValue(d)!==null;})),$$.isStepType(d)&&(values=$$.convertValuesToStep(values)),(path=area.curve($$.getCurve(d))(values));}else
values[0]&&((x0=$$.scale.x(values[0].x)),(y0=$$.getYScaleById(d.id)(values[0].value))),(path=isRotated?"M "+y0+" "+x0:"M "+x0+" "+y0);return path||"M 0 0";};},generateGetAreaPoints:function generateGetAreaPoints(areaIndices,isSub){var $$=this,config=$$.config,x=$$.getShapeX(0,areaIndices,isSub),y=$$.getShapeY(!!isSub),areaOffset=$$.getShapeOffset($$.isAreaType,areaIndices,isSub),yScale=$$.getYScaleById.bind($$);return function(d,i){var y0=yScale.call($$,d.id,isSub)($$.getShapeYMin(d.id)),offset=areaOffset(d,i)||y0,posX=x(d),posY=y(d);return(config.axis_rotated&&((d.value>0&&posY<y0)||(d.value<0&&y0<posY))&&(posY=y0),[[posX,offset],[posX,posY-(y0-offset)],[posX,posY-(y0-offset)],[posX,offset]]);};}};const bar={initBar:function initBar(){var $el=this.$el;$el.bar=$el.main.select("."+config_classes.chart).insert("g",":first-child").attr("class",config_classes.chartBars);},updateTargetsForBar:function updateTargetsForBar(targets){var $$=this,config=$$.config,$el=$$.$el,classChartBar=$$.classChartBar.bind($$),classBars=$$.classBars.bind($$),classFocus=$$.classFocus.bind($$),isSelectable=config.interaction_enabled&&config.data_selection_isselectable;$el.bar||$$.initBar();var mainBarUpdate=$$.$el.main.select("."+config_classes.chartBars).selectAll("."+config_classes.chartBar).data(targets).attr("class",function(d){return classChartBar(d)+classFocus(d);}),mainBarEnter=mainBarUpdate.enter().append("g").attr("class",classChartBar).style("opacity","0").style("pointer-events","none");mainBarEnter.append("g").attr("class",classBars).style("cursor",function(d){return isSelectable&&isSelectable.bind($$.api)(d)?"pointer":null;});},updateBar:function updateBar(durationForExit){var $$=this,$el=$$.$el,barData=$$.barData.bind($$),classBar=$$.classBar.bind($$),initialOpacity=$$.initialOpacity.bind($$);($el.bar=$el.main.selectAll("."+config_classes.bars).selectAll("."+config_classes.bar).data(barData)),$el.bar.exit().transition().duration(durationForExit).style("opacity","0").remove(),($el.bar=$el.bar.enter().append("path").attr("class",classBar).style("fill",$$.color).merge($el.bar).style("opacity",initialOpacity));},redrawBar:function redrawBar(drawBar,withTransition){var bar=this.$el.bar;return[(withTransition?bar.transition(getRandom()):bar).attr("d",drawBar).style("fill",this.color).style("opacity","1")];},getBarW:function getBarW(axis,barTargetsNum){var $$=this,config=$$.config,org=$$.org,scale=$$.scale,maxDataCount=$$.getMaxDataCount(),isGrouped=config.data_groups.length,tickInterval=scale.zoom&&!$$.axis.isCategorized()?org.xDomain.map(function(v){return scale.zoom(v);}).reduce(function(a,c){return Math.abs(a)+c;})/maxDataCount:axis.tickInterval(maxDataCount),getWidth=function(id){var width=id?config.bar_width[id]:config.bar_width,ratio=id?width.ratio:config.bar_width_ratio,max=id?width.max:config.bar_width_max,w=isNumber(width)?width:barTargetsNum?tickInterval*ratio/barTargetsNum:0;return max&&w>max?max:w;},result=getWidth();return(!isGrouped&&isObjectType(config.bar_width)&&((result={_$width:result,_$total:[]}),$$.filterTargetsToShow($$.data.targets).forEach(function(v){config.bar_width[v.id]&&((result[v.id]=getWidth(v.id)),result._$total.push(result[v.id]||result._$width));})),result);},getBars:function getBars(i,id){var $$=this,main=$$.$el.main,suffix=isValue(i)?"-"+i:"";return(id?main.selectAll("."+config_classes.bars+$$.getTargetSelectorSuffix(id)):main).selectAll("."+config_classes.bar+suffix);},expandBars:function expandBars(i,id,reset){var $$=this;reset&&$$.unexpandBars(),$$.getBars(i,id).classed(config_classes.EXPANDED,!0);},unexpandBars:function unexpandBars(i){this.getBars(i).classed(config_classes.EXPANDED,!1);},generateDrawBar:function generateDrawBar(barIndices,isSub){var $$=this,config=$$.config,getPoints=$$.generateGetBarPoints(barIndices,isSub),isRotated=config.axis_rotated,isGrouped=config.data_groups.length,barRadius=config.bar_radius,barRadiusRatio=config.bar_radius_ratio,getRadius=isNumber(barRadius)&&barRadius>0?function(){return barRadius;}:isNumber(barRadiusRatio)?function(w){return w*barRadiusRatio;}:null;return function(d,i){var points=getPoints(d,i),indexX=+isRotated,indexY=+!indexX,isNegative=d.value<0,pathRadius=["",""],radius=0;if(getRadius&&!isGrouped){var index=isRotated?indexY:indexX,barW=points[2][index]-points[0][index];radius=getRadius(barW);var arc="a"+
radius+","+
radius+" "+
(isNegative?"1 0 0":"0 0 1")+" ";(pathRadius[+!isRotated]=""+arc+radius+","+radius),(pathRadius[+isRotated]=""+
arc+
[-radius,radius][isRotated?"sort":"reverse"]()),isNegative&&pathRadius.reverse();}
var path=isRotated?"H"+
(points[1][indexX]-radius)+" "+
pathRadius[0]+"V"+
(points[2][indexY]-radius)+" "+
pathRadius[1]+"H"+
points[3][indexX]:"V"+
(points[1][indexY]+(isNegative?-radius:radius))+" "+
pathRadius[0]+"H"+
(points[2][indexX]-radius)+" "+
pathRadius[1]+"V"+
points[3][indexY];return("M"+points[0][indexX]+","+points[0][indexY]+path+"z");};},generateGetBarPoints:function generateGetBarPoints(barIndices,isSub){var $$=this,config=$$.config,axis=isSub?$$.axis.subX:$$.axis.x,barTargetsNum=$$.getIndicesMax(barIndices)+1,barW=$$.getBarW(axis,barTargetsNum),barX=$$.getShapeX(barW,barIndices,!!isSub),barY=$$.getShapeY(!!isSub),barOffset=$$.getShapeOffset($$.isBarType,barIndices,!!isSub),yScale=$$.getYScaleById.bind($$);return function(d,i){var y0=yScale.call($$,d.id,isSub)($$.getShapeYMin(d.id)),offset=barOffset(d,i)||y0,width=isNumber(barW)?barW:barW[d.id]||barW._$width,posX=barX(d),posY=barY(d);return(config.axis_rotated&&((d.value>0&&posY<y0)||(d.value<0&&y0<posY))&&(posY=y0),(posY-=y0-offset),[[posX,offset],[posX,posY],[posX+width,posY],[posX+width,offset]]);};},isWithinBar:function isWithinBar(that){var mouse=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.mouse)(that),list=getRectSegList(that),_list=list,seg0=_list[0],seg1=_list[1],x=Math.min(seg0.x,seg1.x),y=Math.min(seg0.y,seg1.y),offset=this.config.bar_sensitivity,_that$getBBox=that.getBBox(),width=_that$getBBox.width,height=_that$getBBox.height;return(x-offset<mouse[0]&&mouse[0]<x+width+offset&&y-offset<mouse[1]&&mouse[1]<y+height+offset);}};const gauge={initGauge:function initGauge(){var $$=this,config=$$.config,arcs=$$.$el.arcs,appendText=function(className){arcs.append("text").attr("class",className).style("text-anchor","middle").style("pointer-events","none");};if($$.hasType("gauge")){var hasMulti=$$.hasMultiArcGauge();arcs.append(hasMulti?"g":"path").attr("class",config_classes.chartArcsBackground).style("fill",(!hasMulti&&config.gauge_background)||null),config.gauge_units&&appendText(config_classes.chartArcsGaugeUnit),config.gauge_label_show&&(appendText(config_classes.chartArcsGaugeMin),!config.gauge_fullCircle&&appendText(config_classes.chartArcsGaugeMax));}},updateGaugeMax:function updateGaugeMax(){var $$=this,config=$$.config,state=$$.state,hasMultiGauge=$$.hasMultiArcGauge(),max=hasMultiGauge?$$.getMinMaxData().max[0].value:$$.getTotalDataSum(state.rendered);max>config.gauge_max&&(config.gauge_max=max);},redrawMultiArcGauge:function redrawMultiArcGauge(){var $$=this,config=$$.config,state=$$.state,$el=$$.$el,hiddenTargetIds=$$.state.hiddenTargetIds,arcLabelLines=$el.main.selectAll("."+config_classes.arcs).selectAll("."+config_classes.arcLabelLine).data($$.arcData.bind($$)),mainArcLabelLine=arcLabelLines.enter().append("rect").attr("class",function(d){return(config_classes.arcLabelLine+" "+
config_classes.target+" "+
config_classes.target+"-"+
d.data.id);}).merge(arcLabelLines);mainArcLabelLine.style("fill",function(d){return $$.levelColor?$$.levelColor(d.data.values[0].value):$$.color(d.data);}).style("display",config.gauge_label_show?"":"none").each(function(d){var lineLength=0,lineThickness=2,x=0,y=0,transform="";if(hiddenTargetIds.indexOf(d.data.id)<0){var updated=$$.updateAngle(d),innerLineLength=state.gaugeArcWidth/$$.filterTargetsToShow($$.data.targets).length*(updated.index+1),lineAngle=updated.endAngle-Math.PI/2,arcInnerRadius=state.radius-innerLineLength,linePositioningAngle=lineAngle-
(arcInnerRadius===0?0:1/arcInnerRadius);(lineLength=state.radiusExpanded-state.radius+innerLineLength),(x=Math.cos(linePositioningAngle)*arcInnerRadius),(y=Math.sin(linePositioningAngle)*arcInnerRadius),(transform="rotate("+
lineAngle*180/Math.PI+", "+
x+", "+
y+")");}
(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this).attr("x",x).attr("y",y).attr("width",lineLength).attr("height",lineThickness).attr("transform",transform).style("stroke-dasharray","0, "+(lineLength+lineThickness)+", 0");});},textForGaugeMinMax:function textForGaugeMinMax(value,isMax){var $$=this,config=$$.config,format=config.gauge_label_extents;return isFunction(format)?format.bind($$.api)(value,isMax):value;},getGaugeLabelHeight:function getGaugeLabelHeight(){var config=this.config;return this.config.gauge_label_show&&!config.gauge_fullCircle?20:0;},getPaddingBottomForGauge:function getPaddingBottomForGauge(){var $$=this;return($$.getGaugeLabelHeight()*($$.config.gauge_label_show?2:2.5));}};const bubble={initBubble:function initBubble(){var $$=this,config=$$.config;$$.hasType("bubble")&&((config.point_show=!0),(config.point_type="circle"),(config.point_sensitivity=25));},getBaseLength:function getBaseLength(){var $$=this,_$$$state=$$.state,width=_$$$state.width,height=_$$$state.height,cacheKey=KEY.bubbleBaseLength,baseLength=$$.cache.get(cacheKey);return(baseLength||$$.cache.add(cacheKey,(baseLength=getMinMax("min",[width,height]))),baseLength);},getBubbleR:function getBubbleR(d){var $$=this,maxR=$$.config.bubble_maxR;isFunction(maxR)?(maxR=maxR.bind($$.api)(d)):!isNumber(maxR)&&(maxR=$$.getBaseLength()/($$.getMaxDataCount()*2)+12);var max=getMinMax("max",$$.getMinMaxData().max.map(function(d){return $$.isBubbleZType(d)?$$.getBubbleZData(d.value,"y"):isObject(d.value)?d.value.mid:d.value;})),maxArea=maxR*maxR*Math.PI,area=($$.isBubbleZType(d)?$$.getBubbleZData(d.value,"z"):d.value)*(maxArea/max);return Math.sqrt(area/Math.PI);},getBubbleZData:function getBubbleZData(d,type){return isObject(d)?d[type]:d[type==="y"?0:1];}};const line={initLine:function initLine(){var $el=this.$el;$el.line=$el.main.select("."+config_classes.chart).append("g").attr("class",config_classes.chartLines);},updateTargetsForLine:function updateTargetsForLine(t){var $$=this,_$$$$el=$$.$el,area=_$$$$el.area,line=_$$$$el.line,main=_$$$$el.main,classChartLine=$$.classChartLine.bind($$),classLines=$$.classLines.bind($$),classFocus=$$.classFocus.bind($$);line||$$.initLine();var targets=t.filter(function(d){return!($$.isScatterType(d)||$$.isBubbleType(d));}),mainLineUpdate=main.select("."+config_classes.chartLines).selectAll("."+config_classes.chartLine).data(targets).attr("class",function(d){return classChartLine(d)+classFocus(d);}),mainLineEnter=mainLineUpdate.enter().append("g").attr("class",classChartLine).style("opacity","0").style("pointer-events","none");mainLineEnter.append("g").attr("class",classLines),$$.hasTypeOf("Area")&&!area&&$$.initArea(mainLineEnter.empty()?mainLineUpdate:mainLineEnter),$$.updateTargetForCircle(targets,mainLineEnter);},updateLine:function updateLine(durationForExit){var $$=this,extraLineClasses=$$.format.extraLineClasses,$el=$$.$el;($el.line=$el.main.selectAll("."+config_classes.lines).selectAll("."+config_classes.line).data($$.lineData.bind($$))),$el.line.exit().transition().duration(durationForExit).style("opacity","0").remove(),($el.line=$el.line.enter().append("path").attr("class",function(d){return($$.classLine.bind($$)(d)+" "+(extraLineClasses(d)||""));}).style("stroke",$$.color).merge($el.line).style("opacity",$$.initialOpacity.bind($$)).style("shape-rendering",function(d){return $$.isStepType(d)?"crispEdges":"";}).attr("transform",null));},redrawLine:function redrawLine(drawLine,withTransition){var line=this.$el.line;return[(withTransition?line.transition(getRandom()):line).attr("d",drawLine).style("stroke",this.color).style("opacity","1")];},getCurve:function getCurve(d){var $$=this,isRotatedStepType=$$.config.axis_rotated&&$$.isStepType(d);return isRotatedStepType?function(context){var step=$$.getInterpolate(d)(context);return((step.orgPoint=step.point),(step.pointRotated=function(x,y){this._point===1&&(this._point=2);var y1=this._y*(1-this._t)+y*this._t;this._context.lineTo(this._x,y1),this._context.lineTo(x,y1),(this._x=x),(this._y=y);}),(step.point=function(x,y){this._point===0?this.orgPoint(x,y):this.pointRotated(x,y);}),step);}:$$.getInterpolate(d);},generateDrawLine:function generateDrawLine(lineIndices,isSub){var $$=this,config=$$.config,scale=$$.scale,lineConnectNull=config.line_connectNull,isRotated=config.axis_rotated,getPoints=$$.generateGetLinePoints(lineIndices,isSub),yScale=$$.getYScaleById.bind($$),xValue=function(d){return(isSub?$$.subxx:$$.xx).call($$,d);},yValue=function(d,i){return $$.isGrouped(d.id)?getPoints(d,i)[0][1]:yScale(d.id,isSub)($$.getBaseValue(d));},line=(0,external_commonjs_d3_shape_commonjs2_d3_shape_amd_d3_shape_root_d3_.line)();(line=isRotated?line.x(yValue).y(xValue):line.x(xValue).y(yValue)),lineConnectNull||(line=line.defined(function(d){return $$.getBaseValue(d)!==null;}));var x=isSub?scale.subX:scale.x;return function(d){var path,y=yScale(d.id,isSub),values=lineConnectNull?$$.filterRemoveNull(d.values):d.values,x0=0,y0=0;if($$.isLineType(d)){var regions=config.data_regions[d.id];regions?(path=$$.lineWithRegions(values,x,y,regions)):($$.isStepType(d)&&(values=$$.convertValuesToStep(values)),(path=line.curve($$.getCurve(d))(values)));}else
values[0]&&((x0=x(values[0].x)),(y0=y(values[0].value))),(path=isRotated?"M "+y0+" "+x0:"M "+x0+" "+y0);return path||"M 0 0";};},lineWithRegions:function lineWithRegions(d,x,y,_regions){var xp,yp,diff,diffx2,$$=this,config=$$.config,isRotated=config.axis_rotated,isTimeSeries=$$.axis.isTimeSeries(),xOffset=$$.axis.isCategorized()?0.5:0,regions=[],dasharray="2 2",isWithinRegions=function(withinX,withinRegions){for(var reg,i=0;(reg=withinRegions[i]);i++)
if(reg.start<withinX&&withinX<=reg.end)
return reg.style;return!1;};if(isDefined(_regions)){var getValue=function(v,def){return isUndefined(v)?def:isTimeSeries?parseDate.call($$,v):v;};for(var reg,i=0;(reg=_regions[i]);i++){var start=getValue(reg.start,d[0].x),end=getValue(reg.end,d[d.length-1].x),style=reg.style||{dasharray:dasharray};regions[i]={start:start,end:end,style:style};}}
var xValue=isRotated?function(dt){return y(dt.value);}:function(dt){return x(dt.x);},yValue=isRotated?function(dt){return x(dt.x);}:function(dt){return y(dt.value);},generateM=function(points){return("M"+
points[0][0]+","+
points[0][1]+"L"+
points[1][0]+","+
points[1][1]);},sWithRegion=isTimeSeries?function(d0,d1,k,timeseriesDiff){var x0=d0.x.getTime(),xDiff=d1.x-d0.x,xv0=new Date(x0+xDiff*k),xv1=new Date(x0+xDiff*(k+timeseriesDiff)),points=isRotated?[[y(yp(k)),x(xv0)],[y(yp(k+diff)),x(xv1)]]:[[x(xv0),y(yp(k))],[x(xv1),y(yp(k+diff))]];return generateM(points);}:function(d0,d1,k,otherDiff){var points=isRotated?[[y(yp(k),!0),x(xp(k))],[y(yp(k+otherDiff),!0),x(xp(k+otherDiff))]]:[[x(xp(k),!0),y(yp(k))],[x(xp(k+otherDiff),!0),y(yp(k+otherDiff))]];return generateM(points);},axisType={x:$$.axis.getAxisType("x"),y:$$.axis.getAxisType("y")},path="";for(var data,_i=0;(data=d[_i]);_i++){var prevData=d[_i-1],hasPrevData=prevData&&isValue(prevData.value),style=isWithinRegions(data.x,regions);if(isValue(data.value))
if(isUndefined(regions)||!style||!hasPrevData)
path+=""+
(_i&&hasPrevData?"L":"M")+
xValue(data)+","+
yValue(data);else if(hasPrevData){try{style=style.dasharray.split(" ");}catch(e){style=dasharray.split(" ");}
(xp=getScale(axisType.x,prevData.x+xOffset,data.x+xOffset)),(yp=getScale(axisType.y,prevData.value,data.value));var dx=x(data.x)-x(prevData.x),dy=y(data.value)-y(prevData.value),dd=Math.sqrt(Math.pow(dx,2)+Math.pow(dy,2));(diff=style[0]/dd),(diffx2=diff*style[1]);for(var _j=diff;_j<=1;_j+=diffx2)
(path+=sWithRegion(prevData,data,_j,diff)),_j+diffx2>=1&&(path+=sWithRegion(prevData,data,1,0));}}
return path;},isWithinStep:function isWithinStep(that,y){return(Math.abs(y-
(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.mouse)(that)[1])<30);},shouldDrawPointsForLine:function shouldDrawPointsForLine(d){var linePoint=this.config.line_point;return(linePoint===!0||(isArray(linePoint)&&linePoint.indexOf(d.id)!==-1));}};var getTransitionName=function(){return getRandom();};const point={hasValidPointType:function hasValidPointType(type){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(type||this.config.point_type);},hasValidPointDrawMethods:function hasValidPointDrawMethods(type){var pointType=type||this.config.point_type;return(isObjectType(pointType)&&isFunction(pointType.create)&&isFunction(pointType.update));},initialOpacityForCircle:function initialOpacityForCircle(d){var config=this.config,withoutFadeIn=this.state.withoutFadeIn,opacity=config.point_opacity;return(isUndefined(opacity)&&(opacity=this.getBaseValue(d)!==null&&withoutFadeIn[d.id]?this.opacityForCircle(d):"0"),opacity);},opacityForCircle:function opacityForCircle(d){var config=this.config,opacity=config.point_opacity;return(isUndefined(opacity)&&((opacity=config.point_show&&!config.point_focus_only?"1":"0"),(opacity=isValue(this.getBaseValue(d))?this.isBubbleType(d)||this.isScatterType(d)?"0.5":opacity:"0")),opacity);},initCircle:function initCircle(){var $$=this,main=$$.$el.main;($$.point=$$.generatePoint()),($$.hasType("bubble")||$$.hasType("scatter"))&&main.select("."+config_classes.chartCircles).empty()&&main.select("."+config_classes.chart).append("g").attr("class",config_classes.chartCircles);},updateTargetForCircle:function updateTargetForCircle(targetsValue,enterNodeValue){var _this=this,$$=this,config=$$.config,data=$$.data,$el=$$.$el,selectionEnabled=config.interaction_enabled&&config.data_selection_enabled,isSelectable=selectionEnabled&&config.data_selection_isselectable,classCircles=$$.classCircles.bind($$);if(config.point_show){$el.circle||$$.initCircle();var targets=targetsValue,enterNode=enterNodeValue;if(!targets){targets=data.targets.filter(function(d){return _this.isScatterType(d)||_this.isBubbleType(d);});var mainCircle=$el.main.select("."+config_classes.chartCircles).style("pointer-events","none").selectAll("."+config_classes.circles).data(targets).attr("class",classCircles);mainCircle.exit().remove(),(enterNode=mainCircle.enter());}
selectionEnabled&&enterNode.append("g").attr("class",function(d){return $$.generateClass(config_classes.selectedCircles,d.id);}),enterNode.append("g").attr("class",classCircles).style("cursor",function(d){return isSelectable&&isSelectable(d)?"pointer":null;}),selectionEnabled&&targets.forEach(function(t){$el.main.selectAll("."+
config_classes.selectedCircles+
$$.getTargetSelectorSuffix(t.id)).selectAll(""+config_classes.selectedCircle).each(function(d){d.value=t.values[d.index].value;});});}},updateCircle:function updateCircle(){var $$=this,config=$$.config,state=$$.state,$el=$$.$el,focusOnly=config.point_focus_only;if(config.point_show&&!state.toggling){var circles=$el.main.selectAll("."+config_classes.circles).selectAll("."+config_classes.circle).data(function(d){return($$.isLineType(d)&&$$.shouldDrawPointsForLine(d))||$$.isBubbleType(d)||$$.isRadarType(d)||$$.isScatterType(d)?focusOnly?[d.values[0]]:d.values:[];});circles.exit().remove(),circles.enter().filter(Boolean).append($$.point("create",this,$$.pointR.bind($$),$$.color)),($el.circle=$el.main.selectAll("."+config_classes.circles+" ."+config_classes.circle).style("stroke",$$.color).style("opacity",$$.initialOpacityForCircle.bind($$)));}},redrawCircle:function redrawCircle(cx,cy,withTransition,flow){var $$=this,rendered=$$.state.rendered,_$$$$el=$$.$el,circle=_$$$$el.circle,main=_$$$$el.main,selectedCircles=main.selectAll("."+config_classes.selectedCircle);if(!$$.config.point_show)return[];var fn=$$.point("update",$$,cx,cy,$$.color,withTransition,flow,selectedCircles),posAttr=$$.isCirclePoint()?"c":"",t=getRandom(),opacityStyleFn=$$.opacityForCircle.bind($$),mainCircles=[];return(circle.each(function(d){var result=fn.bind(this)(d);(result=(withTransition||!rendered?result.transition(t):result).style("opacity",opacityStyleFn)),mainCircles.push(result);}),[mainCircles,(withTransition?selectedCircles.transition():selectedCircles).attr(posAttr+"x",cx).attr(posAttr+"y",cy)]);},showCircleFocus:function showCircleFocus(d){var $$=this,config=$$.config,_$$$state=$$.state,hasRadar=_$$$state.hasRadar,resizing=_$$$state.resizing,toggling=_$$$state.toggling,transiting=_$$$state.transiting,$el=$$.$el,circle=$el.circle;if(transiting===!1&&config.point_focus_only&&circle){var cx=(hasRadar?$$.radarCircleX:$$.circleX).bind($$),cy=(hasRadar?$$.radarCircleY:$$.circleY).bind($$),withTransition=toggling||isUndefined(d),fn=$$.point("update",$$,cx,cy,$$.color,!resizing&&withTransition);d&&(circle=circle.filter(function(t){var data=d.filter(function(v){return v.id===t.id;});return(!!data.length&&(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this).datum(data[0]));})),circle.attr("class",this.updatePointClass.bind(this)).style("opacity","1").each(function(d){var id=d.id,index=d.index,value=d.value,visibility="hidden";isValue(value)&&(fn.bind(this)(d),$$.expandCircles(index,id),(visibility="")),(this.style.visibility=visibility);});}},hideCircleFocus:function hideCircleFocus(){var $$=this,config=$$.config,circle=$$.$el.circle;config.point_focus_only&&circle&&($$.unexpandCircles(),circle.style("visibility","hidden"));},circleX:function circleX(d){return this.xx(d);},updateCircleY:function updateCircleY(){var $$=this,getPoints=$$.generateGetLinePoints($$.getShapeIndices($$.isLineType),!1);$$.circleY=function(d,i){var id=d.id;return $$.isGrouped(id)?getPoints(d,i)[0][1]:$$.getYScaleById(id)($$.getBaseValue(d));};},getCircles:function getCircles(i,id){var $$=this,suffix=isValue(i)?"-"+i:"";return(id?$$.$el.main.selectAll("."+config_classes.circles+$$.getTargetSelectorSuffix(id)):$$.$el.main).selectAll("."+config_classes.circle+suffix);},expandCircles:function expandCircles(i,id,reset){var $$=this,r=$$.pointExpandedR.bind($$);reset&&$$.unexpandCircles();var circles=$$.getCircles(i,id).classed(config_classes.EXPANDED,!0),scale=r(circles)/$$.config.point_r,ratio=1-scale;$$.isCirclePoint()?circles.attr("r",r):circles.each(function(){var point=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this);if(this.tagName==="circle")point.attr("r",r);else{var _this$getBBox=this.getBBox(),width=_this$getBBox.width,height=_this$getBBox.height,x=ratio*(+point.attr("x")+width/2),y=ratio*(+point.attr("y")+height/2);point.attr("transform","translate("+x+" "+y+") scale("+scale+")");}});},unexpandCircles:function unexpandCircles(i){var $$=this,r=$$.pointR.bind($$),circles=$$.getCircles(i).filter(function(){return(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this).classed(config_classes.EXPANDED);}).classed(config_classes.EXPANDED,!1);circles.attr("r",r),$$.isCirclePoint()||circles.attr("transform","scale("+r(circles)/$$.config.point_r+")");},pointR:function(d){var $$=this,config=$$.config,pointR=config.point_r,r=pointR;return($$.isBubbleType(d)?(r=$$.getBubbleR(d)):isFunction(pointR)&&(r=pointR.bind($$.api)(d)),r);},pointExpandedR:function pointExpandedR(d){var $$=this,config=$$.config,scale=$$.isBubbleType(d)?1.15:1.75;return config.point_focus_expand_enabled?config.point_focus_expand_r||$$.pointR(d)*scale:$$.pointR(d);},pointSelectR:function pointSelectR(d){var $$=this,selectR=$$.config.point_select_r;return isFunction(selectR)?selectR(d):selectR||$$.pointR(d)*4;},isWithinCircle:function isWithinCircle(node,r){var mouse=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.mouse)(node),element=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(node),prefix=this.isCirclePoint(node)?"c":"",cx=+element.attr(prefix+"x"),cy=+element.attr(prefix+"y");if(!(cx||cy)&&node.nodeType===1){var _getBoundingRect=getBoundingRect(node),x=_getBoundingRect.x,y=_getBoundingRect.y;(cx=x),(cy=y);}
return(Math.sqrt(Math.pow(cx-mouse[0],2)+Math.pow(cy-mouse[1],2))<(r||this.config.point_sensitivity));},insertPointInfoDefs:function insertPointInfoDefs(point,id){var $$=this,copyAttr=function(from,target){for(var name,attribs=from.attributes,i=0;(name=attribs[i]);i++)
(name=name.name),target.setAttribute(name,from.getAttribute(name));},doc=new DOMParser().parseFromString(point,"image/svg+xml"),node=doc.documentElement,clone=browser_doc.createElementNS(external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.namespaces.svg,node.nodeName.toLowerCase());if(((clone.id=id),(clone.style.fill="inherit"),(clone.style.stroke="inherit"),copyAttr(node,clone),node.childNodes&&node.childNodes.length)){var parent=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(clone);"innerHTML"in clone?parent.html(node.innerHTML):toArray(node.childNodes).forEach(function(v){copyAttr(v,parent.append(v.tagName).node());});}
$$.$el.defs.node().appendChild(clone);},pointFromDefs:function pointFromDefs(id){return this.$el.defs.select("#"+id);},updatePointClass:function updatePointClass(d){var $$=this,circle=$$.$el.circle,pointClass=!1;return((isObject(d)||circle)&&(pointClass=d===!0?circle.each(function(d){var className=$$.classCircle.bind($$)(d);this.getAttribute("class").indexOf(config_classes.EXPANDED)>-1&&(className+=" "+config_classes.EXPANDED),this.setAttribute("class",className);}):$$.classCircle(d)),pointClass);},generateGetLinePoints:function generateGetLinePoints(lineIndices,isSub){var $$=this,config=$$.config,x=$$.getShapeX(0,lineIndices,isSub),y=$$.getShapeY(isSub),lineOffset=$$.getShapeOffset($$.isLineType,lineIndices,isSub),yScale=$$.getYScaleById.bind($$);return function(d,i){var y0=yScale.call($$,d.id,isSub)($$.getShapeYMin(d.id)),offset=lineOffset(d,i)||y0,posX=x(d),posY=y(d);config.axis_rotated&&((d.value>0&&posY<y0)||(d.value<0&&y0<posY))&&(posY=y0);var point=[posX,posY-(y0-offset)];return[point,point,point,point];};},generatePoint:function generatePoint(){var $$=this,config=$$.config,datetimeId=$$.state.datetimeId,ids=[],pattern=notEmpty(config.point_pattern)?config.point_pattern:[config.point_type];return function(method,context){for(var _len=arguments.length,args=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++)
args[_key-2]=arguments[_key];return function(d){var id=$$.getTargetSelectorSuffix(d.id||(d.data&&d.data.id)||d),element=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this);ids.indexOf(id)<0&&ids.push(id);var point=pattern[ids.indexOf(id)%pattern.length];if($$.hasValidPointType(point))point=$$[point];else if(!$$.hasValidPointDrawMethods(point)){var pointId=datetimeId+"-point"+id,pointFromDefs=$$.pointFromDefs(pointId);if((pointFromDefs.size()<1&&$$.insertPointInfoDefs(point,pointId),method==="create"))
return $$.custom.create.bind(context).apply(void 0,[element,pointId].concat(args));if(method==="update")
return $$.custom.update.bind(context).apply(void 0,[element].concat(args));}
return point[method].bind(context).apply(void 0,[element].concat(args));};};},custom:{create:function create(element,id,sizeFn,fillStyleFn){return element.append("use").attr("xlink:href","#"+id).attr("class",this.updatePointClass.bind(this)).style("fill",fillStyleFn).node();},update:function update(element,xPosFn,yPosFn,fillStyleFn,withTransition,flow,selectedCircles){var _element$node$getBBox=element.node().getBBox(),width=_element$node$getBBox.width,height=_element$node$getBBox.height,xPosFn2=function(d){return xPosFn(d)-width/2;},mainCircles=element;if(withTransition){var transitionName=getTransitionName();flow&&mainCircles.attr("x",xPosFn2),(mainCircles=mainCircles.transition(transitionName)),selectedCircles&&selectedCircles.transition(getTransitionName());}
return mainCircles.attr("x",xPosFn2).attr("y",function yPosFn2(d){return yPosFn(d)-height/2;}).style("fill",fillStyleFn);}},circle:{create:function create(element,sizeFn,fillStyleFn){return element.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",sizeFn).style("fill",fillStyleFn).node();},update:function update(element,xPosFn,yPosFn,fillStyleFn,withTransition,flow,selectedCircles){var $$=this,mainCircles=element;if(($$.hasType("bubble")&&mainCircles.attr("r",$$.pointR.bind($$)),withTransition)){var transitionName=getTransitionName();flow&&mainCircles.attr("cx",xPosFn),mainCircles.attr("cx")&&(mainCircles=mainCircles.transition(transitionName)),selectedCircles&&selectedCircles.transition(getTransitionName());}
return mainCircles.attr("cx",xPosFn).attr("cy",yPosFn).style("fill",fillStyleFn);}},rectangle:{create:function create(element,sizeFn,fillStyleFn){var rectSizeFn=function(d){return sizeFn(d)*2;};return element.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",rectSizeFn).attr("height",rectSizeFn).style("fill",fillStyleFn).node();},update:function update(element,xPosFn,yPosFn,fillStyleFn,withTransition,flow,selectedCircles){var $$=this,r=$$.config.point_r,rectXPosFn=function(d){return xPosFn(d)-r;},mainCircles=element;if(withTransition){var transitionName=getTransitionName();flow&&mainCircles.attr("x",rectXPosFn),(mainCircles=mainCircles.transition(transitionName)),selectedCircles&&selectedCircles.transition(getTransitionName());}
return mainCircles.attr("x",rectXPosFn).attr("y",function rectYPosFn(d){return yPosFn(d)-r;}).style("fill",fillStyleFn);}}};function getPosition(isClockwise,type,edge,pos,range,ratio){var index=isClockwise&&pos>0?edge-pos:pos,r=2*Math.PI,func=type==="x"?Math.sin:Math.cos;return range*(1-ratio*func(index*r/edge));}
var cacheKey=KEY.radarPoints;const radar={initRadar:function initRadar(){var $$=this,config=$$.config,current=$$.state.current,$el=$$.$el;$$.hasType("radar")&&(($el.radar=$el.main.select("."+config_classes.chart).append("g").attr("class",config_classes.chartRadars)),($el.radar.levels=$el.radar.append("g").attr("class",config_classes.levels)),($el.radar.axes=$el.radar.append("g").attr("class",config_classes.axis)),($el.radar.shapes=$el.radar.append("g").attr("class",config_classes.shapes)),(current.dataMax=config.radar_axis_max||$$.getMinMaxData().max[0].value));},getRadarSize:function getRadarSize(){var $$=this,config=$$.config,_$$$state=$$.state,arcWidth=_$$$state.arcWidth,arcHeight=_$$$state.arcHeight,padding=config.axis_x_categories.length<4?-20:10,size=(Math.min(arcWidth,arcHeight)-padding)/2;return[size,size];},updateTargetsForRadar:function updateTargetsForRadar(targets){var $$=this,config=$$.config;isEmpty(config.axis_x_categories)&&(config.axis_x_categories=getRange(0,getMinMax("max",targets.map(function(v){return v.values.length;})))),$$.generateRadarPoints();},getRadarPosition:function getRadarPosition(type,index,range,ratio){var $$=this,config=$$.config,_$$$getRadarSize=$$.getRadarSize(),width=_$$$getRadarSize[0],height=_$$$getRadarSize[1],edge=config.axis_x_categories.length,isClockwise=config.radar_direction_clockwise,pos=toArray(type).map(function(v){return getPosition(isClockwise,v,edge,index,isDefined(range)?range:type==="x"?width:height,isNumber(ratio)?ratio:config.radar_size_ratio);});return pos.length===1?pos[0]:pos;},generateRadarPoints:function generateRadarPoints(){var $$=this,targets=$$.data.targets,_$$$getRadarSize2=$$.getRadarSize(),width=_$$$getRadarSize2[0],height=_$$$getRadarSize2[1],points=$$.cache.get(cacheKey)||{},size=points._size;(size&&(size.width===width||size.height===height))||(targets.forEach(function(d){points[d.id]=d.values.map(function(v,i){return $$.getRadarPosition(["x","y"],i,undefined,$$.getRatio("radar",v));});}),(points._size={width:width,height:height}),$$.cache.add(cacheKey,points));},redrawRadar:function redrawRadar(durationForExit){var $$=this,_$$$$el=$$.$el,radar=_$$$$el.radar,main=_$$$$el.main,translate=$$.getTranslate("radar");translate&&(radar.attr("transform",translate),main.select("."+config_classes.chartTexts).attr("transform",translate),$$.generateRadarPoints(),$$.updateRadarLevel(),$$.updateRadarAxes(),$$.updateRadarShape(durationForExit));},generateGetRadarPoints:function generateGetRadarPoints(){var points=this.cache.get(cacheKey);return function(d,i){var point=points[d.id][i];return[point,point,point,point];};},updateRadarLevel:function updateRadarLevel(){var $$=this,config=$$.config,state=$$.state,radar=$$.$el.radar,_$$$getRadarSize3=$$.getRadarSize(),width=_$$$getRadarSize3[0],height=_$$$getRadarSize3[1],depth=config.radar_level_depth,edge=config.axis_x_categories.length,showText=config.radar_level_text_show,radarLevels=radar.levels,levelData=getRange(0,depth),radius=config.radar_size_ratio*Math.min(width,height),levelRatio=levelData.map(function(l){return radius*((l+1)/depth);}),levelTextFormat=(config.radar_level_text_format||function(){}).bind($$.api),points=levelData.map(function(v){var range=levelRatio[v],pos=getRange(0,edge).map(function(i){return $$.getRadarPosition(["x","y"],i,range,1).join(",");});return pos.join(" ");}),level=radarLevels.selectAll("."+config_classes.level).data(levelData);level.exit().remove();var levelEnter=level.enter().append("g").attr("class",function(d,i){return(config_classes.level+" "+config_classes.level+"-"+i);});levelEnter.append("polygon").style("visibility",config.radar_level_show?null:"hidden"),showText&&(radarLevels.select("text").empty()&&radarLevels.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(function(){return levelTextFormat(0);}),levelEnter.append("text").attr("dx","-.5em").style("text-anchor","end").text(function(d){return levelTextFormat(state.current.dataMax/levelData.length*(d+1));})),levelEnter.merge(level).attr("transform",function(d){return("translate("+
(width-levelRatio[d])+", "+
(height-levelRatio[d])+")");}).selectAll("polygon").attr("points",function(d){return points[d];}),showText&&radarLevels.selectAll("text").attr("x",function(d){return isUndefined(d)?width:points[d].split(",")[0];}).attr("y",function(d){return isUndefined(d)?height:0;});},updateRadarAxes:function updateRadarAxes(){var $$=this,config=$$.config,radar=$$.$el.radar,_$$$getRadarSize4=$$.getRadarSize(),width=_$$$getRadarSize4[0],height=_$$$getRadarSize4[1],categories=config.axis_x_categories,axis=radar.axes.selectAll("g").data(categories);axis.exit().remove();var axisEnter=axis.enter().append("g").attr("class",function(d,i){return config_classes.axis+"-"+i;});if((config.radar_axis_line_show&&axisEnter.append("line"),config.radar_axis_text_show&&axisEnter.append("text"),(axis=axisEnter.merge(axis)),config.radar_axis_line_show&&axis.select("line").attr("x1",width).attr("y1",height).attr("x2",function(d,i){return $$.getRadarPosition("x",i);}).attr("y2",function(d,i){return $$.getRadarPosition("y",i);}),config.radar_axis_text_show)){var _config$radar_axis_te=config.radar_axis_text_position,_config$radar_axis_te2=_config$radar_axis_te.x,x=_config$radar_axis_te2===void 0?0:_config$radar_axis_te2,_config$radar_axis_te3=_config$radar_axis_te.y,y=_config$radar_axis_te3===void 0?0:_config$radar_axis_te3;axis.select("text").style("text-anchor","middle").attr("dy",".5em").call(function(selection){selection.each(function(d){setTextValue((0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this),d+"",[-0.6,1.2]);});}).datum(function(d,i){return{index:i};}).attr("transform",function(d){isUndefined(this.width)&&(this.width=this.getBoundingClientRect().width/2);var posX=$$.getRadarPosition("x",d.index,undefined,1),posY=Math.round($$.getRadarPosition("y",d.index,undefined,1));return(posX>width?(posX+=this.width+x):Math.round(posX)<width&&(posX-=this.width+x),posY>height?(posY/2===height&&this.firstChild.tagName==="tspan"&&this.firstChild.setAttribute("dy","0em"),(posY+=y)):posY<height&&(posY-=y),"translate("+posX+" "+posY+")");});}
$$.bindEvent();},bindEvent:function bindEvent(){var $$=this,config=$$.config,_$$$state2=$$.state,inputType=_$$$state2.inputType,transiting=_$$$state2.transiting,_$$$$el2=$$.$el,radar=_$$$$el2.radar,svg=_$$$$el2.svg,focusOnly=config.point_focus_only;if(config.interaction_enabled){var isMouse=inputType==="mouse",getIndex=function(){var target=external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event.target;/tspan/i.test(target.tagName)&&(target=target.parentNode);var d=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(target).datum();return d&&Object.keys(d).length===1?d.index:undefined;},hide=function(){var index=getIndex(),noIndex=isUndefined(index);(isMouse||noIndex)&&($$.hideTooltip(),focusOnly?$$.hideCircleFocus():$$.unexpandCircles(),isMouse?$$.setOverOut(!1,index):noIndex&&$$.callOverOutForTouch());};radar.axes.selectAll("text").on(isMouse?"mouseover ":"touchstart",function(){if(!transiting){var index=getIndex();$$.selectRectForSingle(svg.node(),null,index),isMouse?$$.setOverOut(!0,index):$$.callOverOutForTouch(index);}}).on("mouseout",isMouse?hide:null),isMouse||svg.on("touchstart",hide);}},updateRadarShape:function updateRadarShape(durationForExit){var $$=this,targets=$$.data.targets.filter(function(d){return $$.isRadarType(d);}),points=$$.cache.get(cacheKey),areas=$$.$el.radar.shapes.selectAll("polygon").data(targets),areasEnter=areas.enter().append("g").attr("class",$$.classChartRadar.bind($$));areas.exit().transition().duration(durationForExit).remove(),areasEnter.append("polygon").merge(areas).style("fill",$$.color).style("stroke",$$.color).attr("points",function(d){return points[d.id].join(" ");}),$$.updateTargetForCircle(targets,areasEnter);},radarCircleX:function radarCircleX(d){return this.cache.get(cacheKey)[d.id][d.index][0];},radarCircleY:function radarCircleY(d){return this.cache.get(cacheKey)[d.id][d.index][1];}};const common_point={point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:undefined,point_focus_only:!1,point_opacity:undefined,point_pattern:[],point_select_r:undefined,point_type:"circle"};const Options_shape_area={area_above:!1,area_front:!0,area_linearGradient:!1,area_zerobased:!0};const shape_bar={bar_label_threshold:0,bar_padding:0,bar_radius:undefined,bar_radius_ratio:undefined,bar_sensitivity:2,bar_width:undefined,bar_width_ratio:0.6,bar_width_max:undefined,bar_zerobased:!0};const shape_bubble={bubble_maxR:35,bubble_zerobased:!1};const shape_line={line_connectNull:!1,line_step_type:"step",line_zerobased:!1,line_classes:undefined,line_point:!0};const scatter={scatter_zerobased:!1};const spline={spline_interpolation_type:"cardinal"};const donut={donut_label_show:!0,donut_label_format:undefined,donut_label_threshold:0.05,donut_label_ratio:undefined,donut_width:undefined,donut_title:"",donut_expand:{},donut_expand_rate:0.98,donut_expand_duration:50,donut_padAngle:0,donut_startingAngle:0};const shape_gauge={gauge_background:"",gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:undefined,gauge_label_extents:undefined,gauge_label_threshold:0,gauge_min:0,gauge_max:100,gauge_type:"single",gauge_startingAngle:-1*Math.PI/2,gauge_arcLength:100,gauge_title:"",gauge_units:undefined,gauge_width:undefined,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_rate:0.98,gauge_expand_duration:50};const pie={pie_label_show:!0,pie_label_format:undefined,pie_label_threshold:0.05,pie_label_ratio:undefined,pie_expand:{},pie_expand_rate:0.98,pie_expand_duration:50,pie_innerRadius:0,pie_outerRadius:undefined,pie_padAngle:0,pie_padding:0,pie_startingAngle:0};const shape_radar={radar_axis_max:undefined,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function radar_level_text_format(x){return x%1===0?x:x.toFixed(2);},radar_level_text_show:!0,radar_size_ratio:0.87,radar_direction_clockwise:!1};function extendAxis(module,option){extend(ChartInternal.prototype,internal.concat(module)),extend(Chart.prototype,api),Options.setOptions(options.concat(option||[]));}
function extendLine(module,option){extendAxis([point,line].concat(module||[])),Options.setOptions([common_point,shape_line].concat(option||[]));}
function extendArc(module,option){extend(ChartInternal.prototype,[arc].concat(module||[])),Options.setOptions(option);}
var _area=function area(){return(extendLine(shape_area,[Options_shape_area]),(_area=function area(){return TYPE.AREA;})());},areaLineRange=function(){return(extendLine(shape_area,[Options_shape_area]),(areaLineRange=function(){return TYPE.AREA_LINE_RANGE;})());},areaSpline=function(){return(extendLine(shape_area,[Options_shape_area,spline]),(areaSpline=function(){return TYPE.AREA_SPLINE;})());},areaSplineRange=function(){return(extendLine(shape_area,[Options_shape_area,spline]),(areaSplineRange=function(){return TYPE.AREA_SPLINE_RANGE;})());},areaStep=function(){return(extendLine(shape_area,[Options_shape_area]),(areaStep=function(){return TYPE.AREA_STEP;})());},resolver_shape_line=function(){return(extendLine(),(resolver_shape_line=function(){return TYPE.LINE;})());},shape_spline=function(){return(extendLine(undefined,[spline]),(shape_spline=function(){return TYPE.SPLINE;})());},step=function(){return(extendLine(),(step=function(){return TYPE.STEP;})());},shape_donut=function(){return(extendArc(undefined,[donut]),(shape_donut=function(){return TYPE.DONUT;})());},resolver_shape_gauge=function(){return(extendArc([gauge],[shape_gauge]),(resolver_shape_gauge=function(){return TYPE.GAUGE;})());},shape_pie=function(){return(extendArc(undefined,[pie]),(shape_pie=function(){return TYPE.PIE;})());},resolver_shape_radar=function(){return(extendArc([point,radar],[common_point,shape_radar]),(resolver_shape_radar=function(){return TYPE.RADAR;})());},resolver_shape_bar=function(){return(extendAxis([bar],shape_bar),(resolver_shape_bar=function(){return TYPE.BAR;})());},resolver_shape_bubble=function(){return(extendAxis([point,bubble],[shape_bubble,common_point]),(resolver_shape_bubble=function(){return TYPE.BUBBLE;})());},shape_scatter=function(){return(extendAxis([point],[common_point,scatter]),(shape_scatter=function(){return TYPE.SCATTER;})());};const selection={selected:function selected(targetId){var $$=this.internal,dataPoint=[];return($$.$el.main.selectAll("."+
(config_classes.shapes+
$$.getTargetSelectorSuffix(targetId))).selectAll("."+config_classes.shape).filter(function(){return(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this).classed(config_classes.SELECTED);}).each(function(d){return dataPoint.push(d);}),dataPoint);},select:function select(ids,indices,resetOther){var $$=this.internal,config=$$.config,$el=$$.$el;config.data_selection_enabled&&$el.main.selectAll("."+config_classes.shapes).selectAll("."+config_classes.shape).each(function(d,i){var shape=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this),id=d.data?d.data.id:d.id,toggle=$$.getToggle(this,d).bind($$),isTargetId=config.data_selection_grouped||!ids||ids.indexOf(id)>=0,isTargetIndex=!indices||indices.indexOf(i)>=0,isSelected=shape.classed(config_classes.SELECTED);shape.classed(config_classes.line)||shape.classed(config_classes.area)||(isTargetId&&isTargetIndex?config.data_selection_isselectable.bind($$.api)(d)&&!isSelected&&toggle(!0,shape.classed(config_classes.SELECTED,!0),d,i):isDefined(resetOther)&&resetOther&&isSelected&&toggle(!1,shape.classed(config_classes.SELECTED,!1),d,i));});},unselect:function unselect(ids,indices){var $$=this.internal,config=$$.config,$el=$$.$el;config.data_selection_enabled&&$el.main.selectAll("."+config_classes.shapes).selectAll("."+config_classes.shape).each(function(d,i){var shape=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this),id=d.data?d.data.id:d.id,toggle=$$.getToggle(this,d).bind($$),isTargetId=config.data_selection_grouped||!ids||ids.indexOf(id)>=0,isTargetIndex=!indices||indices.indexOf(i)>=0,isSelected=shape.classed(config_classes.SELECTED);shape.classed(config_classes.line)||shape.classed(config_classes.area)||(isTargetId&&isTargetIndex&&config.data_selection_isselectable.bind($$.api)(d)&&isSelected&&toggle(!1,shape.classed(config_classes.SELECTED,!1),d,i));});}};var external_commonjs_d3_zoom_commonjs2_d3_zoom_amd_d3_zoom_root_d3_=__webpack_require__(14);function withinRange(domain,range){var min=range[0],max=range[1];return domain.every(function(v,i){return i===0?v>=min:v<=max;});}
var zoom=function(domainValue){var resultDomain,$$=this.internal,config=$$.config,scale=$$.scale,domain=domainValue;if(!(config.zoom_enabled&&domain))
resultDomain=scale.zoom?scale.zoom.domain():scale.x.orgDomain();else if(($$.axis.isTimeSeries()&&(domain=domain.map(function(x){return parseDate.bind($$)(x);})),withinRange(domain,$$.getZoomDomain()))){if(($$.api.tooltip.hide(),config.subchart_show)){var xScale=scale.zoom||scale.x;$$.brush.getSelection().call($$.brush.move,[xScale(domain[0]),xScale(domain[1])]),(resultDomain=domain);}else
scale.x.domain(domain),(scale.zoom=scale.x),$$.axis.x.scale(scale.zoom),(resultDomain=scale.zoom.orgDomain());$$.redraw({withTransition:!0,withY:config.zoom_rescale,withDimension:!1}),$$.setZoomResetButton(),callFn(config.zoom_onzoom,$$.api,resultDomain);}
return resultDomain;};extend(zoom,{enable:function enable(enabled){var $$=this.internal,config=$$.config;/^(drag|wheel)$/.test(enabled)&&(config.zoom_type=enabled),(config.zoom_enabled=!!enabled),$$.zoom?enabled===!1&&$$.bindZoomEvent(!1):($$.initZoom(),$$.bindZoomEvent()),$$.updateAndRedraw();},max:function max(_max){var $$=this.internal,config=$$.config,xDomain=$$.org.xDomain;return((_max===0||_max)&&(config.zoom_x_max=getMinMax("max",[xDomain[1],_max])),config.zoom_x_max);},min:function min(_min){var $$=this.internal,config=$$.config,xDomain=$$.org.xDomain;return((_min===0||_min)&&(config.zoom_x_min=getMinMax("min",[xDomain[0],_min])),config.zoom_x_min);},range:function range(_range){var zoom=this.zoom;if(isObject(_range)){var min=_range.min,max=_range.max;isDefined(min)&&zoom.min(min),isDefined(max)&&zoom.max(max);}
return{min:zoom.min(),max:zoom.max()};}});const api_zoom={zoom:zoom,unzoom:function unzoom(){var $$=this.internal,config=$$.config;if($$.scale.zoom){config.subchart_show?$$.brush.getSelection().call($$.brush.move,null):$$.zoom.updateTransformScale(external_commonjs_d3_zoom_commonjs2_d3_zoom_amd_d3_zoom_root_d3_.zoomIdentity),$$.updateZoom(!0),$$.zoom.resetBtn&&$$.zoom.resetBtn.style("display","none");var eventRects=$$.$el.main.select("."+config_classes.eventRects);(0,external_commonjs_d3_zoom_commonjs2_d3_zoom_amd_d3_zoom_root_d3_.zoomTransform)(eventRects.node())!==external_commonjs_d3_zoom_commonjs2_d3_zoom_amd_d3_zoom_root_d3_.zoomIdentity&&$$.zoom.transform(eventRects,external_commonjs_d3_zoom_commonjs2_d3_zoom_amd_d3_zoom_root_d3_.zoomIdentity),$$.redraw({withTransition:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withY:config.zoom_rescale});}}};var external_commonjs_d3_color_commonjs2_d3_color_amd_d3_color_root_d3_=__webpack_require__(13);const drag={drag:function drag(mouse){var $$=this,config=$$.config,state=$$.state,main=$$.$el.main,isSelectionGrouped=config.data_selection_grouped,isSelectable=config.interaction_enabled&&config.data_selection_isselectable;if(!$$.hasArcType()&&config.data_selection_enabled&&(!config.zoom_enabled||$$.zoom.altDomain)&&config.data_selection_multiple){var _ref=state.dragStart||[0,0],sx=_ref[0],sy=_ref[1],mx=mouse[0],my=mouse[1],minX=Math.min(sx,mx),maxX=Math.max(sx,mx),minY=isSelectionGrouped?state.margin.top:Math.min(sy,my),maxY=isSelectionGrouped?state.height:Math.max(sy,my);main.select("."+config_classes.dragarea).attr("x",minX).attr("y",minY).attr("width",maxX-minX).attr("height",maxY-minY),main.selectAll("."+config_classes.shapes).selectAll("."+config_classes.shape).filter(function(d){return isSelectable&&isSelectable.bind($$.api)(d);}).each(function(d,i){var toggle,shape=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this),isSelected=shape.classed(config_classes.SELECTED),isIncluded=shape.classed(config_classes.INCLUDED),isWithin=!1;if(shape.classed(config_classes.circle)){var x=+shape.attr("cx")*1,y=+shape.attr("cy")*1;(toggle=$$.togglePoint),(isWithin=minX<x&&x<maxX&&minY<y&&y<maxY);}else if(shape.classed(config_classes.bar)){var _getPathBox=getPathBox(this),_x=_getPathBox.x,y=_getPathBox.y,width=_getPathBox.width,height=_getPathBox.height;(toggle=$$.togglePath),(isWithin=!(maxX<_x||_x+width<minX)&&!(maxY<y||y+height<minY));}
else return;isWithin^isIncluded&&(shape.classed(config_classes.INCLUDED,!isIncluded),shape.classed(config_classes.SELECTED,!isSelected),toggle.call($$,!isSelected,shape,d,i));});}},dragstart:function dragstart(mouse){var $$=this,config=$$.config,state=$$.state,main=$$.$el.main;$$.hasArcType()||!config.data_selection_enabled||((state.dragStart=mouse),main.select("."+config_classes.chart).append("rect").attr("class",config_classes.dragarea).style("opacity","0.1"),$$.setDragStatus(!0));},dragend:function dragend(){var $$=this,config=$$.config,main=$$.$el.main;$$.hasArcType()||!config.data_selection_enabled||(main.select("."+config_classes.dragarea).transition().duration(100).style("opacity","0").remove(),main.selectAll("."+config_classes.shape).classed(config_classes.INCLUDED,!1),$$.setDragStatus(!1));}};function selection_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}
return keys;}
function selection_objectSpread(target){for(var source,i=1;i<arguments.length;i++)
(source=arguments[i]==null?{}:arguments[i]),i%2?selection_ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):selection_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});return target;}
const internals_selection=selection_objectSpread(selection_objectSpread({},drag),{},{selectPoint:function selectPoint(target,d,i){var $$=this,config=$$.config,main=$$.$el.main,isRotated=config.axis_rotated,cx=(isRotated?$$.circleY:$$.circleX).bind($$),cy=(isRotated?$$.circleX:$$.circleY).bind($$),r=$$.pointSelectR.bind($$);callFn(config.data_onselected,$$.api,d,target.node()),main.select("."+
config_classes.selectedCircles+
$$.getTargetSelectorSuffix(d.id)).selectAll("."+config_classes.selectedCircle+"-"+i).data([d]).enter().append("circle").attr("class",function(){return $$.generateClass(config_classes.selectedCircle,i);}).attr("cx",cx).attr("cy",cy).attr("stroke",$$.color).attr("r",function(d2){return $$.pointSelectR(d2)*1.4;}).transition().duration(100).attr("r",r);},unselectPoint:function unselectPoint(target,d,i){var $$=this,config=$$.config,$el=$$.$el;callFn(config.data_onunselected,$$.api,d,target.node()),$el.main.select("."+
config_classes.selectedCircles+
$$.getTargetSelectorSuffix(d.id)).selectAll("."+config_classes.selectedCircle+"-"+i).transition().duration(100).attr("r",0).remove();},togglePoint:function togglePoint(selected,target,d,i){var method=(selected?"":"un")+"selectPoint";this[method](target,d,i);},selectPath:function selectPath(target,d){var $$=this,config=$$.config;callFn(config.data_onselected,$$.api,d,target.node()),config.interaction_brighten&&target.transition().duration(100).style("fill",function(){return(0,external_commonjs_d3_color_commonjs2_d3_color_amd_d3_color_root_d3_.rgb)($$.color(d)).brighter(0.75);});},unselectPath:function unselectPath(target,d){var $$=this,config=$$.config;callFn(config.data_onunselected,$$.api,d,target.node()),config.interaction_brighten&&target.transition().duration(100).style("fill",function(){return $$.color(d);});},togglePath:function togglePath(selected,target,d,i){this[(selected?"":"un")+"selectPath"](target,d,i);},getToggle:function getToggle(that,d){var $$=this;return that.nodeName==="path"?$$.togglePath:$$.isStepType(d)?function(){}:$$.togglePoint;},toggleShape:function toggleShape(that,d,i){var toggledShape,$$=this,config=$$.config,main=$$.$el.main,shape=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(that),isSelected=shape.classed(config_classes.SELECTED),toggle=$$.getToggle(that,d).bind($$);if(config.data_selection_enabled&&config.data_selection_isselectable.bind($$.api)(d)){if(!config.data_selection_multiple){var selector="."+config_classes.shapes;config.data_selection_grouped&&(selector+=$$.getTargetSelectorSuffix(d.id)),main.selectAll(selector).selectAll("."+config_classes.shape).each(function(d,i){var shape=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this);shape.classed(config_classes.SELECTED)&&((toggledShape=shape),toggle(!1,shape.classed(config_classes.SELECTED,!1),d,i));});}
(toggledShape&&toggledShape.node()===shape.node())||(shape.classed(config_classes.SELECTED,!isSelected),toggle(!isSelected,shape,d,i));}}});const subchart={initBrush:function initBrush(){var $$=this,config=$$.config,scale=$$.scale,subchart=$$.$el.subchart,isRotated=config.axis_rotated;$$.brush=isRotated?(0,external_commonjs_d3_brush_commonjs2_d3_brush_amd_d3_brush_root_d3_.brushY)():(0,external_commonjs_d3_brush_commonjs2_d3_brush_amd_d3_brush_root_d3_.brushX)();var lastDomain,timeout,brushHandler=function(){$$.redrawForBrush();},getBrushSize=function(){var brush=$$.$el.svg.select("."+config_classes.brush+" .overlay"),brushSize={width:0,height:0};return(brush.size()&&((brushSize.width=+brush.attr("width")),(brushSize.height=+brush.attr("height"))),brushSize[isRotated?"width":"height"]);};$$.brush.on("start",function(){$$.state.inputType==="touch"&&$$.hideTooltip(),brushHandler();}).on("brush",brushHandler).on("end",function(){lastDomain=scale.x.orgDomain();}),($$.brush.updateResize=function(){var _this=this;timeout&&clearTimeout(timeout),(timeout=setTimeout(function(){var selection=_this.getSelection();lastDomain&&(0,external_commonjs_d3_brush_commonjs2_d3_brush_amd_d3_brush_root_d3_.brushSelection)(selection.node())&&_this.move(selection,lastDomain.map(scale.subX.orgScale()));},0));}),($$.brush.update=function(){var extent=this.extent()();return(extent[1].filter(function(v){return isNaN(v);}).length===0&&subchart.main&&subchart.main.select("."+config_classes.brush).call(this),this);}),($$.brush.scale=function(scale){var h=config.subchart_size_height||getBrushSize(),extent=$$.getExtent();!extent&&scale.range?(extent=[[0,0],[scale.range()[1],h]]):isArray(extent)&&(extent=extent.map(function(v,i){return[v,i>0?h:i];})),isRotated&&extent[1].reverse(),this.extent(extent),this.update();}),($$.brush.getSelection=function(){return(subchart.main?subchart.main.select("."+config_classes.brush):(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)([]));});},initSubchart:function initSubchart(){var $$=this,config=$$.config,_$$$state=$$.state,clip=_$$$state.clip,hasAxis=_$$$state.hasAxis,_$$$$el=$$.$el,defs=_$$$$el.defs,svg=_$$$$el.svg,subchart=_$$$$el.subchart,axis=_$$$$el.axis;if(hasAxis){var visibility=config.subchart_show?"visible":"hidden",clipId=clip.id+"-subchart",clipPath=$$.getClipPath(clipId);(clip.idSubchart=clipId),$$.appendClip(defs,clipId),$$.initBrush(),(subchart.main=svg.append("g").classed(config_classes.subchart,!0).attr("transform",$$.getTranslate("context")));var main=subchart.main;main.style("visibility",visibility),main.append("g").attr("clip-path",clipPath).attr("class",config_classes.chart),$$.hasType("bar")&&main.select("."+config_classes.chart).append("g").attr("class",config_classes.chartBars),main.select("."+config_classes.chart).append("g").attr("class",config_classes.chartLines),main.append("g").attr("clip-path",clipPath).attr("class",config_classes.brush).call($$.brush),(axis.subX=main.append("g").attr("class",config_classes.axisX).attr("transform",$$.getTranslate("subX")).attr("clip-path",config.axis_rotated?"":clip.pathXAxis).style("visibility",config.subchart_axis_x_show?visibility:"hidden"));}},updateTargetsForSubchart:function updateTargetsForSubchart(targets){var $$=this,config=$$.config,state=$$.state,main=$$.$el.subchart.main,classChartBar=$$.classChartBar.bind($$),classBars=$$.classBars.bind($$),classChartLine=$$.classChartLine.bind($$),classLines=$$.classLines.bind($$),classAreas=$$.classAreas.bind($$);if(config.subchart_show){var barUpdate=main.select("."+config_classes.chartBars).selectAll("."+config_classes.chartBar).data(targets).attr("class",classChartBar),barEnter=barUpdate.enter().append("g").style("opacity","0").attr("class",classChartBar).merge(barUpdate);barEnter.append("g").attr("class",classBars);var lineUpdate=main.select("."+config_classes.chartLines).selectAll("."+config_classes.chartLine).data(targets).attr("class",classChartLine),lineEnter=lineUpdate.enter().append("g").style("opacity","0").attr("class",classChartLine).merge(lineUpdate);lineEnter.append("g").attr("class",classLines),$$.hasTypeOf("Area")&&lineEnter.append("g").attr("class",classAreas),main.selectAll("."+config_classes.brush+" rect").attr(config.axis_rotated?"width":"height",config.axis_rotated?state.width2:state.height2);}},updateBarForSubchart:function updateBarForSubchart(durationForExit){var $$=this,subchart=$$.$el.subchart;(subchart.bar=subchart.main.selectAll("."+config_classes.bars).selectAll("."+config_classes.bar).data($$.barData.bind($$))),subchart.bar.exit().transition().duration(durationForExit).style("opacity","0").remove(),(subchart.bar=subchart.bar.enter().append("path").attr("class",$$.classBar.bind($$)).style("stroke","none").style("fill",$$.color).merge(subchart.bar).style("opacity",$$.initialOpacity.bind($$)));},redrawBarForSubchart:function redrawBarForSubchart(drawBarOnSub,withTransition,duration){var bar=this.$el.subchart.bar;(withTransition?bar.transition(getRandom()).duration(duration):bar).attr("d",drawBarOnSub).style("opacity","1");},updateLineForSubchart:function updateLineForSubchart(durationForExit){var $$=this,subchart=$$.$el.subchart;(subchart.line=subchart.main.selectAll("."+config_classes.lines).selectAll("."+config_classes.line).data($$.lineData.bind($$))),subchart.line.exit().transition().duration(durationForExit).style("opacity","0").remove(),(subchart.line=subchart.line.enter().append("path").attr("class",$$.classLine.bind($$)).style("stroke",$$.color).merge(subchart.line).style("opacity",$$.initialOpacity.bind($$)));},redrawLineForSubchart:function redrawLineForSubchart(drawLineOnSub,withTransition,duration){var line=this.$el.subchart.line;(withTransition?line.transition(getRandom()).duration(duration):line).attr("d",drawLineOnSub).style("opacity","1");},updateAreaForSubchart:function updateAreaForSubchart(durationForExit){var $$=this,subchart=$$.$el.subchart;(subchart.area=subchart.main.selectAll("."+config_classes.areas).selectAll("."+config_classes.area).data($$.lineData.bind($$))),subchart.area.exit().transition().duration(durationForExit).style("opacity","0").remove(),(subchart.area=subchart.area.enter().append("path").attr("class",$$.classArea.bind($$)).style("fill",$$.color).style("opacity",function(){return(($$.state.orgAreaOpacity=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(this).style("opacity")),"0");}).merge(subchart.area).style("opacity","0"));},redrawAreaForSubchart:function redrawAreaForSubchart(drawAreaOnSub,withTransition,duration){var area=this.$el.subchart.area;(withTransition?area.transition(getRandom()).duration(duration):area).attr("d",drawAreaOnSub).style("fill",this.color).style("opacity",this.state.orgAreaOpacity);},redrawSubchart:function redrawSubchart(withSubchart,duration,shape){var $$=this,config=$$.config,main=$$.$el.subchart.main;main.style("visibility",config.subchart_show?"visible":"hidden"),config.subchart_show&&(external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event&&external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event.type==="zoom"&&$$.brush.update(),withSubchart&&(!brushEmpty($$)&&$$.brush.update(),Object.keys(shape.type).forEach(function(v){var name=capitalize(v),draw=$$["generateDraw"+name](shape.indices[v],!0);$$["update"+name+"ForSubchart"](duration),$$["redraw"+name+"ForSubchart"](draw,duration,duration);})));},redrawForBrush:function redrawForBrush(){var $$=this,_$$$config=$$.config,onBrush=_$$$config.subchart_onbrush,withY=_$$$config.zoom_rescale,scale=$$.scale;$$.redraw({withTransition:!1,withY:withY,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),onBrush.bind($$.api)(scale.x.orgDomain());},transformContext:function transformContext(withTransition,transitions){var subXAxis,$$=this,main=$$.$el.subchart.main;transitions&&transitions.axisSubX?(subXAxis=transitions.axisSubX):((subXAxis=main.select("."+config_classes.axisX)),withTransition&&(subXAxis=subXAxis.transition())),main.attr("transform",$$.getTranslate("context")),subXAxis.attr("transform",$$.getTranslate("subX"));},getExtent:function getExtent(){var $$=this,config=$$.config,scale=$$.scale,extent=config.axis_x_extent;if(extent)
if(isFunction(extent))
extent=extent.bind($$.api)($$.getXDomain($$.data.targets),scale.subX);else if($$.axis.isTimeSeries()&&extent.every(isNaN)){var fn=parseDate.bind($$);extent=extent.map(function(v){return scale.subX(fn(v));});}
return extent;}};const interactions_zoom={initZoom:function initZoom(){var $$=this;($$.scale.zoom=null),$$.generateZoom(),$$.initZoomBehaviour();},bindZoomEvent:function bindZoomEvent(bind){bind===void 0&&(bind=!0);var $$=this,config=$$.config,main=$$.$el.main,zoomEnabled=config.zoom_enabled,eventRects=main.select("."+config_classes.eventRects);zoomEnabled&&bind?!config.subchart_show&&$$.bindZoomOnEventRect(eventRects,config.zoom_type):bind===!1&&($$.api.unzoom(),eventRects.on(".zoom",null).on(".drag",null));},generateZoom:function generateZoom(){var $$=this,config=$$.config,org=$$.org,scale=$$.scale,zoom=(0,external_commonjs_d3_zoom_commonjs2_d3_zoom_amd_d3_zoom_root_d3_.zoom)().duration(0).on("start",$$.onZoomStart.bind($$)).on("zoom",$$.onZoom.bind($$)).on("end",$$.onZoomEnd.bind($$));(zoom.orgScaleExtent=function(){var extent=config.zoom_extent||[1,10];return[extent[0],Math.max($$.getMaxDataCount()/extent[1],extent[1])];}),(zoom.updateScaleExtent=function(){var ratio=diffDomain($$.scale.x.orgDomain())/diffDomain($$.getZoomDomain()),extent=this.orgScaleExtent();return(this.scaleExtent([extent[0]*ratio,extent[1]*ratio]),this);}),(zoom.updateTransformScale=function(transform){org.xScale&&org.xScale.range(scale.x.range());var newScale=transform[config.axis_rotated?"rescaleY":"rescaleX"](org.xScale||scale.x),domain=$$.trimXDomain(newScale.domain()),rescale=config.zoom_rescale;newScale.domain(domain,org.xDomain),(scale.zoom=$$.getCustomizedScale(newScale)),$$.axis.x.scale(scale.zoom),rescale&&(!org.xScale&&(org.xScale=scale.x.copy()),scale.x.domain(domain));}),($$.zoom=zoom);},onZoomStart:function onZoomStart(){var $$=this,event=external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event.sourceEvent;event&&(($$.zoom.startEvent=event),($$.state.zooming=!0),callFn($$.config.zoom_onzoomstart,$$.api,event));},onZoom:function onZoom(){var $$=this,config=$$.config,scale=$$.scale,org=$$.org,event=external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event,sourceEvent=event.sourceEvent;if(config.zoom_enabled&&event.sourceEvent&&$$.filterTargetsToShow($$.data.targets).length!==0&&(scale.zoom||!(sourceEvent.type.indexOf("touch")>-1)||sourceEvent.touches.length!==1)){var isMousemove=sourceEvent.type==="mousemove",isZoomOut=sourceEvent.wheelDelta<0,transform=event.transform;!isMousemove&&isZoomOut&&scale.x.domain().every(function(v,i){return v!==org.xDomain[i];})&&scale.x.domain(org.xDomain),$$.zoom.updateTransformScale(transform),$$.axis.isCategorized()&&scale.x.orgDomain()[0]===org.xDomain[0]&&scale.x.domain([org.xDomain[0]-1e-10,scale.x.orgDomain()[1]]),$$.redraw({withTransition:!1,withY:config.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),($$.state.cancelClick=isMousemove),callFn(config.zoom_onzoom,$$.api,scale.zoom.domain());}},onZoomEnd:function onZoomEnd(){var $$=this,config=$$.config,scale=$$.scale,startEvent=$$.zoom.startEvent,event=external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event&&external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event.sourceEvent;startEvent&&startEvent.type.indexOf("touch")>-1&&((startEvent=startEvent.changedTouches[0]),(event=event.changedTouches[0]));!startEvent||(event&&startEvent.clientX===event.clientX&&startEvent.clientY===event.clientY)||($$.redrawEventRect(),$$.updateZoom(),($$.state.zooming=!1),callFn(config.zoom_onzoomend,$$.api,scale[scale.zoom?"zoom":"subX"].domain()));},getZoomDomain:function getZoomDomain(){var $$=this,config=$$.config,org=$$.org,_org$xDomain=org.xDomain,min=_org$xDomain[0],max=_org$xDomain[1];return(isDefined(config.zoom_x_min)&&(min=getMinMax("min",[min,config.zoom_x_min])),isDefined(config.zoom_x_max)&&(max=getMinMax("max",[max,config.zoom_x_max])),[min,max]);},updateZoom:function updateZoom(force){var $$=this,_$$$scale=$$.scale,subX=_$$$scale.subX,x=_$$$scale.x,zoom=_$$$scale.zoom;if(zoom){var zoomDomain=zoom.domain(),xDomain=subX.domain(),delta=0.015,isfullyShown=(zoomDomain[0]<=xDomain[0]||zoomDomain[0]-delta<=xDomain[0])&&(xDomain[1]<=zoomDomain[1]||xDomain[1]<=zoomDomain[1]-delta);(force||isfullyShown)&&($$.axis.x.scale(subX),x.domain(subX.orgDomain()),($$.scale.zoom=null));}},bindZoomOnEventRect:function bindZoomOnEventRect(eventRects,type){var $$=this,behaviour=type==="drag"?$$.zoomBehaviour:$$.zoom;eventRects.call(behaviour).on("dblclick.zoom",null);},initZoomBehaviour:function initZoomBehaviour(){var zoomRect,$$=this,config=$$.config,state=$$.state,isRotated=config.axis_rotated,start=0,end=0,prop={axis:isRotated?"y":"x",attr:isRotated?"height":"width",index:isRotated?1:0};$$.zoomBehaviour=(0,external_commonjs_d3_drag_commonjs2_d3_drag_amd_d3_drag_root_d3_.drag)().clickDistance(4).on("start",function(){$$.setDragStatus(!0),$$.unselectRect(),zoomRect||(zoomRect=$$.$el.main.append("rect").attr("clip-path",state.clip.path).attr("class",config_classes.zoomBrush).attr("width",isRotated?state.width:0).attr("height",isRotated?0:state.height)),(start=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.mouse)(this)[prop.index]),(end=start),zoomRect.attr(prop.axis,start).attr(prop.attr,0),$$.onZoomStart();}).on("drag",function(){(end=(0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.mouse)(this)[prop.index]),zoomRect.attr(prop.axis,Math.min(start,end)).attr(prop.attr,Math.abs(end-start));}).on("end",function(){var _ref,scale=$$.scale.zoom||$$.scale.x;if(($$.setDragStatus(!1),zoomRect.attr(prop.axis,0).attr(prop.attr,0),start>end&&((_ref=[end,start]),(start=_ref[0]),(end=_ref[1]),_ref),start<0&&((end+=Math.abs(start)),(start=0)),start!==end))
$$.api.zoom([start,end].map(function(v){return scale.invert(v);})),$$.onZoomEnd();else if($$.isMultipleX())
$$.clickHandlerForMultipleXS.bind(this)($$);else{var _event3=external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event.sourceEvent||external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.event,_ref2="clientX"in _event3?[_event3.clientX,_event3.clientY]:[_event3.x,_event3.y],x=_ref2[0],y=_ref2[1],target=browser_doc.elementFromPoint(x,y);$$.clickHandlerForSingleX.bind(target)((0,external_commonjs_d3_selection_commonjs2_d3_selection_amd_d3_selection_root_d3_.select)(target).datum(),$$);}});},setZoomResetButton:function setZoomResetButton(){var $$=this,config=$$.config,resetButton=config.zoom_resetButton;resetButton&&config.zoom_type==="drag"&&($$.zoom.resetBtn?$$.zoom.resetBtn.style("display",null):($$.zoom.resetBtn=$$.$el.chart.append("div").classed(config_classes.button,!0).append("span").on("click",function(){isFunction(resetButton.onclick)&&resetButton.onclick.bind($$.api)(this),$$.api.unzoom();}).classed(config_classes.buttonZoomReset,!0).text(resetButton.text||"Reset Zoom")));}};const data_selection={data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function data_selection_isselectable(){return!0;},data_selection_multiple:!0,data_selection_draggable:!1,data_onselected:function data_onselected(){},data_onunselected:function data_onunselected(){}};const interaction_subchart={subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_text_show:!0,subchart_onbrush:function subchart_onbrush(){}};const interaction_zoom={zoom_enabled:!1,zoom_type:"wheel",zoom_extent:undefined,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:undefined,zoom_onzoomstart:undefined,zoom_onzoomend:undefined,zoom_resetButton:!0,zoom_x_min:undefined,zoom_x_max:undefined};var _selectionModule=function selectionModule(){return(extend(ChartInternal.prototype,internals_selection),extend(Chart.prototype,selection),Options.setOptions([data_selection]),(_selectionModule=function selectionModule(){return!0;})());},subchartModule=function(){return(extend(ChartInternal.prototype,subchart),Options.setOptions([interaction_subchart]),(subchartModule=function(){return!0;})());},zoomModule=function(){return(extend(ChartInternal.prototype,interactions_zoom),extend(Chart.prototype,api_zoom),Options.setOptions([interaction_zoom]),(zoomModule=function(){return!0;})());};var _defaults={},bb={version:"2.2.0",generate:function generate(config){var options=mergeObj({},_defaults,config),inst=new Chart(options);return((inst.internal.charts=this.instance),this.instance.push(inst),inst);},defaults:function defaults(options){return isObject(options)&&(_defaults=options),_defaults;},instance:[],plugin:{}};Object.keys(resolver_shape_namespaceObject).forEach(function(v){return resolver_shape_namespaceObject[v]();}),Object.keys(resolver_interaction_namespaceObject).forEach(function(v){return resolver_interaction_namespaceObject[v]();});},module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__2__;},module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__3__;},module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__4__;},module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__5__;},module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__6__;},module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__7__;},module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__8__;},module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__9__;},module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__10__;},module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__11__;},module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__12__;},module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__13__;},module=>{module.exports=__WEBPACK_EXTERNAL_MODULE__14__;}];var __webpack_module_cache__={};function __webpack_require__(moduleId){if(__webpack_module_cache__[moduleId]){return __webpack_module_cache__[moduleId].exports;}
var module=(__webpack_module_cache__[moduleId]={exports:{}});__webpack_modules__[moduleId](module,module.exports,__webpack_require__);return module.exports;}
(()=>{__webpack_require__.d=(exports,definition)=>{for(var key in definition){if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){Object.defineProperty(exports,key,{enumerable:true,get:definition[key]});}}};})();(()=>{__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop);})();(()=>{__webpack_require__.r=exports=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});}
Object.defineProperty(exports,"__esModule",{value:true});};})();__webpack_require__(0);return __webpack_require__(1);})();});
(function(factory){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else if(typeof exports==="object"){module.exports=factory(require("jquery"));}else{factory(jQuery);}})(function($){"use strict";Number.isNaN=Number.isNaN||function(value){return typeof value==="number"&&value!==value;};function supportsRange(){var input=document.createElement("input");input.setAttribute("type","range");return input.type!=="text";}
var pluginName="rangeslider",pluginIdentifier=0,hasInputRangeSupport=supportsRange(),defaults={polyfill:true,orientation:"horizontal",rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",activeClass:"rangeslider--active",horizontalClass:"rangeslider--horizontal",verticalClass:"rangeslider--vertical",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]},constants={orientation:{horizontal:{dimension:"width",direction:"left",directionStyle:"left",coordinate:"x"},vertical:{dimension:"height",direction:"top",directionStyle:"bottom",coordinate:"y"}}};function delay(fn,wait){var args=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return fn.apply(null,args);},wait);}
function debounce(fn,debounceDuration){debounceDuration=debounceDuration||100;return function(){if(!fn.debouncing){var args=Array.prototype.slice.apply(arguments);fn.lastReturnVal=fn.apply(window,args);fn.debouncing=true;}
clearTimeout(fn.debounceTimeout);fn.debounceTimeout=setTimeout(function(){fn.debouncing=false;},debounceDuration);return fn.lastReturnVal;};}
function isHidden(element){return(element&&(element.offsetWidth===0||element.offsetHeight===0||element.open===false));}
function getHiddenParentNodes(element){var parents=[],node=element.parentNode;while(isHidden(node)){parents.push(node);node=node.parentNode;}
return parents;}
function getDimension(element,key){var hiddenParentNodes=getHiddenParentNodes(element),hiddenParentNodesLength=hiddenParentNodes.length,inlineStyle=[],dimension=element[key];function toggleOpenProperty(element){if(typeof element.open!=="undefined"){element.open=element.open?false:true;}}
if(hiddenParentNodesLength){for(var i=0;i<hiddenParentNodesLength;i++){inlineStyle[i]=hiddenParentNodes[i].style.cssText;if(hiddenParentNodes[i].style.setProperty){hiddenParentNodes[i].style.setProperty("display","block","important");}else{hiddenParentNodes[i].style.cssText+=";display: block !important";}
hiddenParentNodes[i].style.height="0";hiddenParentNodes[i].style.overflow="hidden";hiddenParentNodes[i].style.visibility="hidden";toggleOpenProperty(hiddenParentNodes[i]);}
dimension=element[key];for(var j=0;j<hiddenParentNodesLength;j++){hiddenParentNodes[j].style.cssText=inlineStyle[j];toggleOpenProperty(hiddenParentNodes[j]);}}
return dimension;}
function tryParseFloat(str,defaultValue){var value=parseFloat(str);return Number.isNaN(value)?defaultValue:value;}
function ucfirst(str){return str.charAt(0).toUpperCase()+str.substr(1);}
function Plugin(element,options){this.$window=$(window);this.$document=$(document);this.$element=$(element);this.options=$.extend({},defaults,options);this.polyfill=this.options.polyfill;this.orientation=this.$element[0].getAttribute("data-orientation")||this.options.orientation;this.onInit=this.options.onInit;this.onSlide=this.options.onSlide;this.onSlideEnd=this.options.onSlideEnd;this.DIMENSION=constants.orientation[this.orientation].dimension;this.DIRECTION=constants.orientation[this.orientation].direction;this.DIRECTION_STYLE=constants.orientation[this.orientation].directionStyle;this.COORDINATE=constants.orientation[this.orientation].coordinate;if(this.polyfill){if(hasInputRangeSupport){return false;}}
this.identifier="js-"+pluginName+"-"+pluginIdentifier++;this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+
this.identifier;this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+
this.identifier;this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+
this.identifier;this.toFixed=(this.step+"").replace(".","").length-1;this.$fill=$('<div class="'+this.options.fillClass+'" />');this.$handle=$('<div class="'+this.options.handleClass+'" />');this.$range=$('<div class="'+
this.options.rangeClass+" "+
this.options[this.orientation+"Class"]+'" id="'+
this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle);this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"});this.handleDown=$.proxy(this.handleDown,this);this.handleMove=$.proxy(this.handleMove,this);this.handleEnd=$.proxy(this.handleEnd,this);this.init();var _this=this;this.$window.on("resize."+this.identifier,debounce(function(){delay(function(){_this.update(false,false);},300);},20));this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown);this.$element.on("change."+this.identifier,function(e,data){if(data&&data.origin===_this.identifier){return;}
var value=e.target.value,pos=_this.getPositionFromValue(value);_this.setPosition(pos);});}
Plugin.prototype.init=function(){this.update(true,false);if(this.onInit&&typeof this.onInit==="function"){this.onInit();}};Plugin.prototype.update=function(updateAttributes,triggerSlide){updateAttributes=updateAttributes||false;if(updateAttributes){this.min=tryParseFloat(this.$element[0].getAttribute("min"),0);this.max=tryParseFloat(this.$element[0].getAttribute("max"),100);this.value=tryParseFloat(this.$element[0].value,Math.round(this.min+(this.max-this.min)/2));this.step=tryParseFloat(this.$element[0].getAttribute("step"),1);}
this.handleDimension=getDimension(this.$handle[0],"offset"+ucfirst(this.DIMENSION));this.rangeDimension=getDimension(this.$range[0],"offset"+ucfirst(this.DIMENSION));this.maxHandlePos=this.rangeDimension-this.handleDimension;this.grabPos=this.handleDimension/2;this.position=this.getPositionFromValue(this.value);if(this.$element[0].disabled){this.$range.addClass(this.options.disabledClass);}else{this.$range.removeClass(this.options.disabledClass);}
this.setPosition(this.position,triggerSlide);};Plugin.prototype.handleDown=function(e){e.preventDefault();this.$document.on(this.moveEvent,this.handleMove);this.$document.on(this.endEvent,this.handleEnd);this.$range.addClass(this.options.activeClass);if((" "+e.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1){return;}
var pos=this.getRelativePosition(e),rangePos=this.$range[0].getBoundingClientRect()[this.DIRECTION],handlePos=this.getPositionFromNode(this.$handle[0])-rangePos,setPos=this.orientation==="vertical"?this.maxHandlePos-(pos-this.grabPos):pos-this.grabPos;this.setPosition(setPos);if(pos>=handlePos&&pos<handlePos+this.handleDimension){this.grabPos=pos-handlePos;}};Plugin.prototype.handleMove=function(e){e.preventDefault();var pos=this.getRelativePosition(e);var setPos=this.orientation==="vertical"?this.maxHandlePos-(pos-this.grabPos):pos-this.grabPos;this.setPosition(setPos);};Plugin.prototype.handleEnd=function(e){e.preventDefault();this.$document.off(this.moveEvent,this.handleMove);this.$document.off(this.endEvent,this.handleEnd);this.$range.removeClass(this.options.activeClass);this.$element.trigger("change",{origin:this.identifier});if(this.onSlideEnd&&typeof this.onSlideEnd==="function"){this.onSlideEnd(this.position,this.value);}};Plugin.prototype.cap=function(pos,min,max){if(pos<min){return min;}
if(pos>max){return max;}
return pos;};Plugin.prototype.setPosition=function(pos,triggerSlide){var value,newPos;if(triggerSlide===undefined){triggerSlide=true;}
value=this.getValueFromPosition(this.cap(pos,0,this.maxHandlePos));newPos=this.getPositionFromValue(value);this.$fill[0].style[this.DIMENSION]=newPos+this.grabPos+"px";this.$handle[0].style[this.DIRECTION_STYLE]=newPos+"px";this.setValue(value);this.position=newPos;this.value=value;if(triggerSlide&&this.onSlide&&typeof this.onSlide==="function"){this.onSlide(newPos,value);}};Plugin.prototype.getPositionFromNode=function(node){var i=0;while(node!==null){i+=node.offsetLeft;node=node.offsetParent;}
return i;};Plugin.prototype.getRelativePosition=function(e){var ucCoordinate=ucfirst(this.COORDINATE),rangePos=this.$range[0].getBoundingClientRect()[this.DIRECTION],pageCoordinate=0;if(typeof e.originalEvent["client"+ucCoordinate]!=="undefined"){pageCoordinate=e.originalEvent["client"+ucCoordinate];}else if(e.originalEvent.touches&&e.originalEvent.touches[0]&&typeof e.originalEvent.touches[0]["client"+ucCoordinate]!=="undefined"){pageCoordinate=e.originalEvent.touches[0]["client"+ucCoordinate];}else if(e.currentPoint&&typeof e.currentPoint[this.COORDINATE]!=="undefined"){pageCoordinate=e.currentPoint[this.COORDINATE];}
return pageCoordinate-rangePos;};Plugin.prototype.getPositionFromValue=function(value){var percentage,pos;percentage=(value-this.min)/(this.max-this.min);pos=!Number.isNaN(percentage)?percentage*this.maxHandlePos:0;return pos;};Plugin.prototype.getValueFromPosition=function(pos){var percentage,value;percentage=pos/(this.maxHandlePos||1);value=this.step*Math.round(percentage*(this.max-this.min)/this.step)+
this.min;return Number(value.toFixed(this.toFixed));};Plugin.prototype.setValue=function(value){if(value===this.value&&this.$element[0].value!==""){return;}
this.$element.val(value).trigger("input",{origin:this.identifier});};Plugin.prototype.destroy=function(){this.$document.off("."+this.identifier);this.$window.off("."+this.identifier);this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+pluginName);if(this.$range&&this.$range.length){this.$range[0].parentNode.removeChild(this.$range[0]);}};$.fn[pluginName]=function(options){var args=Array.prototype.slice.call(arguments,1);return this.each(function(){var $this=$(this),data=$this.data("plugin_"+pluginName);if(!data){$this.data("plugin_"+pluginName,(data=new Plugin(this,options)));}
if(typeof options==="string"){data[options].apply(data,args);}});};return"rangeslider.js is available in jQuery context e.g $(selector).rangeslider(options);";});
(function(window,undefined){"$:nomunge";var $=window.jQuery||window.Cowboy||(window.Cowboy={}),jq_throttle;$.throttle=jq_throttle=function(delay,no_trailing,callback,debounce_mode){var timeout_id,last_exec=0;if(typeof no_trailing!=="boolean"){debounce_mode=callback;callback=no_trailing;no_trailing=undefined;}
function wrapper(){var that=this,elapsed=+new Date()-last_exec,args=arguments;function exec(){last_exec=+new Date();callback.apply(that,args);}
function clear(){timeout_id=undefined;}
if(debounce_mode&&!timeout_id){exec();}
timeout_id&&clearTimeout(timeout_id);if(debounce_mode===undefined&&elapsed>delay){exec();}else if(no_trailing!==true){timeout_id=setTimeout(debounce_mode?clear:exec,debounce_mode===undefined?delay-elapsed:delay);}}
if($.guid){wrapper.guid=callback.guid=callback.guid||$.guid++;}
return wrapper;};$.debounce=function(delay,at_begin,callback){return callback===undefined?jq_throttle(delay,at_begin,false):jq_throttle(delay,callback,at_begin!==false);};})(this);
$(function(){var Summaries=Backbone.Collection.extend({url:"/api/v1/users/current/summaries"});var Durations=Backbone.Collection.extend({url:"/api/v1/users/current/durations",parse:function(response){this.start=response.start;this.end=response.end;return response.data;}});var Heartbeats=Backbone.Collection.extend({url:"/api/v1/users/current/heartbeats",parse:function(response){this.start=response.start;this.end=response.end;this.yesterday_heartbeat=response.yesterday_heartbeat;this.tomorrow_heartbeat=response.tomorrow_heartbeat;this.external_durations=response.external_durations;return response.data;}});var Entities=Backbone.Model.extend({url:"/api/v1/users/current/entities"});var View=Backbone.View.extend({el:$("#dashboard"),templates:{dashboard:$("#dashboard-template").html(),durations:$("#durations-template").html(),durations_slice_by:$("#durations-slice-by-template").html(),durations_settings:$("#durations-settings-template").html(),durations_slice_by_settings:$("#durations-slice-by-settings-template").html(),tooltip:$("#projects-tooltip-template").html(),download:$("#download-template").html(),entities_modal:$("#entities-modal-template").html()},loadtimes:{summaries:null,durations:null,durations_slice_by:null,heartbeats:null,entities:null},sliceByMap:{Language:"language","Operating System":"os",Editor:"editor",Category:"category",Machine:"machine"},data:{summaries:new Summaries(),durations:new Durations(),durations_slice_by:new Durations(),heartbeats:new Heartbeats()},using_cache:null,events:{"click #date-picker":"chooseDate","click a.project-share":"shareProject","click a#durations-settings-link":"clickDurationsSettings","click a#durations-slice-by-settings-link":"clickDurationsSliceBySettings",'change input[name="durations-slice-by-choice"]':"onSaveSliceBy","click a#prev-day":"prevDay","click a#next-day":"nextDay","click a#prev-day-slice-by":"prevDaySliceBy","click a#next-day-slice-by":"nextDaySliceBy","click a.download":"download","submit .modal form":"downloadSubmit"},render:function(){var projects={};var projects_by_day={};var languages_used={};var categories_used={};var categories_by_day={};var frameworks_used={};var editors_used={};var os_used={};var logged_time_data=[];var time_by_project={};var time_by_category={};var range_start=this.data.summaries.first().get("range").date;var range_end=this.data.summaries.last().get("range").date;var range_end_present=utils.toMoment(this.data.summaries.last().get("range").date,this.options.timezone);var last_day_total=0;var last_day_text;var num_days_in_daily_avg=0;var today=moment().tz(this.options.timezone);var total_logged_seconds=_.reduce(this.data.summaries.map(function(day){return day.get("grand_total").total_seconds;}),function(memo,num){return memo+num;},0);var refreshing=false;if(this.cached_start!=this.options.start||this.cached_end!=this.options.end){if(this.loadtimes.summaries){utils.logPageTimingMetric("dashboard",{first_render_time:Date.now()-this.loadtimes.summaries});this.loadtimes.summaries=Date.now();}
this.cached_start=this.options.start;this.cached_end=this.options.end;var start=utils.toMoment(range_start,this.options.timezone);var end=utils.toMoment(range_end,this.options.timezone);refreshing=true;this.fetchSummaries(false);}else if(total_logged_seconds==this.cached_seconds){utils.endProgressBar();if(this.loadtimes.summaries){utils.logPageTimingMetric("dashboard",{final_render_time:Date.now()-this.loadtimes.summaries});this.loadtimes.summaries=null;}
return;}
this.cached_seconds=total_logged_seconds;if(range_end_present.isAfter(today)&&utils.toMoment(range_start,this.options.timezone).isBefore(today)){range_end_present=today.clone().startOf("day");}
this.data.summaries.each(function(day){var total=day.get("grand_total").total_seconds;var date=utils.toMoment(day.get("range").date,this.options.timezone);projects_by_day[date.format("ddd MMM Do YYYY")]={};categories_by_day[date.format("ddd MMM Do YYYY")]={};_.each(day.get("languages"),function(language){if(languages_used[language.name]===undefined){languages_used[language.name]={name:language.name,total:0.0};}
languages_used[language.name].total+=language.percent/100.0*day.get("grand_total").total_seconds;},this);_.each(day.get("dependencies"),function(dependency){if(frameworks_used[dependency.name]===undefined){frameworks_used[dependency.name]={name:dependency.name,total:0.0};}
frameworks_used[dependency.name].total+=dependency.percent/100.0*day.get("grand_total").total_seconds;},this);_.each(day.get("editors"),function(editor){if(editors_used[editor.name]===undefined){editors_used[editor.name]={name:editor.name,total:0.0};}
editors_used[editor.name].total+=editor.percent/100.0*day.get("grand_total").total_seconds;},this);_.each(day.get("operating_systems"),function(os){if(os_used[os.name]===undefined){os_used[os.name]={name:os.name,total:0.0};}
os_used[os.name].total+=os.percent/100.0*day.get("grand_total").total_seconds;},this);_.each(day.get("categories"),function(category){if(categories_used[category.name]===undefined){categories_used[category.name]={name:category.name,total:0.0};}
categories_used[category.name].total+=category.percent/100.0*day.get("grand_total").total_seconds;categories_by_day[date.format("ddd MMM Do YYYY")][category.name]=category;},this);if(date.isSame(range_end_present,"day")){last_day_total=day.get("grand_total").total_seconds;last_day_text=day.get("grand_total").text;}
if(day.get("grand_total").total_seconds>=1){num_days_in_daily_avg+=1;}
_.each(day.get("projects"),function(project){if(projects[project.name]===undefined){projects[project.name]={id:project.id,name:project.name,total:0};}
projects[project.name].total+=project.total_seconds;projects_by_day[date.format("ddd MMM Do YYYY")][project.name]=project;},this);logged_time_data.push({date:date.format("YYYY-MM-DD"),name:date.format("ddd MMM Do YYYY"),value:parseFloat((total/3600.0).toFixed(2)),xAxis:date.format("MMM Do"),total_seconds:total,formatted:day.get("grand_total").text});},this);_.each(projects,function(project,name){time_by_project[name.toString()]=[];});_.each(categories_used,function(category,name){time_by_category[name.toString()]=[];});this.data.summaries.each(function(day){var date=utils.toMoment(day.get("range").date,this.options.timezone);_.each(projects,function(project,name){if(projects_by_day[date.format("ddd MMM Do YYYY")]!==undefined&&projects_by_day[date.format("ddd MMM Do YYYY")][name]!==undefined){var total=projects_by_day[date.format("ddd MMM Do YYYY")][name].total_seconds;var formatted=utils.format_seconds(total,{short:true});}else{var total=0;var formatted="0s";}
time_by_project[name.toString()].push({name:date.format("ddd MMM Do YYYY"),date:date.format("YYYY-MM-DD"),value:parseFloat((total/3600.0).toFixed(2)),total_seconds:total,formatted:formatted,project:name});},this);_.each(categories_used,function(category,name){if(categories_by_day[date.format("ddd MMM Do YYYY")]!==undefined&&categories_by_day[date.format("ddd MMM Do YYYY")][name]!==undefined){var total=categories_by_day[date.format("ddd MMM Do YYYY")][name].total_seconds;var formatted=utils.format_seconds(total,{short:true});}else{var total=0;var formatted="0s";}
time_by_category[name.toString()].push({name:date.format("ddd MMM Do YYYY"),date:date.format("YYYY-MM-DD"),value:parseFloat((total/3600.0).toFixed(2)),total_seconds:total,formatted:formatted,category:name});},this);},this);var total_seconds=0;_.each(projects,function(project,index){total_seconds+=project.total;});var average=num_days_in_daily_avg>1?total_seconds/num_days_in_daily_avg:total_seconds;if(last_day_total==average){var direction="none";var percent_complete=0;var percent_change=0;}else{var direction=last_day_total<average?"down":"up";if(direction=="up"){if(last_day_total>=average){var percent_complete=100;}else{var percent_complete=Math.round(Math.abs(average-last_day_total)/average*100);}
if(average==0){var percent_change="Infinite";}else{var percent_change=Math.round((last_day_total-average)/average*100);}}else{var percent_complete=Math.round(last_day_total/average*100);var percent_change=Math.round((average-last_day_total)/average*100);}}
this.range=utils.naturalDateRange(range_start,range_end,this.options.timezone,this.options.weekday_start);var data={start:this.options.start,end:this.options.end,logged_time:utils.format_seconds(total_seconds),last_day:utils.naturalDate(range_end_present,{timezone:this.options.timezone}),range:this.range,direction:direction,direction_up:direction=="up",direction_down:direction=="down",direction_same:direction=="none",percent_complete:percent_complete,percent_change:percent_change,infinite_change:percent_change==="Infinite",logged_time_today:last_day_text,daily_average:utils.format_seconds(average),num_days:num_days_in_daily_avg,num_days_plural:num_days_in_daily_avg!=1};this.$el.html(Mustache.render(this.templates.dashboard,data));this.renderDatePicker();this.renderLoggedTimeByProjectChart(logged_time_data,time_by_project,projects);this.renderDailyAverageChart(data);var showLegend=Object.keys(languages_used).length<=15&&Object.keys(editors_used).length<=15;this.renderLanguagesUsedChart(languages_used,total_logged_seconds,showLegend);this.renderEditorsUsedChart(editors_used,total_logged_seconds,showLegend);this.renderOSUsedChart(os_used,total_logged_seconds,showLegend);this.renderCategoriesChart(logged_time_data,time_by_category,categories_used,total_logged_seconds,this.range);this.renderProjects(projects);this.renderDurations();this.renderDurationsSliceBy();utils.checkTimeZone();$(".tip").tooltip();if(!refreshing)utils.endProgressBar();},renderDurations:function(){if(this.loadtimes.durations){utils.logPageTimingMetric("dashboard_durations",{final_render_time:Date.now()-this.loadtimes.durations});this.loadtimes.durations=null;}
this.durationsChartRows=this.getDurationChartRows();var grand_total=this.getGrandTotal(this.durationsChartRows);var prev_day=utils.toMoment(this.options.durations_date,this.options.timezone).subtract(1,"days");var prev_day_title=utils.naturalDate(prev_day);var next_day=utils.toMoment(this.options.durations_date,this.options.timezone).add(1,"days");var next_day_title=utils.naturalDate(next_day);var today=moment().tz(this.options.timezone);var day=utils.toMoment(this.options.durations_date,this.options.timezone);var data={grand_total:grand_total,day:day.isSame(today,"day")?"Today":day.format("ddd MMM Do YYYY"),date:day.format("YYYY-MM-DD"),prev_day:prev_day.format("YYYY-MM-DD"),prev_day_title:prev_day_title,next_day:next_day.format("YYYY-MM-DD"),next_day_title:next_day_title,show_next_day:!next_day.isAfter(today)};this.$el.find("#durations .inside").html(Mustache.render(this.templates.durations,data));this.$el.find(".tip").tooltip();this.renderDurationsChart();},renderHeartbeats:function(){var durations=this.processHeartbeatsIntoDurations();this.durationsChartRows=this.getDurationChartRows(durations);var grand_total=this.getGrandTotal(this.durationsChartRows);this.$el.find("#durations #total-logged-time .grand-total").text(grand_total);this.renderDurationsChart(durations);},renderDurationsSliceBy:function(){if(this.loadtimes.durations_slice_by){utils.logPageTimingMetric("dashboard_durations_slice_by",{final_render_time:Date.now()-this.loadtimes.durations_slice_by});this.loadtimes.durations_slice_by=null;}
this.durationsSliceByChartRows=this.getDurationSliceByChartRows();var grand_total=this.getGrandTotal(this.durationsSliceByChartRows);var prev_day=utils.toMoment(this.options.durations_slice_by_date,this.options.timezone).subtract(1,"days");var prev_day_title=utils.naturalDate(prev_day);var next_day=utils.toMoment(this.options.durations_slice_by_date,this.options.timezone).add(1,"days");var next_day_title=utils.naturalDate(next_day);var today=moment().tz(this.options.timezone);var day=utils.toMoment(this.options.durations_slice_by_date,this.options.timezone);var data={grand_total:grand_total,day:day.isSame(today,"day")?"Today":day.format("ddd MMM Do YYYY"),date:day.format("YYYY-MM-DD"),prev_day:prev_day.format("YYYY-MM-DD"),prev_day_title:prev_day_title,next_day:next_day.format("YYYY-MM-DD"),next_day_title:next_day_title,show_next_day:!next_day.isAfter(today)};this.$el.find("#durations-slice-by .inside").html(Mustache.render(this.templates.durations_slice_by,data));this.$el.find(".tip").tooltip();this.renderDurationsSliceByChart();},renderDatePicker:function(){this.$el.find("#date-picker").daterangepicker({startDate:utils.toMoment(this.options.start,this.options.timezone),endDate:utils.toMoment(this.options.end,this.options.timezone),ranges:this.ranges,timeZone:moment().tz(this.options.timezone).utcOffset(),locale:{firstDay:this.options.weekday_start,format:this.options.date_format}});this.$el.find("#date-picker").on("apply.daterangepicker",_.bind(function(ev,picker){var start=picker.startDate.format("YYYY-MM-DD");var end=picker.endDate.format("YYYY-MM-DD");if(start==end){var params={date:start};window.location.href="/dashboard/day?"+utils.createSearchString(params);}else{this.setRangeInUrl(start,end);}},this));},renderLoggedTimeByProjectChart:function(logged_time_data,time_by_project,projects){var projectMap={"data-0":"<b>Total</b>"};var totalColumn=["data-0"].concat(_.map(logged_time_data,function(item){return item.value;}));var index=0;var projectColumns=_.map(time_by_project,function(data,key){index+=1;projectMap["data-"+index]=key.toString();return["data-"+index].concat(_.map(data,function(item){return item.value;}));});var sortedColumns=_.sortBy(projectColumns,function(column){return projects[projectMap[column[0]]].total;}).reverse();sortedColumns=[totalColumn].concat(sortedColumns);var light_theme=$("body").hasClass("color_scheme-Light");this.projectColors={"data-0":light_theme?"#000":"#FFF"};this.projectColorsByName={};_.each(sortedColumns,_.bind(function(column,index){if(index>0){this.projectColors[column[0]]=bootstrapped.project_colors.colors[index-1%bootstrapped.project_colors.colors.length];this.projectColorsByName[this.lower(projectMap[column[0]])]=bootstrapped.project_colors.colors[index-1%bootstrapped.project_colors.colors.length];}},this));_.each(time_by_project,_.bind(function(day){_.each(day,_.bind(function(proj){proj.color=this.projectColorsByName[this.lower(proj.project)];},this));},this));var groups=_.map(projectColumns,function(column,index){return"data-"+(index+1);});var types=_.object(_.map(sortedColumns,function(column,index){return[column[0],index==0?"spline":"area-step"];}));var data={columns:sortedColumns,groups:[groups],types:types,colors:this.projectColors,onover:_.bind(function(d,element){$(element).off("click");if(utils.getScreenWidth()<=utils.screenWidth.sm_max)return;$("html,body").css("cursor","pointer");},this),onout:_.bind(function(d,element){$(element).off("click");$("html,body").css("cursor","auto");},this),onclick:function(d,element){window.location.href="/dashboard/day?date="+
encodeURIComponent(logged_time_data[d.index].date);}};this.logged_time_by_project_chart=bb.generate({data:data,spline:{interpolation:{type:"monotone-x"}},bindto:"#coding-activity .graph",axis:{x:{tick:{format:function(x){return logged_time_data[x].xAxis;}}},y:{show:false,min:0,padding:{top:10,bottom:0}}},tooltip:{contents:_.bind(function(cols){var total=_.find(cols,function(col){return col.id=="data-0";});cols=_.filter(cols,function(col){return(col.id!="data-0"&&time_by_project[projectMap[col.id].toString()][col.index].total_seconds>=60);});return Mustache.render(this.templates.tooltip,{header:logged_time_data[total.index].name,total_color:this.projectColors["data-0"],total_formatted:utils.format_seconds(logged_time_data[total.index].total_seconds,{show_seconds:true,short:true}),projects:_.map(cols,function(col){return time_by_project[projectMap[col.id].toString()][col.index];})});},this)},legend:{show:false},point:{r:4,focus:{expand:{r:6}}},size:{height:200},padding:{top:0,bottom:0,right:20,left:20}});},renderLanguagesUsedChart:function(languages_used,total_logged_seconds,showLegend){var columnNames=_.mapObject(languages_used,function(data,key){var percent=total_logged_seconds>0?(data.total/total_logged_seconds*100).toFixed(2):0;return(key+" - "+
utils.format_seconds(data.total,{short:true})+" ("+
percent+"%)");});var columns=_.map(languages_used,function(data,key){var percent=total_logged_seconds>0?(data.total/total_logged_seconds*100).toFixed(2):0;return[key,percent];});var sortedColumns=_.sortBy(columns,function(column){return parseFloat(column[1]);}).reverse();this.languages_used_chart=bb.generate({bindto:"#languages-pie .graph",data:{columns:sortedColumns,names:columnNames,type:"pie",colors:bootstrapped.language_colors,onclick:_.bind(function(d,i){this.showEntities(d.id,"language");},this)},pie:{label:{format:function(value,ratio,id){return id;},threshold:0.1}},tooltip:{contents:function(x){x=x[0];var html='<div class="bb-tooltip"><div class="value">{{value}}</div></div>';return Mustache.render(html,{value:x.name});}},legend:{show:showLegend,position:"right"},size:{height:170},padding:{right:0,left:0,top:0,bottom:0}});if(utils.getScreenWidth()<utils.screenWidth.md){this.$el.find("#languages-pie used .inside").css("height","400px");}},renderEditorsUsedChart:function(editors_used,total_logged_seconds,showLegend){var columnNames=_.mapObject(editors_used,function(data,key){var percent=total_logged_seconds>0?(data.total/total_logged_seconds*100).toFixed(2):0;return(key+" - "+
utils.format_seconds(data.total,{short:true})+" ("+
percent+"%)");});var columns=_.map(editors_used,function(data,key){var percent=total_logged_seconds>0?(data.total/total_logged_seconds*100).toFixed(2):0;return[key,percent];});var sortedColumns=_.sortBy(columns,function(column){return parseFloat(column[1]);}).reverse();this.editors_used_chart=bb.generate({bindto:"#editors-pie .graph",data:{columns:sortedColumns,names:columnNames,type:"donut",colors:bootstrapped.editor_colors,onclick:_.bind(function(d,i){this.showEntities(d.id,"editor");},this)},donut:{label:{format:function(value,ratio,id){return id;},threshold:0.1}},tooltip:{contents:function(x){x=x[0];var html='<div class="bb-tooltip"><div class="value">{{value}}</div></div>';return Mustache.render(html,{value:x.name});}},legend:{show:showLegend,position:"right"},size:{height:170},padding:{right:0,left:0,top:0,bottom:0}});if(utils.getScreenWidth()<utils.screenWidth.md){this.$el.find("#editors-pie .inside").css("height","400px");}},renderOSUsedChart:function(os_used,total_logged_seconds,showLegend){var columnNames=_.mapObject(os_used,function(data,key){var percent=total_logged_seconds>0?(data.total/total_logged_seconds*100).toFixed(2):0;return(key+" - "+
utils.format_seconds(data.total,{short:true})+" ("+
percent+"%)");});var columns=_.map(os_used,function(data,key){var percent=total_logged_seconds>0?(data.total/total_logged_seconds*100).toFixed(2):0;return[key,percent];});var sortedColumns=_.sortBy(columns,function(column){return parseFloat(column[1]);}).reverse();this.os_used_chart=bb.generate({bindto:"#os-pie .graph",data:{columns:sortedColumns,names:columnNames,type:"donut",colors:bootstrapped.os_colors,onclick:_.bind(function(d,i){this.showEntities(d.id,"os");},this)},donut:{label:{format:function(value,ratio,id){return id;},threshold:0.1}},tooltip:{contents:function(x){x=x[0];var html='<div class="bb-tooltip"><div class="value">{{value}}</div></div>';return Mustache.render(html,{value:x.name});}},legend:{show:showLegend,position:"right"},size:{height:170},padding:{right:0,left:0,top:0,bottom:0}});if(utils.getScreenWidth()<utils.screenWidth.md){this.$el.find("#os-pie .inside").css("height","400px");}},renderCategoriesChart:function(logged_time_data,time_by_category,categories_used,total_logged_seconds,range){var categoryColumns=_.map(time_by_category,function(data,key){return[key.toString()].concat(_.map(data,function(item){return item.value;}));});var totalPercents=_.mapObject(categories_used,function(data,key){var percent=total_logged_seconds>0?(data.total/total_logged_seconds*100).toFixed(2):0;return percent+"%";});var columnNames=_.map(categoryColumns,function(column){return column[0];});var topColumns=_.map(categories_used,function(data,key){return[key,data.total||0];});var sortedTopColumns=_.sortBy(topColumns,function(column){return column[1];}).reverse();this.categories_used_chart=bb.generate({data:{columns:sortedTopColumns,type:"bar",groups:[columnNames],colors:bootstrapped.category_colors},bar:{width:{ratio:1}},bindto:"#categories-bar .graph-top",axis:{x:{show:false,padding:{top:0,bottom:0,left:0,right:0}},y:{show:false,min:0,max:total_logged_seconds,padding:{top:0,bottom:0,left:0,right:0}},rotated:true},tooltip:{format:{title:function(index){return range.text;},value:function(seconds,ratio,category,index){if(!total_logged_seconds)return"";var formatted=utils.format_seconds(seconds,{short:true});var percent=(seconds/total_logged_seconds*100).toFixed(2);return formatted+" ("+percent+"%)";}}},legend:{show:false},size:{height:30},padding:{top:0,bottom:0,right:0,left:0}});var sortedColumns=_.sortBy(categoryColumns,function(column){return categories_used[column[0]].total;}).reverse();var data={columns:sortedColumns,names:columnNames,type:"bar",colors:bootstrapped.category_colors,onclick:_.bind(function(d,i){if(utils.getScreenWidth()<=utils.screenWidth.sm_max)return;window.location.href="/dashboard/day?date="+
encodeURIComponent(logged_time_data[d.index].date);},this),onover:_.bind(function(d){if(utils.getScreenWidth()<=utils.screenWidth.sm_max)return;$("html,body").css("cursor","pointer");},this),onout:_.bind(function(d){$("html,body").css("cursor","auto");},this)};var bar={};if(logged_time_data.length<30){bar.width={ratio:0.4};}
if(logged_time_data.length<14){bar.width={ratio:0.3};}
this.logged_time_by_category_chart=bb.generate({data:data,bar:bar,bindto:"#categories-bar .graph",axis:{x:{tick:{format:function(x){return logged_time_data[x].xAxis;}}},y:{show:false,min:0,padding:{top:0,bottom:0}}},tooltip:{format:{title:function(index){return logged_time_data[index].name;},value:function(value,ratio,category,index){var total=logged_time_data[index].total_seconds;if(columnNames.length<=1||!total){return time_by_category[category][index].formatted;}else{var seconds=time_by_category[category][index].total_seconds;var percent=total>0?(seconds/total*100).toFixed(2):0;var formatted=utils.format_seconds(time_by_category[category][index].total_seconds,{short:true});return formatted+" ("+percent+"%)";}}}},legend:{show:false},size:{height:170},padding:{top:0,bottom:0,right:20,left:20}});},renderDailyAverageChart:function(data){this.daily_average_chart=bb.generate({bindto:"#daily-average .graph",data:{columns:[["data",data.percent_complete]],type:"gauge"},color:{pattern:["#FF0000","#F97600","#F6C600","#16ce40"],threshold:{values:[30,60,90,99]}},tooltip:{contents:function(x){var html='<div class="bb-tooltip"><div class="value">{{last_day}} you logged {{percent_complete}}% of your daily average.</div></div>';return Mustache.render(html,data);}},legend:{show:false},gauge:{label:{show:false}},size:{height:110},padding:{right:0,left:0,top:0,bottom:0}});},renderDurationsChart:function(durations){var $graph=this.$el.find("#durations-chart");if(!$graph.length)return;if(!_.isArray(durations))durations=this.data.durations.toJSON();if(durations.length==0){$graph.html('<div class="center-xs m-top-xs-30">No coding stats for this day.</div>');return;}else{$graph.empty();}
var light_theme=$("body").hasClass("color_scheme-Light");var rowMap={};_.each(this.durationsChartRows,function(p,index){rowMap[p.name]=index;});var size={chart:{margin:{top:30,bottom:10,left:40,right:0}},row:{margin:{top:2,bottom:2,left:0,right:18},height:30},project:{height:20,margin:{top:0,bottom:0,left:0,right:0}},totals:{height:20,margin:{top:0,bottom:0,left:30,right:30}},block:{margin:{top:3,bottom:3,left:0,right:0}}};size.chart.width=$graph.width()-size.chart.margin.left-size.chart.margin.right;size.chart.height=this.durationsChartRows.length*(size.row.height+size.row.margin.top+size.row.margin.bottom)+
size.chart.margin.top+
size.chart.margin.bottom;if(size.chart.width<700){size.chart.margin.left=0;size.row.margin.right=8;size.totals.margin.left=5;size.totals.margin.right=5;size.chart.width=$graph.width()-size.chart.margin.left-size.chart.margin.right;}
$(".d3-path-tip").remove();var chart=d3.select($graph.get(0)).append("svg").attr("class","chart").attr("width",size.chart.width).attr("height",size.chart.height).append("g").attr("transform","translate("+
size.chart.margin.left+", "+
size.chart.margin.top+")");chart.selectAll("g.y.axis").data(this.durationsChartRows).enter().append("g").attr("class","y axis").attr("transform",function(row,i){return("translate("+
size.row.margin.left+", "+
(size.row.margin.top+
i*(size.row.height+
size.row.margin.top+
size.row.margin.bottom))+")");});chart.selectAll("g.y.axis").append("a").attr("class","y axis").append("text").attr("class","y axis");chart.selectAll("g.y.axis text.y.axis").attr("transform","translate("+
size.project.margin.left+", "+
(size.row.height-size.project.height/2+3)+")").attr("text-anchor","end").text(_.bind(function(row){return row["project"];},this));chart.selectAll("g.y.axis text.y.axis").attr("class","y axis link").on("mouseover",function(d){$("html,body").css("cursor","pointer");}).on("mouseout",function(d){$("html,body").css("cursor","auto");}).on("click",_.bind(function(d){var params={date:this.options.durations_date,project:d.project};window.location.href="/dashboard/day?"+utils.createSearchString(params);},this));size.project.width=0;$graph.find(".chart text.y.axis").each(function(label,val){var w=Math.abs($(val).width());if(w<=0)w=val.getBoundingClientRect().width;if(w>size.project.width)size.project.width=Math.round(w);});chart.selectAll("g.y.axis text.y.axis").attr("x",size.project.width);var totals=chart.selectAll("g.project-totals").data(this.durationsChartRows).enter().append("g").attr("class","project-totals").attr("transform",function(row,i){return("translate("+
(size.row.margin.left+
size.project.margin.left+
size.project.width+
size.project.margin.right+
size.totals.margin.left)+", "+
(size.row.margin.top+
i*(size.row.height+
size.row.margin.top+
size.row.margin.bottom))+")");});totals.append("text").attr("class","total-digital").attr("transform","translate(0, "+(size.row.height-size.totals.height/2+3)+")").attr("text-anchor","end").style("fill",light_theme?"#4c4c4c":"#dedede").text(_.bind(function(row){var duration=moment.duration(Math.round(row["total"]),"seconds");var hours=Math.floor(duration.asHours());var minutes=this.formatMinutes(duration.minutes());var total_digital=hours+":"+minutes;return total_digital;},this)).append("title").text(_.bind(function(row){var duration=moment.duration(Math.round(row["total"]),"seconds");var hours=Math.floor(duration.asHours());var total_decimal=utils.formatDurationAsDecimal(hours,duration.minutes());var total_human=duration.minutes()+" min"+
(duration.minutes()!=1?"s":"");if(hours>0){var total_hours=hours+" hr"+(hours!=1?"s":"");total_human=total_hours+" "+total_human;}
var total_seconds=duration.seconds()+" sec"+
(duration.seconds()!=1?"s":"");return total_human+" ( "+total_decimal+" hrs )";},this));size.totals.width=0;$graph.find(".chart g.project-totals").each(function(label,val){var w=$(val).width();if(w==0)w=val.getBoundingClientRect().width;if(w>size.totals.width)size.totals.width=Math.round(w);});chart.selectAll(".chart g.project-totals text.total-digital").attr("x",size.totals.width);size.block.x=size.row.margin.left+
size.project.margin.left+
size.project.width+
size.project.margin.right+
size.totals.margin.left+
size.totals.width+
size.totals.margin.right;size.block.y=size.row.margin.top;size.block.width=size.chart.width-
size.chart.margin.left-
size.chart.margin.right-
size.row.margin.left-
size.project.margin.left-
size.project.width-
size.project.margin.right-
size.totals.margin.left-
size.totals.width-
size.totals.margin.right-
size.row.margin.right;size.block.height=size.chart.height-
size.chart.margin.top-
size.chart.margin.bottom-
size.row.margin.top-
size.row.margin.bottom;var toggleTimeLabels=!!(size.block.width<400);var start=moment(this.data.durations.start);var end=moment(this.data.durations.end);var x_linear=d3.scaleLinear().domain([start.unix(),end.unix()]).range([0,size.block.width]);var x_duration_linear=d3.scaleLinear().domain([0,end.unix()-start.unix()]).range([0,size.block.width]);var x_time=d3.scaleTime().domain([moment.unix(start.unix()).tz(this.options.timezone).toDate(),moment.unix(end.unix()+1).tz(this.options.timezone).toDate()]).range([0,size.block.width]);var units="hours";function timeFormat(date){var t=moment(date).tz(this.options.timezone);if(toggleTimeLabels&&t.hour()%2!=0)return"";return this.options.time_format_24hr?t.format("HH"):t.format("ha").replace("pm","p").replace("am","a");}
var customTicks=function(units){if(units=="hours")
return[d3.timeHour,$(window).width()>1000?1:2];if(units=="days")return[d3.timeDay,1];if(units=="months")return[d3.timeMonth,1];};var ticks=customTicks(units);var xAxis=d3.axisTop().scale(x_time).ticks(ticks[0],ticks[1]).tickPadding(5).tickFormat(_.bind(timeFormat,this));var blocks=chart.append("g").attr("class","chart-blocks").attr("width",size.block.width).attr("transform","translate("+size.block.x+", "+size.block.y+")");blocks.selectAll("rect").data(durations).enter().append("rect").style("fill",_.bind(function(d){return(this.projectColorsByName[this.lower(d.project)]||(light_theme?"#000":"#fff"));},this)).attr("x",function(d){return x_linear(d["time"]);}).attr("y",_.bind(function(d){var id=d.project;var i=rowMap[id];return(i*(size.row.height+
size.row.margin.top+
size.row.margin.bottom)+
size.block.margin.top);},this)).attr("width",function(d){return x_duration_linear(d["duration"]);}).attr("height",size.row.height-size.block.margin.top-size.block.margin.bottom).append("title").text(_.bind(function(d){var duration=moment.duration(Math.round(d["duration"]),"seconds");var hours=Math.floor(duration.asHours());var minutes=this.formatMinutes(duration.minutes());var total_human=duration.minutes()+" min"+
(duration.minutes()!=1?"s":"");if(hours>0){var total_hours=hours+" hr"+(hours!=1?"s":"");total_human=total_hours+", "+total_human;}
var total_decimal=utils.formatDurationAsDecimal(hours,duration.minutes());var from=moment.unix(Math.round(d["time"])).tz(this.options.timezone);var until=moment.unix(Math.round(d["time"]+d["duration"])).tz(this.options.timezone);return(total_human+" ( "+
total_decimal+" hrs ) "+"from "+
(this.options.time_format_24hr?from.format("HH:mm"):from.format("h:mma"))+" until "+
(this.options.time_format_24hr?until.format("HH:mm"):until.format("h:mma")));},this));blocks.selectAll("line.y axis").data(this.durationsChartRows).enter().append("line").attr("class","y axis").attr("x1",0).attr("x2",size.block.width).attr("y1",function(row,i){return(size.row.height+
size.row.margin.top+
i*(size.row.height+size.row.margin.top+size.row.margin.bottom));}).attr("y2",function(row,i){return(size.row.height+
size.row.margin.top+
i*(size.row.height+size.row.margin.top+size.row.margin.bottom));});blocks.append("g").attr("fill",light_theme?"#757575":"#a9a9a9").attr("class","x axis").attr("transform","translate(0,"+-size.row.margin.top+")").call(xAxis);blocks.selectAll("g.x.axis g.tick line").attr("class","x axis");blocks.append("line").attr("class","x axis").attr("y1",-size.row.margin.top).attr("y2",size.block.height+size.row.margin.bottom);blocks.append("line").attr("class","x axis").attr("x1",size.block.width).attr("x2",size.block.width).attr("y1",-size.row.margin.top).attr("y2",size.block.height+size.row.margin.bottom);this.adjustDurationChartHeights();},renderDurationsSettings:function(){if(this.loadtimes.heartbeats){utils.logPageTimingMetric("dashboard_heartbeats",{final_render_time:Date.now()-this.loadtimes.heartbeats});this.loadtimes.heartbeats=null;}
var data={timeout:this.options.timeout};var html=Mustache.render(this.templates.durations_settings,data);this.$el.find("#total-logged-time .popover .popover-content").html(html);this.$el.find('#total-logged-time input[type="range"]').rangeslider({polyfill:false,onSlide:_.bind(this.onSlide,this)});this.$el.find("#total-logged-time .popover .popover-content .btn-success").on("click",_.bind(this.onSaveTimeout,this));},renderDurationsSliceByChart:function(durations){var $graph=this.$el.find("#durations-slice-by-chart");if(!$graph.length)return;if(!_.isArray(durations))
durations=this.data.durations_slice_by.toJSON();if(durations.length==0){$graph.html('<div class="center-xs m-top-xs-30">No coding stats for this day.</div>');return;}else{$graph.empty();}
var light_theme=$("body").hasClass("color_scheme-Light");var rowMap={};_.each(this.durationsSliceByChartRows,function(p,index){rowMap[p.name]=index;});var size={chart:{margin:{top:30,bottom:10,left:40,right:0}},row:{margin:{top:2,bottom:2,left:0,right:18},height:30},project:{height:20,margin:{top:0,bottom:0,left:0,right:0}},totals:{height:20,margin:{top:0,bottom:0,left:30,right:30}},block:{margin:{top:3,bottom:3,left:0,right:0}}};size.chart.width=$graph.width()-size.chart.margin.left-size.chart.margin.right;size.chart.height=this.durationsSliceByChartRows.length*(size.row.height+size.row.margin.top+size.row.margin.bottom)+
size.chart.margin.top+
size.chart.margin.bottom;if(size.chart.width<700){size.chart.margin.left=0;size.row.margin.right=8;size.totals.margin.left=5;size.totals.margin.right=5;size.chart.width=$graph.width()-size.chart.margin.left-size.chart.margin.right;}
$(".d3-path-tip").remove();var chart=d3.select($graph.get(0)).append("svg").attr("class","chart").attr("width",size.chart.width).attr("height",size.chart.height).append("g").attr("transform","translate("+
size.chart.margin.left+", "+
size.chart.margin.top+")");chart.selectAll("g.y.axis").data(this.durationsSliceByChartRows).enter().append("g").attr("class","y axis").attr("transform",function(row,i){return("translate("+
size.row.margin.left+", "+
(size.row.margin.top+
i*(size.row.height+
size.row.margin.top+
size.row.margin.bottom))+")");});chart.selectAll("g.y.axis").append("a").attr("class","y axis").append("text").attr("class","y axis");chart.selectAll("g.y.axis text.y.axis").attr("transform","translate("+
size.project.margin.left+", "+
(size.row.height-size.project.height/2+3)+")").attr("text-anchor","end").text(_.bind(function(row){return row.name;},this));size.project.width=0;$graph.find(".chart text.y.axis").each(function(label,val){var w=Math.abs($(val).width());if(w<=0)w=val.getBoundingClientRect().width;if(w>size.project.width)size.project.width=Math.round(w);});chart.selectAll("g.y.axis text.y.axis").attr("x",size.project.width);var totals=chart.selectAll("g.project-totals").data(this.durationsSliceByChartRows).enter().append("g").attr("class","project-totals").attr("transform",function(row,i){return("translate("+
(size.row.margin.left+
size.project.margin.left+
size.project.width+
size.project.margin.right+
size.totals.margin.left)+", "+
(size.row.margin.top+
i*(size.row.height+
size.row.margin.top+
size.row.margin.bottom))+")");});totals.append("text").attr("class","total-digital").attr("transform","translate(0, "+(size.row.height-size.totals.height/2+3)+")").attr("text-anchor","end").style("fill",light_theme?"#4c4c4c":"#dedede").text(_.bind(function(row){var duration=moment.duration(Math.round(row["total"]),"seconds");var hours=Math.floor(duration.asHours());var minutes=this.formatMinutes(duration.minutes());var total_digital=hours+":"+minutes;return total_digital;},this)).append("title").text(_.bind(function(row){var duration=moment.duration(Math.round(row["total"]),"seconds");var hours=Math.floor(duration.asHours());var total_decimal=utils.formatDurationAsDecimal(hours,duration.minutes());var total_human=duration.minutes()+" min"+
(duration.minutes()!=1?"s":"");if(hours>0){var total_hours=hours+" hr"+(hours!=1?"s":"");total_human=total_hours+" "+total_human;}
var total_seconds=duration.seconds()+" sec"+
(duration.seconds()!=1?"s":"");return total_human+" ( "+total_decimal+" hrs )";},this));size.totals.width=0;$graph.find(".chart g.project-totals").each(function(label,val){var w=$(val).width();if(w==0)w=val.getBoundingClientRect().width;if(w>size.totals.width)size.totals.width=Math.round(w);});chart.selectAll(".chart g.project-totals text.total-digital").attr("x",size.totals.width);size.block.x=size.row.margin.left+
size.project.margin.left+
size.project.width+
size.project.margin.right+
size.totals.margin.left+
size.totals.width+
size.totals.margin.right;size.block.y=size.row.margin.top;size.block.width=size.chart.width-
size.chart.margin.left-
size.chart.margin.right-
size.row.margin.left-
size.project.margin.left-
size.project.width-
size.project.margin.right-
size.totals.margin.left-
size.totals.width-
size.totals.margin.right-
size.row.margin.right;size.block.height=size.chart.height-
size.chart.margin.top-
size.chart.margin.bottom-
size.row.margin.top-
size.row.margin.bottom;var toggleTimeLabels=!!(size.block.width<400);var start=moment(this.data.durations_slice_by.start);var end=moment(this.data.durations_slice_by.end);var x_linear=d3.scaleLinear().domain([start.unix(),end.unix()]).range([0,size.block.width]);var x_duration_linear=d3.scaleLinear().domain([0,end.unix()-start.unix()]).range([0,size.block.width]);var x_time=d3.scaleTime().domain([moment.unix(start.unix()).tz(this.options.timezone).toDate(),moment.unix(end.unix()+1).tz(this.options.timezone).toDate()]).range([0,size.block.width]);var units="hours";function timeFormat(date){var t=moment(date).tz(this.options.timezone);if(toggleTimeLabels&&t.hour()%2!=0)return"";return this.options.time_format_24hr?t.format("HH"):t.format("ha").replace("pm","p").replace("am","a");}
var customTicks=function(units){if(units=="hours")
return[d3.timeHour,$(window).width()>1000?1:2];if(units=="days")return[d3.timeDay,1];if(units=="months")return[d3.timeMonth,1];};var ticks=customTicks(units);var xAxis=d3.axisTop().scale(x_time).ticks(ticks[0],ticks[1]).tickPadding(5).tickFormat(_.bind(timeFormat,this));var blocks=chart.append("g").attr("class","chart-blocks").attr("width",size.block.width).attr("transform","translate("+size.block.x+", "+size.block.y+")");blocks.selectAll("rect").data(durations).enter().append("rect").style("fill",_.bind(function(d){var slice_by=this.sliceByMap[this.options.durations_slice_by];if(slice_by=="category"){return bootstrapped.category_colors[d[slice_by]]||"#1f9aef";}else if(slice_by=="language"){return bootstrapped.language_colors[d[slice_by]]||"#1f9aef";}else if(slice_by=="editor"){return bootstrapped.editor_colors[d[slice_by]]||"#1f9aef";}else if(slice_by=="os"){return bootstrapped.os_colors[d[slice_by]]||"#1f9aef";}else if(slice_by=="machine"){var id=d[this.sliceByMap[this.options.durations_slice_by]];var i=rowMap[id];return(bootstrapped.project_colors.colors[i-1%bootstrapped.project_colors.colors.length]||"#1f9aef");}},this)).attr("x",function(d){return x_linear(d["time"]);}).attr("y",_.bind(function(d){var id=d[this.sliceByMap[this.options.durations_slice_by]];var i=rowMap[id];return(i*(size.row.height+
size.row.margin.top+
size.row.margin.bottom)+
size.block.margin.top);},this)).attr("width",function(d){return x_duration_linear(d["duration"]);}).attr("height",size.row.height-size.block.margin.top-size.block.margin.bottom).append("title").text(_.bind(function(d){var duration=moment.duration(Math.round(d["duration"]),"seconds");var hours=Math.floor(duration.asHours());var minutes=this.formatMinutes(duration.minutes());var total_human=duration.minutes()+" min"+
(duration.minutes()!=1?"s":"");if(hours>0){var total_hours=hours+" hr"+(hours!=1?"s":"");total_human=total_hours+", "+total_human;}
var total_decimal=utils.formatDurationAsDecimal(hours,duration.minutes());var from=moment.unix(Math.round(d["time"])).tz(this.options.timezone);var until=moment.unix(Math.round(d["time"]+d["duration"])).tz(this.options.timezone);return(total_human+" ( "+
total_decimal+" hrs ) "+"from "+
(this.options.time_format_24hr?from.format("HH:mm"):from.format("h:mma"))+" until "+
(this.options.time_format_24hr?until.format("HH:mm"):until.format("h:mma")));},this));blocks.selectAll("line.y axis").data(this.durationsSliceByChartRows).enter().append("line").attr("class","y axis").attr("x1",0).attr("x2",size.block.width).attr("y1",function(row,i){return(size.row.height+
size.row.margin.top+
i*(size.row.height+size.row.margin.top+size.row.margin.bottom));}).attr("y2",function(row,i){return(size.row.height+
size.row.margin.top+
i*(size.row.height+size.row.margin.top+size.row.margin.bottom));});blocks.append("g").attr("fill",light_theme?"#757575":"#a9a9a9").attr("class","x axis").attr("transform","translate(0,"+-size.row.margin.top+")").call(xAxis);blocks.selectAll("g.x.axis g.tick line").attr("class","x axis");blocks.append("line").attr("class","x axis").attr("y1",-size.row.margin.top).attr("y2",size.block.height+size.row.margin.bottom);blocks.append("line").attr("class","x axis").attr("x1",size.block.width).attr("x2",size.block.width).attr("y1",-size.row.margin.top).attr("y2",size.block.height+size.row.margin.bottom);this.adjustDurationChartHeights();},adjustDurationChartHeights:function(){var maxHeightLargeScreens=215;var minHeightLargeScreens=100;var durationsChartHeight=parseInt(this.$el.find("#durations-chart svg.chart").attr("height"));var durationsSliceByChartHeight=parseInt(this.$el.find("#durations-slice-by-chart svg.chart").attr("height"));if(!durationsChartHeight||!durationsSliceByChartHeight)return;var maxHeight=_.max([durationsChartHeight,durationsSliceByChartHeight]);if(utils.getScreenWidth()>=utils.screenWidth.md){if(maxHeight>maxHeightLargeScreens){maxHeight=maxHeightLargeScreens;}
if(maxHeight<minHeightLargeScreens){maxHeight=minHeightLargeScreens;}}
this.$el.find("#durations-chart").css("overflow-y","auto");this.$el.find("#durations-slice-by-chart").css("overflow-y","auto");var height=parseInt(maxHeight)+5;this.$el.find("#durations-chart").css("max-height",height+"px");this.$el.find("#durations-slice-by-chart").css("max-height",height+"px");var height=parseInt(maxHeight)+30;this.$el.find("#durations .inside").css("height",height+"px");this.$el.find("#durations-slice-by .inside").css("height",height+"px");},processHeartbeatsIntoDurations:function(){var start=utils.toMoment(this.data.durations.start,this.options.timezone).unix();var end=utils.toMoment(this.data.durations.end,this.options.timezone).unix();var heartbeats=this.data.heartbeats.toJSON();if(heartbeats.length>0){var yesterday=this.data.heartbeats.yesterday_heartbeat;if(yesterday&&heartbeats[0].time-yesterday.time<this.timeout*60){yesterday.time=utils.round(start,6);heartbeats.unshift(yesterday);}
var tomorrow=this.data.heartbeats.tomorrow_heartbeat;if(tomorrow&&tomorrow.time-_.last(heartbeats).time<this.timeout*60){tomorrow.time=utils.round(end,6);heartbeats.push(tomorrow);}}
var mini_durations=this.heartbeatsToMiniDurations(heartbeats);var mini_durations_with_ext=this.insertExternalDurations(mini_durations,start,end);var durations=this.combineMiniDurations(mini_durations_with_ext);return durations;},heartbeatsToMiniDurations:function(heartbeats){_.each(heartbeats,_.bind(function(heartbeat,index){var duration=0;var next_heartbeat=index<heartbeats.length-1?heartbeats[index+1]:undefined;heartbeat.project=heartbeat.project||"Unknown Project";heartbeat.language=heartbeat.language||"Other";if(next_heartbeat&&next_heartbeat.time-heartbeat.time<this.timeout*60){duration=next_heartbeat.time-heartbeat.time;if(duration<0)duration=0;}
heartbeat.duration=duration;},this));return heartbeats;},insertExternalDurations:function(mini_durations,start,end){var index=0;var maxindex=mini_durations.length;_.each(this.data.heartbeats.external_durations,_.bind(function(ext){while(index<maxindex&&mini_durations[index].time<ext.start_time)
index++;if(index<maxindex&&this.hasDurationBetween(mini_durations,index,ext.start_time,ext.end_time)){return;}
ext.time=ext.start_time;if(ext.start_time<start)ext.time=start;var end_time=ext.end_time;if(end_time>end)end_time=end;ext.duration=end_time-ext.time;ext.project=ext.project||"Unknown Project";mini_durations.splice(index,0,ext);index++;},this));return mini_durations;},hasDurationBetween:function(durations,index,start,end){if(index>0){if(durations[index-1].time+durations[index-1].duration>=start)
return true;if(durations[index].time>=start&&durations[index].time<end)
return true;}
return false;},combineMiniDurations:function(mini_durations){var last=null;var durations=[];var filters={};_.each(mini_durations,function(duration){if(duration["is_write"])
filters[this.lower(duration["project"])]=true;},this);for(var i=0;i<mini_durations.length;i++){var duration=mini_durations[i];if(this.options.writes_only&&!filters[this.lower(duration["project"])]){last=null;continue;}
var current=durations.length>0?_.last(durations):null;if(current&&this.shouldJoinDuration(duration,last,this.timeout)){var endtime=utils.round(duration["time"],2)+
utils.round(duration["duration"],2);current["duration"]=Math.round(endtime-utils.round(current["time"],2));if(current["duration"]<0)current["duration"]=0;}else{current=_.clone(duration);durations.push(current);}
last=duration;}
return durations;},lower:function(str){if(str)return str.toLowerCase();return str;},shouldJoinDuration:function(duration,last){if(!last)return false;if(this.lower(last.project)!=this.lower(duration.project))
return false;var last_time=last["time"]+last["duration"];var time_span=duration["time"]-last_time;if(time_span<0)time_span=0;if(time_span>this.timeout*60)return false;return true;},getDurationChartRows:function(durations){var rows={};if(!durations)durations=this.data.durations.toJSON();_.each(durations,_.bind(function(duration){var id=duration.project;if(rows[id]===undefined){rows[id]={id:id,name:id,project:duration.project,entity:duration.entity,branch:duration.branch,language:duration.language,total:0};}
rows[id].total+=duration.duration;},this));return _.sortBy(_.values(rows),function(p){return p.total;}).reverse();},getDurationSliceByChartRows:function(durations){var rows={};if(!durations)durations=this.data.durations_slice_by.toJSON();_.each(durations,_.bind(function(duration){var id=duration[this.sliceByMap[this.options.durations_slice_by]];if(rows[id]===undefined){rows[id]={id:id,name:id,project:duration.project,entity:duration.entity,branch:duration.branch,language:duration.language,total:0};}
rows[id].total+=duration.duration;},this));return _.sortBy(_.values(rows),function(p){return p.total;}).reverse();},getGrandTotal:function(rows){var grand_total=0;_.each(rows,function(r){grand_total+=r.total;},this);return this.formatGrandTotal(grand_total);},formatMinutes:function(minutes){if(minutes<10)minutes="0"+minutes;return minutes;},formatGrandTotal:function(total){var total=Math.round(total);var duration=moment.duration(total,"seconds");var hours=Math.floor(duration.asHours());var minutes=duration.minutes();var total_human=duration.minutes()+" min"+(duration.minutes()!=1?"s":"");if(hours>0){var total_hours=hours+" hr"+(hours!=1?"s":"");total_human=total_hours+" "+total_human;}
return $.trim(total_human);},renderProjects:function(projects){this.sortedProjects=_.sortBy(_.values(projects),function(project){return project.total;}).reverse();_.each(this.sortedProjects,function(project,index){project.url="/projects/"+encodeURIComponent(project.name);var html=Mustache.render($("#project-template").html(),{index:index,project:project,logged_time:utils.format_seconds(project.total),start:this.options.start,end:this.options.end});this.$el.find("#projects").append(html);},this);},chooseDate:function(e){e&&e.preventDefault();},shareProject:function(e){e&&e.preventDefault();var project_name=$(e.target).parent().parent().parent().attr("data-name");if(!project_name)
project_name=$(e.target).parent().parent().parent().parent().attr("data-name");utils.showModal({$el:this.$el,title:"Share a link to "+project_name});var Project=Backbone.Model.extend({url:"/api/v1/users/current/projects/"+
encodeURIComponent(project_name)+"/public_url"});var project=new Project();project.once("sync",function(){if(this.$el.find(".modal-body").length){var share_html=$("#project-share-template").html();var data=project.toJSON();if(this.options.start&&this.options.end&&project.get("public_url"))
data["public_url"]=data["public_url"]+"?start="+
encodeURIComponent(this.options.start)+"&end="+
encodeURIComponent(this.options.end);this.$el.find(".modal-body").html(Mustache.render(share_html,{project:data}));this.$el.find("#copy-project-url").tooltip({title:"click to copy"});var clipboard=utils.clickToCopy("#copy-project-url");this.$el.find(".modal-body .remove-share-link").on("click",function(e){e&&e.preventDefault();alertify.confirm('<div class="left-sm" style="padding:12px;"><h3 style="margin-top:0;position:relative;top:-30px;">Are you sure?</h3><hr style="margin-top:0;margin-bottom:0;position:relative;top:-30px;" />Are you sure you want to remove this link?<br /><br />Once removed, nobody else will be able to view this project.</div>',function(){project.once("sync",function(){$(".modal").modal("hide");},this);project.destroy({wait:true});},function(){});});}},this);project.save();},clickDurationsSettings:function(e){e&&e.preventDefault();this.$el.find("#durations-settings-link").popover({title:'Timeout Preference <i class="fa fa-question-circle tip m-left-sm-5" title="When you’re not using your text editor for longer than the timeout value, we stop counting you as actively coding."></i>',content:'<div class="center-xs p-top-xs-40"><img src="/static/img/ajax-loader.gif" border="0" /></div>',html:true,trigger:"manual",placement:"top"});this.$el.find("#durations-settings-link").on("shown.bs.popover",_.bind(function(){var cb=_.bind(function(e){if(this.$el.find("#total-logged-time .popover").length){if(!$.contains(this.$el.find("#total-logged-time .popover")[0],e.target)){this.timeout=this.options.timeout;this.renderHeartbeats();this.$el.find("#durations-settings-link").popover("destroy");}}else{$(document).off("click",cb);this.$el.find("#durations-settings-link").off("shown.bs.popover");}},this);$(document).on("click",cb);this.$el.find("#durations-settings-link").on("hidden.bs.popover",_.bind(function(){$(document).off("click",cb);},this));this.$el.find(".tip").tooltip();this.loadtimes.heartbeats=Date.now();this.data.heartbeats.fetch({data:{date:this.options.durations_date,surrounding_heartbeats:"true",external_durations:"true"}});},this));this.$el.find("#durations-settings-link").popover("show");},onSlide:function(position,value){this.$el.find("#total-logged-time .popover .popover-content .btn-success").removeClass("disabled").attr("disabled",false);this.timeout=value;this.$el.find("#timeout-title .value").text(this.timeout);this.renderHeartbeats();},onSaveTimeout:function(e){e&&e.preventDefault();this.$el.find("#total-logged-time .popover .popover-content .btn-success").addClass("disabled").attr("disabled","disabled");var timeout=parseInt(this.$el.find('#total-logged-time .popover .popover-content input[type="range"]').val());$.ajax({type:"PATCH",url:"/api/v1/users/current",contentType:"application/json",data:JSON.stringify({timeout:this.timeout})}).fail(_.bind(function(response){this.$el.find("#total-logged-time .popover .popover-content .btn-success").removeClass("disabled").attr("disabled",false);utils.set_form_errors(this.$el.find("#total-logged-time .popover .popover-content"),response.responseText);},this)).done(_.bind(function(response_data){this.options.timeout=this.timeout;this.$el.find("#durations-settings-link").popover("destroy");},this));},clickDurationsSliceBySettings:function(e){e&&e.preventDefault();this.$el.find("#durations-slice-by-settings-link").popover({title:'Segment By <i class="fa fa-question-circle tip m-left-sm-5" title="Primary key to use when slicing durations."></i>',content:Mustache.render(this.templates.durations_slice_by_settings,{options:_.map(["Category","Language","Editor","Operating System","Machine"],_.bind(function(option){return{value:option,is_selected:this.options.durations_slice_by===option,id:this.sliceByMap[option]};},this))}),html:true,trigger:"manual",placement:"top"});this.$el.find("#durations-slice-by-settings-link").on("shown.bs.popover",_.bind(function(){var cb=_.bind(function(e){if(this.$el.find("#total-logged-time .popover").length){if(!$.contains(this.$el.find("#total-logged-time .popover")[0],e.target)){this.$el.find("#durations-slice-by-settings-link").popover("destroy");}}else{$(document).off("click",cb);this.$el.find("#durations-slice-by-settings-link").off("shown.bs.popover");}},this);$(document).on("click",cb);this.$el.find("#durations-slice-by-settings-link").on("hidden.bs.popover",_.bind(function(){$(document).off("click",cb);},this));this.$el.find(".tip").tooltip();},this));this.$el.find("#durations-slice-by-settings-link").on("hidden.bs.popover",_.bind(function(){this.fetchDurationsSliceBy();},this));this.$el.find("#durations-slice-by-settings-link").popover("show");},onSaveSliceBy:function(e){e&&e.preventDefault();this.$el.find('#total-logged-time .popover .popover-content input[name="durations-slice-by-choice"]').addClass("disabled").attr("disabled","disabled");this.options.durations_slice_by=this.$el.find('.popover .popover-content input[name="durations-slice-by-choice"]:checked').val();$.ajax({type:"PATCH",url:"/api/v1/users/current",contentType:"application/json",data:JSON.stringify({durations_slice_by:this.options.durations_slice_by})}).fail(_.bind(function(response){this.$el.find('#total-logged-time .popover .popover-content input[name="durations-slice-by-choice"]').removeClass("disabled").attr("disabled",false);utils.set_form_errors(this.$el.find("#total-logged-time .popover .popover-content"),response.responseText);},this)).done(_.bind(function(response_data){this.$el.find("#durations-slice-by-settings-link").popover("destroy");},this));},prevDay:function(e){e&&e.preventDefault();var day=utils.toMoment(this.options.durations_date,this.options.timezone).subtract(1,"days");this.options.durations_date=day.format("YYYY-MM-DD");this.fetchDurations();},prevDaySliceBy:function(e){e&&e.preventDefault();var day=utils.toMoment(this.options.durations_slice_by_date,this.options.timezone).subtract(1,"days");this.options.durations_slice_by_date=day.format("YYYY-MM-DD");this.fetchDurationsSliceBy();},nextDay:function(e){e&&e.preventDefault();var day=utils.toMoment(this.options.durations_date,this.options.timezone).add(1,"days");var today=moment().tz(this.options.timezone);if(day.isAfter(today))return;this.options.durations_date=day.format("YYYY-MM-DD");this.fetchDurations();},nextDaySliceBy:function(e){e&&e.preventDefault();var day=utils.toMoment(this.options.durations_slice_by_date,this.options.timezone).add(1,"days");var today=moment().tz(this.options.timezone);if(day.isAfter(today))return;this.options.durations_slice_by_date=day.format("YYYY-MM-DD");this.fetchDurationsSliceBy();},getDay:function($circle){var classes=$circle.attr("class").split(" ");for(var i=0;i<5000;i++){if(_.contains(classes,"bb-circle-"+i)){return this.data.summaries.at(i).get("range").date;}}
console.error("Could not find day");},retrySummary:function(object,options){object._numRetries+=1;object.fetch({data:options.data});},summariesError:function(object,response,options){if(utils.canRetry(object,response)){utils.logPageTimingMetric("dashboard",{is_soft_timeout:true});this.retrySummary(object,options);}else{if(response&&response.status==504){utils.logPageTimingMetric("dashboard",{is_timeout:true});}
utils.endProgressBar();this.cached_seconds=-1;var data=utils.parse_errors(response.responseText);if(this.using_cache=="true"){if(_.contains(utils.upgrade_errors,data.error)){utils.showUpgradeToast({onDismiss:function(){}});}else{utils.set_form_errors(this.$el,response.responseText);}}else{if(_.contains(utils.upgrade_errors,data.error)){utils.showUpgradeToast({onDismiss:function(){}});}}}},durationsError:function(object,response){utils.endProgressBar();var data=utils.parse_errors(response.responseText);if(_.contains(utils.upgrade_errors,data.error)){utils.showUpgradeToast({onDismiss:function(){}});}else{utils.set_form_errors(this.$el,response.responseText);}
if(response&&response.status==504){utils.logPageTimingMetric("dashboard_durations",{is_timeout:true});}},durationsSliceByError:function(object,response){utils.endProgressBar();var data=utils.parse_errors(response.responseText);if(_.contains(utils.upgrade_errors,data.error)){utils.showUpgradeToast({onDismiss:function(){}});}else{utils.set_form_errors(this.$el,response.responseText);}
if(response&&response.status==504){utils.logPageTimingMetric("dashboard_durations_slice_by",{is_timeout:true});}},heartbeatsError:function(object,response){var $popover=this.$el.find("#total-logged-time .popover .popover-content");utils.set_form_errors($popover,response.responseText);if(response&&response.status==504){utils.logPageTimingMetric("dashboard_heartbeats",{is_timeout:true});}},showEntities:function(name,type){utils.showModal({$el:this.$el,title:name});var entities=new Entities();entities.on("sync",function(){if(this.$el.find(".modal-body").length){this.$el.find(".modal-body").html(Mustache.render(this.templates.entities_modal,{entities:entities.get("entities"),is_main_dashboard:true}));}
utils.logPageTimingMetric("dashboard_"+type,{final_render_time:Date.now()-this.loadtimes.entities});},this);this.loadtimes.entities=Date.now();var data={start:this.options.start,end:this.options.end};data[type]=name;entities.fetch({data:data});},download:function(e){e&&e.preventDefault();if(!this.options.has_premium_features){utils.showUpgradeToast({body:"Downloading dashboards is a Premium feature."});return;}
var formats=[{name:"JSON",value:"json"},{name:"CSV",value:"csv"}];utils.showModal({$el:this.$el,class:"download-modal",title:"Download "+this.range.text,body:Mustache.render(this.templates.download,{formats:_.map(formats,function(format){if(bootstrapped.download_format==format.value)
format.is_selected=true;return format;},this),start:this.options.start,end:this.options.end,csrf_token:utils.getCookie("csrftoken")}),hide_buttons:true});},downloadSubmit:function(e){var data=utils.get_form_inputs($(".modal form"));bootstrapped.download_format=data.format;utils.hideModal();},fetchSummaries:function(use_cache){if(this.logged_time_by_project_chart)
this.logged_time_by_project_chart.destroy();if(this.languages_used_chart)this.languages_used_chart.destroy();if(this.editors_used_chart)this.editors_used_chart.destroy();if(this.categories_used_chart)this.categories_used_chart.destroy();if(this.daily_average_chart)this.daily_average_chart.destroy();use_cache=use_cache===false?"false":"true";if(use_cache=="true")utils.startProgressBar();this.using_cache=use_cache;this.loadtimes.summaries=Date.now();this.data.summaries.fetch({data:{start:this.options.start,end:this.options.end,cache:use_cache}});if(use_cache=="true"){this.options.durations_date=this.options.end;this.options.durations_slice_by_date=this.options.end;this.fetchDurations();this.fetchDurationsSliceBy();}else{this.checkStaleDurations();this.checkStaleDurationsSliceBy();}},checkStaleDurations:function(){var stale=!!_.find(this.data.summaries.toJSON(),_.bind(function(summary){if(summary.range.date==this.options.durations_date){var grand_total=0;_.each(this.durationsChartRows,function(r){grand_total+=r.total;},this);if(summary.grand_total.total_seconds!=grand_total){return true;}}
return false;},this));if(stale)this.fetchDurations(stale);},checkStaleDurationsSliceBy:function(){var stale=!!_.find(this.data.summaries.toJSON(),_.bind(function(summary){if(summary.range.date==this.options.durations_slice_by_date){var grand_total=0;_.each(this.durationsSliceByChartRows,function(r){grand_total+=r.total;},this);if(summary.grand_total.total_seconds!=grand_total){return true;}}
return false;},this));if(stale)this.fetchDurationsSliceBy(stale);},fetchDurations:function(stale){if(this.$el.find("#durations").length){if(this.options.durations_timeout){this.$el.find("#durations-chart").html('<div class="center-xs p-top-xs-40"><img src="/static/img/ajax-loader.gif" border="0" /></div>');}else{this.$el.find("#durations .inside").html('<div class="center-xs p-top-xs-40"><img src="/static/img/ajax-loader.gif" border="0" /></div>');}}
var date=utils.toMoment(this.options.durations_date,this.options.timezone);var today=moment().tz(this.options.timezone);if(date.isAfter(today)){this.options.durations_date=today.format("YYYY-MM-DD");}
var data={date:this.options.durations_date};if(stale)data["use_cache"]="false";this.loadtimes.durations=Date.now();this.data.durations.fetch({data:data});},fetchDurationsSliceBy:function(stale){if(this.$el.find("#durations-slice-by").length){if(this.options.durations_slice_by){this.$el.find("#durations-slice-by-chart").html('<div class="center-xs p-top-xs-40"><img src="/static/img/ajax-loader.gif" border="0" /></div>');}else{this.$el.find("#durations-slice-by .inside").html('<div class="center-xs p-top-xs-40"><img src="/static/img/ajax-loader.gif" border="0" /></div>');}}
var date=utils.toMoment(this.options.durations_slice_by_date,this.options.timezone);var today=moment().tz(this.options.timezone);if(date.isAfter(today)){this.options.durations_slice_by_date=today.format("YYYY-MM-DD");}
var data={date:this.options.durations_slice_by_date,slice_by:this.sliceByMap[this.options.durations_slice_by]};if(stale)data["use_cache"]="false";this.loadtimes.durations_slice_by=Date.now();this.data.durations_slice_by.fetch({data:data});},setRangeInUrl:function(start,end){var params={start:start,end:end};if(params.start!==this.options.start||params.end!==this.options.end){this.options.start=start;this.options.end=end;utils.updateUrl({params:params,callback:_.bind(this.fetchSummaries,this)});}},changeHistory:function(e){var params=utils.getUrlParams();var today=moment().tz(this.options.timezone);if(!params["end"])
params["end"]=bootstrapped.end||today.format("YYYY-MM-DD");if(!params["start"])
params["start"]=bootstrapped.start||today.subtract(6,"days").format("YYYY-MM-DD");if(params.start!==this.options.start||params.end!==this.options.end){this.options.start=params.start;this.options.end=params.end;this.fetchSummaries();}},start:function(){this.ranges=utils.getTimeRanges(this.options.timezone,this.options.weekday_start);if(!this.options.start||!this.options.end){if(_.isString(this.options.preset)&&this.ranges[this.options.preset]){this.options.start=this.ranges[this.options.preset][0].format("YYYY-MM-DD");this.options.end=this.ranges[this.options.preset][1].format("YYYY-MM-DD");}else{if(!this.options.has_premium_features&&moment().tz(this.options.timezone).subtract(13,"days")>this.ranges[bootstrapped.user.default_dashboard_range][0]){this.options.start=this.ranges["Last 7 Days"][0].format("YYYY-MM-DD");this.options.end=this.ranges["Last 7 Days"][1].format("YYYY-MM-DD");}else{this.options.start=this.ranges[bootstrapped.user.default_dashboard_range][0].format("YYYY-MM-DD");this.options.end=this.ranges[bootstrapped.user.default_dashboard_range][1].format("YYYY-MM-DD");}}}
this.fetchSummaries();},initialize:function(options){this.options=_.defaults(options||{},{});window.onpopstate=_.bind(this.changeHistory,this);this.listenTo(this.data.summaries,"sync",this.render);this.listenTo(this.data.summaries,"error",this.summariesError);this.listenTo(this.data.durations,"sync",this.renderDurations);this.listenTo(this.data.durations,"error",this.durationsError);this.listenTo(this.data.durations_slice_by,"sync",this.renderDurationsSliceBy);this.listenTo(this.data.durations_slice_by,"error",this.durationsSliceByError);this.listenTo(this.data.heartbeats,"sync",this.renderDurationsSettings);this.listenTo(this.data.heartbeats,"error",this.heartbeatsError);if(this.options.timezone){this.start();}else{var tz=utils.guessTimeZone();if(tz){this.options.timezone=tz;utils.updateTimeZone(this.options.timezone,{success:this.start,error:this.error,context:this});}else{this.error(null,{responseText:'{"error": "Set a timezone in your account settings."}'});}}
$(window).resize($.throttle(1000,_.bind(this.renderDurationsChart,this)));$(window).resize($.throttle(1000,_.bind(this.renderDurationsSliceByChart,this)));Wakalert.fetch();}});var dashboard=new View({timezone:bootstrapped.timezone,start:bootstrapped.start,end:bootstrapped.end,timeout:bootstrapped.timeout,writes_only:bootstrapped.writes_only,preset:bootstrapped.preset,has_premium_features:bootstrapped.has_premium_features,weekday_start:bootstrapped.weekday_start,date_format:bootstrapped.date_format||"YYYY-MM-DD",time_format_24hr:bootstrapped.time_format_24hr,durations_slice_by:bootstrapped.user.durations_slice_by});});