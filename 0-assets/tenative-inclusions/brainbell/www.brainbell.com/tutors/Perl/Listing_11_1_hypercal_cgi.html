<!DOCTYPE html>
<html lang="en-US">

<!-- Mirrored from www.brainbell.com/tutors/Perl/Listing_11_1_hypercal_cgi.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Feb 2021 02:58:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset="UTF-8">
<script data-ezscrex='false' data-cfasync='false' data-pagespeed-no-defer>var __ez=__ez||{};__ez.stms=Date.now();__ez.evt={};__ez.script={};__ez.ck=__ez.ck||{};__ez.template={};__ez.template.isOrig=true;__ez.queue=(function(){var count=0,incr=0,items=[],timeDelayFired=false,hpItems=[],lpItems=[],allowLoad=true;var obj={func:function(name,funcName,parameters,isBlock,blockedBy,deleteWhenComplete,proceedIfError){var self=this;this.name=name;this.funcName=funcName;this.parameters=parameters===null?null:(parameters instanceof Array)?parameters:[parameters];this.isBlock=isBlock;this.blockedBy=blockedBy;this.deleteWhenComplete=deleteWhenComplete;this.isError=false;this.isComplete=false;this.isInitialized=false;this.proceedIfError=proceedIfError;this.isTimeDelay=false;this.process=function(){log("... func = "+name);self.isInitialized=true;self.isComplete=true;log("... func.apply: "+name);var funcs=self.funcName.split('.');var func=null;if(funcs.length>3){}else if(funcs.length===3){func=window[funcs[0]][funcs[1]][funcs[2]];}else if(funcs.length===2){func=window[funcs[0]][funcs[1]];}else{func=window[self.funcName];}
if(typeof func!=='undefined'&&func!==null){func.apply(null,this.parameters);}
if(self.deleteWhenComplete===true)delete items[name];if(self.isBlock===true){log("----- F'D: "+self.name);processAll();}}},file:function(name,path,isBlock,blockedBy,async,defer,proceedIfError){var self=this;this.name=name;this.path=path;this.async=async;this.defer=defer;this.isBlock=isBlock;this.blockedBy=blockedBy;this.isInitialized=false;this.isError=false;this.isComplete=false;this.proceedIfError=proceedIfError;this.isTimeDelay=false;this.process=function(){self.isInitialized=true;log("... file = "+name);var scr=document.createElement('script');scr.src=path;if(async===true)scr.async=true;else if(defer===true)scr.defer=true;scr.onerror=function(){log("----- ERR'D: "+self.name);self.isError=true;if(self.isBlock===true){processAll();}};scr.onreadystatechange=scr.onload=function(){var state=scr.readyState;log("----- F'D: "+self.name);if((!state||/loaded|complete/.test(state))){self.isComplete=true;if(self.isBlock===true){processAll();}}};document.getElementsByTagName('head')[0].appendChild(scr);}}};function init(){window.addEventListener("load",function(){setTimeout(function(){timeDelayFired=true;log('TDELAY -----');processAll();},5000);},false);}
function addFile(name,path,isBlock,blockedBy,async,defer,proceedIfError,priority){var item=new obj.file(name,path,isBlock,blockedBy,async,defer,proceedIfError);if(priority===true){hpItems[name]=item}else{lpItems[name]=item}
items[name]=item;checkIfBlocked(item);}
function setallowLoad(settobool){allowLoad=settobool}
function addFunc(name,func,parameters,isBlock,blockedBy,autoInc,deleteWhenComplete,proceedIfError,priority){if(autoInc===true)name=name+"_"+incr++;var item=new obj.func(name,func,parameters,isBlock,blockedBy,deleteWhenComplete,proceedIfError);if(priority===true){hpItems[name]=item}else{lpItems[name]=item}
items[name]=item;checkIfBlocked(item);}
function addTimeDelayFile(name,path){var item=new obj.file(name,path,false,[],false,false,true);item.isTimeDelay=true;log(name+' ... '+' FILE! TDELAY');lpItems[name]=item;items[name]=item;checkIfBlocked(item);}
function addTimeDelayFunc(name,func,parameters){var item=new obj.func(name,func,parameters,false,[],true,true);item.isTimeDelay=true;log(name+' ... '+' FUNCTION! TDELAY');lpItems[name]=item;items[name]=item;checkIfBlocked(item);}
function checkIfBlocked(item){if(isBlocked(item)===true||allowLoad==false)return;item.process();}
function isBlocked(item){if(item.isTimeDelay===true&&timeDelayFired===false){log(item.name+" blocked = TIME DELAY!");return true;}
if(item.blockedBy instanceof Array){for(var i=0;i<item.blockedBy.length;i++){var block=item.blockedBy[i];if(items.hasOwnProperty(block)===false){log(item.name+" blocked = "+block);return true;}else if(item.proceedIfError===true&&items[block].isError===true){return false;}else if(items[block].isComplete===false){log(item.name+" blocked = "+block);return true;}}}
return false;}
function log(msg){var href=window.location.href;var reg=new RegExp('[?&]ezq=([^&#]*)','i');var string=reg.exec(href);var res=string?string[1]:null;if(res==="1")console.debug(msg);}
function processAll(){count++;if(count>200)return;log("let's go");processItems(hpItems);processItems(lpItems);}
function processItems(list){for(var i in list){if(list.hasOwnProperty(i)===false)continue;var item=list[i];if(item.isComplete===true||isBlocked(item)||item.isInitialized===true||item.isError===true){if(item.isError===true){log(item.name+': error')}else if(item.isComplete===true){log(item.name+': complete already')}else if(item.isInitialized===true){log(item.name+': initialized already')}}else{item.process();}}}
init();return{addFile:addFile,addDelayFile:addTimeDelayFile,addFunc:addFunc,addDelayFunc:addTimeDelayFunc,items:items,processAll:processAll,setallowLoad:setallowLoad};})();__ez.evt.add=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n()},__ez.evt.remove=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):delete e["on"+t]};__ez.script.add=function(e){var t=document.createElement("script");t.src=e,t.async=!0,t.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(t)};__ez.queue.addFile('https://www.brainbell.com/detroitchicago/boise.js', 'https://www.brainbell.com/detroitchicago/boise.js?gcb=192-11&amp;cb=1', false, [], true, false, true, false);__ez.dot={};__ez.queue.addFile('https://www.brainbell.com/detroitchicago/memphis.js', 'https://www.brainbell.com/detroitchicago/memphis.js?gcb=192-11&amp;cb=5', false, [], true, false, true, false);__ez.queue.addFile('https://www.brainbell.com/detroitchicago/minneapolis.js', 'https://www.brainbell.com/detroitchicago/minneapolis.js?gcb=192-11&amp;cb=3', false, [], true, false, true, false);__ez.vep=(function(){var pixels=[],pxURL="https://www.brainbell.com/detroitchicago/grapefruit.gif";function AddPixel(vID,pixelData){if(__ez.dot.isDefined(vID)&&__ez.dot.isValid(pixelData)){pixels.push({type:'video',video_impression_id:vID,domain_id:__ez.dot.getDID(),t_epoch:__ez.dot.getEpoch(0),data:__ez.dot.dataToStr(pixelData)});}}
function Fire(){if(typeof document.visibilityState!=='undefined'&&document.visibilityState==="prerender"){return;}
if(__ez.dot.isDefined(pixels)&&pixels.length>0){while(pixels.length>0){var j=5;if(j>pixels.length){j=pixels.length;}
var pushPixels=pixels.splice(0,j);var pixelURL=__ez.dot.getURL(pxURL)+"?orig="+(__ez.template.isOrig===true?1:0)+"&v="+btoa(JSON.stringify(pushPixels));__ez.dot.Fire(pixelURL);}}
pixels=[];}
return{Add:AddPixel,Fire:Fire};})();</script><script data-ezscrex='false' data-cfasync='false' data-pagespeed-no-defer>__ez.pel=(function(){var pixels=[],pxURL="https://www.brainbell.com/porpoiseant/army.gif";function AddAndFirePixel(adSlot,pixelData){AddPixel(adSlot,pixelData,0,0,0,0,0);Fire();}
function AddAndFireOrigPixel(adSlot,pixelData){AddPixel(adSlot,pixelData,0,0,0,0,0,true);Fire();}
function GetCurrentPixels(){return pixels;}
function AddPixel(adSlot,pixelData,revenue,est_revenue,bid_floor_filled,bid_floor_prev,stat_source_id,isOrig){if(!__ez.dot.isDefined(adSlot)||__ez.dot.isAnyDefined(adSlot.getSlotElementId,adSlot.ElementId)==false){return;}
var ad_position_id=parseInt(__ez.dot.getTargeting(adSlot,'ap'));var impId=__ez.dot.getSlotIID(adSlot),adUnit=__ez.dot.getAdUnit(adSlot,isOrig);var compId=parseInt(__ez.dot.getTargeting(adSlot,"compid"));var lineItemId=0;var creativeId=0;var ezimData=getEzimData(adSlot);if(typeof ezimData=='object'){if(ezimData.creative_id!==undefined){creativeId=ezimData.creative_id;}
if(ezimData.line_item_id!==undefined){lineItemId=ezimData.line_item_id;}}
if(__ez.dot.isDefined(impId,adUnit)&&__ez.dot.isValid(pixelData)){pixels.push({type:"impression",impression_id:impId,domain_id:__ez.dot.getDID(),unit:adUnit,t_epoch:__ez.dot.getEpoch(0),revenue:revenue,est_revenue:est_revenue,ad_position:ad_position_id,ad_size:"",bid_floor_filled:bid_floor_filled,bid_floor_prev:bid_floor_prev,stat_source_id:stat_source_id,country_code:__ez.dot.getCC(),pageview_id:__ez.dot.getPageviewId(),comp_id:compId,line_item_id:lineItemId,creative_id:creativeId,data:__ez.dot.dataToStr(pixelData),is_orig:isOrig||__ez.template.isOrig,});}}
function AddPixelById(impFullId,pixelData,isOrig){var vals=impFullId.split('https://www.brainbell.com/');if(__ez.dot.isDefined(impFullId)&&vals.length===3&&__ez.dot.isValid(pixelData)){var adUnit=vals[0],impId=vals[2];pixels.push({type:"impression",impression_id:impId,domain_id:__ez.dot.getDID(),unit:adUnit,t_epoch:__ez.dot.getEpoch(0),pageview_id:__ez.dot.getPageviewId(),data:__ez.dot.dataToStr(pixelData),is_orig:isOrig||__ez.template.isOrig});}}
function Fire(){if(typeof document.visibilityState!=='undefined'&&document.visibilityState==="prerender")return;if(__ez.dot.isDefined(pixels)&&pixels.length>0){var allPixels=[pixels.filter(function(pixel){return pixel.is_orig}),pixels.filter(function(pixel){return!pixel.is_orig})];allPixels.forEach(function(pixels){while(pixels.length>0){var isOrig=pixels[0].is_orig||false;var j=5;if(j>pixels.length){j=pixels.length;}
var pushPixels=pixels.splice(0,j);var pixelURL=__ez.dot.getURL(pxURL)+"?orig="+(isOrig===true?1:0)+"&sts="+btoa(JSON.stringify(pushPixels));if(typeof window.isAmp!=='undefined'&&isAmp&&typeof window._ezaq!=='undefined'&&_ezaq.hasOwnProperty("domain_id")){pixelURL+="&visit_uuid="+_ezaq['visit_uuid'];}
__ez.dot.Fire(pixelURL);}})}
pixels=[];}
function getEzimData(adSlot){if(typeof _ezim_d=="undefined"){return false}
var adUnitName=__ez.dot.getAdUnitPath(adSlot).split('https://www.brainbell.com/').pop();if(typeof _ezim_d==='object'&&_ezim_d.hasOwnProperty(adUnitName)){return _ezim_d[adUnitName];}
for(var ezimKey in _ezim_d){if(ezimKey.split('https://www.brainbell.com/').pop()===adUnitName){return _ezim_d[ezimKey];}}
return false;}
return{Add:AddPixel,AddAndFire:AddAndFirePixel,AddAndFireOrig:AddAndFireOrigPixel,AddById:AddPixelById,Fire:Fire,GetPixels:GetCurrentPixels,};})();__ez.queue.addFile('https://www.brainbell.com/detroitchicago/raleigh.js', 'https://www.brainbell.com/detroitchicago/raleigh.js?gcb=192-11&amp;cb=3', false, [], true, false, true, false);__ez.queue.addFile('https://www.brainbell.com/detroitchicago/tampa.js', 'https://www.brainbell.com/detroitchicago/tampa.js?gcb=192-11&amp;cb=3', false, [], true, false, true, false);</script>
<script data-ezscrex="false" data-cfasync="false">(function(){if("function"===typeof window.CustomEvent)return!1;window.CustomEvent=function(c,a){a=a||{bubbles:!1,cancelable:!1,detail:null};var b=document.createEvent("CustomEvent");b.initCustomEvent(c,a.bubbles,a.cancelable,a.detail);return b}})();</script><script data-ezscrex="false" data-cfasync="false">__ez.queue.addFile('https://www.brainbell.com/detroitchicago/tulsa.js', 'https://www.brainbell.com/detroitchicago/tulsa.js?gcb=192-11&amp;cb=5', false, [], true, false, true, false);</script>

<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Listing 11.1. hypercal.cgi : CGI and Perl</title>
<meta name="description" content="Listing 11.1. hypercal.cgi CGI and Perl tutorial">
<link rel="shortcut icon" href="https://www.brainbell.com/favicon.ico" >
<style type="text/css">
*,*::before,*::after {box-sizing: border-box}
html {font-family: sans-serif;line-height: 1.15;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;-ms-overflow-style: scrollbar;-webkit-tap-highlight-color: rgba(0, 0, 0, 0)}
@-ms-viewport {width: device-width}
article, aside, figcaption, figure, footer, header, hgroup, main, nav, section {display: block}
body {margin: 0;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";font-size: 1.1rem;font-weight: 400;line-height: 1.5;color: #212529;text-align: left;background-color: #fff}
[tabindex="-1"]:focus {outline: 0 !important}
hr {box-sizing: content-box;height: 0;overflow: visible;margin-top: 1rem;margin-bottom: 1rem;border: 0;border-top: 1px solid rgba(0, 0, 0, 0.1)}
h1, h2, h3, h4, h5, h6{margin-top: 0;margin-bottom: 0.5rem;font-family: inherit;font-weight: 500;line-height: 1.2;color: inherit}
h1{font-size: 2.5rem}h2{font-size: 2rem}h3{font-size: 1.75rem}h4{font-size: 1.5rem}h5{font-size: 1.3rem}h6{font-size: 1.2rem}
p {margin-top: 0;margin-bottom: 1rem}
abbr[title],abbr[data-original-title] {text-decoration: underline;-webkit-text-decoration: underline dotted;text-decoration: underline dotted;cursor: help;border-bottom: 0}
address {margin-bottom: 1rem;font-style: normal;line-height: inherit}

ol,ul,dl {margin-top: 0;margin-bottom: 1rem}ol ol,ul ul,ol ul,ul ol {margin-bottom: 0}
dt {font-weight: 700;}
dd {margin-bottom: .5rem;margin-left: 0;}

blockquote {padding:1rem 3rem;margin: 3rem 0;position:relative;border-radius:1rem}

blockquote::before{content: "“";left: .5rem;top: 1.8rem}
blockquote::after{content: "”";right: 2.5rem;bottom: -1.5rem}

blockquote::after, blockquote::before{font-family: georgia;font-size: 5rem;height: 2.5rem;width: 0;display:block;position:absolute}

dfn {font-style: italic;} b,strong {font-weight: bolder;}
small{font-size: 80%;font-weight: 400}
sub,sup {position: relative;font-size: 75%;line-height: 0;vertical-align: baseline}
sub {bottom: -.25em}
sup {top: -.5em}

a {color: #0074D9;background-color: transparent;-webkit-text-decoration-skip: objects}
a:hover {color: #002633;text-decoration:none}
a:not([href]):not([tabindex]) {color: inherit;text-decoration: none}
a:not([href]):not([tabindex]):hover, a:not([href]):not([tabindex]):focus {color: inherit;text-decoration: none}
a:not([href]):not([tabindex]):focus {outline: 0}

pre,code,kbd,samp,.slog {font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-size: 1em}
pre {margin-top: 0;margin-bottom: 2rem;overflow: auto;-ms-overflow-style: scrollbar;display: block;font-size: 87.5%;color: #212529;border:1px solid #eee !important;padding:.8rem !important;border-radius:8px;line-height:1.4rem}

figure {margin: 0 0 1rem}img {vertical-align: middle;border-style: none;border:0;height:auto;max-width:100%;width:auto} svg:not(:root) {overflow: hidden;vertical-align: middle}

table {border-collapse: collapse;width:100%;margin-bottom:2rem;}td,th{padding:0.25rem;border: 1px solid #dee2e6;}
blockquote,code, table tr:nth-of-type(2n) {background: #fbfbfb;}
caption {padding-top: 0.75rem;padding-bottom: 0.75rem;color: #6c757d;text-align: left;caption-side: bottom}
th {text-align: inherit}

summary {display: list-item;cursor: pointer}mark{padding: 0.2em;background-color: #fcf8e3}
code {color:#c7254e;word-break: break-word; font-size: 87.5%;}a > code {color: inherit}
kbd {padding: 0.2rem 0.4rem;color: #fff;background-color: #212529;border-radius: 0.2rem}
kbd kbd {padding: 0;font-weight: 700}
pre code {font-size: inherit;color: inherit;word-break: normal;}
video{display:block;max-width:75%}

.borderbox{border-left:3px solid #00f;padding:1rem 0.5rem 0;}
.line {margin: 0 auto;max-width: 71.25rem}.line:after{display: block;clear: both;content: "";}
.fullwidth{width:100%}

.button,#toc a{display:inline-block;cursor:pointer;text-align: center;white-space: nowrap;vertical-align: middle;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;border: 1px solid rgba(50,205,50,.5);padding: .375rem .75rem;line-height: 1.5;border-radius: .25rem;margin-bottom:0.3rem;color: #009600;text-decoration: none;}
.button ::-moz-focus-inner{padding: 0;border-style: none;}
#buttons{-webkit-box-pack:center;-ms-flex-pack: center;justify-content: center;padding: .5rem;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap: wrap;flex-wrap: wrap;-webkit-box-align: center;-ms-flex-align: center;align-items: center;display: -webkit-box;display: -ms-flexbox;display: flex;}
#navbar-brand {color: #000;display: inline-block;padding-top: .3125rem;padding-bottom: .3125rem;margin-left: 1rem;white-space: nowrap;-ms-touch-action: manipulation;touch-action: manipulation;text-decoration: none;background-color: transparent;-webkit-text-decoration-skip: objects;line-height: 1rem;font-size: 2.2rem;text-align: center}
#navbar-brand .bell {color: rgba(0,200,0,1)}
.slog {font-weight: normal;font-size: .85rem}
nav{padding:0.5rem;margin-top:0.5rem}
nav a.button{text-decoration:none;margin-left:0.3rem;flex:10rem}
#buttons{margin-top:1rem;display:none}
#menu{font-size:1.5rem;color:#000;display:block;margin-right:0.7rem}

#heading{padding: 6rem 1.25rem;background-color: #49BF4C;color: #fff;text-align: center}
#heading a{white-space:normal;color: #fff;text-decoration: none;border:1px solid #fff}
#heading h1{font-size: 2.5rem;line-height: 2.4rem;margin: 0;margin-bottom:1rem;font-weight: 400}
#wrapper{padding: 2.5rem 1.25rem;}
.leftcol{width: 66.6666%;position: relative;}
.rightcol{width: 33.3333%;}
.fltright{float:right}
.fltleft{float:left}
.rightcol, .leftcol{padding: 0 .625rem;position: relative;}
.entry-content, .entry-summary {color: #555;line-height: 2rem}
.cat_list{border-bottom: 1px solid rgba(0,0,0,.1);margin-bottom: 2.25rem}
.cat_list h2{margin:0;font-size:1.5rem;display:block}
.cat_list a{color: #49BF4C}
.hidden{display:none}
.gsa{text-align:center;margin-bottom:1.25rem;width:100%}
#toc a{display: block;font-weight: bold;text-align:left;white-space:normal}
footer{margin-top:2rem;background:#002633;padding:0.625rem;text-align:center;font-size:0.95rem}
footer,footer a,footer a:hover{color:#7697A2}
.next,.prev{display: inline-block;padding:.6rem;padding-top:0.05rem;padding-bottom:.25rem;border-radius:1rem;font-weight:bold;color:#fff;background:#009600}
@media screen and (max-width: 768px){
.leftcol,.rightcol{width:100%}
video{max-width:100%}
}

</style>

<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-1287605604486981",
          enable_page_level_ads: true
     });
</script>
<link rel='canonical' href='https://brainbell.com/tutors/Perl/Listing_11_1_hypercal_cgi.htm' />
<script type="text/javascript">var ezouid = "1";</script><base ><script type='text/javascript'>
var ezoTemplate = 'old_site_gc';
if(typeof ezouid == 'undefined')
{
    var ezouid = 'none';
}
var ezoFormfactor = '1';
var ezo_elements_to_check = Array();
</script><!-- START EZHEAD -->
<script data-ezscrex="false" type='text/javascript'>
var soc_app_id = '0';
var did = 83552;
var ezdomain = 'brainbell.com';
var ezoicSearchable = 1;
</script>
<!--{jquery}-->
<!-- END EZHEAD -->
<script data-ezscrex="false" type="text/javascript" data-cfasync="false">var _ezaq = {"ad_cache_level":0,"ad_lazyload_version":0,"city":"Union City","country":"US","days_since_last_visit":-1,"domain_id":83552,"domain_test_group":20200401,"engaged_time_visit":0,"ezcache_level":2,"ezcache_skip_code":0,"form_factor_id":1,"framework_id":1,"is_return_visitor":false,"is_sitespeed":0,"last_page_load":"","last_pageview_id":"","lt_cache_level":0,"metro_code":501,"page_ad_positions":"","page_view_count":355,"page_view_id":"a63ab729-696e-4837-628a-26c28feb7afe","position_selection_id":0,"postal_code":"07087","pv_event_count":0,"response_size_orig":25700,"response_time_orig":15,"serverid":"18.208.172.233:18068","state":"NJ","t_epoch":1613703245,"template_id":126,"time_on_site_visit":0,"url":"https://www.brainbell.com/tutors/Perl/Listing_11_1_hypercal_cgi.htm","user_id":0,"weather_precipitation":0,"weather_summary":"","weather_temperature":0,"word_count":1245,"worst_bad_word_level":0};var _ezExtraQueries = "&ez_orig=1";</script><script data-ezscrex='false' data-cfasync='false' type="text/javascript" src="https://www.brainbell.com/detroitchicago/rochester.js?dcb=192-11&amp;cb=2&amp;v=9" async></script>
<script data-ezscrex='false' data-pagespeed-no-defer data-cfasync='false'>
function create_ezolpl(pvID, rv) {
    var d = new Date();
    d.setTime(d.getTime() + (365*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    __ez.ck.setByCat("ezux_lpl_83552=" + new Date().getTime() + "|" + pvID + "|" + rv + "; " + expires, 3);
}
function attach_ezolpl(pvID, rv) {
    if (document.readyState === "complete") {
        create_ezolpl(pvID, rv);
    }
    if(window.attachEvent) {
        window.attachEvent("onload", create_ezolpl, pvID, rv);
    } else {
        if(window.onload) {
            var curronload = window.onload;
            var newonload = function(evt) {
                curronload(evt);
                create_ezolpl(pvID, rv);
            };
            window.onload = newonload;
        } else {
            window.onload = create_ezolpl.bind(null, pvID, rv);
        }
    }
}

__ez.queue.addFunc("attach_ezolpl", "attach_ezolpl", ["a63ab729-696e-4837-628a-26c28feb7afe", "false"], false, ['/detroitchicago/boise.js'], true, false, false, false);
</script></head>
<body>
<header role="banner">
	<div class="line">
		<nav id="navbar" role="navigation" aria-label="Primary Menu">
			<a id="navbar-brand" href="https://www.brainbell.com/" rel="home" itemprop="url">Brain<span class="bell">Bell</span><br><span class="slog">makes easier to learn</span></a>
			<span class="button fltright" id="menu">&#9776;</span>
<!--menu-->
<div id="buttons">
<a class="button" title="A+" href="https://www.brainbell.com/tutors/A+/Hardware/">A+ Certification</a>
<a class="button" title="Android" href="https://www.brainbell.com/android/">Android</a>
<a class="button" title="ASP" href="https://www.brainbell.com/tutorials/ASP/">ASP</a>
<a class="button" title="3D, Blender and Unity" href="https://www.brainbell.com/3d/">Blender &amp; Unity</a>
<a class="button" title="C" href="https://www.brainbell.com/tutors/c/Advice_and_Warnings_for_C/">C Language</a>
<a class="button" title="C#" href="https://www.brainbell.com/tutors/C_Sharp/">C#</a>
<a class="button" title="Flash" href="https://www.brainbell.com/tutorials/Flash/">Flash</a>
<a class="button" title="HTML and CSS" href="https://www.brainbell.com/tutorials/HTML_and_CSS/">HTML &amp; CSS</a>
<a class="button" title="Java" href="https://www.brainbell.com/tutorials/java/">Java</a>
<a class="button" title="JavaScript" href="https://www.brainbell.com/javascript/">JavaScript</a>
<a class="button" title="MS Access" href="https://www.brainbell.com/tutorials/ms-office/Access_2003/">MS Access</a>
<a class="button" title="MS Excel" href="https://www.brainbell.com/tutorials/ms-office/excel/">MS Excel</a>
<a class="button" title="MS FrontPage" href="https://www.brainbell.com/tutorials/ms-office/FrontPage_2003/">MS FrontPage</a>
<a class="button" title="MS PowerPoint" href="https://www.brainbell.com/tutorials/ms-office/PowerPoint/">MS PowerPoint</a>
<a class="button" title="MS Word" href="https://www.brainbell.com/tutorials/ms-office/Word/">MS Word</a>
<a class="button" title="MySQL" href="https://www.brainbell.com/tutorials/MySQL/">MySQL</a>
<a class="button" title="Networking" href="https://www.brainbell.com/tutorials/Networking/">Networking</a>
<a class="button" title="Perl CGI" href="https://www.brainbell.com/tutors/Perl/">Perl &amp; CGI</a>
<a class="button" title="PHP &amp; MySQL" href="https://www.brainbell.com/tutorials/php/">PHP &amp; MySQL</a>
<a class="button" title="Adobe Photoshop" href="https://www.brainbell.com/tutorials/Photoshop/">Photoshop</a>
<a class="button" title="Regex" href="https://www.brainbell.com/regex/">Regular Expressions</a>
<a class="button" title="TypeScript" href="https://www.brainbell.com/typescript/">TypeScript</a>
<a class="button" title="Visual Basic" href="https://www.brainbell.com/tutors/Visual_Basic/">Visual Basic</a>
<a class="button" title="XML" href="https://www.brainbell.com/tutorials/XML/">XML</a>
</div>
<!--menu end-->
		</nav>
	</div>
</header>


<main role="main">
<article class="hentry">

<header id="heading">
<a class="button" href="https://www.brainbell.com/tutors/Perl/" rel="category tag">CGI and Perl</a><h1>Listing 11.1. hypercal.cgi</h1>
<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- link ad -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1287605604486981"
     data-ad-slot="1609644746"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</header>

<div id="wrapper"> 
	<div class="line">
	<div class="leftcol fltleft">
		<div class="gsa">
<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive top -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1287605604486981"
     data-ad-slot="1025731947"
     data-ad-format="rectangle"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
	</div>		<div class="entry-content">
<pre>
#!/usr/bin/perl
 #  HyperCal   by   Richard Bowen
 #  A HTML datebook.
 #
 #  This part draws the calendar and links it to the other scripts.
 #  Can be called as http://URL/hypercal, or with arguments
 #  as http://URL/hypercal?month&amp;year
 require `httools.pl';
 require `variables';
 $args=$ENV{`QUERY_STRING'};
 ($sub=$ENV{`PATH_INFO'})=~ s#^/##;
 if ($sub=~/personal/) { &amp;personal };
 if ($sub eq "goto") { &amp;goto }
 else { &amp;main };
 sub main    {
   &amp;header;
   ($this_month,$this_year)=split(/&amp;/,$args);
   if ($args eq "") {    #  Defaults to current date if none specified.
     &amp;date;   #  Calls the todays date subroutine from httools.pl
     $this_month=$month;
     $this_year=$year;}
 ($junksec,$junkmin,$junkhour,$today_day,$today_month,$today_year,$junkwday,
 $junkyday,$junkisdst)=localtime(time);$today_year+=1900;$today_month+=1;
 &amp;month_txt("$this_month");
 print "&lt;html&gt;&lt;head&gt;&lt;title&gt;$title - $month_txt, $this_year&lt;/title&gt;&lt;/head&gt;\n";
 print "&lt;body";
 $month_image=@month_images[$this_month-1];
 ($icon,$bg,$color,$text,$link,$vlink)=split(/~~/,$month_image);
 print " background=\"$bg\"" unless ($bg eq "none");
 print " bgcolor=\"$color\"" unless ($color eq "none");
 print " text=\"$text\"" unless ($text eq "none");
 print " link=\"$link\"" unless ($link eq "none");
 print " vlink=\"$vlink\"" unless ($vlink eq "none");
 print "&gt;\n";
 open (DATES, $datebook);
 @datebook=&lt;DATES&gt;;
 @months=("December", "January", "February", "March", "April", "May", "June",
  "July", "August", "September", "October", "November", "December");
 @last_days=(31,31,28,31,30,31,30,31,31,30,31,30,31);
 @days_of_week=("Sun","Mon","Tue","Wed","Thu","Fri","Sat");
 @month_offset=(3,3,0,3,2,3,2,3,3,2,3,2,3);
 print "&lt;center&gt;";
 print "&lt;table border=6 cellpadding=5 width=100%&gt;\n";
 print "&lt;tr&gt;&lt;td align=center colspan=7&gt;&lt;center&gt;&lt;h2&gt;@months[$this_month],
  $this_year&lt;/h2&gt;";
 if ($multi_user eq "yes" &amp;&amp; $personal_on eq "no") {
 print "&lt;form method=post action=\"$base_url$hypercal/personal\"&gt;";
 print "&lt;input type=submit value=\"Go To Personal Calendar\"&gt;";}
 elsif ($personal_on eq "yes")    {
 ($link=$hypercal)=~s/\/personal//g;
 print "&lt;form method=post action=\"$base_url$link\"&gt;";
 print "&lt;input type=submit value=\"Go To Public Calendar\"&gt;";}
 print "&lt;img src=\"$icon\" alt=\"\" align=middle hspace=30&gt;" unless
  ($icon eq "none");
 print "&lt;/form&gt;";
 print "&lt;/center&gt;";
 $week_days=join(" &lt;th&gt; ",@days_of_week);
 print "&lt;tr&gt;&lt;th&gt;$week_days&lt;br&gt;\n";
 for ($i=1906; $i&lt;$this_year; $i++)    {
     $days_offset++;
     if (($i)%4==0)
         {$days_offset++}; # Leap years
     } # end for
 if (($this_year%4)==0 &amp;&amp; ($this_month&gt;2))
     {$days_offset++}; #  Current year is leap year
 for ($j=1; $j&lt;($this_month);$j++)    {
     $days_offset+=@month_offset[$j]};
 $first_day_of_month=($days_offset%7);
 $last_day_in_month=@last_days[$this_month];
 if (($this_month==2)&amp;&amp;($this_year%4==0)){$last_day_in_month=29};
 $date_place=0;
 while ($date_place&lt;$last_day_in_month)    {
 print "&lt;tr&gt;";
 for ($j=0; $j&lt;=6; $j++)    {
     if (($first_day_of_month&gt;=0)||($date_place&gt;=$last_day_in_month))
     {print "&lt;td align=center&gt;-";
     $first_day_of_month--}
     else    {
     $date_place++;
     print "&lt;td align=center&gt;
            &lt;a href=\"$base_url$disp_day?$this_month
 &amp;$date_place&amp;$this_year\"&gt; $date_place &lt;/a&gt;";
 &amp;appoints($this_month,$date_place,$this_year);
 if ($today_day==$date_place &amp;&amp; $today_month==$this_month &amp;&amp;
 $today_year==$this_year){print"&lt;br&gt;&lt;b&gt;&lt;font color=red&gt;TODAY&lt;/font&gt;&lt;/b&gt;"};
 } # end else
 }    #end for
 print "&lt;br&gt;\n";
 }    #  end while
 open (ANNO, "$announce");
 @announce=&lt;ANNO&gt;;
 $search=$this_month."_".$this_year;
 $any_announce="no";
 for $announces (@announce)    {
 ($mo,$msg,$aid)=split(/&amp;&amp;/,$announces);
 if ($mo eq $search){
 if ($any_announce eq "no"){print "&lt;br&gt;&lt;tr&gt;&lt;td align=center colspan=7&gt;";}
 print "&lt;center&gt;&lt;b&gt;$msg&lt;/b&gt;&lt;/center&gt;&lt;br&gt;";
 $any_announce="yes";}
         }
 print "&lt;/table&gt;&lt;/center&gt;&lt;br&gt;\n";
 print "&lt;center&gt;Select a day to see the appointments for that day.
        Numbers in parentheses indicate how many appointments
        are on that day.&lt;/center&gt;";
 print "&lt;hr&gt;\n";
 print "&lt;center&gt;Go to:&lt;/center&gt;&lt;br&gt;\n";
 print "&lt;center&gt;";
 # print "&lt;table border=0 cellpadding=5 width=100%&gt;";
 $last_year=$this_year;
 $last_month=($this_month-1);
 if ($last_month == 0) {$last_month=12; $last_year=($this_year-1);}
 print "[ &lt;a href=\"$base_url$hypercal?$last_month&amp;$last_year\"&gt;
        Previous month  &lt;/a&gt;|\n";
 $next_year=$this_year;
 $next_month=($this_month+1);
 if ($next_month == 13) {$next_month=1; $next_year=($this_year+1);}
 print "&lt;a href=\"$base_url$hypercal?$next_month&amp;$next_year\"&gt;
        Next month  &lt;/a&gt;|";
 print "&lt;a href=\"$base_url$hypercal\"&gt;  Current month  &lt;/a&gt;]
        &lt;/center&gt;&lt;br&gt;\n";
 print "&lt;center&gt;&lt;form method=get action=$base_url$hypercal/goto&gt;";
 print "&lt;input type=submit value=\"Jump\"&gt; to &lt;input name=\"month\"
        size=2&gt; \/ &lt;input name=\"year\" size=4 value=\"$this_year\"&gt;";
 print "&lt;input type=hidden name=\"this_year\" value=\"$this_year\"&gt;";
 print "&lt;/form&gt;&lt;/center&gt;&lt;hr&gt;";
 print "&lt;center&gt;";
 # print "&lt;table width=100%&gt;&lt;tr&gt;&lt;td&gt;";
 print "[ &lt;a href=\"$base_url$edit_announce?$this_month&amp;$this_year\"&gt;
        Add an announcement&lt;/a&gt; for this month. ";
 print "| &lt;a href=\"$base_url$edit_announce?$this_month&amp;$this_year&amp;delete\"&gt;
     Delete an announcement&lt;/a&gt; from this month." unless ($any_announce eq "no");
 print " ]";
 print "&lt;/center&gt;";
 print "&lt;center&gt;";
 print "&lt;hr&gt;[ &lt;a href=\"http://www.rcbowen.com/perl/HyperCal.html\"&gt;
        About HyperCal&lt;/a&gt;.";
 foreach $item (@linkto)    {
 ($url, $page_title)=split(/~~/,$item);
 print " | &lt;a href=\"$url\"&gt;$page_title&lt;/a&gt;";
             }
 if ($multi_user eq "yes")    {
 print " | &lt;a href=\"$base_url$change_passwd\"&gt;Change your user password&lt;/a&gt;"}
 print " ]&lt;/center&gt;&lt;br&gt;\n";
 print "HyperCal, Version $version, Copyright &amp;copy; 1996, Richard Bowen.
 All rights reserved.&lt;br&gt;\n";
 &amp;footer;
     }    #  End of sub main
 sub appoints   {
 $found=0;
 &amp;julean($_[0],$_[1],$_[2]);  #  Julean date of day
 for $entry (@datebook)    {
 @temporary=split(/~~~/,$entry);
 if (@temporary[0]==$jule)  {$found++}};
 if ($found != 0) {print "   ($found)"};    }
 sub goto    {
 ($pair1, $pair2, $pair3)=split(/&amp;/,$args);
 ($junk, $month)=split(/=/, $pair1);
 ($junk, $year)=split(/=/, $pair2);
 ($junk, $this_year)=split(/=/, $pair3);
 #  Need some error checking ...
 if ($month eq ""){$month=1};
 if ($year eq""){$year=$this_year};
 if ($month&gt;12) {$month=12};
 if ($month&lt;1) {$month=1};
 if ($year&lt;1) {$year=1};
 if ($year&gt;9999) {$year=9999};
 $args="$month&amp;$year";
 &amp;main
     }
 sub personal    {
 $sub=~s/personal\///;
 $user_id=$ENV{`REMOTE_USER'};
 $user_variables=~s/USERNAME/$user_id/;
 require "$user_variables";
 }
</pre>
  <p>Let's take a look at how HyperCal works. HyperCal uses a library called <code>httools.pm</code>, which takes care of things like printing headers and parsing forms. CGI.pm could be used instead of httools.pm with a few simple modifications to HyperCal's code. The httools.pm module supports the following functions in HyperCal:<br />
  <br /></p>
  <table border="0" cellpadding="0" cellspacing="0">
    <tr align="left">
      <td width="96" align="left" valign="top"><b>Function</b></td>
      <td align="left" valign="top"><b>Usage and Description</b></td>
    </tr>
    <tr align="left">
      <td width="96" align="left" valign="top"><code>header</code></td>
      <td align="left" valign="top">Prints MIME content type header.</td>
    </tr>
    <tr align="left">
      <td width="96" align="left" valign="top"><code>title</code></td>
      <td align="left" valign="top">Prints title for HTML page: <code>&amp;title(`Desired title')</code></td>
    </tr>
    <tr align="left">
      <td width="96" align="left" valign="top"><code>form_parse</code></td>
      <td align="left" valign="top">Parses form, places variables in <code>$FORM{`variable_name'}</code>.</td>
    </tr>
    <tr align="left">
      <td width="96" align="left" valign="top"><code>footer</code></td>
      <td align="left" valign="top">Prints generic footer.</td>
    </tr>
    <tr align="left">
      <td width="96" align="left" valign="top"><code>date</code></td>
      <td align="left" valign="top">Returns today's date in nicer format.</td>
    </tr>
    <tr align="left">
      <td width="96" align="left" valign="top"><code>julean</code></td>
      <td align="left" valign="top">Returns Julian date with Jan 1, 1995, as day 1.</td>
    </tr>
    <tr align="left">
      <td width="96" align="left" valign="top">todayjulean</td>
      <td align="left" valign="top">Returns today's Julian date, calls julean.</td>
    </tr>
  </table>
  <p>HyperCal stores the URI encoded path info in the QUERY_STRING to a variable named <code>$args</code>. Path info (variables encoded in the URI) is next filtered into the variable <code>$sub</code>. The variable <code>$sub</code> is then evaluated to determine what output the program should generate.</p>
  <p>The hypercal.cgi program will do different things based on what variables are present (or not present) in the QUERY_STRING (data appended to the URI) when it is run. The principle behind this concept is simple. The HTML output (calendar) generated by running the program contains HTML links back to the program. In other words, the HTML calendar contains links and forms whose URIs reference back to the hypercal.cgi script again. However, the links also contain variables appended to the URI. When a user clicks on the URI with the appended variables, the program is run again. This time it parses the variables in the URI and can react differently based on those self-supplied variables. This is precisely what is happening in lines 15-17. If no variables are found in the URI, the <code>else</code> statement instructs the program to execute the <code>&amp;main</code> subroutine that prints the HTML for the calendar.</p>
  <p>If variables are supplied to HyperCal in its URI, one of two subroutines is called first. The <code>&amp;personal</code> subroutine determines if a personal calendar is being used and alters a few variables accordingly. I'll discuss using personal calendars in more depth in a moment. The other subroutine that may be called is <code>&amp;goto</code>. The <code>&amp;goto</code> subroutine directs HyperCal to display a specific month. The month and year must be supplied in the URI, in the following format: <code>http://URI/hypercal.cgi/goto?month=9&amp;year=1999&amp;this_year=1996</code></p>
  <p>The <code>&amp;goto</code> subroutine reads the three name/value pairs, trashes the names, and stores the values to <code>$month</code>, <code>$year</code>, and <code>$this_year</code>. The month and year are then stored in <code>$args</code>, and the main subroutine is called to display the requested month. Note that if <code>$args</code> does not contain a prespecified month, the current month is used.</p>
  <p>Using multiple users requires a few extra steps. In the configuration file (discussed next), the <code>$multi_user</code> variable must be set to <code>yes</code>. Note that in the <code>&amp;main</code> subroutine in hypercal.cgi, if this variable is set to <code>yes</code>, a button <code>Go To Personal Calendar</code> is displayed.</p><p>Personal calendars are protected by restricting access to the user directory in which HyperCal keeps the user data using the <code>.htgroup</code> and <code>.htpasswd</code> file. The usage of <code>.htpasswd</code> is discussed more thoroughly in Chapter 3. The cal_admin.cgi program is used to add users and passwords to the <code>.htpasswd</code> file, essentially adding users to the calendar. To set up HyperCal in multi-user mode, variables in the config file need to be set.<br /></p><div class="hidden">by <span class="author vcard"><span class="fn">BrainBell</span></span>updated <time class="entry-date updated" datetime="2016-08-01T20:00:00+00:00">Aug 01, 2016</time></div>
		</div>

	</div>

<div class="rightcol fltright"><style type="text/css">
.adslot_1 { display:inline-block; width: 100%; }
@media (max-width: 768px) { .adslot_1,.sideadh { display: none; } }
</style>
<div class="gsa">
<div class="sideadh">Advertisement:</div>
<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive banner right -->
<ins class="adsbygoogle adslot_1"
     data-ad-client="ca-pub-1287605604486981"
     data-ad-slot="2682751945"
     data-ad-format="vertical"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>	</div>
</div>
</article>

<div class="line"><div class="leftcol fltleft">

<div class="gsa">
Advertisement:
<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive footer -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1287605604486981"
     data-ad-slot="8559331946"
     data-ad-format="rectangle"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

</div><nav><div class="line"><a rel="next" class="button fltright" href="https://www.brainbell.com/tutors/Perl/Listing_11_2_Variables_and_configuration_file_for_HyperCal.htm">Next <span class="next">&gt;</span></a><a rel="prev" class="button  fltleft" href="https://www.brainbell.com/tutors/Perl/HyperCalA_Modular_Perl5_Calendar_and_Datebook.htm"><span class="prev">&lt;</span> Prev</a></div></nav>
</div><div class="rightcol fltright"></div></div>

	</main>

<footer>
	<section >
		<div class="line">
			<div class="leftcol fltleft">
				<p>Copyright &copy; 2021 BrainBell.com</p>
				<p>Contact us: info&#64;brainbell.com</p>
			</div>
			<div class="rightcol fltright">
				<a href="https://www.brainbell.com/privacy/">Privacy policy</a> &nbsp; : &nbsp;
				<a href="https://www.brainbell.com/terms/">Terms of use</a>
			</div>
		</div>
	</section>
</footer>
<script>
(function(){
var m = document.querySelector('#menu'),n = document.querySelector('#buttons'),o = false;

m.addEventListener('click', function(e){
var d;
o = !o;
if (o) {
m.innerHTML = 'X';
n.style.display = 'block';
n.style.display = 'flex';
m.style.padding = '.375rem .98rem';
}
else{
m.innerHTML = '&#9776;';
n.style.display = 'none';
m.style.padding = '.375rem .75rem';
}});
}());
(function(){
var stop = true, p = document.querySelectorAll('pre');
for (var i in p){p[i].className += ' prettyprint';stop = false;}
if (stop) return;
var script = document.createElement('script');
script.src = 'https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js';
document.head.appendChild(script);}());
</script>
	   <script type='text/javascript' style='display:none;' async>
__ez.queue.addFile('https://www.brainbell.com/tutors/Perl/edmonton.php', '/detroitchicago/edmonton.webp?a=a&cb=11&shcb=34', true, ['/detroitchicago/minneapolis.js'], true, false, false, false);
__ez.queue.addFile('https://www.brainbell.com/tutors/Perl/jellyfish.php', '/porpoiseant/jellyfish.webp?a=a&cb=11&shcb=34', false, [], true, false, false, false);
</script>

<script>var _audins_dom="brainbell_com",_audins_did=83552;__ez.queue.addDelayFunc("https://www.brainbell.com/tutors/Perl/audins.js","__ez.script.add", "http://go.ezoic.net/detroitchicago/audins.js?cb=192-11");</script><noscript><div style="display:none;"><img src="http://pixel.quantserve.com/pixel/p-31iz6hfFutd16.gif?labels=Domain.brainbell_com,DomainId.83552" border="0" height="1" width="1" alt="Quantcast"/></div></noscript>
<script type="text/javascript" data-cfasync="false"></script></body>

<!-- Mirrored from www.brainbell.com/tutors/Perl/Listing_11_1_hypercal_cgi.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 Feb 2021 02:58:00 GMT -->
</html>

